{"version":3,"file":"static/js/484aa7542da86.chunk.js","mappings":"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","sources":["webpack://hexo-pro-client/./node_modules/@ant-design/icons-svg/es/asn/InboxOutlined.js","webpack://hexo-pro-client/./node_modules/@ant-design/icons/es/icons/InboxOutlined.js","webpack://hexo-pro-client/./node_modules/@ant-design/icons-svg/es/asn/SaveOutlined.js","webpack://hexo-pro-client/./node_modules/@ant-design/icons/es/icons/SaveOutlined.js","webpack://hexo-pro-client/./node_modules/vditor/dist/index.js"],"sourcesContent":["// This icon file is generated automatically.\nvar InboxOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"0 0 1024 1024\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z\" } }] }, \"name\": \"inbox\", \"theme\": \"outlined\" };\nexport default InboxOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport InboxOutlinedSvg from \"@ant-design/icons-svg/es/asn/InboxOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar InboxOutlined = function InboxOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: InboxOutlinedSvg\n  }));\n};\n\n/**![inbox](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTg4NS4yIDQ0Ni4zbC0uMi0uOC0xMTIuMi0yODUuMWMtNS0xNi4xLTE5LjktMjcuMi0zNi44LTI3LjJIMjgxLjJjLTE3IDAtMzIuMSAxMS4zLTM2LjkgMjcuNkwxMzkuNCA0NDNsLS4zLjctLjIuOGMtMS4zIDQuOS0xLjcgOS45LTEgMTQuOC0uMSAxLjYtLjIgMy4yLS4yIDQuOFY4MzBhNjAuOSA2MC45IDAgMDA2MC44IDYwLjhoNjI3LjJjMzMuNSAwIDYwLjgtMjcuMyA2MC45LTYwLjhWNDY0LjFjMC0xLjMgMC0yLjYtLjEtMy43LjQtNC45IDAtOS42LTEuMy0xNC4xem0tMjk1LjgtNDNsLS4zIDE1LjdjLS44IDQ0LjktMzEuOCA3NS4xLTc3LjEgNzUuMS0yMi4xIDAtNDEuMS03LjEtNTQuOC0yMC42UzQzNiA0NDEuMiA0MzUuNiA0MTlsLS4zLTE1LjdIMjI5LjVMMzA5IDIxMGgzOTkuMmw4MS43IDE5My4zSDU4OS40em0tMzc1IDc2LjhoMTU3LjNjMjQuMyA1Ny4xIDc2IDkwLjggMTQwLjQgOTAuOCAzMy43IDAgNjUtOS40IDkwLjMtMjcuMiAyMi4yLTE1LjYgMzkuNS0zNy40IDUwLjctNjMuNmgxNTYuNVY4MTRIMjE0LjRWNDgwLjF6IiAvPjwvc3ZnPg==) */\nvar RefIcon = /*#__PURE__*/React.forwardRef(InboxOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'InboxOutlined';\n}\nexport default RefIcon;","// This icon file is generated automatically.\nvar SaveOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z\" } }] }, \"name\": \"save\", \"theme\": \"outlined\" };\nexport default SaveOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport SaveOutlinedSvg from \"@ant-design/icons-svg/es/asn/SaveOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar SaveOutlined = function SaveOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: SaveOutlinedSvg\n  }));\n};\n\n/**![save](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTg5My4zIDI5My4zTDczMC43IDEzMC43Yy03LjUtNy41LTE2LjctMTMtMjYuNy0xNlYxMTJIMTQ0Yy0xNy43IDAtMzIgMTQuMy0zMiAzMnY3MzZjMCAxNy43IDE0LjMgMzIgMzIgMzJoNzM2YzE3LjcgMCAzMi0xNC4zIDMyLTMyVjMzOC41YzAtMTctNi43LTMzLjItMTguNy00NS4yek0zODQgMTg0aDI1NnYxMDRIMzg0VjE4NHptNDU2IDY1NkgxODRWMTg0aDEzNnYxMzZjMCAxNy43IDE0LjMgMzIgMzIgMzJoMzIwYzE3LjcgMCAzMi0xNC4zIDMyLTMyVjIwNS44bDEzNiAxMzZWODQwek01MTIgNDQyYy03OS41IDAtMTQ0IDY0LjUtMTQ0IDE0NHM2NC41IDE0NCAxNDQgMTQ0IDE0NC02NC41IDE0NC0xNDQtNjQuNS0xNDQtMTQ0LTE0NHptMCAyMjRjLTQ0LjIgMC04MC0zNS44LTgwLTgwczM1LjgtODAgODAtODAgODAgMzUuOCA4MCA4MC0zNS44IDgwLTgwIDgweiIgLz48L3N2Zz4=) */\nvar RefIcon = /*#__PURE__*/React.forwardRef(SaveOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'SaveOutlined';\n}\nexport default RefIcon;","/*!\n * Vditor v3.11.1 - A markdown editor written in TypeScript.\n *\n * MIT License\n *\n * Copyright (c) 2018-present B3log 开源, b3log.org\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Vditor\"] = factory();\n\telse\n\t\troot[\"Vditor\"] = factory();\n})(this, function() {\nreturn /******/ (() => { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 173:\n/***/ ((module) => {\n\n/**\n * Diff Match and Patch\n * Copyright 2018 The diff-match-patch Authors.\n * https://github.com/google/diff-match-patch\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Computes the difference between two texts to create a patch.\n * Applies the patch onto another text, allowing for errors.\n * @author fraser@google.com (Neil Fraser)\n */\n\n/**\n * Class containing the diff, match and patch methods.\n * @constructor\n */\nvar diff_match_patch = function () {\n  // Defaults.\n  // Redefine these in your program to override the defaults.\n\n  // Number of seconds to map a diff before giving up (0 for infinity).\n  this.Diff_Timeout = 1.0;\n  // Cost of an empty edit operation in terms of edit characters.\n  this.Diff_EditCost = 4;\n  // At what point is no match declared (0.0 = perfection, 1.0 = very loose).\n  this.Match_Threshold = 0.5;\n  // How far to search for a match (0 = exact location, 1000+ = broad match).\n  // A match this many characters away from the expected location will add\n  // 1.0 to the score (0.0 is a perfect match).\n  this.Match_Distance = 1000;\n  // When deleting a large block of text (over ~64 characters), how close do\n  // the contents have to be to match the expected contents. (0.0 = perfection,\n  // 1.0 = very loose).  Note that Match_Threshold controls how closely the\n  // end points of a delete need to match.\n  this.Patch_DeleteThreshold = 0.5;\n  // Chunk size for context length.\n  this.Patch_Margin = 4;\n\n  // The number of bits in an int.\n  this.Match_MaxBits = 32;\n};\n\n//  DIFF FUNCTIONS\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n/**\n * Class representing one diff tuple.\n * ~Attempts to look like a two-element array (which is what this used to be).~\n * Constructor returns an actual two-element array, to allow destructing @JackuB\n * See https://github.com/JackuB/diff-match-patch/issues/14 for details\n * @param {number} op Operation, one of: DIFF_DELETE, DIFF_INSERT, DIFF_EQUAL.\n * @param {string} text Text to be deleted, inserted, or retained.\n * @constructor\n */\ndiff_match_patch.Diff = function (op, text) {\n  return [op, text];\n};\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {boolean=} opt_checklines Optional speedup flag. If present and false,\n *     then don't run a line-level diff first to identify the changed areas.\n *     Defaults to true, which does a faster, slightly less optimal diff.\n * @param {number=} opt_deadline Optional time when the diff should be complete\n *     by.  Used internally for recursive calls.  Users should set DiffTimeout\n *     instead.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_main = function (text1, text2, opt_checklines, opt_deadline) {\n  // Set a deadline by which time the diff must be complete.\n  if (typeof opt_deadline == 'undefined') {\n    if (this.Diff_Timeout <= 0) {\n      opt_deadline = Number.MAX_VALUE;\n    } else {\n      opt_deadline = new Date().getTime() + this.Diff_Timeout * 1000;\n    }\n  }\n  var deadline = opt_deadline;\n\n  // Check for null inputs.\n  if (text1 == null || text2 == null) {\n    throw new Error('Null input. (diff_main)');\n  }\n\n  // Check for equality (speedup).\n  if (text1 == text2) {\n    if (text1) {\n      return [new diff_match_patch.Diff(DIFF_EQUAL, text1)];\n    }\n    return [];\n  }\n  if (typeof opt_checklines == 'undefined') {\n    opt_checklines = true;\n  }\n  var checklines = opt_checklines;\n\n  // Trim off common prefix (speedup).\n  var commonlength = this.diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = this.diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = this.diff_compute_(text1, text2, checklines, deadline);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, commonprefix));\n  }\n  if (commonsuffix) {\n    diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, commonsuffix));\n  }\n  this.diff_cleanupMerge(diffs);\n  return diffs;\n};\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {boolean} checklines Speedup flag.  If false, then don't run a\n *     line-level diff first to identify the changed areas.\n *     If true, then run a faster, slightly less optimal diff.\n * @param {number} deadline Time when the diff should be complete by.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\ndiff_match_patch.prototype.diff_compute_ = function (text1, text2, checklines, deadline) {\n  var diffs;\n  if (!text1) {\n    // Just add some text (speedup).\n    return [new diff_match_patch.Diff(DIFF_INSERT, text2)];\n  }\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [new diff_match_patch.Diff(DIFF_DELETE, text1)];\n  }\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i != -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [new diff_match_patch.Diff(DIFF_INSERT, longtext.substring(0, i)), new diff_match_patch.Diff(DIFF_EQUAL, shorttext), new diff_match_patch.Diff(DIFF_INSERT, longtext.substring(i + shorttext.length))];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n  if (shorttext.length == 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [new diff_match_patch.Diff(DIFF_DELETE, text1), new diff_match_patch.Diff(DIFF_INSERT, text2)];\n  }\n\n  // Check to see if the problem can be split in two.\n  var hm = this.diff_halfMatch_(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = this.diff_main(text1_a, text2_a, checklines, deadline);\n    var diffs_b = this.diff_main(text1_b, text2_b, checklines, deadline);\n    // Merge the results.\n    return diffs_a.concat([new diff_match_patch.Diff(DIFF_EQUAL, mid_common)], diffs_b);\n  }\n  if (checklines && text1.length > 100 && text2.length > 100) {\n    return this.diff_lineMode_(text1, text2, deadline);\n  }\n  return this.diff_bisect_(text1, text2, deadline);\n};\n\n/**\n * Do a quick line-level diff on both strings, then rediff the parts for\n * greater accuracy.\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} deadline Time when the diff should be complete by.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\ndiff_match_patch.prototype.diff_lineMode_ = function (text1, text2, deadline) {\n  // Scan the text on a line-by-line basis first.\n  var a = this.diff_linesToChars_(text1, text2);\n  text1 = a.chars1;\n  text2 = a.chars2;\n  var linearray = a.lineArray;\n  var diffs = this.diff_main(text1, text2, false, deadline);\n\n  // Convert the diff back to original text.\n  this.diff_charsToLines_(diffs, linearray);\n  // Eliminate freak matches (e.g. blank lines)\n  this.diff_cleanupSemantic(diffs);\n\n  // Rediff any replacement blocks, this time character-by-character.\n  // Add a dummy entry at the end.\n  diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, ''));\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        break;\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete >= 1 && count_insert >= 1) {\n          // Delete the offending records and add the merged ones.\n          diffs.splice(pointer - count_delete - count_insert, count_delete + count_insert);\n          pointer = pointer - count_delete - count_insert;\n          var subDiff = this.diff_main(text_delete, text_insert, false, deadline);\n          for (var j = subDiff.length - 1; j >= 0; j--) {\n            diffs.splice(pointer, 0, subDiff[j]);\n          }\n          pointer = pointer + subDiff.length;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n    pointer++;\n  }\n  diffs.pop(); // Remove the dummy entry at the end.\n\n  return diffs;\n};\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} deadline Time at which to bail if not yet complete.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\ndiff_match_patch.prototype.diff_bisect_ = function (text1, text2, deadline) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length);\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = delta % 2 != 0;\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n  for (var d = 0; d < max_d; d++) {\n    // Bail out if deadline is reached.\n    if (new Date().getTime() > deadline) {\n      break;\n    }\n\n    // Walk the front path one step.\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n      if (k1 == -d || k1 != d && v1[k1_offset - 1] < v1[k1_offset + 1]) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n      var y1 = x1 - k1;\n      while (x1 < text1_length && y1 < text2_length && text1.charAt(x1) == text2.charAt(y1)) {\n        x1++;\n        y1++;\n      }\n      v1[k1_offset] = x1;\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] != -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n          if (x1 >= x2) {\n            // Overlap detected.\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n      if (k2 == -d || k2 != d && v2[k2_offset - 1] < v2[k2_offset + 1]) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n      var y2 = x2 - k2;\n      while (x2 < text1_length && y2 < text2_length && text1.charAt(text1_length - x2 - 1) == text2.charAt(text2_length - y2 - 1)) {\n        x2++;\n        y2++;\n      }\n      v2[k2_offset] = x2;\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] != -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset;\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1_length - x2;\n          if (x1 >= x2) {\n            // Overlap detected.\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [new diff_match_patch.Diff(DIFF_DELETE, text1), new diff_match_patch.Diff(DIFF_INSERT, text2)];\n};\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @param {number} deadline Time at which to bail if not yet complete.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\ndiff_match_patch.prototype.diff_bisectSplit_ = function (text1, text2, x, y, deadline) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y);\n\n  // Compute both diffs serially.\n  var diffs = this.diff_main(text1a, text2a, false, deadline);\n  var diffsb = this.diff_main(text1b, text2b, false, deadline);\n  return diffs.concat(diffsb);\n};\n\n/**\n * Split two texts into an array of strings.  Reduce the texts to a string of\n * hashes where each Unicode character represents one line.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {{chars1: string, chars2: string, lineArray: !Array.<string>}}\n *     An object containing the encoded text1, the encoded text2 and\n *     the array of unique strings.\n *     The zeroth element of the array of unique strings is intentionally blank.\n * @private\n */\ndiff_match_patch.prototype.diff_linesToChars_ = function (text1, text2) {\n  var lineArray = []; // e.g. lineArray[4] == 'Hello\\n'\n  var lineHash = {}; // e.g. lineHash['Hello\\n'] == 4\n\n  // '\\x00' is a valid character, but various debuggers don't like it.\n  // So we'll insert a junk entry to avoid generating a null character.\n  lineArray[0] = '';\n\n  /**\n   * Split a text into an array of strings.  Reduce the texts to a string of\n   * hashes where each Unicode character represents one line.\n   * Modifies linearray and linehash through being a closure.\n   * @param {string} text String to encode.\n   * @return {string} Encoded string.\n   * @private\n   */\n  function diff_linesToCharsMunge_(text) {\n    var chars = '';\n    // Walk the text, pulling out a substring for each line.\n    // text.split('\\n') would would temporarily double our memory footprint.\n    // Modifying text would create many large strings to garbage collect.\n    var lineStart = 0;\n    var lineEnd = -1;\n    // Keeping our own length variable is faster than looking it up.\n    var lineArrayLength = lineArray.length;\n    while (lineEnd < text.length - 1) {\n      lineEnd = text.indexOf('\\n', lineStart);\n      if (lineEnd == -1) {\n        lineEnd = text.length - 1;\n      }\n      var line = text.substring(lineStart, lineEnd + 1);\n      if (lineHash.hasOwnProperty ? lineHash.hasOwnProperty(line) : lineHash[line] !== undefined) {\n        chars += String.fromCharCode(lineHash[line]);\n      } else {\n        if (lineArrayLength == maxLines) {\n          // Bail out at 65535 because\n          // String.fromCharCode(65536) == String.fromCharCode(0)\n          line = text.substring(lineStart);\n          lineEnd = text.length;\n        }\n        chars += String.fromCharCode(lineArrayLength);\n        lineHash[line] = lineArrayLength;\n        lineArray[lineArrayLength++] = line;\n      }\n      lineStart = lineEnd + 1;\n    }\n    return chars;\n  }\n  // Allocate 2/3rds of the space for text1, the rest for text2.\n  var maxLines = 40000;\n  var chars1 = diff_linesToCharsMunge_(text1);\n  maxLines = 65535;\n  var chars2 = diff_linesToCharsMunge_(text2);\n  return {\n    chars1: chars1,\n    chars2: chars2,\n    lineArray: lineArray\n  };\n};\n\n/**\n * Rehydrate the text in a diff from a string of line hashes to real lines of\n * text.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @param {!Array.<string>} lineArray Array of unique strings.\n * @private\n */\ndiff_match_patch.prototype.diff_charsToLines_ = function (diffs, lineArray) {\n  for (var i = 0; i < diffs.length; i++) {\n    var chars = diffs[i][1];\n    var text = [];\n    for (var j = 0; j < chars.length; j++) {\n      text[j] = lineArray[chars.charCodeAt(j)];\n    }\n    diffs[i][1] = text.join('');\n  }\n};\n\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\ndiff_match_patch.prototype.diff_commonPrefix = function (text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) != text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: https://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(pointerstart, pointermid) == text2.substring(pointerstart, pointermid)) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\ndiff_match_patch.prototype.diff_commonSuffix = function (text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(text1.length - 1) != text2.charAt(text2.length - 1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: https://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(text1.length - pointermid, text1.length - pointerend) == text2.substring(text2.length - pointermid, text2.length - pointerend)) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n/**\n * Determine if the suffix of one string is the prefix of another.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of the first\n *     string and the start of the second string.\n * @private\n */\ndiff_match_patch.prototype.diff_commonOverlap_ = function (text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  // Eliminate the null case.\n  if (text1_length == 0 || text2_length == 0) {\n    return 0;\n  }\n  // Truncate the longer string.\n  if (text1_length > text2_length) {\n    text1 = text1.substring(text1_length - text2_length);\n  } else if (text1_length < text2_length) {\n    text2 = text2.substring(0, text1_length);\n  }\n  var text_length = Math.min(text1_length, text2_length);\n  // Quick check for the worst case.\n  if (text1 == text2) {\n    return text_length;\n  }\n\n  // Start by looking for a single character match\n  // and increase length until no match is found.\n  // Performance analysis: https://neil.fraser.name/news/2010/11/04/\n  var best = 0;\n  var length = 1;\n  while (true) {\n    var pattern = text1.substring(text_length - length);\n    var found = text2.indexOf(pattern);\n    if (found == -1) {\n      return best;\n    }\n    length += found;\n    if (found == 0 || text1.substring(text_length - length) == text2.substring(0, length)) {\n      best = length;\n      length++;\n    }\n  }\n};\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n * @private\n */\ndiff_match_patch.prototype.diff_halfMatch_ = function (text1, text2) {\n  if (this.Diff_Timeout <= 0) {\n    // Don't risk returning a non-optimal diff if we have unlimited time.\n    return null;\n  }\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null; // Pointless.\n  }\n  var dmp = this; // 'this' becomes 'window' in a closure.\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = '';\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) != -1) {\n      var prefixLength = dmp.diff_commonPrefix(longtext.substring(i), shorttext.substring(j));\n      var suffixLength = dmp.diff_commonSuffix(longtext.substring(0, i), shorttext.substring(0, j));\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common = shorttext.substring(j - suffixLength, j) + shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length * 2 >= longtext.length) {\n      return [best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b, best_common];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI_(longtext, shorttext, Math.ceil(longtext.length / 4));\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI_(longtext, shorttext, Math.ceil(longtext.length / 2));\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n};\n\n/**\n * Reduce the number of edits by eliminating semantically trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_cleanupSemantic = function (diffs) {\n  var changes = false;\n  var equalities = []; // Stack of indices where equalities are found.\n  var equalitiesLength = 0; // Keeping our own length var is faster in JS.\n  /** @type {?string} */\n  var lastEquality = null;\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n  var pointer = 0; // Index of current position.\n  // Number of characters that changed prior to the equality.\n  var length_insertions1 = 0;\n  var length_deletions1 = 0;\n  // Number of characters that changed after the equality.\n  var length_insertions2 = 0;\n  var length_deletions2 = 0;\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {\n      // Equality found.\n      equalities[equalitiesLength++] = pointer;\n      length_insertions1 = length_insertions2;\n      length_deletions1 = length_deletions2;\n      length_insertions2 = 0;\n      length_deletions2 = 0;\n      lastEquality = diffs[pointer][1];\n    } else {\n      // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_INSERT) {\n        length_insertions2 += diffs[pointer][1].length;\n      } else {\n        length_deletions2 += diffs[pointer][1].length;\n      }\n      // Eliminate an equality that is smaller or equal to the edits on both\n      // sides of it.\n      if (lastEquality && lastEquality.length <= Math.max(length_insertions1, length_deletions1) && lastEquality.length <= Math.max(length_insertions2, length_deletions2)) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, new diff_match_patch.Diff(DIFF_DELETE, lastEquality));\n        // Change second copy to insert.\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        // Throw away the equality we just deleted.\n        equalitiesLength--;\n        // Throw away the previous equality (it needs to be reevaluated).\n        equalitiesLength--;\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n        length_insertions1 = 0; // Reset the counters.\n        length_deletions1 = 0;\n        length_insertions2 = 0;\n        length_deletions2 = 0;\n        lastEquality = null;\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n\n  // Normalize the diff.\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n  this.diff_cleanupSemanticLossless(diffs);\n\n  // Find any overlaps between deletions and insertions.\n  // e.g: <del>abcxxx</del><ins>xxxdef</ins>\n  //   -> <del>abc</del>xxx<ins>def</ins>\n  // e.g: <del>xxxabc</del><ins>defxxx</ins>\n  //   -> <ins>def</ins>xxx<del>abc</del>\n  // Only extract an overlap if it is as big as the edit ahead or behind it.\n  pointer = 1;\n  while (pointer < diffs.length) {\n    if (diffs[pointer - 1][0] == DIFF_DELETE && diffs[pointer][0] == DIFF_INSERT) {\n      var deletion = diffs[pointer - 1][1];\n      var insertion = diffs[pointer][1];\n      var overlap_length1 = this.diff_commonOverlap_(deletion, insertion);\n      var overlap_length2 = this.diff_commonOverlap_(insertion, deletion);\n      if (overlap_length1 >= overlap_length2) {\n        if (overlap_length1 >= deletion.length / 2 || overlap_length1 >= insertion.length / 2) {\n          // Overlap found.  Insert an equality and trim the surrounding edits.\n          diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_EQUAL, insertion.substring(0, overlap_length1)));\n          diffs[pointer - 1][1] = deletion.substring(0, deletion.length - overlap_length1);\n          diffs[pointer + 1][1] = insertion.substring(overlap_length1);\n          pointer++;\n        }\n      } else {\n        if (overlap_length2 >= deletion.length / 2 || overlap_length2 >= insertion.length / 2) {\n          // Reverse overlap found.\n          // Insert an equality and swap and trim the surrounding edits.\n          diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_EQUAL, deletion.substring(0, overlap_length2)));\n          diffs[pointer - 1][0] = DIFF_INSERT;\n          diffs[pointer - 1][1] = insertion.substring(0, insertion.length - overlap_length2);\n          diffs[pointer + 1][0] = DIFF_DELETE;\n          diffs[pointer + 1][1] = deletion.substring(overlap_length2);\n          pointer++;\n        }\n      }\n      pointer++;\n    }\n    pointer++;\n  }\n};\n\n/**\n * Look for single edits surrounded on both sides by equalities\n * which can be shifted sideways to align the edit to a word boundary.\n * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_cleanupSemanticLossless = function (diffs) {\n  /**\n   * Given two strings, compute a score representing whether the internal\n   * boundary falls on logical boundaries.\n   * Scores range from 6 (best) to 0 (worst).\n   * Closure, but does not reference any external variables.\n   * @param {string} one First string.\n   * @param {string} two Second string.\n   * @return {number} The score.\n   * @private\n   */\n  function diff_cleanupSemanticScore_(one, two) {\n    if (!one || !two) {\n      // Edges are the best.\n      return 6;\n    }\n\n    // Each port of this function behaves slightly differently due to\n    // subtle differences in each language's definition of things like\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\n    // the choice has been made to use each language's native features\n    // rather than force total conformity.\n    var char1 = one.charAt(one.length - 1);\n    var char2 = two.charAt(0);\n    var nonAlphaNumeric1 = char1.match(diff_match_patch.nonAlphaNumericRegex_);\n    var nonAlphaNumeric2 = char2.match(diff_match_patch.nonAlphaNumericRegex_);\n    var whitespace1 = nonAlphaNumeric1 && char1.match(diff_match_patch.whitespaceRegex_);\n    var whitespace2 = nonAlphaNumeric2 && char2.match(diff_match_patch.whitespaceRegex_);\n    var lineBreak1 = whitespace1 && char1.match(diff_match_patch.linebreakRegex_);\n    var lineBreak2 = whitespace2 && char2.match(diff_match_patch.linebreakRegex_);\n    var blankLine1 = lineBreak1 && one.match(diff_match_patch.blanklineEndRegex_);\n    var blankLine2 = lineBreak2 && two.match(diff_match_patch.blanklineStartRegex_);\n    if (blankLine1 || blankLine2) {\n      // Five points for blank lines.\n      return 5;\n    } else if (lineBreak1 || lineBreak2) {\n      // Four points for line breaks.\n      return 4;\n    } else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\n      // Three points for end of sentences.\n      return 3;\n    } else if (whitespace1 || whitespace2) {\n      // Two points for whitespace.\n      return 2;\n    } else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\n      // One point for non-alphanumeric.\n      return 1;\n    }\n    return 0;\n  }\n  var pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL && diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      var equality1 = diffs[pointer - 1][1];\n      var edit = diffs[pointer][1];\n      var equality2 = diffs[pointer + 1][1];\n\n      // First, shift the edit as far left as possible.\n      var commonOffset = this.diff_commonSuffix(equality1, edit);\n      if (commonOffset) {\n        var commonString = edit.substring(edit.length - commonOffset);\n        equality1 = equality1.substring(0, equality1.length - commonOffset);\n        edit = commonString + edit.substring(0, edit.length - commonOffset);\n        equality2 = commonString + equality2;\n      }\n\n      // Second, step character by character right, looking for the best fit.\n      var bestEquality1 = equality1;\n      var bestEdit = edit;\n      var bestEquality2 = equality2;\n      var bestScore = diff_cleanupSemanticScore_(equality1, edit) + diff_cleanupSemanticScore_(edit, equality2);\n      while (edit.charAt(0) === equality2.charAt(0)) {\n        equality1 += edit.charAt(0);\n        edit = edit.substring(1) + equality2.charAt(0);\n        equality2 = equality2.substring(1);\n        var score = diff_cleanupSemanticScore_(equality1, edit) + diff_cleanupSemanticScore_(edit, equality2);\n        // The >= encourages trailing rather than leading whitespace on edits.\n        if (score >= bestScore) {\n          bestScore = score;\n          bestEquality1 = equality1;\n          bestEdit = edit;\n          bestEquality2 = equality2;\n        }\n      }\n      if (diffs[pointer - 1][1] != bestEquality1) {\n        // We have an improvement, save it back to the diff.\n        if (bestEquality1) {\n          diffs[pointer - 1][1] = bestEquality1;\n        } else {\n          diffs.splice(pointer - 1, 1);\n          pointer--;\n        }\n        diffs[pointer][1] = bestEdit;\n        if (bestEquality2) {\n          diffs[pointer + 1][1] = bestEquality2;\n        } else {\n          diffs.splice(pointer + 1, 1);\n          pointer--;\n        }\n      }\n    }\n    pointer++;\n  }\n};\n\n// Define some regex patterns for matching boundaries.\ndiff_match_patch.nonAlphaNumericRegex_ = /[^a-zA-Z0-9]/;\ndiff_match_patch.whitespaceRegex_ = /\\s/;\ndiff_match_patch.linebreakRegex_ = /[\\r\\n]/;\ndiff_match_patch.blanklineEndRegex_ = /\\n\\r?\\n$/;\ndiff_match_patch.blanklineStartRegex_ = /^\\r?\\n\\r?\\n/;\n\n/**\n * Reduce the number of edits by eliminating operationally trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_cleanupEfficiency = function (diffs) {\n  var changes = false;\n  var equalities = []; // Stack of indices where equalities are found.\n  var equalitiesLength = 0; // Keeping our own length var is faster in JS.\n  /** @type {?string} */\n  var lastEquality = null;\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n  var pointer = 0; // Index of current position.\n  // Is there an insertion operation before the last equality.\n  var pre_ins = false;\n  // Is there a deletion operation before the last equality.\n  var pre_del = false;\n  // Is there an insertion operation after the last equality.\n  var post_ins = false;\n  // Is there a deletion operation after the last equality.\n  var post_del = false;\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {\n      // Equality found.\n      if (diffs[pointer][1].length < this.Diff_EditCost && (post_ins || post_del)) {\n        // Candidate found.\n        equalities[equalitiesLength++] = pointer;\n        pre_ins = post_ins;\n        pre_del = post_del;\n        lastEquality = diffs[pointer][1];\n      } else {\n        // Not a candidate, and can never become one.\n        equalitiesLength = 0;\n        lastEquality = null;\n      }\n      post_ins = post_del = false;\n    } else {\n      // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_DELETE) {\n        post_del = true;\n      } else {\n        post_ins = true;\n      }\n      /*\n       * Five types to be split:\n       * <ins>A</ins><del>B</del>XY<ins>C</ins><del>D</del>\n       * <ins>A</ins>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<ins>C</ins>\n       * <ins>A</del>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<del>C</del>\n       */\n      if (lastEquality && (pre_ins && pre_del && post_ins && post_del || lastEquality.length < this.Diff_EditCost / 2 && pre_ins + pre_del + post_ins + post_del == 3)) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, new diff_match_patch.Diff(DIFF_DELETE, lastEquality));\n        // Change second copy to insert.\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        equalitiesLength--; // Throw away the equality we just deleted;\n        lastEquality = null;\n        if (pre_ins && pre_del) {\n          // No changes made which could affect previous entry, keep going.\n          post_ins = post_del = true;\n          equalitiesLength = 0;\n        } else {\n          equalitiesLength--; // Throw away the previous equality.\n          pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n          post_ins = post_del = false;\n        }\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n};\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_cleanupMerge = function (diffs) {\n  // Add a dummy entry at the end.\n  diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, ''));\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  var commonlength;\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete + count_insert > 1) {\n          if (count_delete !== 0 && count_insert !== 0) {\n            // Factor out any common prefixies.\n            commonlength = this.diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if (pointer - count_delete - count_insert > 0 && diffs[pointer - count_delete - count_insert - 1][0] == DIFF_EQUAL) {\n                diffs[pointer - count_delete - count_insert - 1][1] += text_insert.substring(0, commonlength);\n              } else {\n                diffs.splice(0, 0, new diff_match_patch.Diff(DIFF_EQUAL, text_insert.substring(0, commonlength)));\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixies.\n            commonlength = this.diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] = text_insert.substring(text_insert.length - commonlength) + diffs[pointer][1];\n              text_insert = text_insert.substring(0, text_insert.length - commonlength);\n              text_delete = text_delete.substring(0, text_delete.length - commonlength);\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          pointer -= count_delete + count_insert;\n          diffs.splice(pointer, count_delete + count_insert);\n          if (text_delete.length) {\n            diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_DELETE, text_delete));\n            pointer++;\n          }\n          if (text_insert.length) {\n            diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_INSERT, text_insert));\n            pointer++;\n          }\n          pointer++;\n        } else if (pointer !== 0 && diffs[pointer - 1][0] == DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === '') {\n    diffs.pop(); // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL && diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      if (diffs[pointer][1].substring(diffs[pointer][1].length - diffs[pointer - 1][1].length) == diffs[pointer - 1][1]) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] = diffs[pointer - 1][1] + diffs[pointer][1].substring(0, diffs[pointer][1].length - diffs[pointer - 1][1].length);\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) == diffs[pointer + 1][1]) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] = diffs[pointer][1].substring(diffs[pointer + 1][1].length) + diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n};\n\n/**\n * loc is a location in text1, compute and return the equivalent location in\n * text2.\n * e.g. 'The cat' vs 'The big cat', 1->1, 5->8\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @param {number} loc Location within text1.\n * @return {number} Location within text2.\n */\ndiff_match_patch.prototype.diff_xIndex = function (diffs, loc) {\n  var chars1 = 0;\n  var chars2 = 0;\n  var last_chars1 = 0;\n  var last_chars2 = 0;\n  var x;\n  for (x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) {\n      // Equality or deletion.\n      chars1 += diffs[x][1].length;\n    }\n    if (diffs[x][0] !== DIFF_DELETE) {\n      // Equality or insertion.\n      chars2 += diffs[x][1].length;\n    }\n    if (chars1 > loc) {\n      // Overshot the location.\n      break;\n    }\n    last_chars1 = chars1;\n    last_chars2 = chars2;\n  }\n  // Was the location was deleted?\n  if (diffs.length != x && diffs[x][0] === DIFF_DELETE) {\n    return last_chars2;\n  }\n  // Add the remaining character length.\n  return last_chars2 + (loc - last_chars1);\n};\n\n/**\n * Convert a diff array into a pretty HTML report.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} HTML representation.\n */\ndiff_match_patch.prototype.diff_prettyHtml = function (diffs) {\n  var html = [];\n  var pattern_amp = /&/g;\n  var pattern_lt = /</g;\n  var pattern_gt = />/g;\n  var pattern_para = /\\n/g;\n  for (var x = 0; x < diffs.length; x++) {\n    var op = diffs[x][0]; // Operation (insert, delete, equal)\n    var data = diffs[x][1]; // Text of change.\n    var text = data.replace(pattern_amp, '&amp;').replace(pattern_lt, '&lt;').replace(pattern_gt, '&gt;').replace(pattern_para, '&para;<br>');\n    switch (op) {\n      case DIFF_INSERT:\n        html[x] = '<ins style=\"background:#e6ffe6;\">' + text + '</ins>';\n        break;\n      case DIFF_DELETE:\n        html[x] = '<del style=\"background:#ffe6e6;\">' + text + '</del>';\n        break;\n      case DIFF_EQUAL:\n        html[x] = '<span>' + text + '</span>';\n        break;\n    }\n  }\n  return html.join('');\n};\n\n/**\n * Compute and return the source text (all equalities and deletions).\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Source text.\n */\ndiff_match_patch.prototype.diff_text1 = function (diffs) {\n  var text = [];\n  for (var x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) {\n      text[x] = diffs[x][1];\n    }\n  }\n  return text.join('');\n};\n\n/**\n * Compute and return the destination text (all equalities and insertions).\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Destination text.\n */\ndiff_match_patch.prototype.diff_text2 = function (diffs) {\n  var text = [];\n  for (var x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_DELETE) {\n      text[x] = diffs[x][1];\n    }\n  }\n  return text.join('');\n};\n\n/**\n * Compute the Levenshtein distance; the number of inserted, deleted or\n * substituted characters.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {number} Number of changes.\n */\ndiff_match_patch.prototype.diff_levenshtein = function (diffs) {\n  var levenshtein = 0;\n  var insertions = 0;\n  var deletions = 0;\n  for (var x = 0; x < diffs.length; x++) {\n    var op = diffs[x][0];\n    var data = diffs[x][1];\n    switch (op) {\n      case DIFF_INSERT:\n        insertions += data.length;\n        break;\n      case DIFF_DELETE:\n        deletions += data.length;\n        break;\n      case DIFF_EQUAL:\n        // A deletion and an insertion is one substitution.\n        levenshtein += Math.max(insertions, deletions);\n        insertions = 0;\n        deletions = 0;\n        break;\n    }\n  }\n  levenshtein += Math.max(insertions, deletions);\n  return levenshtein;\n};\n\n/**\n * Crush the diff into an encoded string which describes the operations\n * required to transform text1 into text2.\n * E.g. =3\\t-2\\t+ing  -> Keep 3 chars, delete 2 chars, insert 'ing'.\n * Operations are tab-separated.  Inserted text is escaped using %xx notation.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Delta text.\n */\ndiff_match_patch.prototype.diff_toDelta = function (diffs) {\n  var text = [];\n  for (var x = 0; x < diffs.length; x++) {\n    switch (diffs[x][0]) {\n      case DIFF_INSERT:\n        text[x] = '+' + encodeURI(diffs[x][1]);\n        break;\n      case DIFF_DELETE:\n        text[x] = '-' + diffs[x][1].length;\n        break;\n      case DIFF_EQUAL:\n        text[x] = '=' + diffs[x][1].length;\n        break;\n    }\n  }\n  return text.join('\\t').replace(/%20/g, ' ');\n};\n\n/**\n * Given the original text1, and an encoded string which describes the\n * operations required to transform text1 into text2, compute the full diff.\n * @param {string} text1 Source string for the diff.\n * @param {string} delta Delta text.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @throws {!Error} If invalid input.\n */\ndiff_match_patch.prototype.diff_fromDelta = function (text1, delta) {\n  var diffs = [];\n  var diffsLength = 0; // Keeping our own length var is faster in JS.\n  var pointer = 0; // Cursor in text1\n  var tokens = delta.split(/\\t/g);\n  for (var x = 0; x < tokens.length; x++) {\n    // Each token begins with a one character parameter which specifies the\n    // operation of this token (delete, insert, equality).\n    var param = tokens[x].substring(1);\n    switch (tokens[x].charAt(0)) {\n      case '+':\n        try {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_INSERT, decodeURI(param));\n        } catch (ex) {\n          // Malformed URI sequence.\n          throw new Error('Illegal escape in diff_fromDelta: ' + param);\n        }\n        break;\n      case '-':\n      // Fall through.\n      case '=':\n        var n = parseInt(param, 10);\n        if (isNaN(n) || n < 0) {\n          throw new Error('Invalid number in diff_fromDelta: ' + param);\n        }\n        var text = text1.substring(pointer, pointer += n);\n        if (tokens[x].charAt(0) == '=') {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_EQUAL, text);\n        } else {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_DELETE, text);\n        }\n        break;\n      default:\n        // Blank tokens are ok (from a trailing \\t).\n        // Anything else is an error.\n        if (tokens[x]) {\n          throw new Error('Invalid diff operation in diff_fromDelta: ' + tokens[x]);\n        }\n    }\n  }\n  if (pointer != text1.length) {\n    throw new Error('Delta length (' + pointer + ') does not equal source text length (' + text1.length + ').');\n  }\n  return diffs;\n};\n\n//  MATCH FUNCTIONS\n\n/**\n * Locate the best instance of 'pattern' in 'text' near 'loc'.\n * @param {string} text The text to search.\n * @param {string} pattern The pattern to search for.\n * @param {number} loc The location to search around.\n * @return {number} Best match index or -1.\n */\ndiff_match_patch.prototype.match_main = function (text, pattern, loc) {\n  // Check for null inputs.\n  if (text == null || pattern == null || loc == null) {\n    throw new Error('Null input. (match_main)');\n  }\n  loc = Math.max(0, Math.min(loc, text.length));\n  if (text == pattern) {\n    // Shortcut (potentially not guaranteed by the algorithm)\n    return 0;\n  } else if (!text.length) {\n    // Nothing to match.\n    return -1;\n  } else if (text.substring(loc, loc + pattern.length) == pattern) {\n    // Perfect match at the perfect spot!  (Includes case of null pattern)\n    return loc;\n  } else {\n    // Do a fuzzy compare.\n    return this.match_bitap_(text, pattern, loc);\n  }\n};\n\n/**\n * Locate the best instance of 'pattern' in 'text' near 'loc' using the\n * Bitap algorithm.\n * @param {string} text The text to search.\n * @param {string} pattern The pattern to search for.\n * @param {number} loc The location to search around.\n * @return {number} Best match index or -1.\n * @private\n */\ndiff_match_patch.prototype.match_bitap_ = function (text, pattern, loc) {\n  if (pattern.length > this.Match_MaxBits) {\n    throw new Error('Pattern too long for this browser.');\n  }\n\n  // Initialise the alphabet.\n  var s = this.match_alphabet_(pattern);\n  var dmp = this; // 'this' becomes 'window' in a closure.\n\n  /**\n   * Compute and return the score for a match with e errors and x location.\n   * Accesses loc and pattern through being a closure.\n   * @param {number} e Number of errors in match.\n   * @param {number} x Location of match.\n   * @return {number} Overall score for match (0.0 = good, 1.0 = bad).\n   * @private\n   */\n  function match_bitapScore_(e, x) {\n    var accuracy = e / pattern.length;\n    var proximity = Math.abs(loc - x);\n    if (!dmp.Match_Distance) {\n      // Dodge divide by zero error.\n      return proximity ? 1.0 : accuracy;\n    }\n    return accuracy + proximity / dmp.Match_Distance;\n  }\n\n  // Highest score beyond which we give up.\n  var score_threshold = this.Match_Threshold;\n  // Is there a nearby exact match? (speedup)\n  var best_loc = text.indexOf(pattern, loc);\n  if (best_loc != -1) {\n    score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold);\n    // What about in the other direction? (speedup)\n    best_loc = text.lastIndexOf(pattern, loc + pattern.length);\n    if (best_loc != -1) {\n      score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold);\n    }\n  }\n\n  // Initialise the bit arrays.\n  var matchmask = 1 << pattern.length - 1;\n  best_loc = -1;\n  var bin_min, bin_mid;\n  var bin_max = pattern.length + text.length;\n  var last_rd;\n  for (var d = 0; d < pattern.length; d++) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from 'loc' we can stray at this\n    // error level.\n    bin_min = 0;\n    bin_mid = bin_max;\n    while (bin_min < bin_mid) {\n      if (match_bitapScore_(d, loc + bin_mid) <= score_threshold) {\n        bin_min = bin_mid;\n      } else {\n        bin_max = bin_mid;\n      }\n      bin_mid = Math.floor((bin_max - bin_min) / 2 + bin_min);\n    }\n    // Use the result from this iteration as the maximum for the next.\n    bin_max = bin_mid;\n    var start = Math.max(1, loc - bin_mid + 1);\n    var finish = Math.min(loc + bin_mid, text.length) + pattern.length;\n    var rd = Array(finish + 2);\n    rd[finish + 1] = (1 << d) - 1;\n    for (var j = finish; j >= start; j--) {\n      // The alphabet (s) is a sparse hash, so the following line generates\n      // warnings.\n      var charMatch = s[text.charAt(j - 1)];\n      if (d === 0) {\n        // First pass: exact match.\n        rd[j] = (rd[j + 1] << 1 | 1) & charMatch;\n      } else {\n        // Subsequent passes: fuzzy match.\n        rd[j] = (rd[j + 1] << 1 | 1) & charMatch | ((last_rd[j + 1] | last_rd[j]) << 1 | 1) | last_rd[j + 1];\n      }\n      if (rd[j] & matchmask) {\n        var score = match_bitapScore_(d, j - 1);\n        // This match will almost certainly be better than any existing match.\n        // But check anyway.\n        if (score <= score_threshold) {\n          // Told you so.\n          score_threshold = score;\n          best_loc = j - 1;\n          if (best_loc > loc) {\n            // When passing loc, don't exceed our current distance from loc.\n            start = Math.max(1, 2 * loc - best_loc);\n          } else {\n            // Already passed loc, downhill from here on in.\n            break;\n          }\n        }\n      }\n    }\n    // No hope for a (better) match at greater error levels.\n    if (match_bitapScore_(d + 1, loc) > score_threshold) {\n      break;\n    }\n    last_rd = rd;\n  }\n  return best_loc;\n};\n\n/**\n * Initialise the alphabet for the Bitap algorithm.\n * @param {string} pattern The text to encode.\n * @return {!Object} Hash of character locations.\n * @private\n */\ndiff_match_patch.prototype.match_alphabet_ = function (pattern) {\n  var s = {};\n  for (var i = 0; i < pattern.length; i++) {\n    s[pattern.charAt(i)] = 0;\n  }\n  for (var i = 0; i < pattern.length; i++) {\n    s[pattern.charAt(i)] |= 1 << pattern.length - i - 1;\n  }\n  return s;\n};\n\n//  PATCH FUNCTIONS\n\n/**\n * Increase the context until it is unique,\n * but don't let the pattern expand beyond Match_MaxBits.\n * @param {!diff_match_patch.patch_obj} patch The patch to grow.\n * @param {string} text Source text.\n * @private\n */\ndiff_match_patch.prototype.patch_addContext_ = function (patch, text) {\n  if (text.length == 0) {\n    return;\n  }\n  if (patch.start2 === null) {\n    throw Error('patch not initialized');\n  }\n  var pattern = text.substring(patch.start2, patch.start2 + patch.length1);\n  var padding = 0;\n\n  // Look for the first and last matches of pattern in text.  If two different\n  // matches are found, increase the pattern length.\n  while (text.indexOf(pattern) != text.lastIndexOf(pattern) && pattern.length < this.Match_MaxBits - this.Patch_Margin - this.Patch_Margin) {\n    padding += this.Patch_Margin;\n    pattern = text.substring(patch.start2 - padding, patch.start2 + patch.length1 + padding);\n  }\n  // Add one chunk for good luck.\n  padding += this.Patch_Margin;\n\n  // Add the prefix.\n  var prefix = text.substring(patch.start2 - padding, patch.start2);\n  if (prefix) {\n    patch.diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, prefix));\n  }\n  // Add the suffix.\n  var suffix = text.substring(patch.start2 + patch.length1, patch.start2 + patch.length1 + padding);\n  if (suffix) {\n    patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, suffix));\n  }\n\n  // Roll back the start points.\n  patch.start1 -= prefix.length;\n  patch.start2 -= prefix.length;\n  // Extend the lengths.\n  patch.length1 += prefix.length + suffix.length;\n  patch.length2 += prefix.length + suffix.length;\n};\n\n/**\n * Compute a list of patches to turn text1 into text2.\n * Use diffs if provided, otherwise compute it ourselves.\n * There are four ways to call this function, depending on what data is\n * available to the caller:\n * Method 1:\n * a = text1, b = text2\n * Method 2:\n * a = diffs\n * Method 3 (optimal):\n * a = text1, b = diffs\n * Method 4 (deprecated, use method 3):\n * a = text1, b = text2, c = diffs\n *\n * @param {string|!Array.<!diff_match_patch.Diff>} a text1 (methods 1,3,4) or\n * Array of diff tuples for text1 to text2 (method 2).\n * @param {string|!Array.<!diff_match_patch.Diff>=} opt_b text2 (methods 1,4) or\n * Array of diff tuples for text1 to text2 (method 3) or undefined (method 2).\n * @param {string|!Array.<!diff_match_patch.Diff>=} opt_c Array of diff tuples\n * for text1 to text2 (method 4) or undefined (methods 1,2,3).\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n */\ndiff_match_patch.prototype.patch_make = function (a, opt_b, opt_c) {\n  var text1, diffs;\n  if (typeof a == 'string' && typeof opt_b == 'string' && typeof opt_c == 'undefined') {\n    // Method 1: text1, text2\n    // Compute diffs from text1 and text2.\n    text1 = /** @type {string} */a;\n    diffs = this.diff_main(text1, /** @type {string} */opt_b, true);\n    if (diffs.length > 2) {\n      this.diff_cleanupSemantic(diffs);\n      this.diff_cleanupEfficiency(diffs);\n    }\n  } else if (a && typeof a == 'object' && typeof opt_b == 'undefined' && typeof opt_c == 'undefined') {\n    // Method 2: diffs\n    // Compute text1 from diffs.\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */a;\n    text1 = this.diff_text1(diffs);\n  } else if (typeof a == 'string' && opt_b && typeof opt_b == 'object' && typeof opt_c == 'undefined') {\n    // Method 3: text1, diffs\n    text1 = /** @type {string} */a;\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */opt_b;\n  } else if (typeof a == 'string' && typeof opt_b == 'string' && opt_c && typeof opt_c == 'object') {\n    // Method 4: text1, text2, diffs\n    // text2 is not used.\n    text1 = /** @type {string} */a;\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */opt_c;\n  } else {\n    throw new Error('Unknown call format to patch_make.');\n  }\n  if (diffs.length === 0) {\n    return []; // Get rid of the null case.\n  }\n  var patches = [];\n  var patch = new diff_match_patch.patch_obj();\n  var patchDiffLength = 0; // Keeping our own length var is faster in JS.\n  var char_count1 = 0; // Number of characters into the text1 string.\n  var char_count2 = 0; // Number of characters into the text2 string.\n  // Start with text1 (prepatch_text) and apply the diffs until we arrive at\n  // text2 (postpatch_text).  We recreate the patches one by one to determine\n  // context info.\n  var prepatch_text = text1;\n  var postpatch_text = text1;\n  for (var x = 0; x < diffs.length; x++) {\n    var diff_type = diffs[x][0];\n    var diff_text = diffs[x][1];\n    if (!patchDiffLength && diff_type !== DIFF_EQUAL) {\n      // A new patch starts here.\n      patch.start1 = char_count1;\n      patch.start2 = char_count2;\n    }\n    switch (diff_type) {\n      case DIFF_INSERT:\n        patch.diffs[patchDiffLength++] = diffs[x];\n        patch.length2 += diff_text.length;\n        postpatch_text = postpatch_text.substring(0, char_count2) + diff_text + postpatch_text.substring(char_count2);\n        break;\n      case DIFF_DELETE:\n        patch.length1 += diff_text.length;\n        patch.diffs[patchDiffLength++] = diffs[x];\n        postpatch_text = postpatch_text.substring(0, char_count2) + postpatch_text.substring(char_count2 + diff_text.length);\n        break;\n      case DIFF_EQUAL:\n        if (diff_text.length <= 2 * this.Patch_Margin && patchDiffLength && diffs.length != x + 1) {\n          // Small equality inside a patch.\n          patch.diffs[patchDiffLength++] = diffs[x];\n          patch.length1 += diff_text.length;\n          patch.length2 += diff_text.length;\n        } else if (diff_text.length >= 2 * this.Patch_Margin) {\n          // Time for a new patch.\n          if (patchDiffLength) {\n            this.patch_addContext_(patch, prepatch_text);\n            patches.push(patch);\n            patch = new diff_match_patch.patch_obj();\n            patchDiffLength = 0;\n            // Unlike Unidiff, our patch lists have a rolling context.\n            // https://github.com/google/diff-match-patch/wiki/Unidiff\n            // Update prepatch text & pos to reflect the application of the\n            // just completed patch.\n            prepatch_text = postpatch_text;\n            char_count1 = char_count2;\n          }\n        }\n        break;\n    }\n\n    // Update the current character count.\n    if (diff_type !== DIFF_INSERT) {\n      char_count1 += diff_text.length;\n    }\n    if (diff_type !== DIFF_DELETE) {\n      char_count2 += diff_text.length;\n    }\n  }\n  // Pick up the leftover patch if not empty.\n  if (patchDiffLength) {\n    this.patch_addContext_(patch, prepatch_text);\n    patches.push(patch);\n  }\n  return patches;\n};\n\n/**\n * Given an array of patches, return another array that is identical.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n */\ndiff_match_patch.prototype.patch_deepCopy = function (patches) {\n  // Making deep copies is hard in JavaScript.\n  var patchesCopy = [];\n  for (var x = 0; x < patches.length; x++) {\n    var patch = patches[x];\n    var patchCopy = new diff_match_patch.patch_obj();\n    patchCopy.diffs = [];\n    for (var y = 0; y < patch.diffs.length; y++) {\n      patchCopy.diffs[y] = new diff_match_patch.Diff(patch.diffs[y][0], patch.diffs[y][1]);\n    }\n    patchCopy.start1 = patch.start1;\n    patchCopy.start2 = patch.start2;\n    patchCopy.length1 = patch.length1;\n    patchCopy.length2 = patch.length2;\n    patchesCopy[x] = patchCopy;\n  }\n  return patchesCopy;\n};\n\n/**\n * Merge a set of patches onto the text.  Return a patched text, as well\n * as a list of true/false values indicating which patches were applied.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @param {string} text Old text.\n * @return {!Array.<string|!Array.<boolean>>} Two element Array, containing the\n *      new text and an array of boolean values.\n */\ndiff_match_patch.prototype.patch_apply = function (patches, text) {\n  if (patches.length == 0) {\n    return [text, []];\n  }\n\n  // Deep copy the patches so that no changes are made to originals.\n  patches = this.patch_deepCopy(patches);\n  var nullPadding = this.patch_addPadding(patches);\n  text = nullPadding + text + nullPadding;\n  this.patch_splitMax(patches);\n  // delta keeps track of the offset between the expected and actual location\n  // of the previous patch.  If there are patches expected at positions 10 and\n  // 20, but the first patch was found at 12, delta is 2 and the second patch\n  // has an effective expected position of 22.\n  var delta = 0;\n  var results = [];\n  for (var x = 0; x < patches.length; x++) {\n    var expected_loc = patches[x].start2 + delta;\n    var text1 = this.diff_text1(patches[x].diffs);\n    var start_loc;\n    var end_loc = -1;\n    if (text1.length > this.Match_MaxBits) {\n      // patch_splitMax will only provide an oversized pattern in the case of\n      // a monster delete.\n      start_loc = this.match_main(text, text1.substring(0, this.Match_MaxBits), expected_loc);\n      if (start_loc != -1) {\n        end_loc = this.match_main(text, text1.substring(text1.length - this.Match_MaxBits), expected_loc + text1.length - this.Match_MaxBits);\n        if (end_loc == -1 || start_loc >= end_loc) {\n          // Can't find valid trailing context.  Drop this patch.\n          start_loc = -1;\n        }\n      }\n    } else {\n      start_loc = this.match_main(text, text1, expected_loc);\n    }\n    if (start_loc == -1) {\n      // No match found.  :(\n      results[x] = false;\n      // Subtract the delta for this failed patch from subsequent patches.\n      delta -= patches[x].length2 - patches[x].length1;\n    } else {\n      // Found a match.  :)\n      results[x] = true;\n      delta = start_loc - expected_loc;\n      var text2;\n      if (end_loc == -1) {\n        text2 = text.substring(start_loc, start_loc + text1.length);\n      } else {\n        text2 = text.substring(start_loc, end_loc + this.Match_MaxBits);\n      }\n      if (text1 == text2) {\n        // Perfect match, just shove the replacement text in.\n        text = text.substring(0, start_loc) + this.diff_text2(patches[x].diffs) + text.substring(start_loc + text1.length);\n      } else {\n        // Imperfect match.  Run a diff to get a framework of equivalent\n        // indices.\n        var diffs = this.diff_main(text1, text2, false);\n        if (text1.length > this.Match_MaxBits && this.diff_levenshtein(diffs) / text1.length > this.Patch_DeleteThreshold) {\n          // The end points match, but the content is unacceptably bad.\n          results[x] = false;\n        } else {\n          this.diff_cleanupSemanticLossless(diffs);\n          var index1 = 0;\n          var index2;\n          for (var y = 0; y < patches[x].diffs.length; y++) {\n            var mod = patches[x].diffs[y];\n            if (mod[0] !== DIFF_EQUAL) {\n              index2 = this.diff_xIndex(diffs, index1);\n            }\n            if (mod[0] === DIFF_INSERT) {\n              // Insertion\n              text = text.substring(0, start_loc + index2) + mod[1] + text.substring(start_loc + index2);\n            } else if (mod[0] === DIFF_DELETE) {\n              // Deletion\n              text = text.substring(0, start_loc + index2) + text.substring(start_loc + this.diff_xIndex(diffs, index1 + mod[1].length));\n            }\n            if (mod[0] !== DIFF_DELETE) {\n              index1 += mod[1].length;\n            }\n          }\n        }\n      }\n    }\n  }\n  // Strip the padding off.\n  text = text.substring(nullPadding.length, text.length - nullPadding.length);\n  return [text, results];\n};\n\n/**\n * Add some padding on text start and end so that edges can match something.\n * Intended to be called only from within patch_apply.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {string} The padding string added to each side.\n */\ndiff_match_patch.prototype.patch_addPadding = function (patches) {\n  var paddingLength = this.Patch_Margin;\n  var nullPadding = '';\n  for (var x = 1; x <= paddingLength; x++) {\n    nullPadding += String.fromCharCode(x);\n  }\n\n  // Bump all the patches forward.\n  for (var x = 0; x < patches.length; x++) {\n    patches[x].start1 += paddingLength;\n    patches[x].start2 += paddingLength;\n  }\n\n  // Add some padding on start of first diff.\n  var patch = patches[0];\n  var diffs = patch.diffs;\n  if (diffs.length == 0 || diffs[0][0] != DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, nullPadding));\n    patch.start1 -= paddingLength; // Should be 0.\n    patch.start2 -= paddingLength; // Should be 0.\n    patch.length1 += paddingLength;\n    patch.length2 += paddingLength;\n  } else if (paddingLength > diffs[0][1].length) {\n    // Grow first equality.\n    var extraLength = paddingLength - diffs[0][1].length;\n    diffs[0][1] = nullPadding.substring(diffs[0][1].length) + diffs[0][1];\n    patch.start1 -= extraLength;\n    patch.start2 -= extraLength;\n    patch.length1 += extraLength;\n    patch.length2 += extraLength;\n  }\n\n  // Add some padding on end of last diff.\n  patch = patches[patches.length - 1];\n  diffs = patch.diffs;\n  if (diffs.length == 0 || diffs[diffs.length - 1][0] != DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, nullPadding));\n    patch.length1 += paddingLength;\n    patch.length2 += paddingLength;\n  } else if (paddingLength > diffs[diffs.length - 1][1].length) {\n    // Grow last equality.\n    var extraLength = paddingLength - diffs[diffs.length - 1][1].length;\n    diffs[diffs.length - 1][1] += nullPadding.substring(0, extraLength);\n    patch.length1 += extraLength;\n    patch.length2 += extraLength;\n  }\n  return nullPadding;\n};\n\n/**\n * Look through the patches and break up any which are longer than the maximum\n * limit of the match algorithm.\n * Intended to be called only from within patch_apply.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n */\ndiff_match_patch.prototype.patch_splitMax = function (patches) {\n  var patch_size = this.Match_MaxBits;\n  for (var x = 0; x < patches.length; x++) {\n    if (patches[x].length1 <= patch_size) {\n      continue;\n    }\n    var bigpatch = patches[x];\n    // Remove the big old patch.\n    patches.splice(x--, 1);\n    var start1 = bigpatch.start1;\n    var start2 = bigpatch.start2;\n    var precontext = '';\n    while (bigpatch.diffs.length !== 0) {\n      // Create one of several smaller patches.\n      var patch = new diff_match_patch.patch_obj();\n      var empty = true;\n      patch.start1 = start1 - precontext.length;\n      patch.start2 = start2 - precontext.length;\n      if (precontext !== '') {\n        patch.length1 = patch.length2 = precontext.length;\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, precontext));\n      }\n      while (bigpatch.diffs.length !== 0 && patch.length1 < patch_size - this.Patch_Margin) {\n        var diff_type = bigpatch.diffs[0][0];\n        var diff_text = bigpatch.diffs[0][1];\n        if (diff_type === DIFF_INSERT) {\n          // Insertions are harmless.\n          patch.length2 += diff_text.length;\n          start2 += diff_text.length;\n          patch.diffs.push(bigpatch.diffs.shift());\n          empty = false;\n        } else if (diff_type === DIFF_DELETE && patch.diffs.length == 1 && patch.diffs[0][0] == DIFF_EQUAL && diff_text.length > 2 * patch_size) {\n          // This is a large deletion.  Let it pass in one chunk.\n          patch.length1 += diff_text.length;\n          start1 += diff_text.length;\n          empty = false;\n          patch.diffs.push(new diff_match_patch.Diff(diff_type, diff_text));\n          bigpatch.diffs.shift();\n        } else {\n          // Deletion or equality.  Only take as much as we can stomach.\n          diff_text = diff_text.substring(0, patch_size - patch.length1 - this.Patch_Margin);\n          patch.length1 += diff_text.length;\n          start1 += diff_text.length;\n          if (diff_type === DIFF_EQUAL) {\n            patch.length2 += diff_text.length;\n            start2 += diff_text.length;\n          } else {\n            empty = false;\n          }\n          patch.diffs.push(new diff_match_patch.Diff(diff_type, diff_text));\n          if (diff_text == bigpatch.diffs[0][1]) {\n            bigpatch.diffs.shift();\n          } else {\n            bigpatch.diffs[0][1] = bigpatch.diffs[0][1].substring(diff_text.length);\n          }\n        }\n      }\n      // Compute the head context for the next patch.\n      precontext = this.diff_text2(patch.diffs);\n      precontext = precontext.substring(precontext.length - this.Patch_Margin);\n      // Append the end context for this patch.\n      var postcontext = this.diff_text1(bigpatch.diffs).substring(0, this.Patch_Margin);\n      if (postcontext !== '') {\n        patch.length1 += postcontext.length;\n        patch.length2 += postcontext.length;\n        if (patch.diffs.length !== 0 && patch.diffs[patch.diffs.length - 1][0] === DIFF_EQUAL) {\n          patch.diffs[patch.diffs.length - 1][1] += postcontext;\n        } else {\n          patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, postcontext));\n        }\n      }\n      if (!empty) {\n        patches.splice(++x, 0, patch);\n      }\n    }\n  }\n};\n\n/**\n * Take a list of patches and return a textual representation.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {string} Text representation of patches.\n */\ndiff_match_patch.prototype.patch_toText = function (patches) {\n  var text = [];\n  for (var x = 0; x < patches.length; x++) {\n    text[x] = patches[x];\n  }\n  return text.join('');\n};\n\n/**\n * Parse a textual representation of patches and return a list of Patch objects.\n * @param {string} textline Text representation of patches.\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n * @throws {!Error} If invalid input.\n */\ndiff_match_patch.prototype.patch_fromText = function (textline) {\n  var patches = [];\n  if (!textline) {\n    return patches;\n  }\n  var text = textline.split('\\n');\n  var textPointer = 0;\n  var patchHeader = /^@@ -(\\d+),?(\\d*) \\+(\\d+),?(\\d*) @@$/;\n  while (textPointer < text.length) {\n    var m = text[textPointer].match(patchHeader);\n    if (!m) {\n      throw new Error('Invalid patch string: ' + text[textPointer]);\n    }\n    var patch = new diff_match_patch.patch_obj();\n    patches.push(patch);\n    patch.start1 = parseInt(m[1], 10);\n    if (m[2] === '') {\n      patch.start1--;\n      patch.length1 = 1;\n    } else if (m[2] == '0') {\n      patch.length1 = 0;\n    } else {\n      patch.start1--;\n      patch.length1 = parseInt(m[2], 10);\n    }\n    patch.start2 = parseInt(m[3], 10);\n    if (m[4] === '') {\n      patch.start2--;\n      patch.length2 = 1;\n    } else if (m[4] == '0') {\n      patch.length2 = 0;\n    } else {\n      patch.start2--;\n      patch.length2 = parseInt(m[4], 10);\n    }\n    textPointer++;\n    while (textPointer < text.length) {\n      var sign = text[textPointer].charAt(0);\n      try {\n        var line = decodeURI(text[textPointer].substring(1));\n      } catch (ex) {\n        // Malformed URI sequence.\n        throw new Error('Illegal escape in patch_fromText: ' + line);\n      }\n      if (sign == '-') {\n        // Deletion.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_DELETE, line));\n      } else if (sign == '+') {\n        // Insertion.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_INSERT, line));\n      } else if (sign == ' ') {\n        // Minor equality.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, line));\n      } else if (sign == '@') {\n        // Start of next patch.\n        break;\n      } else if (sign === '') {\n        // Blank line?  Whatever.\n      } else {\n        // WTF?\n        throw new Error('Invalid patch mode \"' + sign + '\" in: ' + line);\n      }\n      textPointer++;\n    }\n  }\n  return patches;\n};\n\n/**\n * Class representing one patch operation.\n * @constructor\n */\ndiff_match_patch.patch_obj = function () {\n  /** @type {!Array.<!diff_match_patch.Diff>} */\n  this.diffs = [];\n  /** @type {?number} */\n  this.start1 = null;\n  /** @type {?number} */\n  this.start2 = null;\n  /** @type {number} */\n  this.length1 = 0;\n  /** @type {number} */\n  this.length2 = 0;\n};\n\n/**\n * Emulate GNU diff's format.\n * Header: @@ -382,8 +481,9 @@\n * Indices are printed as 1-based, not 0-based.\n * @return {string} The GNU diff string.\n */\ndiff_match_patch.patch_obj.prototype.toString = function () {\n  var coords1, coords2;\n  if (this.length1 === 0) {\n    coords1 = this.start1 + ',0';\n  } else if (this.length1 == 1) {\n    coords1 = this.start1 + 1;\n  } else {\n    coords1 = this.start1 + 1 + ',' + this.length1;\n  }\n  if (this.length2 === 0) {\n    coords2 = this.start2 + ',0';\n  } else if (this.length2 == 1) {\n    coords2 = this.start2 + 1;\n  } else {\n    coords2 = this.start2 + 1 + ',' + this.length2;\n  }\n  var text = ['@@ -' + coords1 + ' +' + coords2 + ' @@\\n'];\n  var op;\n  // Escape the body of the patch with %xx notation.\n  for (var x = 0; x < this.diffs.length; x++) {\n    switch (this.diffs[x][0]) {\n      case DIFF_INSERT:\n        op = '+';\n        break;\n      case DIFF_DELETE:\n        op = '-';\n        break;\n      case DIFF_EQUAL:\n        op = ' ';\n        break;\n    }\n    text[x + 1] = op + encodeURI(this.diffs[x][1]) + '\\n';\n  }\n  return text.join('').replace(/%20/g, ' ');\n};\n\n// The following export code was added by @ForbesLindesay\nmodule.exports = diff_match_patch;\nmodule.exports.diff_match_patch = diff_match_patch;\nmodule.exports.DIFF_DELETE = DIFF_DELETE;\nmodule.exports.DIFF_INSERT = DIFF_INSERT;\nmodule.exports.DIFF_EQUAL = DIFF_EQUAL;\n\n/***/ }),\n\n/***/ 408:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": () => (/* binding */ method)\n});\n\n// EXTERNAL MODULE: ./src/ts/markdown/abcRender.ts\nvar abcRender = __webpack_require__(135);\n// EXTERNAL MODULE: ./src/ts/markdown/adapterRender.ts\nvar adapterRender = __webpack_require__(840);\n// EXTERNAL MODULE: ./src/ts/markdown/chartRender.ts\nvar chartRender = __webpack_require__(775);\n// EXTERNAL MODULE: ./src/ts/markdown/codeRender.ts\nvar codeRender = __webpack_require__(428);\n// EXTERNAL MODULE: ./src/ts/markdown/flowchartRender.ts\nvar flowchartRender = __webpack_require__(325);\n// EXTERNAL MODULE: ./src/ts/markdown/graphvizRender.ts\nvar graphvizRender = __webpack_require__(483);\n// EXTERNAL MODULE: ./src/ts/markdown/highlightRender.ts\nvar highlightRender = __webpack_require__(999);\n;// CONCATENATED MODULE: ./src/ts/markdown/lazyLoadImageRender.ts\nvar lazyLoadImageRender = function (element) {\n    if (element === void 0) { element = document; }\n    var loadImg = function (it) {\n        var testImage = document.createElement(\"img\");\n        testImage.src = it.getAttribute(\"data-src\");\n        testImage.addEventListener(\"load\", function () {\n            if (!it.getAttribute(\"style\") && !it.getAttribute(\"class\") &&\n                !it.getAttribute(\"width\") && !it.getAttribute(\"height\")) {\n                if (testImage.naturalHeight > testImage.naturalWidth &&\n                    testImage.naturalWidth / testImage.naturalHeight <\n                        document.querySelector(\".vditor-reset\").clientWidth / (window.innerHeight - 40) &&\n                    testImage.naturalHeight > (window.innerHeight - 40)) {\n                    it.style.height = (window.innerHeight - 40) + \"px\";\n                }\n            }\n            it.src = testImage.src;\n        });\n        it.removeAttribute(\"data-src\");\n    };\n    if (!(\"IntersectionObserver\" in window)) {\n        element.querySelectorAll(\"img\").forEach(function (imgElement) {\n            if (imgElement.getAttribute(\"data-src\")) {\n                loadImg(imgElement);\n            }\n        });\n        return false;\n    }\n    if (window.vditorImageIntersectionObserver) {\n        window.vditorImageIntersectionObserver.disconnect();\n        element.querySelectorAll(\"img\").forEach(function (imgElement) {\n            window.vditorImageIntersectionObserver.observe(imgElement);\n        });\n    }\n    else {\n        window.vditorImageIntersectionObserver = new IntersectionObserver(function (entries) {\n            entries.forEach(function (entrie) {\n                if ((typeof entrie.isIntersecting === \"undefined\"\n                    ? entrie.intersectionRatio !== 0\n                    : entrie.isIntersecting)\n                    && entrie.target.getAttribute(\"data-src\")) {\n                    loadImg(entrie.target);\n                }\n            });\n        });\n        element.querySelectorAll(\"img\").forEach(function (imgElement) {\n            window.vditorImageIntersectionObserver.observe(imgElement);\n        });\n    }\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/mathRender.ts\nvar mathRender = __webpack_require__(472);\n// EXTERNAL MODULE: ./src/ts/markdown/mediaRender.ts\nvar mediaRender = __webpack_require__(280);\n// EXTERNAL MODULE: ./src/ts/markdown/mermaidRender.ts\nvar mermaidRender = __webpack_require__(637);\n// EXTERNAL MODULE: ./src/ts/markdown/SMILESRender.ts\nvar SMILESRender = __webpack_require__(825);\n// EXTERNAL MODULE: ./src/ts/markdown/markmapRender.ts\nvar markmapRender = __webpack_require__(11);\n// EXTERNAL MODULE: ./src/ts/markdown/mindmapRender.ts\nvar mindmapRender = __webpack_require__(194);\n// EXTERNAL MODULE: ./src/ts/markdown/outlineRender.ts\nvar outlineRender = __webpack_require__(436);\n// EXTERNAL MODULE: ./src/ts/markdown/plantumlRender.ts\nvar plantumlRender = __webpack_require__(229);\n// EXTERNAL MODULE: ./src/ts/constants.ts\nvar constants = __webpack_require__(145);\n// EXTERNAL MODULE: ./src/ts/ui/setContentTheme.ts\nvar setContentTheme = __webpack_require__(538);\n// EXTERNAL MODULE: ./src/ts/util/addScript.ts\nvar addScript = __webpack_require__(413);\n// EXTERNAL MODULE: ./src/ts/util/hasClosest.ts\nvar hasClosest = __webpack_require__(106);\n// EXTERNAL MODULE: ./src/ts/util/merge.ts\nvar merge = __webpack_require__(673);\n;// CONCATENATED MODULE: ./src/ts/markdown/anchorRender.ts\nvar anchorRender = function (type) {\n    document.querySelectorAll(\".vditor-anchor\").forEach(function (anchor) {\n        if (type === 1) {\n            anchor.classList.add(\"vditor-anchor--left\");\n        }\n        anchor.onclick = function () {\n            var id = anchor.getAttribute(\"href\").substr(1);\n            var top = document.getElementById(\"vditorAnchor-\" + id).offsetTop;\n            document.querySelector(\"html\").scrollTop = top;\n        };\n    });\n    window.onhashchange = function () {\n        var element = document.getElementById(\"vditorAnchor-\" + decodeURIComponent(window.location.hash.substr(1)));\n        if (element) {\n            document.querySelector(\"html\").scrollTop = element.offsetTop;\n        }\n    };\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/setLute.ts\nvar setLute = __webpack_require__(214);\n// EXTERNAL MODULE: ./src/ts/util/selection.ts\nvar selection = __webpack_require__(810);\n;// CONCATENATED MODULE: ./src/ts/markdown/speechRender.ts\n\nvar speechRender = function (element, lang) {\n    if (lang === void 0) { lang = \"zh_CN\"; }\n    if (typeof speechSynthesis === \"undefined\" || typeof SpeechSynthesisUtterance === \"undefined\") {\n        return;\n    }\n    var getVoice = function () {\n        var voices = speechSynthesis.getVoices();\n        var currentVoice;\n        var defaultVoice;\n        voices.forEach(function (item) {\n            if (item.lang === lang.replace(\"_\", \"-\")) {\n                currentVoice = item;\n            }\n            if (item.default) {\n                defaultVoice = item;\n            }\n        });\n        if (!currentVoice) {\n            currentVoice = defaultVoice;\n        }\n        return currentVoice;\n    };\n    var playSVG = '<svg><use xlink:href=\"#vditor-icon-play\"></use></svg>';\n    var pauseSVG = '<svg><use xlink:href=\"#vditor-icon-pause\"></use></svg>';\n    if (!document.getElementById(\"vditorIconScript\")) {\n        playSVG = '<svg viewBox=\"0 0 32 32\"><path d=\"M3.436 0l25.128 16-25.128 16v-32z\"></path></svg>';\n        pauseSVG = '<svg viewBox=\"0 0 32 32\"><path d=\"M20.617 0h9.128v32h-9.128v-32zM2.255 32v-32h9.128v32h-9.128z\"></path></svg>';\n    }\n    var speechDom = document.querySelector(\".vditor-speech\");\n    if (!speechDom) {\n        speechDom = document.createElement(\"button\");\n        speechDom.className = \"vditor-speech\";\n        element.insertAdjacentElement(\"beforeend\", speechDom);\n        if (speechSynthesis.onvoiceschanged !== undefined) {\n            speechSynthesis.onvoiceschanged = getVoice;\n        }\n    }\n    var voice = getVoice();\n    var utterThis = new SpeechSynthesisUtterance();\n    utterThis.voice = voice;\n    utterThis.onend = utterThis.onerror = function () {\n        speechDom.style.display = \"none\";\n        speechSynthesis.cancel();\n        speechDom.classList.remove(\"vditor-speech--current\");\n        speechDom.innerHTML = playSVG;\n    };\n    element.addEventListener(window.ontouchstart !== undefined ? \"touchend\" : \"click\", function (event) {\n        var target = event.target;\n        if (target.classList.contains(\"vditor-speech\") || target.parentElement.classList.contains(\"vditor-speech\")) {\n            if (!speechDom.classList.contains(\"vditor-speech--current\")) {\n                utterThis.text = speechDom.getAttribute(\"data-text\");\n                speechSynthesis.speak(utterThis);\n                speechDom.classList.add(\"vditor-speech--current\");\n                speechDom.innerHTML = pauseSVG;\n            }\n            else {\n                if (speechSynthesis.speaking) {\n                    if (speechSynthesis.paused) {\n                        speechSynthesis.resume();\n                        speechDom.innerHTML = pauseSVG;\n                    }\n                    else {\n                        speechSynthesis.pause();\n                        speechDom.innerHTML = playSVG;\n                    }\n                }\n            }\n            (0,selection/* setSelectionFocus */.Hc)(window.vditorSpeechRange);\n            element.focus();\n            return;\n        }\n        speechDom.style.display = \"none\";\n        speechSynthesis.cancel();\n        speechDom.classList.remove(\"vditor-speech--current\");\n        speechDom.innerHTML = playSVG;\n        if (getSelection().rangeCount === 0) {\n            return;\n        }\n        var range = getSelection().getRangeAt(0);\n        var text = range.toString().trim();\n        if (!text) {\n            return;\n        }\n        window.vditorSpeechRange = range.cloneRange();\n        var rect = range.getBoundingClientRect();\n        speechDom.innerHTML = playSVG;\n        speechDom.style.display = \"block\";\n        speechDom.style.top = (rect.top + rect.height + document.querySelector(\"html\").scrollTop - 20) + \"px\";\n        if (window.ontouchstart !== undefined) {\n            speechDom.style.left = (event.changedTouches[event.changedTouches.length - 1].pageX + 2) + \"px\";\n        }\n        else {\n            speechDom.style.left = (event.clientX + 2) + \"px\";\n        }\n        speechDom.setAttribute(\"data-text\", text);\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/markdown/previewRender.ts\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar mergeOptions = function (options) {\n    var _a;\n    var defaultOption = {\n        anchor: 0,\n        cdn: constants/* Constants.CDN */.g.CDN,\n        customEmoji: {},\n        emojiPath: \"\".concat(constants/* Constants.CDN */.g.CDN, \"/dist/images/emoji\"),\n        hljs: constants/* Constants.HLJS_OPTIONS */.g.HLJS_OPTIONS,\n        icon: \"ant\",\n        lang: \"zh_CN\",\n        markdown: constants/* Constants.MARKDOWN_OPTIONS */.g.MARKDOWN_OPTIONS,\n        math: constants/* Constants.MATH_OPTIONS */.g.MATH_OPTIONS,\n        mode: \"light\",\n        speech: {\n            enable: false,\n        },\n        render: {\n            media: {\n                enable: true,\n            }\n        },\n        theme: constants/* Constants.THEME_OPTIONS */.g.THEME_OPTIONS,\n    };\n    if (options.cdn) {\n        if (!((_a = options.theme) === null || _a === void 0 ? void 0 : _a.path)) {\n            defaultOption.theme.path = \"\".concat(options.cdn, \"/dist/css/content-theme\");\n        }\n        if (!options.emojiPath) {\n            defaultOption.emojiPath = \"\".concat(options.cdn, \"/dist/images/emoji\");\n        }\n    }\n    return (0,merge/* merge */.T)(defaultOption, options);\n};\nvar md2html = function (mdText, options) {\n    var mergedOptions = mergeOptions(options);\n    return (0,addScript/* addScript */.G)(\"\".concat(mergedOptions.cdn, \"/dist/js/lute/lute.min.js\"), \"vditorLuteScript\").then(function () {\n        var lute = (0,setLute/* setLute */.X)({\n            autoSpace: mergedOptions.markdown.autoSpace,\n            gfmAutoLink: mergedOptions.markdown.gfmAutoLink,\n            codeBlockPreview: mergedOptions.markdown.codeBlockPreview,\n            emojiSite: mergedOptions.emojiPath,\n            emojis: mergedOptions.customEmoji,\n            fixTermTypo: mergedOptions.markdown.fixTermTypo,\n            footnotes: mergedOptions.markdown.footnotes,\n            headingAnchor: mergedOptions.anchor !== 0,\n            inlineMathDigit: mergedOptions.math.inlineDigit,\n            lazyLoadImage: mergedOptions.lazyLoadImage,\n            linkBase: mergedOptions.markdown.linkBase,\n            linkPrefix: mergedOptions.markdown.linkPrefix,\n            listStyle: mergedOptions.markdown.listStyle,\n            mark: mergedOptions.markdown.mark,\n            mathBlockPreview: mergedOptions.markdown.mathBlockPreview,\n            paragraphBeginningSpace: mergedOptions.markdown.paragraphBeginningSpace,\n            sanitize: mergedOptions.markdown.sanitize,\n            toc: mergedOptions.markdown.toc,\n        });\n        if (options === null || options === void 0 ? void 0 : options.renderers) {\n            lute.SetJSRenderers({\n                renderers: {\n                    Md2HTML: options.renderers,\n                },\n            });\n        }\n        lute.SetHeadingID(true);\n        return lute.Md2HTML(mdText);\n    });\n};\nvar previewRender = function (previewElement, markdown, options) { return __awaiter(void 0, void 0, void 0, function () {\n    var mergedOptions, html, i18nScriptPrefix, i18nScriptID_1;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                mergedOptions = mergeOptions(options);\n                return [4 /*yield*/, md2html(markdown, mergedOptions)];\n            case 1:\n                html = _a.sent();\n                if (mergedOptions.transform) {\n                    html = mergedOptions.transform(html);\n                }\n                previewElement.innerHTML = html;\n                previewElement.classList.add(\"vditor-reset\");\n                if (!!mergedOptions.i18n) return [3 /*break*/, 5];\n                if (!![\"de_DE\", \"en_US\", \"fr_FR\", \"pt_BR\", \"ja_JP\", \"ko_KR\", \"ru_RU\", \"sv_SE\", \"zh_CN\", \"zh_TW\"].includes(mergedOptions.lang)) return [3 /*break*/, 2];\n                throw new Error(\"options.lang error, see https://ld246.com/article/1549638745630#options\");\n            case 2:\n                i18nScriptPrefix = \"vditorI18nScript\";\n                i18nScriptID_1 = i18nScriptPrefix + mergedOptions.lang;\n                document.querySelectorAll(\"head script[id^=\\\"\".concat(i18nScriptPrefix, \"\\\"]\")).forEach(function (el) {\n                    if (el.id !== i18nScriptID_1) {\n                        document.head.removeChild(el);\n                    }\n                });\n                return [4 /*yield*/, (0,addScript/* addScript */.G)(\"\".concat(mergedOptions.cdn, \"/dist/js/i18n/\").concat(mergedOptions.lang, \".js\"), i18nScriptID_1)];\n            case 3:\n                _a.sent();\n                _a.label = 4;\n            case 4: return [3 /*break*/, 6];\n            case 5:\n                window.VditorI18n = mergedOptions.i18n;\n                _a.label = 6;\n            case 6:\n                if (!mergedOptions.icon) return [3 /*break*/, 8];\n                return [4 /*yield*/, (0,addScript/* addScript */.G)(\"\".concat(mergedOptions.cdn, \"/dist/js/icons/\").concat(mergedOptions.icon, \".js\"), \"vditorIconScript\")];\n            case 7:\n                _a.sent();\n                _a.label = 8;\n            case 8:\n                (0,setContentTheme/* setContentTheme */.Z)(mergedOptions.theme.current, mergedOptions.theme.path);\n                if (mergedOptions.anchor === 1) {\n                    previewElement.classList.add(\"vditor-reset--anchor\");\n                }\n                (0,codeRender/* codeRender */.O)(previewElement, mergedOptions.hljs);\n                (0,highlightRender/* highlightRender */.s)(mergedOptions.hljs, previewElement, mergedOptions.cdn);\n                (0,mathRender/* mathRender */.H)(previewElement, {\n                    cdn: mergedOptions.cdn,\n                    math: mergedOptions.math,\n                });\n                (0,mermaidRender/* mermaidRender */.i)(previewElement, mergedOptions.cdn, mergedOptions.mode);\n                (0,SMILESRender/* SMILESRender */.J)(previewElement, mergedOptions.cdn, mergedOptions.mode);\n                (0,markmapRender/* markmapRender */.K)(previewElement, mergedOptions.cdn);\n                (0,flowchartRender/* flowchartRender */.P)(previewElement, mergedOptions.cdn);\n                (0,graphvizRender/* graphvizRender */.v)(previewElement, mergedOptions.cdn);\n                (0,chartRender/* chartRender */.p)(previewElement, mergedOptions.cdn, mergedOptions.mode);\n                (0,mindmapRender/* mindmapRender */.P)(previewElement, mergedOptions.cdn, mergedOptions.mode);\n                (0,plantumlRender/* plantumlRender */.B)(previewElement, mergedOptions.cdn);\n                (0,abcRender/* abcRender */.Q)(previewElement, mergedOptions.cdn);\n                if (mergedOptions.render.media.enable) {\n                    (0,mediaRender/* mediaRender */.Y)(previewElement);\n                }\n                if (mergedOptions.speech.enable) {\n                    speechRender(previewElement);\n                }\n                if (mergedOptions.anchor !== 0) {\n                    anchorRender(mergedOptions.anchor);\n                }\n                if (mergedOptions.after) {\n                    mergedOptions.after();\n                }\n                if (mergedOptions.lazyLoadImage) {\n                    lazyLoadImageRender(previewElement);\n                }\n                previewElement.addEventListener(\"click\", function (event) {\n                    var spanElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"SPAN\");\n                    if (spanElement && (0,hasClosest/* hasClosestByClassName */.fb)(spanElement, \"vditor-toc\")) {\n                        var headingElement = previewElement.querySelector(\"#\" + spanElement.getAttribute(\"data-target-id\"));\n                        if (headingElement) {\n                            window.scrollTo(window.scrollX, headingElement.offsetTop);\n                        }\n                        return;\n                    }\n                });\n                return [2 /*return*/];\n        }\n    });\n}); };\n\n// EXTERNAL MODULE: ./src/ts/preview/image.ts\nvar preview_image = __webpack_require__(190);\n// EXTERNAL MODULE: ./src/ts/ui/setCodeTheme.ts\nvar setCodeTheme = __webpack_require__(580);\n;// CONCATENATED MODULE: ./src/method.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Vditor = /** @class */ (function () {\n    function Vditor() {\n    }\n    /** 点击图片放大 */\n    Vditor.adapterRender = adapterRender;\n    /** 点击图片放大 */\n    Vditor.previewImage = preview_image/* previewImage */.E;\n    /** 为 element 中的代码块添加复制按钮 */\n    Vditor.codeRender = codeRender/* codeRender */.O;\n    /** 对 graphviz 进行渲染 */\n    Vditor.graphvizRender = graphvizRender/* graphvizRender */.v;\n    /** 为 element 中的代码块进行高亮渲染 */\n    Vditor.highlightRender = highlightRender/* highlightRender */.s;\n    /** 对数学公式进行渲染 */\n    Vditor.mathRender = mathRender/* mathRender */.H;\n    /** 流程图/时序图/甘特图渲染 */\n    Vditor.mermaidRender = mermaidRender/* mermaidRender */.i;\n    /** 化学物质结构渲染 */\n    Vditor.SMILESRender = SMILESRender/* SMILESRender */.J;\n    /** 支持 markdown 的思维导图 */\n    Vditor.markmapRender = markmapRender/* markmapRender */.K;\n    /** flowchart.js 渲染 */\n    Vditor.flowchartRender = flowchartRender/* flowchartRender */.P;\n    /** 图表渲染 */\n    Vditor.chartRender = chartRender/* chartRender */.p;\n    /** 五线谱渲染 */\n    Vditor.abcRender = abcRender/* abcRender */.Q;\n    /** 脑图渲染 */\n    Vditor.mindmapRender = mindmapRender/* mindmapRender */.P;\n    /** plantuml渲染 */\n    Vditor.plantumlRender = plantumlRender/* plantumlRender */.B;\n    /** 大纲渲染 */\n    Vditor.outlineRender = outlineRender/* outlineRender */.k;\n    /** 为[特定链接](https://github.com/Vanessa219/vditor/issues/7)分别渲染为视频、音频、嵌入的 iframe */\n    Vditor.mediaRender = mediaRender/* mediaRender */.Y;\n    /** 对选中的文字进行阅读 */\n    Vditor.speechRender = speechRender;\n    /** 对图片进行懒加载 */\n    Vditor.lazyLoadImageRender = lazyLoadImageRender;\n    /** Markdown 文本转换为 HTML，该方法需使用[异步编程](https://ld246.com/article/1546828434083?r=Vaness) */\n    Vditor.md2html = md2html;\n    /** 页面 Markdown 文章渲染 */\n    Vditor.preview = previewRender;\n    /** 设置代码主题 */\n    Vditor.setCodeTheme = setCodeTheme/* setCodeTheme */.Y;\n    /** 设置内容主题 */\n    Vditor.setContentTheme = setContentTheme/* setContentTheme */.Z;\n    return Vditor;\n}());\n/* harmony default export */ const method = (Vditor);\n\n\n/***/ }),\n\n/***/ 145:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"H\": () => (/* binding */ _VDITOR_VERSION),\n/* harmony export */   \"g\": () => (/* binding */ Constants)\n/* harmony export */ });\nvar _VDITOR_VERSION = \"3.11.1\";\n\nvar Constants = /** @class */ (function () {\n    function Constants() {\n    }\n    Constants.ZWSP = \"\\u200b\";\n    Constants.DROP_EDITOR = \"application/editor\";\n    Constants.MOBILE_WIDTH = 520;\n    Constants.CLASS_MENU_DISABLED = \"vditor-menu--disabled\";\n    Constants.EDIT_TOOLBARS = [\"emoji\", \"headings\", \"bold\", \"italic\", \"strike\", \"link\", \"list\",\n        \"ordered-list\", \"outdent\", \"indent\", \"check\", \"line\", \"quote\", \"code\", \"inline-code\", \"insert-after\",\n        \"insert-before\", \"upload\", \"record\", \"table\"];\n    Constants.CODE_THEME = [\"a11y-dark\", \"agate\", \"an-old-hope\", \"androidstudio\",\n        \"arta\", \"atom-one-dark\", \"atom-one-dark-reasonable\", \"base16/3024\", \"base16/apathy\", \"base16/apprentice\", \"base16/ashes\", \"base16/atelier-cave\", \"base16/atelier-dune\",\n        \"base16/atelier-estuary\", \"base16/atelier-forest\", \"base16/atelier-heath\", \"base16/atelier-lakeside\", \"base16/atelier-plateau\", \"base16/atelier-savanna\", \"base16/atelier-seaside\", \"base16/atelier-sulphurpool\",\n        \"base16/atlas\", \"base16/bespin\", \"base16/black-metal\", \"base16/black-metal-bathory\", \"base16/black-metal-burzum\", \"base16/black-metal-dark-funeral\", \"base16/black-metal-gorgoroth\", \"base16/black-metal-immortal\", \"base16/black-metal-khold\", \"base16/black-metal-marduk\", \"base16/black-metal-mayhem\", \"base16/black-metal-nile\", \"base16/black-metal-venom\", \"base16/brewer\", \"base16/bright\", \"base16/brogrammer\",\n        \"base16/brush-trees-dark\", \"base16/chalk\", \"base16/circus\", \"base16/classic-dark\", \"base16/codeschool\", \"base16/colors\", \"base16/danqing\", \"base16/darcula\", \"base16/dark-violet\",\n        \"base16/darkmoss\", \"base16/darktooth\", \"base16/decaf\", \"base16/default-dark\", \"base16/dracula\", \"base16/edge-dark\", \"base16/eighties\", \"base16/embers\", \"base16/equilibrium-dark\",\n        \"base16/equilibrium-gray-dark\", \"base16/espresso\", \"base16/eva\", \"base16/eva-dim\", \"base16/flat\", \"base16/framer\", \"base16/gigavolt\", \"base16/google-dark\", \"base16/grayscale-dark\", \"base16/green-screen\", \"base16/gruvbox-dark-hard\", \"base16/gruvbox-dark-medium\",\n        \"base16/gruvbox-dark-pale\", \"base16/gruvbox-dark-soft\", \"base16/hardcore\", \"base16/harmonic16-dark\", \"base16/heetch-dark\", \"base16/helios\", \"base16/hopscotch\", \"base16/horizon-dark\", \"base16/humanoid-dark\", \"base16/ia-dark\", \"base16/icy-dark\", \"base16/ir-black\", \"base16/isotope\",\n        \"base16/kimber\", \"base16/london-tube\", \"base16/macintosh\", \"base16/marrakesh\", \"base16/materia\", \"base16/material\", \"base16/material-darker\", \"base16/material-palenight\", \"base16/material-vivid\",\n        \"base16/mellow-purple\", \"base16/mocha\", \"base16/monokai\", \"base16/nebula\", \"base16/nord\", \"base16/nova\", \"base16/ocean\", \"base16/oceanicnext\", \"base16/onedark\", \"base16/outrun-dark\",\n        \"base16/papercolor-dark\", \"base16/paraiso\", \"base16/pasque\", \"base16/phd\", \"base16/pico\", \"base16/pop\", \"base16/porple\", \"base16/qualia\", \"base16/railscasts\", \"base16/rebecca\",\n        \"base16/ros-pine\", \"base16/ros-pine-moon\", \"base16/sandcastle\", \"base16/seti-ui\", \"base16/silk-dark\", \"base16/snazzy\", \"base16/solar-flare\", \"base16/solarized-dark\", \"base16/spacemacs\", \"base16/summercamp\", \"base16/summerfruit-dark\",\n        \"base16/synth-midnight-terminal-dark\", \"base16/tango\", \"base16/tender\", \"base16/tomorrow-night\", \"base16/twilight\", \"base16/unikitty-dark\", \"base16/vulcan\",\n        \"base16/windows-10\", \"base16/windows-95\", \"base16/windows-high-contrast\", \"base16/windows-nt\", \"base16/woodland\", \"base16/xcode-dusk\", \"base16/zenburn\", \"codepen-embed\", \"dark\",\n        \"devibeans\", \"far\", \"felipec\", \"github-dark\", \"github-dark-dimmed\", \"gml\", \"gradient-dark\", \"hybrid\", \"ir-black\", \"isbl-editor-dark\", \"kimbie-dark\", \"lioshi\",\n        \"monokai\", \"monokai-sublime\", \"night-owl\", \"nnfx-dark\", \"nord\", \"obsidian\", \"panda-syntax-dark\", \"paraiso-dark\", \"pojoaque\", \"qtcreator-dark\", \"rainbow\", \"shades-of-purple\", \"srcery\", \"stackoverflow-dark\",\n        \"sunburst\", \"tomorrow-night-blue\", \"tomorrow-night-bright\", \"tokyo-night-dark\", \"vs2015\", \"xt256\",\n        \"ant-design\",\n        \"a11y-light\", \"arduino-light\", \"ascetic\", \"atom-one-light\", \"base16/atelier-cave-light\",\n        \"base16/atelier-dune-light\", \"base16/atelier-estuary-light\", \"base16/atelier-forest-light\", \"base16/atelier-heath-light\",\n        \"base16/atelier-lakeside-light\", \"base16/atelier-plateau-light\", \"base16/atelier-savanna-light\", \"base16/atelier-seaside-light\", \"base16/atelier-sulphurpool-light\", \"base16/brush-trees\",\n        \"base16/classic-light\", \"base16/cupcake\", \"base16/cupertino\", \"base16/default-light\", \"base16/dirtysea\", \"base16/edge-light\", \"base16/equilibrium-gray-light\", \"base16/equilibrium-light\",\n        \"base16/fruit-soda\", \"base16/github\", \"base16/google-light\", \"base16/grayscale-light\", \"base16/gruvbox-light-hard\", \"base16/gruvbox-light-medium\", \"base16/gruvbox-light-soft\",\n        \"base16/harmonic16-light\", \"base16/heetch-light\", \"base16/humanoid-light\", \"base16/horizon-light\", \"base16/ia-light\", \"base16/material-lighter\", \"base16/mexico-light\",\n        \"base16/one-light\", \"base16/papercolor-light\", \"base16/ros-pine-dawn\", \"base16/sagelight\", \"base16/shapeshifter\",\n        \"base16/silk-light\", \"base16/solar-flare-light\", \"base16/solarized-light\", \"base16/summerfruit-light\", \"base16/synth-midnight-terminal-light\", \"base16/tomorrow\",\n        \"base16/unikitty-light\", \"base16/windows-10-light\", \"base16/windows-95-light\", \"base16/windows-high-contrast-light\", \"brown-paper\", \"base16/windows-nt-light\",\n        \"color-brewer\", \"docco\", \"foundation\", \"github\", \"googlecode\", \"gradient-light\", \"grayscale\", \"idea\", \"intellij-light\", \"isbl-editor-light\", \"kimbie-light\",\n        \"lightfair\", \"magula\", \"mono-blue\", \"nnfx-light\", \"panda-syntax-light\", \"paraiso-light\", \"purebasic\", \"qtcreator-light\", \"routeros\", \"school-book\",\n        \"stackoverflow-light\", \"tokyo-night-light\", \"vs\", \"xcode\", \"default\"];\n    Constants.ALIAS_CODE_LANGUAGES = [\n        // 自定义\n        \"abc\", \"plantuml\", \"mermaid\", \"flowchart\", \"echarts\", \"mindmap\", \"graphviz\", \"math\", \"markmap\", \"smiles\",\n        // 别名\n        \"js\", \"ts\", \"html\", \"toml\", \"c#\", \"bat\"\n    ];\n    Constants.CDN = \"https://unpkg.com/vditor@\".concat(\"3.11.1\");\n    Constants.MARKDOWN_OPTIONS = {\n        autoSpace: false,\n        gfmAutoLink: true,\n        codeBlockPreview: true,\n        fixTermTypo: false,\n        footnotes: true,\n        linkBase: \"\",\n        linkPrefix: \"\",\n        listStyle: false,\n        mark: false,\n        mathBlockPreview: true,\n        paragraphBeginningSpace: false,\n        sanitize: true,\n        toc: false,\n    };\n    Constants.HLJS_OPTIONS = {\n        enable: true,\n        lineNumber: false,\n        defaultLang: \"\",\n        style: \"github\",\n    };\n    Constants.MATH_OPTIONS = {\n        engine: \"KaTeX\",\n        inlineDigit: false,\n        macros: {},\n    };\n    Constants.THEME_OPTIONS = {\n        current: \"light\",\n        list: {\n            \"ant-design\": \"Ant Design\",\n            \"dark\": \"Dark\",\n            \"light\": \"Light\",\n            \"wechat\": \"WeChat\",\n        },\n        path: \"\".concat(Constants.CDN, \"/dist/css/content-theme\"),\n    };\n    return Constants;\n}());\n\n\n\n/***/ }),\n\n/***/ 825:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"J\": () => (/* binding */ SMILESRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(413);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(840);\n/* harmony import */ var _util_function__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(494);\n\n\n\n\nvar SMILESRender = function (element, cdn, theme) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var SMILESElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.SMILESRenderAdapter.getElements(element);\n    if (SMILESElements.length > 0) {\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(\"\".concat(cdn, \"/dist/js/smiles-drawer/smiles-drawer.min.js?v=2.1.7\"), \"vditorAbcjsScript\").then(function () {\n            var sd = new SmiDrawer({}, {});\n            SMILESElements.forEach(function (item) {\n                var code = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.SMILESRenderAdapter.getCode(item).trim();\n                if (item.getAttribute(\"data-processed\") === \"true\" || code.trim() === \"\") {\n                    return;\n                }\n                var id = \"smiles\" + (0,_util_function__WEBPACK_IMPORTED_MODULE_3__/* .genUUID */ .Wb)();\n                item.innerHTML = \"<svg id=\\\"\".concat(id, \"\\\"></svg>\");\n                sd.draw(code, '#' + id, theme === \"dark\" ? \"dark\" : undefined);\n                item.setAttribute(\"data-processed\", \"true\");\n            });\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 135:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Q\": () => (/* binding */ abcRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(413);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(840);\n\n\n\nvar abcRender = function (element, cdn) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var abcElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.abcRenderAdapter.getElements(element);\n    if (abcElements.length > 0) {\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(\"\".concat(cdn, \"/dist/js/abcjs/abcjs_basic.min.js\"), \"vditorAbcjsScript\").then(function () {\n            abcElements.forEach(function (item) {\n                if (item.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    item.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                if (item.getAttribute(\"data-processed\") === \"true\") {\n                    return;\n                }\n                ABCJS.renderAbc(item, _adapterRender__WEBPACK_IMPORTED_MODULE_1__.abcRenderAdapter.getCode(item).trim());\n                item.style.overflowX = \"auto\";\n                item.setAttribute(\"data-processed\", \"true\");\n            });\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 840:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"mathRenderAdapter\": () => (/* binding */ mathRenderAdapter),\n/* harmony export */   \"SMILESRenderAdapter\": () => (/* binding */ SMILESRenderAdapter),\n/* harmony export */   \"mermaidRenderAdapter\": () => (/* binding */ mermaidRenderAdapter),\n/* harmony export */   \"markmapRenderAdapter\": () => (/* binding */ markmapRenderAdapter),\n/* harmony export */   \"mindmapRenderAdapter\": () => (/* binding */ mindmapRenderAdapter),\n/* harmony export */   \"chartRenderAdapter\": () => (/* binding */ chartRenderAdapter),\n/* harmony export */   \"abcRenderAdapter\": () => (/* binding */ abcRenderAdapter),\n/* harmony export */   \"graphvizRenderAdapter\": () => (/* binding */ graphvizRenderAdapter),\n/* harmony export */   \"flowchartRenderAdapter\": () => (/* binding */ flowchartRenderAdapter),\n/* harmony export */   \"plantumlRenderAdapter\": () => (/* binding */ plantumlRenderAdapter)\n/* harmony export */ });\nvar mathRenderAdapter = {\n    getCode: function (el) { return el.textContent; },\n    getElements: function (element) { return element.querySelectorAll(\".language-math\"); },\n};\nvar SMILESRenderAdapter = {\n    getCode: function (el) { return el.textContent; },\n    getElements: function (element) { return element.querySelectorAll(\".language-smiles\"); },\n};\nvar mermaidRenderAdapter = {\n    /** 不仅要返回code，并且需要将 code 设置为 el 的 innerHTML */\n    getCode: function (el) { return el.textContent; },\n    getElements: function (element) { return element.querySelectorAll(\".language-mermaid\"); },\n};\nvar markmapRenderAdapter = {\n    getCode: function (el) { return el.textContent; },\n    getElements: function (element) { return element.querySelectorAll(\".language-markmap\"); },\n};\nvar mindmapRenderAdapter = {\n    getCode: function (el) { return el.getAttribute(\"data-code\"); },\n    getElements: function (el) { return el.querySelectorAll(\".language-mindmap\"); },\n};\nvar chartRenderAdapter = {\n    getCode: function (el) { return el.innerText; },\n    getElements: function (el) { return el.querySelectorAll(\".language-echarts\"); },\n};\nvar abcRenderAdapter = {\n    getCode: function (el) { return el.textContent; },\n    getElements: function (el) { return el.querySelectorAll(\".language-abc\"); },\n};\nvar graphvizRenderAdapter = {\n    getCode: function (el) { return el.textContent; },\n    getElements: function (el) { return el.querySelectorAll(\".language-graphviz\"); },\n};\nvar flowchartRenderAdapter = {\n    getCode: function (el) { return el.textContent; },\n    getElements: function (el) { return el.querySelectorAll(\".language-flowchart\"); },\n};\nvar plantumlRenderAdapter = {\n    getCode: function (el) { return el.textContent; },\n    getElements: function (el) { return el.querySelectorAll(\".language-plantuml\"); },\n};\n\n\n/***/ }),\n\n/***/ 775:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"p\": () => (/* binding */ chartRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(413);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(840);\n/* harmony import */ var _util_function__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(494);\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\nvar chartRender = function (element, cdn, theme) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var echartsElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.chartRenderAdapter.getElements(element);\n    if (echartsElements.length > 0) {\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(\"\".concat(cdn, \"/dist/js/echarts/echarts.min.js?v=5.5.1\"), \"vditorEchartsScript\").then(function () {\n            echartsElements.forEach(function (e) { return __awaiter(void 0, void 0, void 0, function () {\n                var text, option, error_1;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                                e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                                return [2 /*return*/];\n                            }\n                            text = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.chartRenderAdapter.getCode(e).trim();\n                            if (!text) {\n                                return [2 /*return*/];\n                            }\n                            _a.label = 1;\n                        case 1:\n                            _a.trys.push([1, 3, , 4]);\n                            if (e.getAttribute(\"data-processed\") === \"true\") {\n                                return [2 /*return*/];\n                            }\n                            return [4 /*yield*/, (0,_util_function__WEBPACK_IMPORTED_MODULE_3__/* .looseJsonParse */ .Qf)(text)];\n                        case 2:\n                            option = _a.sent();\n                            echarts.init(e, theme === \"dark\" ? \"dark\" : undefined).setOption(option);\n                            e.setAttribute(\"data-processed\", \"true\");\n                            return [3 /*break*/, 4];\n                        case 3:\n                            error_1 = _a.sent();\n                            e.className = \"vditor-reset--error\";\n                            e.innerHTML = \"echarts render error: <br>\".concat(error_1);\n                            return [3 /*break*/, 4];\n                        case 4: return [2 /*return*/];\n                    }\n                });\n            }); });\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 428:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"O\": () => (/* binding */ codeRender)\n/* harmony export */ });\n/* harmony import */ var _util_code160to32__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(105);\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);\n\n\nvar codeRender = function (element, option) {\n    Array.from(element.querySelectorAll(\"pre > code\")).filter(function (e, index) {\n        if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n            e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n            return false;\n        }\n        if (e.classList.contains(\"language-mermaid\") || e.classList.contains(\"language-flowchart\") ||\n            e.classList.contains(\"language-echarts\") || e.classList.contains(\"language-mindmap\") ||\n            e.classList.contains(\"language-plantuml\") || e.classList.contains(\"language-markmap\") ||\n            e.classList.contains(\"language-abc\") || e.classList.contains(\"language-graphviz\") ||\n            e.classList.contains(\"language-math\") || e.classList.contains(\"language-smiles\")) {\n            return false;\n        }\n        if (e.style.maxHeight.indexOf(\"px\") > -1) {\n            return false;\n        }\n        // 避免预览区在渲染后由于代码块过多产生性能问题 https://github.com/b3log/vditor/issues/67\n        if (element.classList.contains(\"vditor-preview\") && index > 5) {\n            return false;\n        }\n        return true;\n    }).forEach(function (e) {\n        var _a, _b, _c;\n        var codeText = e.innerText;\n        if (e.classList.contains(\"highlight-chroma\")) {\n            var codeElement = e.cloneNode(true);\n            codeElement.querySelectorAll(\".highlight-ln\").forEach(function (item) {\n                item.remove();\n            });\n            codeText = codeElement.innerText;\n        }\n        else if (codeText.endsWith(\"\\n\")) {\n            codeText = codeText.substr(0, codeText.length - 1);\n        }\n        var iconHTML = '<svg><use xlink:href=\"#vditor-icon-copy\"></use></svg>';\n        if (!document.getElementById(\"vditorIconScript\")) {\n            iconHTML = '<svg viewBox=\"0 0 32 32\"><path d=\"M22.545-0h-17.455c-1.6 0-2.909 1.309-2.909 2.909v20.364h2.909v-20.364h17.455v-2.909zM26.909 5.818h-16c-1.6 0-2.909 1.309-2.909 2.909v20.364c0 1.6 1.309 2.909 2.909 2.909h16c1.6 0 2.909-1.309 2.909-2.909v-20.364c0-1.6-1.309-2.909-2.909-2.909zM26.909 29.091h-16v-20.364h16v20.364z\"></path></svg>';\n        }\n        var divElement = document.createElement(\"div\");\n        divElement.className = \"vditor-copy\";\n        divElement.innerHTML = \"<span aria-label=\\\"\".concat(((_a = window.VditorI18n) === null || _a === void 0 ? void 0 : _a.copy) || \"复制\", \"\\\"\\nonmouseover=\\\"this.setAttribute('aria-label', '\").concat(((_b = window.VditorI18n) === null || _b === void 0 ? void 0 : _b.copy) || \"复制\", \"')\\\"\\nclass=\\\"vditor-tooltipped vditor-tooltipped__w\\\"\\nonclick=\\\"event.stopPropagation();this.previousElementSibling.select();document.execCommand('copy');this.setAttribute('aria-label', '\").concat(((_c = window.VditorI18n) === null || _c === void 0 ? void 0 : _c.copied) || \"已复制\", \"');this.previousElementSibling.blur()\\\">\").concat(iconHTML, \"</span>\");\n        var textarea = document.createElement(\"textarea\");\n        textarea.value = (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_1__/* .code160to32 */ .X)(codeText);\n        divElement.insertAdjacentElement(\"afterbegin\", textarea);\n        if (option && option.renderMenu) {\n            option.renderMenu(e, divElement);\n        }\n        e.before(divElement);\n        e.style.maxHeight = (window.outerHeight - 40) + \"px\";\n        // https://github.com/Vanessa219/vditor/issues/1356\n        e.insertAdjacentHTML(\"afterend\", \"<span style=\\\"position: absolute\\\">\".concat(_constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.ZWSP */ .g.ZWSP, \"</span>\"));\n    });\n};\n\n\n/***/ }),\n\n/***/ 325:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"P\": () => (/* binding */ flowchartRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(413);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(840);\n\n\n\nvar flowchartRender = function (element, cdn) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var flowchartElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.flowchartRenderAdapter.getElements(element);\n    if (flowchartElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(\"\".concat(cdn, \"/dist/js/flowchart.js/flowchart.min.js\"), \"vditorFlowchartScript\").then(function () {\n        flowchartElements.forEach(function (item) {\n            if (item.getAttribute(\"data-processed\") === \"true\") {\n                return;\n            }\n            var flowchartObj = flowchart.parse(_adapterRender__WEBPACK_IMPORTED_MODULE_1__.flowchartRenderAdapter.getCode(item));\n            item.innerHTML = \"\";\n            flowchartObj.drawSVG(item);\n            item.setAttribute(\"data-processed\", \"true\");\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 483:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"v\": () => (/* binding */ graphvizRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(413);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(840);\n\n\n\nvar graphvizRender = function (element, cdn) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var graphvizElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.graphvizRenderAdapter.getElements(element);\n    if (graphvizElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(\"\".concat(cdn, \"/dist/js/graphviz/viz.js\"), \"vditorGraphVizScript\").then(function () {\n        graphvizElements.forEach(function (e) {\n            var code = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.graphvizRenderAdapter.getCode(e);\n            if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                return;\n            }\n            if (e.getAttribute(\"data-processed\") === \"true\" || code.trim() === \"\") {\n                return;\n            }\n            try {\n                var blob = new Blob([\"importScripts('\".concat(document.getElementById(\"vditorGraphVizScript\").src.replace(\"viz.js\", \"full.render.js\"), \"');\")], { type: \"application/javascript\" });\n                var url = window.URL || window.webkitURL;\n                var blobUrl = url.createObjectURL(blob);\n                var worker = new Worker(blobUrl);\n                new Viz({ worker: worker })\n                    .renderSVGElement(code).then(function (result) {\n                    e.innerHTML = result.outerHTML;\n                }).catch(function (error) {\n                    e.innerHTML = \"graphviz render error: <br>\".concat(error);\n                    e.className = \"vditor-reset--error\";\n                });\n            }\n            catch (e) {\n                console.error(\"graphviz error\", e);\n            }\n            e.setAttribute(\"data-processed\", \"true\");\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 999:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"s\": () => (/* binding */ highlightRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(413);\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(290);\n\n\n\nvar highlightRender = function (hljsOption, element, cdn) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var style = hljsOption.style;\n    if (!_constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CODE_THEME.includes */ .g.CODE_THEME.includes(style)) {\n        style = \"github\";\n    }\n    var vditorHljsStyle = document.getElementById(\"vditorHljsStyle\");\n    var href = \"\".concat(cdn, \"/dist/js/highlight.js/styles/\").concat(style, \".min.css\");\n    if (vditorHljsStyle && vditorHljsStyle.getAttribute('href') !== href) {\n        vditorHljsStyle.remove();\n    }\n    (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_1__/* .addStyle */ .c)(\"\".concat(cdn, \"/dist/js/highlight.js/styles/\").concat(style, \".min.css\"), \"vditorHljsStyle\");\n    if (hljsOption.enable === false) {\n        return;\n    }\n    var codes = element.querySelectorAll(\"pre > code\");\n    if (codes.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(\"\".concat(cdn, \"/dist/js/highlight.js/highlight.min.js?v=11.7.0\"), \"vditorHljsScript\").then(function () {\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(\"\".concat(cdn, \"/dist/js/highlight.js/third-languages.js?v=1.0.1\"), \"vditorHljsThirdScript\").then(function () {\n            element.querySelectorAll(\"pre > code\").forEach(function (block) {\n                // ir & wysiwyg 区域不渲染\n                if (block.parentElement.classList.contains(\"vditor-ir__marker--pre\") ||\n                    block.parentElement.classList.contains(\"vditor-wysiwyg__pre\")) {\n                    return;\n                }\n                if (block.classList.contains(\"language-mermaid\") || block.classList.contains(\"language-flowchart\") ||\n                    block.classList.contains(\"language-echarts\") || block.classList.contains(\"language-mindmap\") ||\n                    block.classList.contains(\"language-plantuml\") || block.classList.contains(\"language-smiles\") ||\n                    block.classList.contains(\"language-abc\") || block.classList.contains(\"language-graphviz\") ||\n                    block.classList.contains(\"language-math\")) {\n                    return;\n                }\n                if (hljsOption.defaultLang !== \"\" && block.className.indexOf(\"language-\") === -1) {\n                    block.classList.add(\"language-\" + hljsOption.defaultLang);\n                }\n                var language = block.className.replace(\"language-\", \"\");\n                if (!window.hljs.getLanguage(language)) {\n                    language = \"plaintext\";\n                }\n                block.innerHTML = window.hljs.highlight(block.textContent, {\n                    language: language,\n                    ignoreIllegals: true\n                }).value;\n                block.classList.add(\"hljs\");\n                if (!hljsOption.lineNumber) {\n                    return;\n                }\n                block.classList.add(\"vditor-linenumber\");\n                var linenNumberTemp = block.querySelector(\".vditor-linenumber__temp\");\n                if (!linenNumberTemp) {\n                    linenNumberTemp = document.createElement(\"div\");\n                    linenNumberTemp.className = \"vditor-linenumber__temp\";\n                    block.insertAdjacentElement(\"beforeend\", linenNumberTemp);\n                }\n                var whiteSpace = getComputedStyle(block).whiteSpace;\n                var isSoftWrap = false;\n                if (whiteSpace === \"pre-wrap\" || whiteSpace === \"pre-line\") {\n                    isSoftWrap = true;\n                }\n                var lineNumberHTML = \"\";\n                var lineList = block.textContent.split(/\\r\\n|\\r|\\n/g);\n                lineList.pop();\n                lineList.map(function (line) {\n                    var lineHeight = \"\";\n                    if (isSoftWrap) {\n                        linenNumberTemp.textContent = line || \"\\n\";\n                        lineHeight = \" style=\\\"height:\".concat(linenNumberTemp.getBoundingClientRect().height, \"px\\\"\");\n                    }\n                    lineNumberHTML += \"<span\".concat(lineHeight, \"></span>\");\n                });\n                linenNumberTemp.style.display = \"none\";\n                lineNumberHTML = \"<span class=\\\"vditor-linenumber__rows\\\">\".concat(lineNumberHTML, \"</span>\");\n                block.insertAdjacentHTML(\"beforeend\", lineNumberHTML);\n            });\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 11:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"K\": () => (/* binding */ markmapRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(413);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(840);\n\n\n\nvar enabled = {};\nvar transform = function (transformer, content) {\n    var result = transformer.transform(content);\n    var keys = Object.keys(result.features).filter(function (key) { return !enabled[key]; });\n    keys.forEach(function (key) {\n        enabled[key] = true;\n    });\n    var _a = transformer.getAssets(keys), styles = _a.styles, scripts = _a.scripts;\n    var markmap = window.markmap;\n    if (styles)\n        markmap.loadCSS(styles);\n    if (scripts)\n        markmap.loadJS(scripts);\n    return result;\n};\nvar init = function (el, code) {\n    var _a = window.markmap, Transformer = _a.Transformer, Markmap = _a.Markmap, deriveOptions = _a.deriveOptions, globalCSS = _a.globalCSS;\n    var transformer = new Transformer();\n    el.innerHTML = '<svg style=\"width:100%\"></svg>';\n    var svg = el.firstChild;\n    var mm = Markmap.create(svg, null);\n    var _b = transform(transformer, code), root = _b.root, frontmatter = _b.frontmatter;\n    var markmapOptions = frontmatter === null || frontmatter === void 0 ? void 0 : frontmatter.markmap;\n    var frontmatterOptions = deriveOptions(markmapOptions);\n    mm.setData(root, frontmatterOptions);\n    mm.fit();\n};\nvar markmapRender = function (element, cdn) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var markmapElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.markmapRenderAdapter.getElements(element);\n    if (markmapElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(\"\".concat(cdn, \"/dist/js/markmap/markmap.min.js\"), \"vditorMarkerScript\").then(function () {\n        markmapElements.forEach(function (item) {\n            var code = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.markmapRenderAdapter.getCode(item);\n            if (item.getAttribute(\"data-processed\") === \"true\" || code.trim() === \"\") {\n                return;\n            }\n            var render = document.createElement(\"div\");\n            render.className = \"language-markmap\";\n            item.parentNode.appendChild(render);\n            init(render, code);\n            if (item.parentNode.childNodes[0].nodeName == \"CODE\") {\n                item.parentNode.removeChild(item.parentNode.childNodes[0]);\n            }\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 472:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"H\": () => (/* binding */ mathRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(413);\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(290);\n/* harmony import */ var _util_code160to32__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(105);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(840);\n\n\n\n\n\nvar mathRender = function (element, options) {\n    if (element === void 0) { element = document; }\n    var mathElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mathRenderAdapter.getElements(element);\n    if (mathElements.length === 0) {\n        return;\n    }\n    var defaultOptions = {\n        cdn: _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN,\n        math: {\n            engine: \"KaTeX\",\n            inlineDigit: false,\n            macros: {},\n        },\n    };\n    if (options && options.math) {\n        options.math =\n            Object.assign({}, defaultOptions.math, options.math);\n    }\n    options = Object.assign({}, defaultOptions, options);\n    if (options.math.engine === \"KaTeX\") {\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_2__/* .addStyle */ .c)(\"\".concat(options.cdn, \"/dist/js/katex/katex.min.css?v=0.16.9\"), \"vditorKatexStyle\");\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_3__/* .addScript */ .G)(\"\".concat(options.cdn, \"/dist/js/katex/katex.min.js?v=0.16.9\"), \"vditorKatexScript\").then(function () {\n            (0,_util_addScript__WEBPACK_IMPORTED_MODULE_3__/* .addScript */ .G)(\"\".concat(options.cdn, \"/dist/js/katex/mhchem.min.js?v=0.16.9\"), \"vditorKatexChemScript\").then(function () {\n                mathElements.forEach(function (mathElement) {\n                    if (mathElement.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                        mathElement.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                        return;\n                    }\n                    if (mathElement.getAttribute(\"data-math\")) {\n                        return;\n                    }\n                    var math = (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_4__/* .code160to32 */ .X)(_adapterRender__WEBPACK_IMPORTED_MODULE_1__.mathRenderAdapter.getCode(mathElement));\n                    mathElement.setAttribute(\"data-math\", math);\n                    try {\n                        mathElement.innerHTML = katex.renderToString(math, {\n                            displayMode: mathElement.tagName === \"DIV\",\n                            output: \"html\",\n                            macros: options.math.macros,\n                        });\n                    }\n                    catch (e) {\n                        mathElement.innerHTML = e.message;\n                        mathElement.className = \"language-math vditor-reset--error\";\n                    }\n                    mathElement.addEventListener(\"copy\", function (event) {\n                        event.stopPropagation();\n                        event.preventDefault();\n                        var vditorMathElement = event.currentTarget.closest(\".language-math\");\n                        event.clipboardData.setData(\"text/html\", vditorMathElement.innerHTML);\n                        event.clipboardData.setData(\"text/plain\", vditorMathElement.getAttribute(\"data-math\"));\n                    });\n                });\n            });\n        });\n    }\n    else if (options.math.engine === \"MathJax\") {\n        var chainAsync_1 = function (fns) {\n            if (fns.length === 0) {\n                return;\n            }\n            var curr = 0;\n            var last = fns[fns.length - 1];\n            var next = function () {\n                var fn = fns[curr++];\n                fn === last ? fn() : fn(next);\n            };\n            next();\n        };\n        if (!window.MathJax) {\n            window.MathJax = {\n                loader: {\n                    paths: { mathjax: \"\".concat(options.cdn, \"/dist/js/mathjax\") },\n                },\n                startup: {\n                    typeset: false,\n                },\n                tex: {\n                    macros: options.math.macros,\n                },\n            };\n            // https://github.com/Vanessa219/vditor/issues/1453\n            Object.assign(window.MathJax, options.math.mathJaxOptions);\n        }\n        // 循环加载会抛异常\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_3__/* .addScriptSync */ .J)(\"\".concat(options.cdn, \"/dist/js/mathjax/tex-svg-full.js\"), \"protyleMathJaxScript\");\n        var renderMath_1 = function (mathElement, next) {\n            var math = (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_4__/* .code160to32 */ .X)(mathElement.textContent).trim();\n            var mathOptions = window.MathJax.getMetricsFor(mathElement);\n            mathOptions.display = mathElement.tagName === \"DIV\";\n            window.MathJax.tex2svgPromise(math, mathOptions).then(function (node) {\n                mathElement.innerHTML = \"\";\n                mathElement.setAttribute(\"data-math\", math);\n                mathElement.append(node);\n                window.MathJax.startup.document.clear();\n                window.MathJax.startup.document.updateDocument();\n                var errorTextElement = node.querySelector('[data-mml-node=\"merror\"]');\n                if (errorTextElement && errorTextElement.textContent.trim() !== \"\") {\n                    mathElement.innerHTML = errorTextElement.textContent.trim();\n                    mathElement.className = \"vditor-reset--error\";\n                }\n                if (next) {\n                    next();\n                }\n            });\n        };\n        window.MathJax.startup.promise.then(function () {\n            var chains = [];\n            var _loop_1 = function (i) {\n                var mathElement = mathElements[i];\n                if (!mathElement.parentElement.classList.contains(\"vditor-wysiwyg__pre\") &&\n                    !mathElement.parentElement.classList.contains(\"vditor-ir__marker--pre\") &&\n                    !mathElement.getAttribute(\"data-math\") && (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_4__/* .code160to32 */ .X)(mathElement.textContent).trim()) {\n                    chains.push(function (next) {\n                        if (i === mathElements.length - 1) {\n                            renderMath_1(mathElement);\n                        }\n                        else {\n                            renderMath_1(mathElement, next);\n                        }\n                    });\n                }\n            };\n            for (var i = 0; i < mathElements.length; i++) {\n                _loop_1(i);\n            }\n            chainAsync_1(chains);\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 280:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Y\": () => (/* binding */ mediaRender)\n/* harmony export */ });\n/* harmony import */ var _util_function__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(494);\n\nvar videoRender = function (element, url) {\n    element.insertAdjacentHTML(\"afterend\", \"<video controls=\\\"controls\\\" src=\\\"\".concat(url, \"\\\"></video>\"));\n    element.remove();\n};\nvar audioRender = function (element, url) {\n    element.insertAdjacentHTML(\"afterend\", \"<audio controls=\\\"controls\\\" src=\\\"\".concat(url, \"\\\"></audio>\"));\n    element.remove();\n};\nvar iframeRender = function (element, url) {\n    var youtubeMatch = url.match(/\\/\\/(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))([\\w|-]{11})(?:(?:[\\?&]t=)(\\S+))?/);\n    var youkuMatch = url.match(/\\/\\/v\\.youku\\.com\\/v_show\\/id_(\\w+)=*\\.html/);\n    var qqMatch = url.match(/\\/\\/v\\.qq\\.com\\/x\\/cover\\/.*\\/([^\\/]+)\\.html\\??.*/);\n    var coubMatch = url.match(/(?:www\\.|\\/\\/)coub\\.com\\/view\\/(\\w+)/);\n    var facebookMatch = url.match(/(?:www\\.|\\/\\/)facebook\\.com\\/([^\\/]+)\\/videos\\/([0-9]+)/);\n    var dailymotionMatch = url.match(/.+dailymotion.com\\/(video|hub)\\/(\\w+)\\?/);\n    var bilibiliMatch = url.match(/(?:www\\.|\\/\\/)bilibili\\.com\\/video\\/(\\w+)/);\n    var tedMatch = url.match(/(?:www\\.|\\/\\/)ted\\.com\\/talks\\/(\\w+)/);\n    if (youtubeMatch && youtubeMatch[1].length === 11) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"//www.youtube.com/embed/\".concat(youtubeMatch[1] +\n            (youtubeMatch[2] ? \"?start=\" + youtubeMatch[2] : \"\"), \"\\\"></iframe>\"));\n        element.remove();\n    }\n    else if (youkuMatch && youkuMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"//player.youku.com/embed/\".concat(youkuMatch[1], \"\\\"></iframe>\"));\n        element.remove();\n    }\n    else if (qqMatch && qqMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"https://v.qq.com/txp/iframe/player.html?vid=\".concat(qqMatch[1], \"\\\"></iframe>\"));\n        element.remove();\n    }\n    else if (coubMatch && coubMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"//coub.com/embed/\".concat(coubMatch[1], \"?muted=false&autostart=false&originalSize=true&startWithHD=true\\\"></iframe>\"));\n        element.remove();\n    }\n    else if (facebookMatch && facebookMatch[0]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"https://www.facebook.com/plugins/video.php?href=\".concat(encodeURIComponent(facebookMatch[0]), \"\\\"></iframe>\"));\n        element.remove();\n    }\n    else if (dailymotionMatch && dailymotionMatch[2]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"https://www.dailymotion.com/embed/video/\".concat(dailymotionMatch[2], \"\\\"></iframe>\"));\n        element.remove();\n    }\n    else if (url.indexOf(\"bilibili.com\") > -1 && (url.indexOf(\"bvid=\") > -1 || (bilibiliMatch && bilibiliMatch[1]))) {\n        var params_1 = {\n            bvid: (0,_util_function__WEBPACK_IMPORTED_MODULE_0__/* .getSearch */ .on)(\"bvid\", url) || (bilibiliMatch && bilibiliMatch[1]),\n            page: \"1\",\n            high_quality: \"1\",\n            as_wide: \"1\",\n            allowfullscreen: \"true\",\n            autoplay: \"0\"\n        };\n        new URL(url.startsWith(\"http\") ? url : \"https:\" + url).search.split(\"&\").forEach(function (item, index) {\n            if (!item) {\n                return;\n            }\n            if (index === 0) {\n                item = item.substr(1);\n            }\n            var keyValue = item.split(\"=\");\n            params_1[keyValue[0]] = keyValue[1];\n        });\n        var src_1 = \"https://player.bilibili.com/player.html?\";\n        var keys_1 = Object.keys(params_1);\n        keys_1.forEach(function (key, index) {\n            src_1 += \"\".concat(key, \"=\").concat(params_1[key]);\n            if (index < keys_1.length - 1) {\n                src_1 += \"&\";\n            }\n        });\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"\".concat(src_1, \"\\\"></iframe>\"));\n        element.remove();\n    }\n    else if (tedMatch && tedMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"//embed.ted.com/talks/\".concat(tedMatch[1], \"\\\"></iframe>\"));\n        element.remove();\n    }\n};\nvar mediaRender = function (element) {\n    if (!element) {\n        return;\n    }\n    element.querySelectorAll(\"a\").forEach(function (aElement) {\n        var url = aElement.getAttribute(\"href\");\n        if (!url) {\n            return;\n        }\n        if (url.match(/^.+.(mp4|m4v|ogg|ogv|webm)$/)) {\n            videoRender(aElement, url);\n        }\n        else if (url.match(/^.+.(mp3|wav|flac)$/)) {\n            audioRender(aElement, url);\n        }\n        else {\n            iframeRender(aElement, url);\n        }\n    });\n};\n\n\n/***/ }),\n\n/***/ 637:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"i\": () => (/* binding */ mermaidRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(413);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(840);\n/* harmony import */ var _util_function__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(494);\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\nvar mermaidRender = function (element, cdn, theme) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var mermaidElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mermaidRenderAdapter.getElements(element);\n    if (mermaidElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(\"\".concat(cdn, \"/dist/js/mermaid/mermaid.min.js?v=11.6.0\"), \"vditorMermaidScript\").then(function () {\n        var config = {\n            securityLevel: \"loose\",\n            altFontFamily: \"sans-serif\",\n            fontFamily: \"sans-serif\",\n            startOnLoad: false,\n            flowchart: {\n                htmlLabels: true,\n                useMaxWidth: !0\n            },\n            sequence: {\n                useMaxWidth: true,\n                diagramMarginX: 8,\n                diagramMarginY: 8,\n                boxMargin: 8,\n                showSequenceNumbers: true // Mermaid 时序图增加序号 https://github.com/siyuan-note/siyuan/pull/6992 https://mermaid.js.org/syntax/sequenceDiagram.html#sequencenumbers\n            },\n            gantt: {\n                leftPadding: 75,\n                rightPadding: 20\n            }\n        };\n        if (theme === \"dark\") {\n            config.theme = \"dark\";\n        }\n        mermaid.initialize(config);\n        mermaidElements.forEach(function (item) { return __awaiter(void 0, void 0, void 0, function () {\n            var code, id, mermaidData, e_1, errorElement;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        code = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mermaidRenderAdapter.getCode(item);\n                        if (item.getAttribute(\"data-processed\") === \"true\" || code.trim() === \"\") {\n                            return [2 /*return*/];\n                        }\n                        id = \"mermaid\" + (0,_util_function__WEBPACK_IMPORTED_MODULE_3__/* .genUUID */ .Wb)();\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, mermaid.render(id, item.textContent)];\n                    case 2:\n                        mermaidData = _a.sent();\n                        item.innerHTML = mermaidData.svg;\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_1 = _a.sent();\n                        errorElement = document.querySelector(\"#\" + id);\n                        item.innerHTML = \"\".concat(errorElement.outerHTML, \"<br>\\n<div style=\\\"text-align: left\\\"><small>\").concat(e_1.message.replace(/\\n/, \"<br>\"), \"</small></div>\");\n                        errorElement.parentElement.remove();\n                        return [3 /*break*/, 4];\n                    case 4:\n                        item.setAttribute(\"data-processed\", \"true\");\n                        return [2 /*return*/];\n                }\n            });\n        }); });\n    });\n};\n\n\n/***/ }),\n\n/***/ 194:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"P\": () => (/* binding */ mindmapRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(413);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(840);\n\n\n\nvar mindmapRender = function (element, cdn, theme) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var mindmapElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mindmapRenderAdapter.getElements(element);\n    if (mindmapElements.length > 0) {\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(\"\".concat(cdn, \"/dist/js/echarts/echarts.min.js?v=5.5.1\"), \"vditorEchartsScript\").then(function () {\n            mindmapElements.forEach(function (e) {\n                if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                var text = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mindmapRenderAdapter.getCode(e);\n                if (!text) {\n                    return;\n                }\n                try {\n                    if (e.getAttribute(\"data-processed\") === \"true\") {\n                        return;\n                    }\n                    echarts.init(e, theme === \"dark\" ? \"dark\" : undefined).setOption({\n                        series: [\n                            {\n                                data: [JSON.parse(decodeURIComponent(text))],\n                                initialTreeDepth: -1,\n                                itemStyle: {\n                                    borderWidth: 0,\n                                    color: \"#4285f4\",\n                                },\n                                label: {\n                                    backgroundColor: \"#f6f8fa\",\n                                    borderColor: \"#d1d5da\",\n                                    borderRadius: 5,\n                                    borderWidth: 0.5,\n                                    color: \"#586069\",\n                                    lineHeight: 20,\n                                    offset: [-5, 0],\n                                    padding: [0, 5],\n                                    position: \"insideRight\",\n                                },\n                                lineStyle: {\n                                    color: \"#d1d5da\",\n                                    width: 1,\n                                },\n                                roam: true,\n                                symbol: function (value, params) {\n                                    var _a;\n                                    if ((_a = params === null || params === void 0 ? void 0 : params.data) === null || _a === void 0 ? void 0 : _a.children) {\n                                        return \"circle\";\n                                    }\n                                    else {\n                                        return \"path://\";\n                                    }\n                                },\n                                type: \"tree\",\n                            },\n                        ],\n                        tooltip: {\n                            trigger: \"item\",\n                            triggerOn: \"mousemove\",\n                        },\n                    });\n                    e.setAttribute(\"data-processed\", \"true\");\n                }\n                catch (error) {\n                    e.className = \"vditor-reset--error\";\n                    e.innerHTML = \"mindmap render error: <br>\".concat(error);\n                }\n            });\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 436:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"k\": () => (/* binding */ outlineRender)\n/* harmony export */ });\n/* harmony import */ var _util_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(771);\n/* harmony import */ var _mathRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(472);\n\n\nvar outlineRender = function (contentElement, targetElement, vditor) {\n    var tocHTML = \"\";\n    var ids = [];\n    Array.from(contentElement.children).forEach(function (item, index) {\n        if ((0,_util_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_1__/* .hasClosestByHeadings */ .W)(item)) {\n            if (vditor) {\n                var lastIndex = item.id.lastIndexOf(\"_\");\n                item.id = item.id.substring(0, lastIndex === -1 ? undefined : lastIndex) + \"_\" + index;\n            }\n            ids.push(item.id);\n            tocHTML += item.outerHTML.replace(\"<wbr>\", \"\");\n        }\n    });\n    if (tocHTML === \"\") {\n        targetElement.innerHTML = \"\";\n        return \"\";\n    }\n    var tempElement = document.createElement(\"div\");\n    if (vditor) {\n        vditor.lute.SetToC(true);\n        if (vditor.currentMode === \"wysiwyg\" && !vditor.preview.element.contains(contentElement)) {\n            tempElement.innerHTML = vditor.lute.SpinVditorDOM(\"<p>[ToC]</p>\" + tocHTML);\n        }\n        else if (vditor.currentMode === \"ir\" && !vditor.preview.element.contains(contentElement)) {\n            tempElement.innerHTML = vditor.lute.SpinVditorIRDOM(\"<p>[ToC]</p>\" + tocHTML);\n        }\n        else {\n            tempElement.innerHTML = vditor.lute.HTML2VditorDOM(\"<p>[ToC]</p>\" + tocHTML);\n        }\n        vditor.lute.SetToC(vditor.options.preview.markdown.toc);\n    }\n    else {\n        targetElement.classList.add(\"vditor-outline\");\n        var lute = Lute.New();\n        lute.SetToC(true);\n        tempElement.innerHTML = lute.HTML2VditorDOM(\"<p>[ToC]</p>\" + tocHTML);\n    }\n    var headingsElement = tempElement.firstElementChild.querySelectorAll(\"li > span[data-target-id]\");\n    headingsElement.forEach(function (item, index) {\n        if (item.nextElementSibling && item.nextElementSibling.tagName === \"UL\") {\n            var iconHTML = \"<svg class='vditor-outline__action'><use xlink:href='#vditor-icon-down'></use></svg>\";\n            if (!document.getElementById(\"vditorIconScript\")) {\n                iconHTML = '<svg class=\"vditor-outline__action\" viewBox=\"0 0 32 32\"><path d=\"M3.76 6.12l12.24 12.213 12.24-12.213 3.76 3.76-16 16-16-16 3.76-3.76z\"></path></svg>';\n            }\n            item.innerHTML = \"\".concat(iconHTML, \"<span>\").concat(item.innerHTML, \"</span>\");\n        }\n        else {\n            item.innerHTML = \"<svg></svg><span>\".concat(item.innerHTML, \"</span>\");\n        }\n        item.setAttribute(\"data-target-id\", ids[index]);\n    });\n    tocHTML = tempElement.firstElementChild.innerHTML;\n    if (headingsElement.length === 0) {\n        targetElement.innerHTML = \"\";\n        return tocHTML;\n    }\n    targetElement.innerHTML = tocHTML;\n    if (vditor) {\n        (0,_mathRender__WEBPACK_IMPORTED_MODULE_0__/* .mathRender */ .H)(targetElement, {\n            cdn: vditor.options.cdn,\n            math: vditor.options.preview.math,\n        });\n    }\n    targetElement.firstElementChild.addEventListener(\"click\", function (event) {\n        var target = event.target;\n        while (target && !target.isEqualNode(targetElement)) {\n            if (target.classList.contains(\"vditor-outline__action\")) {\n                if (target.classList.contains(\"vditor-outline__action--close\")) {\n                    target.classList.remove(\"vditor-outline__action--close\");\n                    target.parentElement.nextElementSibling.setAttribute(\"style\", \"display:block\");\n                }\n                else {\n                    target.classList.add(\"vditor-outline__action--close\");\n                    target.parentElement.nextElementSibling.setAttribute(\"style\", \"display:none\");\n                }\n                event.preventDefault();\n                event.stopPropagation();\n                break;\n            }\n            else if (target.getAttribute(\"data-target-id\")) {\n                event.preventDefault();\n                event.stopPropagation();\n                var idElement = document.getElementById(target.getAttribute(\"data-target-id\"));\n                if (!idElement) {\n                    return;\n                }\n                if (vditor) {\n                    if (vditor.options.height === \"auto\") {\n                        var windowScrollY = idElement.offsetTop + vditor.element.offsetTop;\n                        if (!vditor.options.toolbarConfig.pin) {\n                            windowScrollY += vditor.toolbar.element.offsetHeight;\n                        }\n                        window.scrollTo(window.scrollX, windowScrollY);\n                    }\n                    else {\n                        if (vditor.element.offsetTop < window.scrollY) {\n                            window.scrollTo(window.scrollX, vditor.element.offsetTop);\n                        }\n                        if (vditor.preview.element.contains(contentElement)) {\n                            contentElement.parentElement.scrollTop = idElement.offsetTop;\n                        }\n                        else {\n                            contentElement.scrollTop = idElement.offsetTop;\n                        }\n                    }\n                }\n                else {\n                    window.scrollTo(window.scrollX, idElement.offsetTop);\n                }\n                break;\n            }\n            target = target.parentElement;\n        }\n    });\n    return tocHTML;\n};\n\n\n/***/ }),\n\n/***/ 229:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"B\": () => (/* binding */ plantumlRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(413);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(840);\n\n\n\nvar plantumlRender = function (element, cdn) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var plantumlElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.plantumlRenderAdapter.getElements(element);\n    if (plantumlElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(\"\".concat(cdn, \"/dist/js/plantuml/plantuml-encoder.min.js\"), \"vditorPlantumlScript\").then(function () {\n        plantumlElements.forEach(function (e) {\n            if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                return;\n            }\n            var text = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.plantumlRenderAdapter.getCode(e).trim();\n            if (!text) {\n                return;\n            }\n            try {\n                e.innerHTML = \"<object type=\\\"image/svg+xml\\\" data=\\\"https://www.plantuml.com/plantuml/svg/~1\".concat(plantumlEncoder.encode(text), \"\\\"/>\");\n            }\n            catch (error) {\n                e.className = \"vditor-reset--error\";\n                e.innerHTML = \"plantuml render error: <br>\".concat(error);\n            }\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 214:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"X\": () => (/* binding */ setLute)\n/* harmony export */ });\nvar setLute = function (options) {\n    var lute = Lute.New();\n    lute.PutEmojis(options.emojis);\n    lute.SetEmojiSite(options.emojiSite);\n    lute.SetHeadingAnchor(options.headingAnchor);\n    lute.SetInlineMathAllowDigitAfterOpenMarker(options.inlineMathDigit);\n    lute.SetAutoSpace(options.autoSpace);\n    lute.SetToC(options.toc);\n    lute.SetFootnotes(options.footnotes);\n    lute.SetFixTermTypo(options.fixTermTypo);\n    lute.SetVditorCodeBlockPreview(options.codeBlockPreview);\n    lute.SetVditorMathBlockPreview(options.mathBlockPreview);\n    lute.SetSanitize(options.sanitize);\n    lute.SetChineseParagraphBeginningSpace(options.paragraphBeginningSpace);\n    lute.SetRenderListStyle(options.listStyle);\n    lute.SetLinkBase(options.linkBase);\n    lute.SetLinkPrefix(options.linkPrefix);\n    lute.SetMark(options.mark);\n    lute.SetGFMAutoLink(options.gfmAutoLink);\n    if (options.lazyLoadImage) {\n        lute.SetImageLazyLoading(options.lazyLoadImage);\n    }\n    return lute;\n};\n\n\n/***/ }),\n\n/***/ 190:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"E\": () => (/* binding */ previewImage)\n/* harmony export */ });\nvar previewImage = function (oldImgElement, lang, theme) {\n    if (lang === void 0) { lang = \"zh_CN\"; }\n    if (theme === void 0) { theme = \"classic\"; }\n    var oldImgRect = oldImgElement.getBoundingClientRect();\n    var height = 36;\n    document.body.insertAdjacentHTML(\"beforeend\", \"<div class=\\\"vditor vditor-img\".concat(theme === \"dark\" ? \" vditor--dark\" : \"\", \"\\\">\\n    <div class=\\\"vditor-img__bar\\\">\\n      <span class=\\\"vditor-img__btn\\\" data-deg=\\\"0\\\">\\n        <svg><use xlink:href=\\\"#vditor-icon-redo\\\"></use></svg>\\n        \").concat(window.VditorI18n.spin, \"\\n      </span>\\n      <span class=\\\"vditor-img__btn\\\"  onclick=\\\"this.parentElement.parentElement.outerHTML = '';document.body.style.overflow = ''\\\">\\n        X &nbsp;\").concat(window.VditorI18n.close, \"\\n      </span>\\n    </div>\\n    <div class=\\\"vditor-img__img\\\" onclick=\\\"this.parentElement.outerHTML = '';document.body.style.overflow = ''\\\">\\n      <img style=\\\"width: \").concat(oldImgElement.width, \"px;height:\").concat(oldImgElement.height, \"px;transform: translate3d(\").concat(oldImgRect.left, \"px, \").concat(oldImgRect.top - height, \"px, 0)\\\" src=\\\"\").concat(oldImgElement.getAttribute(\"src\"), \"\\\">\\n    </div>\\n</div>\"));\n    document.body.style.overflow = \"hidden\";\n    // 图片从原始位置移动到预览正中间的动画效果\n    var imgElement = document.querySelector(\".vditor-img img\");\n    var translate3d = \"translate3d(\".concat(Math.max(0, window.innerWidth - oldImgElement.naturalWidth) / 2, \"px, \").concat(Math.max(0, window.innerHeight - height - oldImgElement.naturalHeight) / 2, \"px, 0)\");\n    setTimeout(function () {\n        imgElement.setAttribute(\"style\", \"transition: transform .3s ease-in-out;transform: \".concat(translate3d));\n        setTimeout(function () {\n            imgElement.parentElement.scrollTo((imgElement.parentElement.scrollWidth - imgElement.parentElement.clientWidth) / 2, (imgElement.parentElement.scrollHeight - imgElement.parentElement.clientHeight) / 2);\n        }, 400);\n    });\n    // 旋转\n    var btnElement = document.querySelector(\".vditor-img__btn\");\n    btnElement.addEventListener(\"click\", function () {\n        var deg = parseInt(btnElement.getAttribute(\"data-deg\"), 10) + 90;\n        if ((deg / 90) % 2 === 1 && oldImgElement.naturalWidth > imgElement.parentElement.clientHeight) {\n            imgElement.style.transform = \"translate3d(\".concat(Math.max(0, window.innerWidth - oldImgElement.naturalWidth) / 2, \"px, \").concat(oldImgElement.naturalWidth / 2 - oldImgElement.naturalHeight / 2, \"px, 0) rotateZ(\").concat(deg, \"deg)\");\n        }\n        else {\n            imgElement.style.transform = \"\".concat(translate3d, \" rotateZ(\").concat(deg, \"deg)\");\n        }\n        btnElement.setAttribute(\"data-deg\", deg.toString());\n        setTimeout(function () {\n            imgElement.parentElement.scrollTo((imgElement.parentElement.scrollWidth - imgElement.parentElement.clientWidth) / 2, (imgElement.parentElement.scrollHeight - imgElement.parentElement.clientHeight) / 2);\n        }, 400);\n    });\n};\n\n\n/***/ }),\n\n/***/ 580:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Y\": () => (/* binding */ setCodeTheme)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(290);\n\n\nvar setCodeTheme = function (codeTheme, cdn) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    if (!_constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CODE_THEME.includes */ .g.CODE_THEME.includes(codeTheme)) {\n        codeTheme = \"github\";\n    }\n    var vditorHljsStyle = document.getElementById(\"vditorHljsStyle\");\n    var href = \"\".concat(cdn, \"/dist/js/highlight.js/styles/\").concat(codeTheme, \".min.css\");\n    if (!vditorHljsStyle) {\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_1__/* .addStyle */ .c)(href, \"vditorHljsStyle\");\n    }\n    else if (vditorHljsStyle.getAttribute('href') !== href) {\n        vditorHljsStyle.remove();\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_1__/* .addStyle */ .c)(href, \"vditorHljsStyle\");\n    }\n};\n\n\n/***/ }),\n\n/***/ 538:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Z\": () => (/* binding */ setContentTheme)\n/* harmony export */ });\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(290);\n\nvar setContentTheme = function (contentTheme, path) {\n    if (!contentTheme || !path) {\n        return;\n    }\n    var vditorContentTheme = document.getElementById(\"vditorContentTheme\");\n    var cssPath = \"\".concat(path, \"/\").concat(contentTheme, \".css\");\n    if (!vditorContentTheme) {\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_0__/* .addStyle */ .c)(cssPath, \"vditorContentTheme\");\n    }\n    else if (vditorContentTheme.getAttribute(\"href\") !== cssPath) {\n        vditorContentTheme.remove();\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_0__/* .addStyle */ .c)(cssPath, \"vditorContentTheme\");\n    }\n};\n\n\n/***/ }),\n\n/***/ 413:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"J\": () => (/* binding */ addScriptSync),\n/* harmony export */   \"G\": () => (/* binding */ addScript)\n/* harmony export */ });\nvar addScriptSync = function (path, id) {\n    if (document.getElementById(id)) {\n        return false;\n    }\n    var xhrObj = new XMLHttpRequest();\n    xhrObj.open(\"GET\", path, false);\n    xhrObj.setRequestHeader(\"Accept\", \"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01\");\n    xhrObj.send(\"\");\n    var scriptElement = document.createElement(\"script\");\n    scriptElement.type = \"text/javascript\";\n    scriptElement.text = xhrObj.responseText;\n    scriptElement.id = id;\n    document.head.appendChild(scriptElement);\n};\nvar addScript = function (path, id) {\n    return new Promise(function (resolve, reject) {\n        if (document.getElementById(id)) {\n            // 脚本加载后再次调用直接返回\n            resolve(true);\n            return false;\n        }\n        var scriptElement = document.createElement(\"script\");\n        scriptElement.src = path;\n        scriptElement.async = true;\n        // 循环调用时 Chrome 不会重复请求 js\n        document.head.appendChild(scriptElement);\n        scriptElement.onerror = function (event) {\n            reject(event);\n        };\n        scriptElement.onload = function () {\n            if (document.getElementById(id)) {\n                // 循环调用需清除 DOM 中的 script 标签\n                scriptElement.remove();\n                resolve(true);\n                return false;\n            }\n            scriptElement.id = id;\n            resolve(true);\n        };\n    });\n};\n\n\n/***/ }),\n\n/***/ 290:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"c\": () => (/* binding */ addStyle)\n/* harmony export */ });\nvar addStyle = function (url, id) {\n    if (!document.getElementById(id)) {\n        var styleElement = document.createElement(\"link\");\n        styleElement.id = id;\n        styleElement.rel = \"stylesheet\";\n        styleElement.type = \"text/css\";\n        styleElement.href = url;\n        document.getElementsByTagName(\"head\")[0].appendChild(styleElement);\n    }\n};\n\n\n/***/ }),\n\n/***/ 105:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"X\": () => (/* binding */ code160to32)\n/* harmony export */ });\nvar code160to32 = function (text) {\n    // 非打断空格转换为空格\n    return text.replace(/\\u00a0/g, \" \");\n};\n\n\n/***/ }),\n\n/***/ 410:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"G6\": () => (/* binding */ isSafari),\n/* harmony export */   \"vU\": () => (/* binding */ isFirefox),\n/* harmony export */   \"pK\": () => (/* binding */ accessLocalStorage),\n/* harmony export */   \"Le\": () => (/* binding */ getEventName),\n/* harmony export */   \"yl\": () => (/* binding */ isCtrl),\n/* harmony export */   \"ns\": () => (/* binding */ updateHotkeyTip),\n/* harmony export */   \"i7\": () => (/* binding */ isChrome)\n/* harmony export */ });\nvar isSafari = function () {\n    return navigator.userAgent.indexOf(\"Safari\") > -1 && navigator.userAgent.indexOf(\"Chrome\") === -1;\n};\nvar isFirefox = function () {\n    return navigator.userAgent.toLowerCase().indexOf(\"firefox\") > -1;\n};\nvar accessLocalStorage = function () {\n    try {\n        return typeof localStorage !== \"undefined\";\n    }\n    catch (e) {\n        return false;\n    }\n};\n// 用户 iPhone 点击延迟/需要双击的处理\nvar getEventName = function () {\n    if (navigator.userAgent.indexOf(\"iPhone\") > -1) {\n        return \"touchstart\";\n    }\n    else {\n        return \"click\";\n    }\n};\n// 区别 mac 上的 ctrl 和 meta\nvar isCtrl = function (event) {\n    if (navigator.platform.toUpperCase().indexOf(\"MAC\") >= 0) {\n        // mac\n        if (event.metaKey && !event.ctrlKey) {\n            return true;\n        }\n        return false;\n    }\n    else {\n        if (!event.metaKey && event.ctrlKey) {\n            return true;\n        }\n        return false;\n    }\n};\n// Mac，Windows 快捷键展示\nvar updateHotkeyTip = function (hotkey) {\n    if (/Mac/.test(navigator.platform) || navigator.platform === \"iPhone\") {\n        if (hotkey.indexOf(\"⇧\") > -1 && isFirefox()) {\n            // Mac Firefox 按下 shift 后，key 同 windows 系统\n            hotkey = hotkey.replace(\";\", \":\").replace(\"=\", \"+\").replace(\"-\", \"_\");\n        }\n    }\n    else {\n        if (hotkey.startsWith(\"⌘\")) {\n            hotkey = hotkey.replace(\"⌘\", \"⌘+\");\n        }\n        else if (hotkey.startsWith(\"⌥\") && hotkey.substr(1, 1) !== \"⌘\") {\n            hotkey = hotkey.replace(\"⌥\", \"⌥+\");\n        }\n        else {\n            hotkey = hotkey.replace(\"⇧⌘\", \"⌘+⇧+\").replace(\"⌥⌘\", \"⌥+⌘+\");\n        }\n        hotkey = hotkey.replace(\"⌘\", \"Ctrl\").replace(\"⇧\", \"Shift\")\n            .replace(\"⌥\", \"Alt\");\n        if (hotkey.indexOf(\"Shift\") > -1) {\n            hotkey = hotkey.replace(\";\", \":\").replace(\"=\", \"+\").replace(\"-\", \"_\");\n        }\n    }\n    return hotkey;\n};\nvar isChrome = function () {\n    return /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n};\n\n\n/***/ }),\n\n/***/ 494:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Wb\": () => (/* binding */ genUUID),\n/* harmony export */   \"on\": () => (/* binding */ getSearch),\n/* harmony export */   \"Qf\": () => (/* binding */ looseJsonParse)\n/* harmony export */ });\nvar genUUID = function () { return ([1e7].toString() + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, function (c) {\n    return (parseInt(c, 10) ^ (window.crypto.getRandomValues(new Uint32Array(1))[0] & (15 >> (parseInt(c, 10) / 4)))).toString(16);\n}); };\nvar getSearch = function (key, link) {\n    if (link === void 0) { link = window.location.search; }\n    var params = link.substring(link.indexOf(\"?\"));\n    var hashIndex = params.indexOf(\"#\");\n    // REF https://developer.mozilla.org/zh-CN/docs/Web/API/URLSearchParams\n    var urlSearchParams = new URLSearchParams(params.substring(0, hashIndex >= 0 ? hashIndex : undefined));\n    return urlSearchParams.get(key);\n};\nvar looseJsonParse = function (text) {\n    return Function(\"\\\"use strict\\\";return (\".concat(text, \")\"))();\n};\n\n\n/***/ }),\n\n/***/ 106:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"JQ\": () => (/* binding */ hasTopClosestByClassName),\n/* harmony export */   \"E2\": () => (/* binding */ hasTopClosestByTag),\n/* harmony export */   \"O9\": () => (/* binding */ getTopList),\n/* harmony export */   \"a1\": () => (/* binding */ hasClosestByAttribute),\n/* harmony export */   \"F9\": () => (/* binding */ hasClosestBlock),\n/* harmony export */   \"lG\": () => (/* binding */ hasClosestByMatchTag),\n/* harmony export */   \"fb\": () => (/* binding */ hasClosestByClassName),\n/* harmony export */   \"DX\": () => (/* binding */ getLastNode)\n/* harmony export */ });\n/* unused harmony export hasTopClosestByAttribute */\n/* harmony import */ var _hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(771);\n\nvar hasTopClosestByClassName = function (element, className) {\n    var closest = hasClosestByClassName(element, className);\n    var parentClosest = false;\n    var findTop = false;\n    while (closest && !closest.classList.contains(\"vditor-reset\") && !findTop) {\n        parentClosest = hasClosestByClassName(closest.parentElement, className);\n        if (parentClosest) {\n            closest = parentClosest;\n        }\n        else {\n            findTop = true;\n        }\n    }\n    return closest || false;\n};\nvar hasTopClosestByAttribute = function (element, attr, value) {\n    var closest = hasClosestByAttribute(element, attr, value);\n    var parentClosest = false;\n    var findTop = false;\n    while (closest && !closest.classList.contains(\"vditor-reset\") && !findTop) {\n        parentClosest = hasClosestByAttribute(closest.parentElement, attr, value);\n        if (parentClosest) {\n            closest = parentClosest;\n        }\n        else {\n            findTop = true;\n        }\n    }\n    return closest || false;\n};\nvar hasTopClosestByTag = function (element, nodeName) {\n    var closest = (0,_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__/* .hasClosestByTag */ .S)(element, nodeName);\n    var parentClosest = false;\n    var findTop = false;\n    while (closest && !closest.classList.contains(\"vditor-reset\") && !findTop) {\n        parentClosest = (0,_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__/* .hasClosestByTag */ .S)(closest.parentElement, nodeName);\n        if (parentClosest) {\n            closest = parentClosest;\n        }\n        else {\n            findTop = true;\n        }\n    }\n    return closest || false;\n};\nvar getTopList = function (element) {\n    var topUlElement = hasTopClosestByTag(element, \"UL\");\n    var topOlElement = hasTopClosestByTag(element, \"OL\");\n    var topListElement = topUlElement;\n    if (topOlElement && (!topUlElement || (topUlElement && topOlElement.contains(topUlElement)))) {\n        topListElement = topOlElement;\n    }\n    return topListElement;\n};\nvar hasClosestByAttribute = function (element, attr, value) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.getAttribute(attr) === value) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestBlock = function (element) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    var blockElement = hasClosestByAttribute(element, \"data-block\", \"0\");\n    if (blockElement) {\n        return blockElement;\n    }\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.tagName === \"H1\" ||\n            e.tagName === \"H2\" ||\n            e.tagName === \"H3\" ||\n            e.tagName === \"H4\" ||\n            e.tagName === \"H5\" ||\n            e.tagName === \"H6\" ||\n            e.tagName === \"P\" ||\n            e.tagName === \"BLOCKQUOTE\" ||\n            e.tagName === \"OL\" ||\n            e.tagName === \"UL\") {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestByMatchTag = function (element, nodeName) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.nodeName === nodeName) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestByClassName = function (element, className) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.classList.contains(className)) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar getLastNode = function (node) {\n    while (node && node.lastChild) {\n        node = node.lastChild;\n    }\n    return node;\n};\n\n\n/***/ }),\n\n/***/ 771:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"S\": () => (/* binding */ hasClosestByTag),\n/* harmony export */   \"W\": () => (/* binding */ hasClosestByHeadings)\n/* harmony export */ });\n// NOTE: 减少 method.ts 打包，故从 hasClosest.ts 中拆分\nvar hasClosestByTag = function (element, nodeName) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.nodeName.indexOf(nodeName) === 0) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestByHeadings = function (element) {\n    var headingElement = hasClosestByTag(element, \"H\");\n    if (headingElement && headingElement.tagName.length === 2 && headingElement.tagName !== \"HR\") {\n        return headingElement;\n    }\n    return false;\n};\n\n\n/***/ }),\n\n/***/ 673:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"T\": () => (/* binding */ merge)\n/* harmony export */ });\nvar merge = function () {\n    var options = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        options[_i] = arguments[_i];\n    }\n    var target = {};\n    var merger = function (obj) {\n        for (var prop in obj) {\n            if (obj.hasOwnProperty(prop)) {\n                if (Object.prototype.toString.call(obj[prop]) === \"[object Object]\") {\n                    target[prop] = merge(target[prop], obj[prop]);\n                }\n                else {\n                    target[prop] = obj[prop];\n                }\n            }\n        }\n    };\n    for (var i = 0; i < options.length; i++) {\n        merger(options[i]);\n    }\n    return target;\n};\n\n\n/***/ }),\n\n/***/ 810:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"zh\": () => (/* binding */ getEditorRange),\n/* harmony export */   \"Ny\": () => (/* binding */ getCursorPosition),\n/* harmony export */   \"Gb\": () => (/* binding */ selectIsEditor),\n/* harmony export */   \"Hc\": () => (/* binding */ setSelectionFocus),\n/* harmony export */   \"im\": () => (/* binding */ getSelectPosition),\n/* harmony export */   \"$j\": () => (/* binding */ setSelectionByPosition),\n/* harmony export */   \"ib\": () => (/* binding */ setRangeByWbr),\n/* harmony export */   \"oC\": () => (/* binding */ insertHTML)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(145);\n/* harmony import */ var _compatibility__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(410);\n/* harmony import */ var _hasClosest__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(106);\n\n\n\nvar getEditorRange = function (vditor) {\n    var range;\n    var element = vditor[vditor.currentMode].element;\n    if (getSelection().rangeCount > 0) {\n        range = getSelection().getRangeAt(0);\n        if (element.isEqualNode(range.startContainer) || element.contains(range.startContainer)) {\n            return range;\n        }\n    }\n    if (vditor[vditor.currentMode].range) {\n        return vditor[vditor.currentMode].range;\n    }\n    element.focus();\n    range = element.ownerDocument.createRange();\n    range.setStart(element, 0);\n    range.collapse(true);\n    return range;\n};\nvar getCursorPosition = function (editor) {\n    var range = window.getSelection().getRangeAt(0);\n    if (!editor.contains(range.startContainer) && !(0,_hasClosest__WEBPACK_IMPORTED_MODULE_1__/* .hasClosestByClassName */ .fb)(range.startContainer, \"vditor-panel--none\")) {\n        return {\n            left: 0,\n            top: 0,\n        };\n    }\n    var parentRect = editor.parentElement.getBoundingClientRect();\n    var cursorRect;\n    if (range.getClientRects().length === 0) {\n        if (range.startContainer.nodeType === 3) {\n            // 空行时，会出现没有 br 的情况，需要根据父元素 <p> 获取位置信息\n            var parent_1 = range.startContainer.parentElement;\n            if (parent_1 && parent_1.getClientRects().length > 0) {\n                cursorRect = parent_1.getClientRects()[0];\n            }\n            else {\n                return {\n                    left: 0,\n                    top: 0,\n                };\n            }\n        }\n        else {\n            var children = range.startContainer.children;\n            if (children[range.startOffset] &&\n                children[range.startOffset].getClientRects().length > 0) {\n                // markdown 模式回车\n                cursorRect = children[range.startOffset].getClientRects()[0];\n            }\n            else if (range.startContainer.childNodes.length > 0) {\n                // in table or code block\n                var cloneRange = range.cloneRange();\n                range.selectNode(range.startContainer.childNodes[Math.max(0, range.startOffset - 1)]);\n                cursorRect = range.getClientRects()[0];\n                range.setEnd(cloneRange.endContainer, cloneRange.endOffset);\n                range.setStart(cloneRange.startContainer, cloneRange.startOffset);\n            }\n            else {\n                cursorRect = range.startContainer.getClientRects()[0];\n            }\n            if (!cursorRect) {\n                var parentElement = range.startContainer.childNodes[range.startOffset];\n                while (!parentElement.getClientRects ||\n                    (parentElement.getClientRects && parentElement.getClientRects().length === 0)) {\n                    parentElement = parentElement.parentElement;\n                }\n                cursorRect = parentElement.getClientRects()[0];\n            }\n        }\n    }\n    else {\n        cursorRect = range.getClientRects()[0];\n    }\n    return {\n        left: cursorRect.left - parentRect.left,\n        top: cursorRect.top - parentRect.top,\n    };\n};\nvar selectIsEditor = function (editor, range) {\n    if (!range) {\n        if (getSelection().rangeCount === 0) {\n            return false;\n        }\n        else {\n            range = getSelection().getRangeAt(0);\n        }\n    }\n    var container = range.commonAncestorContainer;\n    return editor.isEqualNode(container) || editor.contains(container);\n};\nvar setSelectionFocus = function (range) {\n    var selection = window.getSelection();\n    selection.removeAllRanges();\n    selection.addRange(range);\n};\nvar getSelectPosition = function (selectElement, editorElement, range) {\n    var position = {\n        end: 0,\n        start: 0,\n    };\n    if (!range) {\n        if (getSelection().rangeCount === 0) {\n            return position;\n        }\n        range = window.getSelection().getRangeAt(0);\n    }\n    if (selectIsEditor(editorElement, range)) {\n        var preSelectionRange = range.cloneRange();\n        if (selectElement.childNodes[0] && selectElement.childNodes[0].childNodes[0]) {\n            preSelectionRange.setStart(selectElement.childNodes[0].childNodes[0], 0);\n        }\n        else {\n            preSelectionRange.selectNodeContents(selectElement);\n        }\n        preSelectionRange.setEnd(range.startContainer, range.startOffset);\n        position.start = preSelectionRange.toString().length;\n        position.end = position.start + range.toString().length;\n    }\n    return position;\n};\nvar setSelectionByPosition = function (start, end, editor) {\n    var charIndex = 0;\n    var line = 0;\n    var pNode = editor.childNodes[line];\n    var foundStart = false;\n    var stop = false;\n    start = Math.max(0, start);\n    end = Math.max(0, end);\n    var range = editor.ownerDocument.createRange();\n    range.setStart(pNode || editor, 0);\n    range.collapse(true);\n    while (!stop && pNode) {\n        var nextCharIndex = charIndex + pNode.textContent.length;\n        if (!foundStart && start >= charIndex && start <= nextCharIndex) {\n            if (start === 0) {\n                range.setStart(pNode, 0);\n            }\n            else {\n                if (pNode.childNodes[0].nodeType === 3) {\n                    range.setStart(pNode.childNodes[0], start - charIndex);\n                }\n                else if (pNode.nextSibling) {\n                    range.setStartBefore(pNode.nextSibling);\n                }\n                else {\n                    range.setStartAfter(pNode);\n                }\n            }\n            foundStart = true;\n            if (start === end) {\n                stop = true;\n                break;\n            }\n        }\n        if (foundStart && end >= charIndex && end <= nextCharIndex) {\n            if (end === 0) {\n                range.setEnd(pNode, 0);\n            }\n            else {\n                if (pNode.childNodes[0].nodeType === 3) {\n                    range.setEnd(pNode.childNodes[0], end - charIndex);\n                }\n                else if (pNode.nextSibling) {\n                    range.setEndBefore(pNode.nextSibling);\n                }\n                else {\n                    range.setEndAfter(pNode);\n                }\n            }\n            stop = true;\n        }\n        charIndex = nextCharIndex;\n        pNode = editor.childNodes[++line];\n    }\n    if (!stop && editor.childNodes[line - 1]) {\n        range.setStartBefore(editor.childNodes[line - 1]);\n    }\n    setSelectionFocus(range);\n    return range;\n};\nvar setRangeByWbr = function (element, range) {\n    var wbrElement = element.querySelector(\"wbr\");\n    if (!wbrElement) {\n        return;\n    }\n    if (!wbrElement.previousElementSibling) {\n        if (wbrElement.previousSibling) {\n            // text<wbr>\n            range.setStart(wbrElement.previousSibling, wbrElement.previousSibling.textContent.length);\n        }\n        else if (wbrElement.nextSibling) {\n            if (wbrElement.nextSibling.nodeType === 3) {\n                // <wbr>text\n                range.setStart(wbrElement.nextSibling, 0);\n            }\n            else {\n                // <wbr><br> https://github.com/Vanessa219/vditor/issues/400\n                range.setStartBefore(wbrElement.nextSibling);\n            }\n        }\n        else {\n            // 内容为空\n            range.setStart(wbrElement.parentElement, 0);\n        }\n    }\n    else {\n        if (wbrElement.previousElementSibling.isSameNode(wbrElement.previousSibling)) {\n            if (wbrElement.previousElementSibling.lastChild) {\n                // <em>text</em><wbr>\n                range.setStartBefore(wbrElement);\n                range.collapse(true);\n                setSelectionFocus(range);\n                // fix Chrome set range bug: **c**\n                if ((0,_compatibility__WEBPACK_IMPORTED_MODULE_2__/* .isChrome */ .i7)() && (wbrElement.previousElementSibling.tagName === \"EM\" ||\n                    wbrElement.previousElementSibling.tagName === \"STRONG\" ||\n                    wbrElement.previousElementSibling.tagName === \"S\")) {\n                    range.insertNode(document.createTextNode(_constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.ZWSP */ .g.ZWSP));\n                    range.collapse(false);\n                }\n                wbrElement.remove();\n                return;\n            }\n            else {\n                // <br><wbr>\n                range.setStartAfter(wbrElement.previousElementSibling);\n            }\n        }\n        else {\n            // <em>text</em>text<wbr>\n            range.setStart(wbrElement.previousSibling, wbrElement.previousSibling.textContent.length);\n        }\n    }\n    range.collapse(true);\n    wbrElement.remove();\n    setSelectionFocus(range);\n};\nvar insertHTML = function (html, vditor) {\n    // 使用 lute 方法会添加 p 元素，只有一个 p 元素的时候进行删除\n    var tempElement = document.createElement(\"div\");\n    tempElement.innerHTML = html;\n    var tempBlockElement = tempElement.querySelectorAll(\"p\");\n    if (tempBlockElement.length === 1 && !tempBlockElement[0].previousSibling && !tempBlockElement[0].nextSibling &&\n        vditor[vditor.currentMode].element.children.length > 0 && tempElement.firstElementChild.tagName === \"P\") {\n        html = tempBlockElement[0].innerHTML.trim();\n    }\n    var pasteElement = document.createElement(\"div\");\n    pasteElement.innerHTML = html;\n    var range = getEditorRange(vditor);\n    if (range.toString() !== \"\") {\n        vditor[vditor.currentMode].preventInput = true;\n        document.execCommand(\"delete\", false, \"\");\n    }\n    if (pasteElement.firstElementChild &&\n        pasteElement.firstElementChild.getAttribute(\"data-block\") === \"0\") {\n        // 粘贴内容为块元素时，应在下一段落中插入\n        pasteElement.lastElementChild.insertAdjacentHTML(\"beforeend\", \"<wbr>\");\n        var blockElement = (0,_hasClosest__WEBPACK_IMPORTED_MODULE_1__/* .hasClosestBlock */ .F9)(range.startContainer);\n        if (!blockElement) {\n            vditor[vditor.currentMode].element.insertAdjacentHTML(\"beforeend\", pasteElement.innerHTML);\n        }\n        else {\n            blockElement.insertAdjacentHTML(\"afterend\", pasteElement.innerHTML);\n        }\n        setRangeByWbr(vditor[vditor.currentMode].element, range);\n    }\n    else {\n        var pasteTemplate = document.createElement(\"template\");\n        pasteTemplate.innerHTML = html;\n        range.insertNode(pasteTemplate.content.cloneNode(true));\n        range.collapse(false);\n        setSelectionFocus(range);\n    }\n};\n\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t(() => {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__webpack_require__.d = (exports, definition) => {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t(() => {\n/******/ \t\t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/make namespace object */\n/******/ \t(() => {\n/******/ \t\t// define __esModule on exports\n/******/ \t\t__webpack_require__.r = (exports) => {\n/******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t\t}\n/******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/************************************************************************/\nvar __webpack_exports__ = {};\n// This entry need to be wrapped in an IIFE because it need to be in strict mode.\n(() => {\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": () => (/* binding */ src)\n});\n\n// EXTERNAL MODULE: ./src/method.ts + 4 modules\nvar method = __webpack_require__(408);\n// EXTERNAL MODULE: ./src/ts/constants.ts\nvar constants = __webpack_require__(145);\n// EXTERNAL MODULE: ./src/ts/util/code160to32.ts\nvar code160to32 = __webpack_require__(105);\n;// CONCATENATED MODULE: ./src/ts/markdown/getMarkdown.ts\n\nvar getMarkdown = function (vditor) {\n    if (vditor.currentMode === \"sv\") {\n        return (0,code160to32/* code160to32 */.X)(\"\".concat(vditor.sv.element.textContent, \"\\n\").replace(/\\n\\n$/, \"\\n\"));\n    }\n    else if (vditor.currentMode === \"wysiwyg\") {\n        return vditor.lute.VditorDOM2Md(vditor.wysiwyg.element.innerHTML);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        return vditor.lute.VditorIRDOM2Md(vditor.ir.element.innerHTML);\n    }\n    return \"\";\n};\n\n// EXTERNAL MODULE: ./src/ts/util/addScript.ts\nvar addScript = __webpack_require__(413);\n;// CONCATENATED MODULE: ./src/ts/devtools/index.ts\n\n\nvar DevTools = /** @class */ (function () {\n    function DevTools() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-devtools\";\n        this.element.innerHTML = '<div class=\"vditor-reset--error\"></div><div style=\"height: 100%;\"></div>';\n    }\n    DevTools.prototype.renderEchart = function (vditor) {\n        var _this = this;\n        if (vditor.devtools.element.style.display !== \"block\") {\n            return;\n        }\n        (0,addScript/* addScript */.G)(\"\".concat(vditor.options.cdn, \"/dist/js/echarts/echarts.min.js?v=5.5.1\"), \"vditorEchartsScript\").then(function () {\n            if (!_this.ASTChart) {\n                _this.ASTChart = echarts.init(vditor.devtools.element.lastElementChild);\n            }\n            try {\n                _this.element.lastElementChild.style.display = \"block\";\n                _this.element.firstElementChild.innerHTML = \"\";\n                _this.ASTChart.setOption({\n                    series: [\n                        {\n                            data: JSON.parse(vditor.lute.RenderEChartsJSON(getMarkdown(vditor))),\n                            initialTreeDepth: -1,\n                            label: {\n                                align: \"left\",\n                                backgroundColor: \"rgba(68, 77, 86, .68)\",\n                                borderRadius: 3,\n                                color: \"#d1d5da\",\n                                fontSize: 12,\n                                lineHeight: 12,\n                                offset: [9, 12],\n                                padding: [2, 4, 2, 4],\n                                position: \"top\",\n                                verticalAlign: \"middle\",\n                            },\n                            lineStyle: {\n                                color: \"#4285f4\",\n                                type: \"curve\",\n                                width: 1,\n                            },\n                            orient: \"vertical\",\n                            roam: true,\n                            type: \"tree\",\n                        },\n                    ],\n                    toolbox: {\n                        bottom: 25,\n                        emphasis: {\n                            iconStyle: {\n                                color: \"#4285f4\",\n                            },\n                        },\n                        feature: {\n                            restore: {\n                                show: true,\n                            },\n                            saveAsImage: {\n                                show: true,\n                            },\n                        },\n                        right: 15,\n                        show: true,\n                    },\n                });\n                _this.ASTChart.resize();\n            }\n            catch (e) {\n                _this.element.lastElementChild.style.display = \"none\";\n                _this.element.firstElementChild.innerHTML = e;\n            }\n        });\n    };\n    return DevTools;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/util/compatibility.ts\nvar compatibility = __webpack_require__(410);\n;// CONCATENATED MODULE: ./src/ts/toolbar/setToolbar.ts\n\n\nvar removeCurrentToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && itemElement.classList.contains(\"vditor-menu--current\")) {\n            itemElement.classList.remove(\"vditor-menu--current\");\n        }\n    });\n};\nvar setCurrentToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && !itemElement.classList.contains(\"vditor-menu--current\")) {\n            itemElement.classList.add(\"vditor-menu--current\");\n        }\n    });\n};\nvar enableToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && itemElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n            itemElement.classList.remove(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED);\n        }\n    });\n};\nvar disableToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && !itemElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n            itemElement.classList.add(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED);\n        }\n    });\n};\nvar hideToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        if (toolbar[name]) {\n            toolbar[name].style.display = \"none\";\n        }\n    });\n};\nvar showToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        if (toolbar[name]) {\n            toolbar[name].style.display = \"block\";\n        }\n    });\n};\n// \"subToolbar\", \"hint\", \"popover\"\nvar hidePanel = function (vditor, panels, exceptElement) {\n    if (panels.includes(\"subToolbar\")) {\n        vditor.toolbar.element.querySelectorAll(\".vditor-hint\").forEach(function (item) {\n            if (exceptElement && item.isEqualNode(exceptElement)) {\n                return;\n            }\n            item.style.display = \"none\";\n        });\n        if (vditor.toolbar.elements.emoji) {\n            vditor.toolbar.elements.emoji.lastElementChild.style.display = \"none\";\n        }\n    }\n    if (panels.includes(\"hint\")) {\n        vditor.hint.element.style.display = \"none\";\n    }\n    if (vditor.wysiwyg.popover && panels.includes(\"popover\")) {\n        vditor.wysiwyg.popover.style.display = \"none\";\n    }\n};\nvar toggleSubMenu = function (vditor, panelElement, actionBtn, level) {\n    actionBtn.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (actionBtn.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n            return;\n        }\n        vditor.toolbar.element.querySelectorAll(\".vditor-hint--current\").forEach(function (item) {\n            item.classList.remove(\"vditor-hint--current\");\n        });\n        if (panelElement.style.display === \"block\") {\n            panelElement.style.display = \"none\";\n        }\n        else {\n            hidePanel(vditor, [\"subToolbar\", \"hint\", \"popover\"], actionBtn.parentElement.parentElement);\n            if (!actionBtn.classList.contains(\"vditor-tooltipped\")) {\n                actionBtn.classList.add(\"vditor-hint--current\");\n            }\n            panelElement.style.display = \"block\";\n            if (vditor.toolbar.element.getBoundingClientRect().right - actionBtn.getBoundingClientRect().right < 250) {\n                panelElement.classList.add(\"vditor-panel--left\");\n            }\n            else {\n                panelElement.classList.remove(\"vditor-panel--left\");\n            }\n        }\n    });\n};\n\n// EXTERNAL MODULE: ./src/ts/util/hasClosest.ts\nvar hasClosest = __webpack_require__(106);\n// EXTERNAL MODULE: ./src/ts/util/hasClosestByHeadings.ts\nvar hasClosestByHeadings = __webpack_require__(771);\n;// CONCATENATED MODULE: ./src/ts/util/log.ts\nvar log = function (method, content, type, print) {\n    if (print) {\n        // @ts-ignore\n        console.log(\"\".concat(method, \" - \").concat(type, \": \").concat(content));\n    }\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/abcRender.ts\nvar abcRender = __webpack_require__(135);\n// EXTERNAL MODULE: ./src/ts/markdown/chartRender.ts\nvar chartRender = __webpack_require__(775);\n// EXTERNAL MODULE: ./src/ts/markdown/codeRender.ts\nvar codeRender = __webpack_require__(428);\n// EXTERNAL MODULE: ./src/ts/markdown/flowchartRender.ts\nvar flowchartRender = __webpack_require__(325);\n// EXTERNAL MODULE: ./src/ts/markdown/graphvizRender.ts\nvar graphvizRender = __webpack_require__(483);\n// EXTERNAL MODULE: ./src/ts/markdown/highlightRender.ts\nvar highlightRender = __webpack_require__(999);\n// EXTERNAL MODULE: ./src/ts/markdown/mathRender.ts\nvar mathRender = __webpack_require__(472);\n// EXTERNAL MODULE: ./src/ts/markdown/mermaidRender.ts\nvar mermaidRender = __webpack_require__(637);\n// EXTERNAL MODULE: ./src/ts/markdown/markmapRender.ts\nvar markmapRender = __webpack_require__(11);\n// EXTERNAL MODULE: ./src/ts/markdown/mindmapRender.ts\nvar mindmapRender = __webpack_require__(194);\n// EXTERNAL MODULE: ./src/ts/markdown/plantumlRender.ts\nvar plantumlRender = __webpack_require__(229);\n// EXTERNAL MODULE: ./src/ts/markdown/SMILESRender.ts\nvar SMILESRender = __webpack_require__(825);\n;// CONCATENATED MODULE: ./src/ts/util/processCode.ts\n\n\n\n\n\n\n\n\n\n\n\n\nvar processPasteCode = function (html, text, type) {\n    if (type === void 0) { type = \"sv\"; }\n    var tempElement = document.createElement(\"div\");\n    tempElement.innerHTML = html;\n    var isCode = false;\n    if (tempElement.childElementCount === 1 &&\n        tempElement.lastElementChild.style.fontFamily.indexOf(\"monospace\") > -1) {\n        // VS Code\n        isCode = true;\n    }\n    var pres = tempElement.querySelectorAll(\"pre\");\n    if (tempElement.childElementCount === 1 && pres.length === 1\n        && pres[0].className !== \"vditor-wysiwyg\"\n        && pres[0].className !== \"vditor-sv\") {\n        // IDE\n        isCode = true;\n    }\n    if (html.indexOf('\\n<p class=\"p1\">') === 0) {\n        // Xcode\n        isCode = true;\n    }\n    if (tempElement.childElementCount === 1 && tempElement.firstElementChild.tagName === \"TABLE\" &&\n        tempElement.querySelector(\".line-number\") && tempElement.querySelector(\".line-content\")) {\n        // 网页源码\n        isCode = true;\n    }\n    if (isCode) {\n        var code = text || html;\n        if (/\\n/.test(code) || pres.length === 1) {\n            if (type === \"wysiwyg\") {\n                return \"<div class=\\\"vditor-wysiwyg__block\\\" data-block=\\\"0\\\" data-type=\\\"code-block\\\"><pre><code>\".concat(code.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\"), \"<wbr></code></pre></div>\");\n            }\n            return \"\\n```\\n\" + code.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\") + \"\\n```\";\n        }\n        else {\n            if (type === \"wysiwyg\") {\n                return \"<code>\".concat(code.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\"), \"</code><wbr>\");\n            }\n            return \"`\".concat(code, \"`\");\n        }\n    }\n    return false;\n};\nvar processCodeRender = function (previewPanel, vditor) {\n    if (!previewPanel) {\n        return;\n    }\n    if (previewPanel.parentElement.getAttribute(\"data-type\") === \"html-block\") {\n        previewPanel.setAttribute(\"data-render\", \"1\");\n        return;\n    }\n    var language = previewPanel.firstElementChild.className.replace(\"language-\", \"\");\n    if (language === \"abc\") {\n        (0,abcRender/* abcRender */.Q)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"mermaid\") {\n        (0,mermaidRender/* mermaidRender */.i)(previewPanel, vditor.options.cdn, vditor.options.theme);\n    }\n    else if (language === \"smiles\") {\n        (0,SMILESRender/* SMILESRender */.J)(previewPanel, vditor.options.cdn, vditor.options.theme);\n    }\n    else if (language === \"markmap\") {\n        (0,markmapRender/* markmapRender */.K)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"flowchart\") {\n        (0,flowchartRender/* flowchartRender */.P)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"echarts\") {\n        (0,chartRender/* chartRender */.p)(previewPanel, vditor.options.cdn, vditor.options.theme);\n    }\n    else if (language === \"mindmap\") {\n        (0,mindmapRender/* mindmapRender */.P)(previewPanel, vditor.options.cdn, vditor.options.theme);\n    }\n    else if (language === \"plantuml\") {\n        (0,plantumlRender/* plantumlRender */.B)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"graphviz\") {\n        (0,graphvizRender/* graphvizRender */.v)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"math\") {\n        (0,mathRender/* mathRender */.H)(previewPanel, { cdn: vditor.options.cdn, math: vditor.options.preview.math });\n    }\n    else {\n        var cRender = vditor.options.customRenders.find(function (item) {\n            if (item.language === language) {\n                item.render(previewPanel, vditor);\n                return true;\n            }\n        });\n        if (!cRender) {\n            (0,highlightRender/* highlightRender */.s)(Object.assign({}, vditor.options.preview.hljs), previewPanel, vditor.options.cdn);\n            (0,codeRender/* codeRender */.O)(previewPanel, vditor.options.preview.hljs);\n        }\n    }\n    previewPanel.setAttribute(\"data-render\", \"1\");\n};\n\n// EXTERNAL MODULE: ./src/ts/util/selection.ts\nvar selection = __webpack_require__(810);\n;// CONCATENATED MODULE: ./src/ts/util/toc.ts\n\n\n\n\nvar renderToc = function (vditor) {\n    if (vditor.currentMode === \"sv\") {\n        return;\n    }\n    var editorElement = vditor[vditor.currentMode].element;\n    var tocHTML = vditor.outline.render(vditor);\n    if (tocHTML === \"\") {\n        tocHTML = \"[ToC]\";\n    }\n    editorElement.querySelectorAll('[data-type=\"toc-block\"]').forEach(function (item) {\n        item.innerHTML = tocHTML;\n        (0,mathRender/* mathRender */.H)(item, {\n            cdn: vditor.options.cdn,\n            math: vditor.options.preview.math,\n        });\n    });\n};\nvar clickToc = function (event, vditor) {\n    var spanElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"SPAN\");\n    if (spanElement && (0,hasClosest/* hasClosestByClassName */.fb)(spanElement, \"vditor-toc\")) {\n        var headingElement = vditor[vditor.currentMode].element.querySelector(\"#\" + spanElement.getAttribute(\"data-target-id\"));\n        if (headingElement) {\n            if (vditor.options.height === \"auto\") {\n                var windowScrollY = headingElement.offsetTop + vditor.element.offsetTop;\n                if (!vditor.options.toolbarConfig.pin) {\n                    windowScrollY += vditor.toolbar.element.offsetHeight;\n                }\n                window.scrollTo(window.scrollX, windowScrollY);\n            }\n            else {\n                if (vditor.element.offsetTop < window.scrollY) {\n                    window.scrollTo(window.scrollX, vditor.element.offsetTop);\n                }\n                vditor[vditor.currentMode].element.scrollTop = headingElement.offsetTop;\n            }\n        }\n        return;\n    }\n};\nvar keydownToc = function (blockElement, vditor, event, range) {\n    // toc 前无元素，插入空块\n    if (blockElement.previousElementSibling &&\n        blockElement.previousElementSibling.classList.contains(\"vditor-toc\")) {\n        if (event.key === \"Backspace\" &&\n            (0,selection/* getSelectPosition */.im)(blockElement, vditor[vditor.currentMode].element, range).start === 0) {\n            blockElement.previousElementSibling.remove();\n            execAfterRender(vditor);\n            return true;\n        }\n        if (insertBeforeBlock(vditor, event, range, blockElement, blockElement.previousElementSibling)) {\n            return true;\n        }\n    }\n    // toc 后无元素，插入空块\n    if (blockElement.nextElementSibling &&\n        blockElement.nextElementSibling.classList.contains(\"vditor-toc\")) {\n        if (event.key === \"Delete\" &&\n            (0,selection/* getSelectPosition */.im)(blockElement, vditor[vditor.currentMode].element, range).start\n                >= blockElement.textContent.trimRight().length) {\n            blockElement.nextElementSibling.remove();\n            execAfterRender(vditor);\n            return true;\n        }\n        if (insertAfterBlock(vditor, event, range, blockElement, blockElement.nextElementSibling)) {\n            return true;\n        }\n    }\n    // toc 删除\n    if (event.key === \"Backspace\" || event.key === \"Delete\") {\n        var tocElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-toc\");\n        if (tocElement) {\n            tocElement.remove();\n            execAfterRender(vditor);\n            return true;\n        }\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/input.ts\n\n\n\n\n\n\n\n\n\n\nvar input = function (vditor, range, ignoreSpace, event) {\n    if (ignoreSpace === void 0) { ignoreSpace = false; }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    // 前后可以输入空格\n    if (blockElement && !ignoreSpace && blockElement.getAttribute(\"data-type\") !== \"code-block\") {\n        if ((isHrMD(blockElement.innerHTML) && blockElement.previousElementSibling) ||\n            isHeadingMD(blockElement.innerHTML)) {\n            return;\n        }\n        // 前后空格处理\n        var startOffset = (0,selection/* getSelectPosition */.im)(blockElement, vditor.ir.element, range).start;\n        // 开始可以输入空格\n        var startSpace = true;\n        for (var i = startOffset - 1; \n        // 软换行后有空格\n        i > blockElement.textContent.substr(0, startOffset).lastIndexOf(\"\\n\"); i--) {\n            if (blockElement.textContent.charAt(i) !== \" \" &&\n                // 多个 tab 前删除不形成代码块 https://github.com/Vanessa219/vditor/issues/162 1\n                blockElement.textContent.charAt(i) !== \"\\t\") {\n                startSpace = false;\n                break;\n            }\n        }\n        if (startOffset === 0) {\n            startSpace = false;\n        }\n        // 结尾可以输入空格\n        var endSpace = true;\n        for (var i = startOffset - 1; i < blockElement.textContent.length; i++) {\n            if (blockElement.textContent.charAt(i) !== \" \" && blockElement.textContent.charAt(i) !== \"\\n\") {\n                endSpace = false;\n                break;\n            }\n        }\n        if (startSpace) {\n            if (typeof vditor.options.input === \"function\") {\n                vditor.options.input(getMarkdown(vditor));\n            }\n            return;\n        }\n        // https://github.com/Vanessa219/vditor/issues/729\n        if (endSpace && /^#{1,6} $/.test(blockElement.textContent)) {\n            endSpace = false;\n        }\n        if (endSpace) {\n            var markerElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__marker\");\n            if (markerElement) {\n                // inline marker space https://github.com/Vanessa219/vditor/issues/239\n            }\n            else {\n                var previousNode = range.startContainer.previousSibling;\n                if (previousNode && previousNode.nodeType !== 3 && previousNode.classList.contains(\"vditor-ir__node--expand\")) {\n                    // FireFox https://github.com/Vanessa219/vditor/issues/239\n                    previousNode.classList.remove(\"vditor-ir__node--expand\");\n                }\n                if (typeof vditor.options.input === \"function\") {\n                    vditor.options.input(getMarkdown(vditor));\n                }\n                return;\n            }\n        }\n    }\n    vditor.ir.element.querySelectorAll(\".vditor-ir__node--expand\").forEach(function (item) {\n        item.classList.remove(\"vditor-ir__node--expand\");\n    });\n    if (!blockElement) {\n        // 使用顶级块元素，应使用 innerHTML\n        blockElement = vditor.ir.element;\n    }\n    // document.exeComment insertHTML 会插入 wbr\n    if (!blockElement.querySelector(\"wbr\")) {\n        var previewRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__preview\");\n        if (previewRenderElement) {\n            previewRenderElement.previousElementSibling.insertAdjacentHTML(\"beforeend\", \"<wbr>\");\n        }\n        else {\n            range.insertNode(document.createElement(\"wbr\"));\n        }\n    }\n    // 清除浏览器自带的样式\n    blockElement.querySelectorAll(\"[style]\").forEach(function (item) {\n        item.removeAttribute(\"style\");\n    });\n    if (blockElement.getAttribute(\"data-type\") === \"link-ref-defs-block\") {\n        // 修改链接引用\n        blockElement = vditor.ir.element;\n    }\n    var isIRElement = blockElement.isEqualNode(vditor.ir.element);\n    var footnoteElement = (0,hasClosest/* hasClosestByAttribute */.a1)(blockElement, \"data-type\", \"footnotes-block\");\n    var html = \"\";\n    if (!isIRElement) {\n        var blockquoteElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"BLOCKQUOTE\");\n        // 列表需要到最顶层\n        var topListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n        if (topListElement) {\n            blockElement = topListElement;\n        }\n        // 应到引用层，否则 > --- 会解析为 front-matter；列表中有 blockquote 则解析 blockquote；blockquote 中有列表则解析列表\n        if (blockquoteElement && (!topListElement || (topListElement && !blockquoteElement.contains(topListElement)))) {\n            blockElement = blockquoteElement;\n        }\n        // 修改脚注\n        if (footnoteElement) {\n            blockElement = footnoteElement;\n        }\n        html = blockElement.outerHTML;\n        if (blockElement.tagName === \"UL\" || blockElement.tagName === \"OL\") {\n            // 如果为列表的话，需要把上下的列表都重绘\n            var listPrevElement = blockElement.previousElementSibling;\n            var listNextElement = blockElement.nextElementSibling;\n            if (listPrevElement && (listPrevElement.tagName === \"UL\" || listPrevElement.tagName === \"OL\")) {\n                html = listPrevElement.outerHTML + html;\n                listPrevElement.remove();\n            }\n            if (listNextElement && (listNextElement.tagName === \"UL\" || listNextElement.tagName === \"OL\")) {\n                html = html + listNextElement.outerHTML;\n                listNextElement.remove();\n            }\n            // firefox 列表回车不会产生新的 list item https://github.com/Vanessa219/vditor/issues/194\n            html = html.replace(\"<div><wbr><br></div>\", \"<li><p><wbr><br></p></li>\");\n        }\n        else if (blockElement.previousElementSibling &&\n            blockElement.previousElementSibling.textContent.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") !== \"\" &&\n            event && event.inputType === \"insertParagraph\") {\n            // 换行时需要处理上一段落\n            html = blockElement.previousElementSibling.outerHTML + html;\n            blockElement.previousElementSibling.remove();\n        }\n        if (!blockElement.innerText.startsWith(\"```\")) {\n            // 添加链接引用\n            vditor.ir.element.querySelectorAll(\"[data-type='link-ref-defs-block']\").forEach(function (item) {\n                if (item && !blockElement.isEqualNode(item)) {\n                    html += item.outerHTML;\n                    item.remove();\n                }\n            });\n            // 添加脚注\n            vditor.ir.element.querySelectorAll(\"[data-type='footnotes-block']\").forEach(function (item) {\n                if (item && !blockElement.isEqualNode(item)) {\n                    html += item.outerHTML;\n                    item.remove();\n                }\n            });\n        }\n    }\n    else {\n        html = blockElement.innerHTML;\n    }\n    log(\"SpinVditorIRDOM\", html, \"argument\", vditor.options.debugger);\n    html = vditor.lute.SpinVditorIRDOM(html);\n    log(\"SpinVditorIRDOM\", html, \"result\", vditor.options.debugger);\n    if (isIRElement) {\n        blockElement.innerHTML = html;\n    }\n    else {\n        blockElement.outerHTML = html;\n        // 更新正文中的 tip\n        if (footnoteElement) {\n            var footnoteItemElement = (0,hasClosest/* hasClosestByAttribute */.a1)(vditor.ir.element.querySelector(\"wbr\"), \"data-type\", \"footnotes-def\");\n            if (footnoteItemElement) {\n                var footnoteItemText = footnoteItemElement.textContent;\n                var marker = footnoteItemText.substring(1, footnoteItemText.indexOf(\"]:\"));\n                var footnoteRefElement = vditor.ir.element.querySelector(\"sup[data-type=\\\"footnotes-ref\\\"][data-footnotes-label=\\\"\".concat(marker, \"\\\"]\"));\n                if (footnoteRefElement) {\n                    footnoteRefElement.setAttribute(\"aria-label\", footnoteItemText.substr(marker.length + 3).trim().substr(0, 24));\n                }\n            }\n        }\n    }\n    //  linkref 合并及添加\n    var firstLinkRefDefElement;\n    var allLinkRefDefsElement = vditor.ir.element.querySelectorAll(\"[data-type='link-ref-defs-block']\");\n    allLinkRefDefsElement.forEach(function (item, index) {\n        if (index === 0) {\n            firstLinkRefDefElement = item;\n        }\n        else {\n            firstLinkRefDefElement.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n            item.remove();\n        }\n    });\n    if (allLinkRefDefsElement.length > 0) {\n        vditor.ir.element.insertAdjacentElement(\"beforeend\", allLinkRefDefsElement[0]);\n    }\n    // 脚注合并后添加的末尾\n    var firstFootnoteElement;\n    var allFootnoteElement = vditor.ir.element.querySelectorAll(\"[data-type='footnotes-block']\");\n    allFootnoteElement.forEach(function (item, index) {\n        if (index === 0) {\n            firstFootnoteElement = item;\n        }\n        else {\n            firstFootnoteElement.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n            item.remove();\n        }\n    });\n    if (allFootnoteElement.length > 0) {\n        vditor.ir.element.insertAdjacentElement(\"beforeend\", allFootnoteElement[0]);\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n    vditor.ir.element.querySelectorAll(\".vditor-ir__preview[data-render='2']\").forEach(function (item) {\n        processCodeRender(item, vditor);\n    });\n    renderToc(vditor);\n    process_processAfterRender(vditor, {\n        enableAddUndoStack: true,\n        enableHint: true,\n        enableInput: true,\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/hotKey.ts\n\n// 是否匹配 ⇧⌘[] / ⌘[] / ⌥[] / ⌥⌘[] / ⇧Tab / []\nvar matchHotKey = function (hotKey, event) {\n    if (hotKey === \"\") {\n        return false;\n    }\n    // []\n    if (hotKey.indexOf(\"⇧\") === -1 && hotKey.indexOf(\"⌘\") === -1 && hotKey.indexOf(\"⌥\") === -1) {\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey && event.code === hotKey) {\n            return true;\n        }\n        return false;\n    }\n    // 是否匹配 ⇧Tab\n    if (hotKey === \"⇧Tab\") {\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.shiftKey && event.code === \"Tab\") {\n            return true;\n        }\n        return false;\n    }\n    var hotKeys = hotKey.split(\"\");\n    if (hotKey.startsWith(\"⌥\")) {\n        // 是否匹配 ⌥[] / ⌥⌘[]\n        var keyCode = hotKeys.length === 3 ? hotKeys[2] : hotKeys[1];\n        if ((hotKeys.length === 3 ? (0,compatibility/* isCtrl */.yl)(event) : !(0,compatibility/* isCtrl */.yl)(event)) && event.altKey && !event.shiftKey &&\n            event.code === (/^[0-9]$/.test(keyCode) ? \"Digit\" : \"Key\") + keyCode) {\n            return true;\n        }\n        return false;\n    }\n    // 是否匹配 ⇧⌘[] / ⌘[]\n    if (hotKey === \"⌘Enter\") {\n        hotKeys = [\"⌘\", \"Enter\"];\n    }\n    var hasShift = hotKeys.length > 2 && (hotKeys[0] === \"⇧\");\n    var key = (hasShift ? hotKeys[2] : hotKeys[1]);\n    if (hasShift && ((0,compatibility/* isFirefox */.vU)() || !/Mac/.test(navigator.platform))) {\n        if (key === \"-\") {\n            key = \"_\";\n        }\n        else if (key === \"=\") {\n            key = \"+\";\n        }\n    }\n    if ((0,compatibility/* isCtrl */.yl)(event) && event.key.toLowerCase() === key.toLowerCase() && !event.altKey\n        && ((!hasShift && !event.shiftKey) || (hasShift && event.shiftKey))) {\n        return true;\n    }\n    return false;\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/expandMarker.ts\n\n\nvar nextIsNode = function (range) {\n    var startContainer = range.startContainer;\n    if (startContainer.nodeType === 3 && startContainer.nodeValue.length !== range.startOffset) {\n        return false;\n    }\n    var nextNode = startContainer.nextSibling;\n    while (nextNode && nextNode.textContent === \"\") {\n        nextNode = nextNode.nextSibling;\n    }\n    if (!nextNode) {\n        // *em*|**string**\n        var markerElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-ir__marker\");\n        if (markerElement && !markerElement.nextSibling) {\n            var parentNextNode = startContainer.parentElement.parentElement.nextSibling;\n            if (parentNextNode && parentNextNode.nodeType !== 3 &&\n                parentNextNode.classList.contains(\"vditor-ir__node\")) {\n                return parentNextNode;\n            }\n        }\n        return false;\n    }\n    else if (nextNode && nextNode.nodeType !== 3 && nextNode.classList.contains(\"vditor-ir__node\") &&\n        !nextNode.getAttribute(\"data-block\")) {\n        // test|*em*\n        return nextNode;\n    }\n    return false;\n};\nvar previousIsNode = function (range) {\n    var startContainer = range.startContainer;\n    var previousNode = startContainer.previousSibling;\n    if (startContainer.nodeType === 3 && range.startOffset === 0 && previousNode && previousNode.nodeType !== 3 &&\n        // *em*|text\n        previousNode.classList.contains(\"vditor-ir__node\") && !previousNode.getAttribute(\"data-block\")) {\n        return previousNode;\n    }\n    return false;\n};\nvar expandMarker = function (range, vditor) {\n    vditor.ir.element.querySelectorAll(\".vditor-ir__node--expand\").forEach(function (item) {\n        item.classList.remove(\"vditor-ir__node--expand\");\n    });\n    var nodeElement = (0,hasClosest/* hasTopClosestByClassName */.JQ)(range.startContainer, \"vditor-ir__node\");\n    var nodeElementEnd = !range.collapsed && (0,hasClosest/* hasTopClosestByClassName */.JQ)(range.endContainer, \"vditor-ir__node\");\n    // 选中文本为同一个 nodeElement 内时，需要展开\n    if (!range.collapsed && (!nodeElement || nodeElement !== nodeElementEnd)) {\n        return;\n    }\n    if (nodeElement) {\n        nodeElement.classList.add(\"vditor-ir__node--expand\");\n        nodeElement.classList.remove(\"vditor-ir__node--hidden\");\n        // https://github.com/Vanessa219/vditor/issues/615 safari中光标位置跳动\n        (0,selection/* setSelectionFocus */.Hc)(range);\n    }\n    var nextNode = nextIsNode(range);\n    if (nextNode) {\n        nextNode.classList.add(\"vditor-ir__node--expand\");\n        nextNode.classList.remove(\"vditor-ir__node--hidden\");\n        return;\n    }\n    var previousNode = previousIsNode(range);\n    if (previousNode) {\n        previousNode.classList.add(\"vditor-ir__node--expand\");\n        previousNode.classList.remove(\"vditor-ir__node--hidden\");\n        return;\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/processKeydown.ts\n\n\n\n\n\n\n\n\n\n\n\nvar processKeydown = function (vditor, event) {\n    vditor.ir.composingLock = event.isComposing;\n    if (event.isComposing) {\n        return false;\n    }\n    // 添加第一次记录 undo 的光标\n    if (event.key.indexOf(\"Arrow\") === -1 && event.key !== \"Meta\" && event.key !== \"Control\" && event.key !== \"Alt\" &&\n        event.key !== \"Shift\" && event.key !== \"CapsLock\" && event.key !== \"Escape\" && !/^F\\d{1,2}$/.test(event.key)) {\n        vditor.undo.recordFirstPosition(vditor, event);\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var startContainer = range.startContainer;\n    if (!fixGSKeyBackspace(event, vditor, startContainer)) {\n        return false;\n    }\n    fixCJKPosition(range, vditor, event);\n    fixHR(range);\n    // 仅处理以下快捷键操作\n    if (event.key !== \"Enter\" && event.key !== \"Tab\" && event.key !== \"Backspace\" && event.key.indexOf(\"Arrow\") === -1\n        && !(0,compatibility/* isCtrl */.yl)(event) && event.key !== \"Escape\" && event.key !== \"Delete\") {\n        return false;\n    }\n    // 斜体、粗体、内联代码块中换行\n    var newlineElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-newline\", \"1\");\n    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey && event.key === \"Enter\" && newlineElement\n        && range.startOffset < newlineElement.textContent.length) {\n        var beforeMarkerElement = newlineElement.previousElementSibling;\n        if (beforeMarkerElement) {\n            range.insertNode(document.createTextNode(beforeMarkerElement.textContent));\n            range.collapse(false);\n        }\n        var afterMarkerElement = newlineElement.nextSibling;\n        if (afterMarkerElement) {\n            range.insertNode(document.createTextNode(afterMarkerElement.textContent));\n            range.collapse(true);\n        }\n    }\n    var pElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"P\");\n    // md 处理\n    if (fixMarkdown(event, vditor, pElement, range)) {\n        return true;\n    }\n    // li\n    if (fixList(range, vditor, pElement, event)) {\n        return true;\n    }\n    // blockquote\n    if (fixBlockquote(vditor, range, event, pElement)) {\n        return true;\n    }\n    // 代码块\n    var preRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-ir__marker--pre\");\n    if (preRenderElement && preRenderElement.tagName === \"PRE\") {\n        var codeRenderElement = preRenderElement.firstChild;\n        if (fixCodeBlock(vditor, event, preRenderElement, range)) {\n            return true;\n        }\n        // 数学公式上无元素，按上或左将添加新块\n        if ((codeRenderElement.getAttribute(\"data-type\") === \"math-block\"\n            || codeRenderElement.getAttribute(\"data-type\") === \"html-block\") &&\n            insertBeforeBlock(vditor, event, range, codeRenderElement, preRenderElement.parentElement)) {\n            return true;\n        }\n        // 代码块下无元素或者为代码块/table 元素，添加空块\n        if (insertAfterBlock(vditor, event, range, codeRenderElement, preRenderElement.parentElement)) {\n            return true;\n        }\n    }\n    // 代码块语言\n    var preBeforeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-info\");\n    if (preBeforeElement) {\n        if (event.key === \"Enter\" || event.key === \"Tab\") {\n            range.selectNodeContents(preBeforeElement.nextElementSibling.firstChild);\n            range.collapse(true);\n            event.preventDefault();\n            hidePanel(vditor, [\"hint\"]);\n            return true;\n        }\n        if (event.key === \"Backspace\") {\n            var start = (0,selection/* getSelectPosition */.im)(preBeforeElement, vditor.ir.element).start;\n            if (start === 1) { // 删除零宽空格\n                range.setStart(startContainer, 0);\n            }\n            if (start === 2) { // 删除时清空自动补全语言\n                vditor.hint.recentLanguage = \"\";\n            }\n        }\n        if (insertBeforeBlock(vditor, event, range, preBeforeElement, preBeforeElement.parentElement)) {\n            // 上无元素，按上或左将添加新块\n            hidePanel(vditor, [\"hint\"]);\n            return true;\n        }\n    }\n    // table\n    var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n        (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n    if (event.key.indexOf(\"Arrow\") > -1 && cellElement) {\n        var tableElement = isFirstCell(cellElement);\n        if (tableElement && insertBeforeBlock(vditor, event, range, cellElement, tableElement)) {\n            return true;\n        }\n        var table2Element = isLastCell(cellElement);\n        if (table2Element && insertAfterBlock(vditor, event, range, cellElement, table2Element)) {\n            return true;\n        }\n    }\n    if (fixTable(vditor, event, range)) {\n        return true;\n    }\n    // task list\n    if (fixTask(vditor, range, event)) {\n        return true;\n    }\n    // tab\n    if (fixTab(vditor, range, event)) {\n        return true;\n    }\n    var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(startContainer);\n    if (headingElement) {\n        // enter++: 标题变大\n        if (matchHotKey(\"⌘=\", event)) {\n            var headingMarkerElement = headingElement.querySelector(\".vditor-ir__marker--heading\");\n            if (headingMarkerElement && headingMarkerElement.textContent.trim().length > 1) {\n                process_processHeading(vditor, headingMarkerElement.textContent.substr(1));\n            }\n            event.preventDefault();\n            return true;\n        }\n        // enter++: 标题变小\n        if (matchHotKey(\"⌘-\", event)) {\n            var headingMarkerElement = headingElement.querySelector(\".vditor-ir__marker--heading\");\n            if (headingMarkerElement && headingMarkerElement.textContent.trim().length < 6) {\n                process_processHeading(vditor, headingMarkerElement.textContent.trim() + \"# \");\n            }\n            event.preventDefault();\n            return true;\n        }\n    }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && range.toString() === \"\") {\n        if (fixDelete(vditor, range, event, pElement)) {\n            return true;\n        }\n        if (blockElement && blockElement.previousElementSibling\n            && blockElement.tagName !== \"UL\" && blockElement.tagName !== \"OL\"\n            && (blockElement.previousElementSibling.getAttribute(\"data-type\") === \"code-block\" ||\n                blockElement.previousElementSibling.getAttribute(\"data-type\") === \"math-block\")) {\n            var rangeStart = (0,selection/* getSelectPosition */.im)(blockElement, vditor.ir.element, range).start;\n            if (rangeStart === 0 || (rangeStart === 1 && blockElement.innerText.startsWith(constants/* Constants.ZWSP */.g.ZWSP))) {\n                // 当前块删除后光标落于代码渲染块上，当前块会被删除，因此需要阻止事件，不能和 keyup 中的代码块处理合并\n                range.selectNodeContents(blockElement.previousElementSibling.querySelector(\".vditor-ir__marker--pre code\"));\n                range.collapse(false);\n                expandMarker(range, vditor);\n                if (blockElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                    // 当前块为空且不是最后一个时，需要删除\n                    blockElement.remove();\n                    process_processAfterRender(vditor);\n                }\n                event.preventDefault();\n                return true;\n            }\n        }\n        // 光标位于标题前，marker 后\n        if (headingElement) {\n            var headingLength = headingElement.firstElementChild.textContent.length;\n            if ((0,selection/* getSelectPosition */.im)(headingElement, vditor.ir.element).start === headingLength && headingLength !== 0) {\n                range.setStart(headingElement.firstElementChild.firstChild, headingLength - 1);\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n        }\n    }\n    if ((event.key === \"ArrowUp\" || event.key === \"ArrowDown\") && blockElement) {\n        // https://github.com/Vanessa219/vditor/issues/358\n        blockElement.querySelectorAll(\".vditor-ir__node\").forEach(function (item) {\n            if (!item.contains(startContainer)) {\n                item.classList.add(\"vditor-ir__node--hidden\");\n            }\n        });\n        if (fixFirefoxArrowUpTable(event, blockElement, range)) {\n            return true;\n        }\n    }\n    fixCursorDownInlineMath(range, event.key);\n    if (blockElement && keydownToc(blockElement, vditor, event, range)) {\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\n\n// EXTERNAL MODULE: ./src/ts/preview/image.ts\nvar preview_image = __webpack_require__(190);\n;// CONCATENATED MODULE: ./src/ts/sv/combineFootnote.ts\n/**\n * 合并脚注\n * @param elements vditor.sv.element\n * @param afterCombine 每个脚注块合并完成后的回调, param: root为合并后的脚注块\n */\nvar combineFootnote = function (elements, afterCombine) {\n    elements.querySelectorAll(\"[data-type=footnotes-link]\").forEach(function (el) {\n        var root = el.parentElement;\n        var footnote = root.nextSibling;\n        // 寻找所有该脚注的块\n        while (footnote) {\n            if (footnote.textContent.startsWith(\"    \")) {\n                // 解析到四个空格，加入到root并继续解析\n                var thisNode = footnote;\n                thisNode.childNodes.forEach(function (node) {\n                    root.append(node.cloneNode(true));\n                });\n                footnote = footnote.nextSibling;\n                thisNode.remove();\n            }\n            else {\n                // 非空格停止解析\n                break;\n            }\n        }\n        afterCombine && afterCombine(root);\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/sv/inputEvent.ts\n\n\n\n\n\nvar inputEvent = function (vditor, event) {\n    var _a;\n    var range = getSelection().getRangeAt(0).cloneRange();\n    var startContainer = range.startContainer;\n    if (range.startContainer.nodeType !== 3 && range.startContainer.tagName === \"DIV\") {\n        startContainer = range.startContainer.childNodes[range.startOffset - 1];\n    }\n    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-block\", \"0\");\n    // 不调用 lute 解析\n    if (blockElement && event && (event.inputType === \"deleteContentBackward\" || event.data === \" \")) {\n        // 开始可以输入空格\n        var startOffset = (0,selection/* getSelectPosition */.im)(blockElement, vditor.sv.element, range).start;\n        var startSpace = true;\n        for (var i = startOffset - 1; \n        // 软换行后有空格\n        i > blockElement.textContent.substr(0, startOffset).lastIndexOf(\"\\n\"); i--) {\n            if (blockElement.textContent.charAt(i) !== \" \" &&\n                // 多个 tab 前删除不形成代码块 https://github.com/Vanessa219/vditor/issues/162 1\n                blockElement.textContent.charAt(i) !== \"\\t\") {\n                startSpace = false;\n                break;\n            }\n        }\n        if (startOffset === 0) {\n            startSpace = false;\n        }\n        if (startSpace) {\n            processAfterRender(vditor);\n            return;\n        }\n        if (event.inputType === \"deleteContentBackward\") {\n            // https://github.com/Vanessa219/vditor/issues/584 代码块 marker 删除\n            var codeBlockMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-open-marker\") ||\n                (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-close-marker\");\n            if (codeBlockMarkerElement) {\n                if (codeBlockMarkerElement.getAttribute(\"data-type\") === \"code-block-close-marker\") {\n                    var openMarkerElement = getSideByType(startContainer, \"code-block-open-marker\");\n                    if (openMarkerElement) {\n                        openMarkerElement.textContent = codeBlockMarkerElement.textContent;\n                        processAfterRender(vditor);\n                        return;\n                    }\n                }\n                if (codeBlockMarkerElement.getAttribute(\"data-type\") === \"code-block-open-marker\") {\n                    var openMarkerElement = getSideByType(startContainer, \"code-block-close-marker\", false);\n                    if (openMarkerElement) {\n                        openMarkerElement.textContent = codeBlockMarkerElement.textContent;\n                        processAfterRender(vditor);\n                        return;\n                    }\n                }\n            }\n            // https://github.com/Vanessa219/vditor/issues/877 数学公式输入删除生成节点\n            var mathBlockMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"math-block-open-marker\");\n            if (mathBlockMarkerElement) {\n                var mathBlockCloseElement = mathBlockMarkerElement.nextElementSibling.nextElementSibling;\n                if (mathBlockCloseElement && mathBlockCloseElement.getAttribute(\"data-type\") === \"math-block-close-marker\") {\n                    mathBlockCloseElement.remove();\n                    processAfterRender(vditor);\n                }\n                return;\n            }\n            blockElement.querySelectorAll('[data-type=\"code-block-open-marker\"]').forEach(function (item) {\n                if (item.textContent.length === 1) {\n                    item.remove();\n                }\n            });\n            blockElement.querySelectorAll('[data-type=\"code-block-close-marker\"]').forEach(function (item) {\n                if (item.textContent.length === 1) {\n                    item.remove();\n                }\n            });\n            // 标题删除\n            var headingElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"heading-marker\");\n            if (headingElement && headingElement.textContent.indexOf(\"#\") === -1) {\n                processAfterRender(vditor);\n                return;\n            }\n        }\n        // 删除或空格不解析，否则会 format 回去\n        if ((event.data === \" \" || event.inputType === \"deleteContentBackward\") &&\n            ((0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"padding\") // 场景：b 前进行删除 [> 1. a\\n>   b]\n                || (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"li-marker\") // 场景：删除最后一个字符 [* 1\\n* ]\n                || (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"task-marker\") // 场景：删除最后一个字符 [* [ ] ]\n                || (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"blockquote-marker\") // 场景：删除最后一个字符 [> ]\n            )) {\n            processAfterRender(vditor);\n            return;\n        }\n    }\n    if (blockElement && blockElement.textContent.trimRight() === \"$$\") {\n        // 内联数学公式\n        processAfterRender(vditor);\n        return;\n    }\n    if (!blockElement) {\n        blockElement = vditor.sv.element;\n    }\n    if (((_a = blockElement.firstElementChild) === null || _a === void 0 ? void 0 : _a.getAttribute(\"data-type\")) === \"link-ref-defs-block\") {\n        // 修改链接引用\n        blockElement = vditor.sv.element;\n    }\n    if ((0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"footnotes-link\")) {\n        // 修改脚注角标\n        blockElement = vditor.sv.element;\n    }\n    // 添加光标位置\n    if (blockElement.textContent.indexOf(Lute.Caret) === -1) {\n        // 点击工具栏会插入 Caret\n        range.insertNode(document.createTextNode(Lute.Caret));\n    }\n    // 清除浏览器自带的样式\n    blockElement.querySelectorAll(\"[style]\").forEach(function (item) {\n        item.removeAttribute(\"style\");\n    });\n    blockElement.querySelectorAll(\"font\").forEach(function (item) {\n        item.outerHTML = item.innerHTML;\n    });\n    var html = blockElement.textContent;\n    var isSVElement = blockElement.isEqualNode(vditor.sv.element);\n    if (isSVElement) {\n        html = blockElement.textContent;\n    }\n    else {\n        // 添加前一个块元素\n        if (blockElement.previousElementSibling) {\n            html = blockElement.previousElementSibling.textContent + html;\n            blockElement.previousElementSibling.remove();\n        }\n        if (blockElement.previousElementSibling && html.indexOf(\"---\\n\") === 0) {\n            // 确认 yaml-front 是否为首行\n            html = blockElement.previousElementSibling.textContent + html;\n            blockElement.previousElementSibling.remove();\n        }\n        // 添加链接引用\n        var footnotes_1 = \"\";\n        vditor.sv.element.querySelectorAll(\"[data-type='link-ref-defs-block']\").forEach(function (item, index) {\n            if (item && !blockElement.isEqualNode(item.parentElement)) {\n                footnotes_1 += item.parentElement.textContent + \"\\n\";\n                item.parentElement.remove();\n            }\n        });\n        // 添加脚注到文章头，便于lute处理\n        vditor.sv.element.querySelectorAll(\"[data-type='footnotes-link']\").forEach(function (item, index) {\n            if (item && !blockElement.isEqualNode(item.parentElement)) {\n                footnotes_1 += item.parentElement.textContent + \"\\n\";\n                item.parentElement.remove();\n            }\n        });\n        html = footnotes_1 + html;\n    }\n    html = processSpinVditorSVDOM(html, vditor);\n    if (isSVElement) {\n        blockElement.innerHTML = html;\n    }\n    else {\n        blockElement.outerHTML = html;\n    }\n    vditor.sv.element.querySelectorAll(\"[data-type='link-ref-defs-block']\").forEach(function (item) {\n        vditor.sv.element.insertAdjacentElement(\"beforeend\", item.parentElement);\n    });\n    // 合并脚注\n    combineFootnote(vditor.sv.element, function (root) {\n        vditor.sv.element.insertAdjacentElement(\"beforeend\", root);\n    });\n    (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    scrollCenter(vditor);\n    processAfterRender(vditor, {\n        enableAddUndoStack: true,\n        enableHint: true,\n        enableInput: true,\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/sv/processKeydown.ts\n\n\n\n\n\n\n\nvar processKeydown_processKeydown = function (vditor, event) {\n    var _a, _b, _c, _d, _e;\n    vditor.sv.composingLock = event.isComposing;\n    if (event.isComposing) {\n        return false;\n    }\n    if (event.key.indexOf(\"Arrow\") === -1 && event.key !== \"Meta\" && event.key !== \"Control\" && event.key !== \"Alt\" &&\n        event.key !== \"Shift\" && event.key !== \"CapsLock\" && event.key !== \"Escape\" && !/^F\\d{1,2}$/.test(event.key)) {\n        vditor.undo.recordFirstPosition(vditor, event);\n    }\n    // 仅处理以下快捷键操作\n    if (event.key !== \"Enter\" && event.key !== \"Tab\" && event.key !== \"Backspace\" && event.key.indexOf(\"Arrow\") === -1\n        && !(0,compatibility/* isCtrl */.yl)(event) && event.key !== \"Escape\") {\n        return false;\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var startContainer = range.startContainer;\n    if (range.startContainer.nodeType !== 3 && range.startContainer.tagName === \"DIV\") {\n        startContainer = range.startContainer.childNodes[range.startOffset - 1];\n    }\n    var textElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"text\");\n    // blockquote\n    var blockquoteMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"blockquote-marker\");\n    if (!blockquoteMarkerElement && range.startOffset === 0 && textElement && textElement.previousElementSibling &&\n        textElement.previousElementSibling.getAttribute(\"data-type\") === \"blockquote-marker\") {\n        blockquoteMarkerElement = textElement.previousElementSibling;\n    }\n    // 回车逐个删除 blockquote marker 标记\n    if (blockquoteMarkerElement) {\n        if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey &&\n            blockquoteMarkerElement.nextElementSibling.textContent.trim() === \"\" &&\n            (0,selection/* getSelectPosition */.im)(blockquoteMarkerElement, vditor.sv.element, range).start ===\n                blockquoteMarkerElement.textContent.length) {\n            if (((_a = blockquoteMarkerElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.getAttribute(\"data-type\")) === \"padding\") {\n                // 列表中存在多行 BQ 时，标记回车需跳出列表\n                blockquoteMarkerElement.previousElementSibling.setAttribute(\"data-action\", \"enter-remove\");\n            }\n            blockquoteMarkerElement.remove();\n            processAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // list item\n    var listMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"li-marker\");\n    var taskMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"task-marker\");\n    var listLastMarkerElement = listMarkerElement;\n    if (!listLastMarkerElement) {\n        if (taskMarkerElement && taskMarkerElement.nextElementSibling.getAttribute(\"data-type\") !== \"task-marker\") {\n            listLastMarkerElement = taskMarkerElement;\n        }\n    }\n    if (!listLastMarkerElement && range.startOffset === 0 && textElement && textElement.previousElementSibling &&\n        (textElement.previousElementSibling.getAttribute(\"data-type\") === \"li-marker\" ||\n            textElement.previousElementSibling.getAttribute(\"data-type\") === \"task-marker\")) {\n        listLastMarkerElement = textElement.previousElementSibling;\n    }\n    if (listLastMarkerElement) {\n        var startIndex = (0,selection/* getSelectPosition */.im)(listLastMarkerElement, vditor.sv.element, range).start;\n        var isTask = listLastMarkerElement.getAttribute(\"data-type\") === \"task-marker\";\n        var listFirstMarkerElement = listLastMarkerElement;\n        if (isTask) {\n            listFirstMarkerElement = listLastMarkerElement.previousElementSibling.previousElementSibling\n                .previousElementSibling;\n        }\n        if (startIndex === listLastMarkerElement.textContent.length) {\n            // 回车清空列表标记符\n            if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey &&\n                listLastMarkerElement.nextElementSibling.textContent.trim() === \"\") {\n                if (((_b = listFirstMarkerElement.previousElementSibling) === null || _b === void 0 ? void 0 : _b.getAttribute(\"data-type\")) === \"padding\") {\n                    listFirstMarkerElement.previousElementSibling.remove();\n                    inputEvent(vditor);\n                }\n                else {\n                    if (isTask) {\n                        listFirstMarkerElement.remove();\n                        listLastMarkerElement.previousElementSibling.previousElementSibling.remove();\n                        listLastMarkerElement.previousElementSibling.remove();\n                    }\n                    listLastMarkerElement.nextElementSibling.remove();\n                    listLastMarkerElement.remove();\n                    processAfterRender(vditor);\n                }\n                event.preventDefault();\n                return true;\n            }\n            // 第一个 marker 后 tab 进行缩进\n            if (event.key === \"Tab\") {\n                if (event.shiftKey) {\n                    if (listFirstMarkerElement.previousElementSibling.getAttribute(\"data-type\") === \"padding\") {\n                        listFirstMarkerElement.previousElementSibling.remove();\n                    }\n                }\n                else {\n                    listFirstMarkerElement.insertAdjacentHTML(\"beforebegin\", \"<span data-type=\\\"padding\\\">\".concat(listFirstMarkerElement.textContent.replace(/\\S/g, \" \"), \"</span>\"));\n                }\n                if (/^\\d/.test(listFirstMarkerElement.textContent)) {\n                    listFirstMarkerElement.textContent = listFirstMarkerElement.textContent.replace(/^\\d{1,}/, \"1\");\n                    range.selectNodeContents(listLastMarkerElement.firstChild);\n                    range.collapse(false);\n                }\n                inputEvent(vditor);\n                event.preventDefault();\n                return true;\n            }\n        }\n    }\n    // tab\n    if (fixTab(vditor, range, event)) {\n        return true;\n    }\n    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-block\", \"0\");\n    var spanElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(startContainer, \"SPAN\");\n    // 回车\n    if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey && blockElement) {\n        var isFirst = false;\n        var newLineMatch = blockElement.textContent.match(/^\\n+/);\n        if ((0,selection/* getSelectPosition */.im)(blockElement, vditor.sv.element).start <= (newLineMatch ? newLineMatch[0].length : 0)) {\n            // 允许段落开始换行\n            isFirst = true;\n        }\n        var newLineText = \"\\n\";\n        if (spanElement) {\n            if (((_c = spanElement.previousElementSibling) === null || _c === void 0 ? void 0 : _c.getAttribute(\"data-action\")) === \"enter-remove\") {\n                // https://github.com/Vanessa219/vditor/issues/596\n                spanElement.previousElementSibling.remove();\n                processAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                newLineText += processPreviousMarkers(spanElement);\n            }\n        }\n        range.insertNode(document.createTextNode(newLineText));\n        range.collapse(false);\n        if (blockElement && blockElement.textContent.trim() !== \"\" && !isFirst) {\n            inputEvent(vditor);\n        }\n        else {\n            processAfterRender(vditor);\n        }\n        event.preventDefault();\n        return true;\n    }\n    // 删除后光标前有 newline 的处理\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey) {\n        if (spanElement && ((_d = spanElement.previousElementSibling) === null || _d === void 0 ? void 0 : _d.getAttribute(\"data-type\")) === \"newline\" &&\n            (0,selection/* getSelectPosition */.im)(spanElement, vditor.sv.element, range).start === 1 &&\n            // 飘号的处理需在 inputEvent 中，否则上下飘号对不齐\n            spanElement.getAttribute(\"data-type\").indexOf(\"code-block-\") === -1) {\n            // 光标在每一行的第一个字符后\n            range.setStart(spanElement, 0);\n            range.extractContents();\n            if (spanElement.textContent.trim() !== \"\") {\n                inputEvent(vditor);\n            }\n            else {\n                processAfterRender(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        // 每一段第一个字符前\n        if (blockElement && (0,selection/* getSelectPosition */.im)(blockElement, vditor.sv.element, range).start === 0 &&\n            blockElement.previousElementSibling) {\n            range.extractContents();\n            var previousLastElement = blockElement.previousElementSibling.lastElementChild;\n            if (previousLastElement.getAttribute(\"data-type\") === \"newline\") {\n                previousLastElement.remove();\n                previousLastElement = blockElement.previousElementSibling.lastElementChild;\n            }\n            // 场景：末尾无法删除 [```\\ntext\\n```\\n\\n]\n            if (previousLastElement.getAttribute(\"data-type\") !== \"newline\") {\n                previousLastElement.insertAdjacentHTML(\"afterend\", blockElement.innerHTML);\n                blockElement.remove();\n            }\n            if (blockElement.textContent.trim() !== \"\" && !((_e = blockElement.previousElementSibling) === null || _e === void 0 ? void 0 : _e.querySelector('[data-type=\"code-block-open-marker\"]'))) {\n                inputEvent(vditor);\n            }\n            else {\n                if (previousLastElement.getAttribute(\"data-type\") !== \"newline\") {\n                    // https://github.com/Vanessa219/vditor/issues/597\n                    range.selectNodeContents(previousLastElement.lastChild);\n                    range.collapse(false);\n                }\n                processAfterRender(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n    }\n    return false;\n};\n\n// EXTERNAL MODULE: ./src/ts/ui/setContentTheme.ts\nvar setContentTheme = __webpack_require__(538);\n;// CONCATENATED MODULE: ./src/ts/ui/setTheme.ts\nvar setTheme = function (vditor) {\n    if (vditor.options.theme === \"dark\") {\n        vditor.element.classList.add(\"vditor--dark\");\n    }\n    else {\n        vditor.element.classList.remove(\"vditor--dark\");\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/ui/initUI.ts\n\n\n\n\n\n\nvar initUI = function (vditor) {\n    vditor.element.innerHTML = \"\";\n    vditor.element.classList.add(\"vditor\");\n    // 支持 RTL\n    if (vditor.options.rtl) {\n        vditor.element.setAttribute(\"dir\", \"rtl\");\n    }\n    setTheme(vditor);\n    (0,setContentTheme/* setContentTheme */.Z)(vditor.options.preview.theme.current, vditor.options.preview.theme.path);\n    if (typeof vditor.options.height === \"number\") {\n        vditor.element.style.height = vditor.options.height + \"px\";\n    }\n    else {\n        vditor.element.style.height = vditor.options.height;\n    }\n    if (typeof vditor.options.minHeight === \"number\") {\n        vditor.element.style.minHeight = vditor.options.minHeight + \"px\";\n    }\n    if (typeof vditor.options.width === \"number\") {\n        vditor.element.style.width = vditor.options.width + \"px\";\n    }\n    else {\n        vditor.element.style.width = vditor.options.width;\n    }\n    vditor.element.appendChild(vditor.toolbar.element);\n    var contentElement = document.createElement(\"div\");\n    contentElement.className = \"vditor-content\";\n    if (vditor.options.outline.position === \"left\") {\n        contentElement.appendChild(vditor.outline.element);\n    }\n    contentElement.appendChild(vditor.wysiwyg.element.parentElement);\n    contentElement.appendChild(vditor.sv.element);\n    contentElement.appendChild(vditor.ir.element.parentElement);\n    contentElement.appendChild(vditor.preview.element);\n    if (vditor.toolbar.elements.devtools) {\n        contentElement.appendChild(vditor.devtools.element);\n    }\n    if (vditor.options.outline.position === \"right\") {\n        vditor.outline.element.classList.add(\"vditor-outline--right\");\n        contentElement.appendChild(vditor.outline.element);\n    }\n    if (vditor.upload) {\n        contentElement.appendChild(vditor.upload.element);\n    }\n    if (vditor.options.resize.enable) {\n        contentElement.appendChild(vditor.resize.element);\n    }\n    contentElement.appendChild(vditor.hint.element);\n    contentElement.appendChild(vditor.tip.element);\n    vditor.element.appendChild(contentElement);\n    contentElement.addEventListener(\"click\", function () {\n        hidePanel(vditor, [\"subToolbar\"]);\n    });\n    if (vditor.toolbar.elements.export) {\n        // for export pdf\n        vditor.element.insertAdjacentHTML(\"beforeend\", '<iframe id=\"vditorExportIframe\" style=\"width: 100%;height: 0;border: 0\"></iframe>');\n    }\n    setEditMode(vditor, vditor.options.mode, afterRender(vditor));\n    document.execCommand(\"DefaultParagraphSeparator\", false, \"p\");\n    if (navigator.userAgent.indexOf(\"iPhone\") > -1 && typeof window.visualViewport !== \"undefined\") {\n        // https://github.com/Vanessa219/vditor/issues/379\n        var pendingUpdate_1 = false;\n        var viewportHandler = function (event) {\n            if (pendingUpdate_1) {\n                return;\n            }\n            pendingUpdate_1 = true;\n            requestAnimationFrame(function () {\n                pendingUpdate_1 = false;\n                var layoutViewport = vditor.toolbar.element;\n                layoutViewport.style.transform = \"none\";\n                if (layoutViewport.getBoundingClientRect().top < 0) {\n                    layoutViewport.style.transform = \"translate(0, \".concat(-layoutViewport.getBoundingClientRect().top, \"px)\");\n                }\n            });\n        };\n        window.visualViewport.addEventListener(\"scroll\", viewportHandler);\n        window.visualViewport.addEventListener(\"resize\", viewportHandler);\n    }\n};\nvar setPadding = function (vditor) {\n    var minPadding = window.innerWidth <= constants/* Constants.MOBILE_WIDTH */.g.MOBILE_WIDTH ? 10 : 35;\n    if (vditor.wysiwyg.element.parentElement.style.display !== \"none\") {\n        var padding = (vditor.wysiwyg.element.parentElement.clientWidth\n            - vditor.options.preview.maxWidth) / 2;\n        vditor.wysiwyg.element.style.padding = \"10px \".concat(Math.max(minPadding, padding), \"px\");\n    }\n    if (vditor.ir.element.parentElement.style.display !== \"none\") {\n        var padding = (vditor.ir.element.parentElement.clientWidth\n            - vditor.options.preview.maxWidth) / 2;\n        vditor.ir.element.style.padding = \"10px \".concat(Math.max(minPadding, padding), \"px\");\n    }\n    if (vditor.preview.element.style.display !== \"block\") {\n        vditor.toolbar.element.style.paddingLeft = Math.max(5, parseInt(vditor[vditor.currentMode].element.style.paddingLeft || \"0\", 10) +\n            (vditor.options.outline.position === \"left\" ? vditor.outline.element.offsetWidth : 0)) + \"px\";\n    }\n    else {\n        vditor.toolbar.element.style.paddingLeft = (5 +\n            (vditor.options.outline.position === \"left\" ? vditor.outline.element.offsetWidth : 0)) + \"px\";\n    }\n};\nvar setTypewriterPosition = function (vditor) {\n    if (!vditor.options.typewriterMode) {\n        return;\n    }\n    var height = window.innerHeight;\n    if (typeof vditor.options.height === \"number\") {\n        height = vditor.options.height;\n        if (typeof vditor.options.minHeight === \"number\") {\n            height = Math.max(height, vditor.options.minHeight);\n        }\n        height = Math.min(window.innerHeight, height);\n    }\n    else {\n        height = vditor.element.clientHeight;\n    }\n    if (vditor.element.classList.contains(\"vditor--fullscreen\")) {\n        height = window.innerHeight;\n    }\n    // 由于 Firefox padding-bottom bug，只能使用 :after\n    vditor[vditor.currentMode].element.style.setProperty(\"--editor-bottom\", ((height - vditor.toolbar.element.offsetHeight) / 2) + \"px\");\n};\nvar resizeCb;\nfunction UIUnbindListener() {\n    window.removeEventListener(\"resize\", resizeCb);\n}\nvar afterRender = function (vditor) {\n    setTypewriterPosition(vditor);\n    UIUnbindListener();\n    window.addEventListener(\"resize\", resizeCb = function () {\n        setPadding(vditor);\n        setTypewriterPosition(vditor);\n    });\n    // set default value\n    var initValue = (0,compatibility/* accessLocalStorage */.pK)() && localStorage.getItem(vditor.options.cache.id);\n    if (!vditor.options.cache.enable || !initValue) {\n        if (vditor.options.value) {\n            initValue = vditor.options.value;\n        }\n        else if (vditor.originalInnerHTML) {\n            initValue = vditor.lute.HTML2Md(vditor.originalInnerHTML);\n        }\n        else if (!vditor.options.cache.enable) {\n            initValue = \"\";\n        }\n    }\n    return initValue || \"\";\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/highlightToolbarIR.ts\n\n\n\n\n\nvar highlightToolbarIR = function (vditor) {\n    clearTimeout(vditor[vditor.currentMode].hlToolbarTimeoutId);\n    vditor[vditor.currentMode].hlToolbarTimeoutId = window.setTimeout(function () {\n        if (vditor[vditor.currentMode].element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        if (!(0,selection/* selectIsEditor */.Gb)(vditor[vditor.currentMode].element)) {\n            return;\n        }\n        removeCurrentToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        enableToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        var range = (0,selection/* getEditorRange */.zh)(vditor);\n        var typeElement = range.startContainer;\n        if (range.startContainer.nodeType === 3) {\n            typeElement = range.startContainer.parentElement;\n        }\n        if (typeElement.classList.contains(\"vditor-reset\")) {\n            typeElement = typeElement.childNodes[range.startOffset];\n        }\n        var headingElement = vditor.currentMode === \"sv\" ?\n            (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"heading\") : (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(typeElement);\n        if (headingElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"headings\"]);\n        }\n        var quoteElement = vditor.currentMode === \"sv\" ? (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"blockquote\") :\n            (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"BLOCKQUOTE\");\n        if (quoteElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"quote\"]);\n        }\n        var strongElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"strong\");\n        if (strongElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"bold\"]);\n        }\n        var emElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"em\");\n        if (emElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"italic\"]);\n        }\n        var sElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"s\");\n        if (sElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"strike\"]);\n        }\n        var aElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"a\");\n        if (aElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"link\"]);\n        }\n        var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"LI\");\n        if (liElement) {\n            if (liElement.classList.contains(\"vditor-task\")) {\n                setCurrentToolbar(vditor.toolbar.elements, [\"check\"]);\n            }\n            else if (liElement.parentElement.tagName === \"OL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"ordered-list\"]);\n            }\n            else if (liElement.parentElement.tagName === \"UL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"list\"]);\n            }\n            enableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        var codeBlockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"code-block\");\n        if (codeBlockElement) {\n            disableToolbar(vditor.toolbar.elements, [\"headings\", \"bold\", \"italic\", \"strike\", \"line\", \"quote\",\n                \"list\", \"ordered-list\", \"check\", \"code\", \"inline-code\", \"upload\", \"link\", \"table\", \"record\"]);\n            setCurrentToolbar(vditor.toolbar.elements, [\"code\"]);\n        }\n        var codeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"code\");\n        if (codeElement) {\n            disableToolbar(vditor.toolbar.elements, [\"headings\", \"bold\", \"italic\", \"strike\", \"line\", \"quote\",\n                \"list\", \"ordered-list\", \"check\", \"code\", \"upload\", \"link\", \"table\", \"record\"]);\n            setCurrentToolbar(vditor.toolbar.elements, [\"inline-code\"]);\n        }\n        var tableElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"table\");\n        if (tableElement) {\n            disableToolbar(vditor.toolbar.elements, [\"headings\", \"list\", \"ordered-list\", \"check\", \"line\",\n                \"quote\", \"code\", \"table\"]);\n        }\n    }, 200);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/afterRenderEvent.ts\n\n\nvar afterRenderEvent = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (options.enableHint) {\n        vditor.hint.render(vditor);\n    }\n    clearTimeout(vditor.wysiwyg.afterRenderTimeoutId);\n    vditor.wysiwyg.afterRenderTimeoutId = window.setTimeout(function () {\n        if (vditor.wysiwyg.composingLock) {\n            return;\n        }\n        var text = getMarkdown(vditor);\n        if (typeof vditor.options.input === \"function\" && options.enableInput) {\n            vditor.options.input(text);\n        }\n        if (vditor.options.counter.enable) {\n            vditor.counter.render(vditor, text);\n        }\n        if (vditor.options.cache.enable && (0,compatibility/* accessLocalStorage */.pK)()) {\n            localStorage.setItem(vditor.options.cache.id, text);\n            if (vditor.options.cache.after) {\n                vditor.options.cache.after(text);\n            }\n        }\n        if (vditor.devtools) {\n            vditor.devtools.renderEchart(vditor);\n        }\n        if (options.enableAddUndoStack) {\n            vditor.undo.addToUndoStack(vditor);\n        }\n    }, vditor.options.undoDelay);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/inlineTag.ts\n\n\nvar previoueIsEmptyA = function (node) {\n    var previousNode = node.previousSibling;\n    while (previousNode) {\n        if (previousNode.nodeType !== 3 && previousNode.tagName === \"A\" && !previousNode.previousSibling\n            && previousNode.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && previousNode.nextSibling) {\n            return previousNode;\n        }\n        previousNode = previousNode.previousSibling;\n    }\n    return false;\n};\nvar nextIsCode = function (range) {\n    var nextNode = range.startContainer.nextSibling;\n    while (nextNode && nextNode.textContent === \"\") {\n        nextNode = nextNode.nextSibling;\n    }\n    if (nextNode && nextNode.nodeType !== 3 && (nextNode.tagName === \"CODE\" ||\n        nextNode.getAttribute(\"data-type\") === \"math-inline\" ||\n        nextNode.getAttribute(\"data-type\") === \"html-entity\" ||\n        nextNode.getAttribute(\"data-type\") === \"html-inline\")) {\n        return true;\n    }\n    return false;\n};\nvar getNextHTML = function (node) {\n    var html = \"\";\n    var nextNode = node.nextSibling;\n    while (nextNode) {\n        if (nextNode.nodeType === 3) {\n            html += nextNode.textContent;\n        }\n        else {\n            html += nextNode.outerHTML;\n        }\n        nextNode = nextNode.nextSibling;\n    }\n    return html;\n};\nvar getPreviousHTML = function (node) {\n    var html = \"\";\n    var previousNode = node.previousSibling;\n    while (previousNode) {\n        if (previousNode.nodeType === 3) {\n            html = previousNode.textContent + html;\n        }\n        else {\n            html = previousNode.outerHTML + html;\n        }\n        previousNode = previousNode.previousSibling;\n    }\n    return html;\n};\nvar getRenderElementNextNode = function (blockCodeElement) {\n    var nextNode = blockCodeElement;\n    while (nextNode && !nextNode.nextSibling) {\n        nextNode = nextNode.parentElement;\n    }\n    return nextNode.nextSibling;\n};\nvar splitElement = function (range) {\n    var previousHTML = getPreviousHTML(range.startContainer);\n    var nextHTML = getNextHTML(range.startContainer);\n    var text = range.startContainer.textContent;\n    var offset = range.startOffset;\n    var beforeHTML = \"\";\n    var afterHTML = \"\";\n    if (text.substr(0, offset) !== \"\" && text.substr(0, offset) !== constants/* Constants.ZWSP */.g.ZWSP || previousHTML) {\n        beforeHTML = \"\".concat(previousHTML).concat(text.substr(0, offset));\n    }\n    if (text.substr(offset) !== \"\" && text.substr(offset) !== constants/* Constants.ZWSP */.g.ZWSP || nextHTML) {\n        afterHTML = \"\".concat(text.substr(offset)).concat(nextHTML);\n    }\n    return {\n        afterHTML: afterHTML,\n        beforeHTML: beforeHTML,\n    };\n};\nvar modifyPre = function (vditor, range) {\n    // 没有被块元素包裹\n    Array.from(vditor.wysiwyg.element.childNodes).find(function (node) {\n        if (node.nodeType === 3) {\n            var pElement = document.createElement(\"p\");\n            pElement.setAttribute(\"data-block\", \"0\");\n            pElement.textContent = node.textContent;\n            // 为空按下 tab 且 tab = '    ' 时，range.startContainer 不为 node\n            var cloneRangeOffset = range.startContainer.nodeType === 3 ? range.startOffset : node.textContent.length;\n            node.parentNode.insertBefore(pElement, node);\n            node.remove();\n            range.setStart(pElement.firstChild, Math.min(pElement.firstChild.textContent.length, cloneRangeOffset));\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            return true;\n        }\n        else if (!node.getAttribute(\"data-block\")) {\n            if (node.tagName === \"P\") {\n                node.remove();\n            }\n            else {\n                if (node.tagName === \"DIV\") {\n                    range.insertNode(document.createElement(\"wbr\"));\n                    // firefox 列表换行产生 div\n                    node.outerHTML = \"<p data-block=\\\"0\\\">\".concat(node.innerHTML, \"</p>\");\n                }\n                else {\n                    if (node.tagName === \"BR\") {\n                        // firefox 空换行产生 BR\n                        node.outerHTML = \"<p data-block=\\\"0\\\">\".concat(node.outerHTML, \"<wbr></p>\");\n                    }\n                    else {\n                        range.insertNode(document.createElement(\"wbr\"));\n                        node.outerHTML = \"<p data-block=\\\"0\\\">\".concat(node.outerHTML, \"</p>\");\n                    }\n                }\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n                range = getSelection().getRangeAt(0);\n            }\n            return true;\n        }\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/setHeading.ts\n\n\n\nvar setHeading = function (vditor, tagName) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (!blockElement) {\n        blockElement = range.startContainer.childNodes[range.startOffset];\n    }\n    if (!blockElement && vditor.wysiwyg.element.children.length === 0) {\n        blockElement = vditor.wysiwyg.element;\n    }\n    if (blockElement && !blockElement.classList.contains(\"vditor-wysiwyg__block\")) {\n        range.insertNode(document.createElement(\"wbr\"));\n        // Firefox 需要 trim https://github.com/Vanessa219/vditor/issues/207\n        if (blockElement.innerHTML.trim() === \"<wbr>\") {\n            // Firefox 光标对不齐 https://github.com/Vanessa219/vditor/issues/199 1\n            blockElement.innerHTML = \"<wbr><br>\";\n        }\n        if (blockElement.tagName === \"BLOCKQUOTE\" || blockElement.classList.contains(\"vditor-reset\")) {\n            blockElement.innerHTML = \"<\".concat(tagName, \" data-block=\\\"0\\\">\").concat(blockElement.innerHTML.trim(), \"</\").concat(tagName, \">\");\n        }\n        else {\n            blockElement.outerHTML = \"<\".concat(tagName, \" data-block=\\\"0\\\">\").concat(blockElement.innerHTML.trim(), \"</\").concat(tagName, \">\");\n        }\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        renderToc(vditor);\n    }\n};\nvar removeHeading = function (vditor) {\n    var range = getSelection().getRangeAt(0);\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (!blockElement) {\n        blockElement = range.startContainer.childNodes[range.startOffset];\n    }\n    if (blockElement) {\n        range.insertNode(document.createElement(\"wbr\"));\n        blockElement.outerHTML = \"<p data-block=\\\"0\\\">\".concat(blockElement.innerHTML, \"</p>\");\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n    }\n    vditor.wysiwyg.popover.style.display = \"none\";\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/showCode.ts\n\n\nvar showCode = function (previewElement, vditor, first) {\n    if (first === void 0) { first = true; }\n    var previousElement = previewElement.previousElementSibling;\n    var range = previousElement.ownerDocument.createRange();\n    if (previousElement.tagName === \"CODE\") {\n        previousElement.style.display = \"inline-block\";\n        if (first) {\n            range.setStart(previousElement.firstChild, 1);\n        }\n        else {\n            range.selectNodeContents(previousElement);\n        }\n    }\n    else {\n        previousElement.style.display = \"block\";\n        if (!previousElement.firstChild.firstChild) {\n            previousElement.firstChild.appendChild(document.createTextNode(\"\"));\n        }\n        range.selectNodeContents(previousElement.firstChild);\n    }\n    if (first) {\n        range.collapse(true);\n    }\n    else {\n        range.collapse(false);\n    }\n    (0,selection/* setSelectionFocus */.Hc)(range);\n    if (previewElement.firstElementChild.classList.contains(\"language-mindmap\")) {\n        return;\n    }\n    scrollCenter(vditor);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/processKeydown.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar wysiwyg_processKeydown_processKeydown = function (vditor, event) {\n    // Chrome firefox 触发 compositionend 机制不一致 https://github.com/Vanessa219/vditor/issues/188\n    vditor.wysiwyg.composingLock = event.isComposing;\n    if (event.isComposing) {\n        return false;\n    }\n    // 添加第一次记录 undo 的光标\n    if (event.key.indexOf(\"Arrow\") === -1 && event.key !== \"Meta\" && event.key !== \"Control\" && event.key !== \"Alt\" &&\n        event.key !== \"Shift\" && event.key !== \"CapsLock\" && event.key !== \"Escape\" && !/^F\\d{1,2}$/.test(event.key)) {\n        vditor.undo.recordFirstPosition(vditor, event);\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var startContainer = range.startContainer;\n    if (!fixGSKeyBackspace(event, vditor, startContainer)) {\n        return false;\n    }\n    fixCJKPosition(range, vditor, event);\n    fixHR(range);\n    // 仅处理以下快捷键操作\n    if (event.key !== \"Enter\" && event.key !== \"Tab\" && event.key !== \"Backspace\" && event.key.indexOf(\"Arrow\") === -1\n        && !(0,compatibility/* isCtrl */.yl)(event) && event.key !== \"Escape\" && event.key !== \"Delete\") {\n        return false;\n    }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n    var pElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"P\");\n    // md 处理\n    if (fixMarkdown(event, vditor, pElement, range)) {\n        return true;\n    }\n    // li\n    if (fixList(range, vditor, pElement, event)) {\n        return true;\n    }\n    // table\n    if (fixTable(vditor, event, range)) {\n        return true;\n    }\n    // code render\n    var codeRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-wysiwyg__block\");\n    if (codeRenderElement) {\n        // esc: 退出编辑，仅展示渲染\n        if (event.key === \"Escape\" && codeRenderElement.children.length === 2) {\n            vditor.wysiwyg.popover.style.display = \"none\";\n            codeRenderElement.firstElementChild.style.display = \"none\";\n            vditor.wysiwyg.element.blur();\n            event.preventDefault();\n            return true;\n        }\n        // alt+enter: 代码块切换到语言 https://github.com/Vanessa219/vditor/issues/54\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && event.altKey && event.key === \"Enter\" &&\n            codeRenderElement.getAttribute(\"data-type\") === \"code-block\") {\n            var inputElemment = vditor.wysiwyg.popover.querySelector(\".vditor-input\");\n            inputElemment.focus();\n            inputElemment.select();\n            event.preventDefault();\n            return true;\n        }\n        if (codeRenderElement.getAttribute(\"data-block\") === \"0\") {\n            if (fixCodeBlock(vditor, event, codeRenderElement.firstElementChild, range)) {\n                return true;\n            }\n            if (insertAfterBlock(vditor, event, range, codeRenderElement.firstElementChild, codeRenderElement)) {\n                return true;\n            }\n            if (codeRenderElement.getAttribute(\"data-type\") !== \"yaml-front-matter\" &&\n                insertBeforeBlock(vditor, event, range, codeRenderElement.firstElementChild, codeRenderElement)) {\n                return true;\n            }\n        }\n    }\n    // blockquote\n    if (fixBlockquote(vditor, range, event, pElement)) {\n        return true;\n    }\n    // 顶层 blockquote\n    var topBQElement = (0,hasClosest/* hasTopClosestByTag */.E2)(startContainer, \"BLOCKQUOTE\");\n    if (topBQElement) {\n        if (!event.shiftKey && event.altKey && event.key === \"Enter\") {\n            if (!(0,compatibility/* isCtrl */.yl)(event)) {\n                // alt+enter: 跳出多层 blockquote 嵌套之后 https://github.com/Vanessa219/vditor/issues/51\n                range.setStartAfter(topBQElement);\n            }\n            else {\n                // ctrl+alt+enter: 跳出多层 blockquote 嵌套之前\n                range.setStartBefore(topBQElement);\n            }\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            var node = document.createElement(\"p\");\n            node.setAttribute(\"data-block\", \"0\");\n            node.innerHTML = \"\\n\";\n            range.insertNode(node);\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            afterRenderEvent(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // h1-h6\n    var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(startContainer);\n    if (headingElement) {\n        if (headingElement.tagName === \"H6\" && startContainer.textContent.length === range.startOffset &&\n            !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Enter\") {\n            // enter: H6 回车解析问题 https://github.com/Vanessa219/vditor/issues/48\n            var pTempElement = document.createElement(\"p\");\n            pTempElement.textContent = \"\\n\";\n            pTempElement.setAttribute(\"data-block\", \"0\");\n            startContainer.parentElement.insertAdjacentElement(\"afterend\", pTempElement);\n            range.setStart(pTempElement, 0);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            afterRenderEvent(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // enter++: 标题变大\n        if (matchHotKey(\"⌘=\", event)) {\n            var index = parseInt(headingElement.tagName.substr(1), 10) - 1;\n            if (index > 0) {\n                setHeading(vditor, \"h\".concat(index));\n                afterRenderEvent(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        // enter++: 标题变小\n        if (matchHotKey(\"⌘-\", event)) {\n            var index = parseInt(headingElement.tagName.substr(1), 10) + 1;\n            if (index < 7) {\n                setHeading(vditor, \"h\".concat(index));\n                afterRenderEvent(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey\n            && headingElement.textContent.length === 1) {\n            // 删除后变为空\n            removeHeading(vditor);\n        }\n    }\n    // task list\n    if (fixTask(vditor, range, event)) {\n        return true;\n    }\n    // alt+enter\n    if (event.altKey && event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey) {\n        // 切换到链接、链接引用、脚注引用弹出的输入框中\n        var aElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"A\");\n        var linRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"link-ref\");\n        var footnoteRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"footnotes-ref\");\n        if (aElement || linRefElement || footnoteRefElement ||\n            (headingElement && headingElement.tagName.length === 2)) {\n            var inputElement = vditor.wysiwyg.popover.querySelector(\"input\");\n            inputElement.focus();\n            inputElement.select();\n        }\n    }\n    // 删除有子工具栏的块\n    if (removeBlockElement(vditor, event)) {\n        return true;\n    }\n    // 对有子工具栏的块上移\n    if (matchHotKey(\"⇧⌘U\", event)) {\n        var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"up\"]');\n        if (itemElement) {\n            itemElement.click();\n            event.preventDefault();\n            return true;\n        }\n    }\n    // 对有子工具栏的块下移\n    if (matchHotKey(\"⇧⌘D\", event)) {\n        var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"down\"]');\n        if (itemElement) {\n            itemElement.click();\n            event.preventDefault();\n            return true;\n        }\n    }\n    if (fixTab(vditor, range, event)) {\n        return true;\n    }\n    // shift+enter：软换行，但 table/hr/heading 处理、cell 内换行、block render 换行处理单独写在上面，li & p 使用浏览器默认\n    if (!(0,compatibility/* isCtrl */.yl)(event) && event.shiftKey && !event.altKey && event.key === \"Enter\" &&\n        startContainer.parentElement.tagName !== \"LI\" && startContainer.parentElement.tagName !== \"P\") {\n        if ([\"STRONG\", \"STRIKE\", \"S\", \"I\", \"EM\", \"B\"].includes(startContainer.parentElement.tagName)) {\n            // 行内元素软换行需继续 https://github.com/Vanessa219/vditor/issues/170\n            range.insertNode(document.createTextNode(\"\\n\" + constants/* Constants.ZWSP */.g.ZWSP));\n        }\n        else {\n            range.insertNode(document.createTextNode(\"\\n\"));\n        }\n        range.collapse(false);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        afterRenderEvent(vditor);\n        scrollCenter(vditor);\n        event.preventDefault();\n        return true;\n    }\n    // 删除\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && range.toString() === \"\") {\n        if (fixDelete(vditor, range, event, pElement)) {\n            return true;\n        }\n        if (blockElement) {\n            if (blockElement.previousElementSibling\n                && blockElement.previousElementSibling.classList.contains(\"vditor-wysiwyg__block\")\n                && blockElement.previousElementSibling.getAttribute(\"data-block\") === \"0\"\n                // https://github.com/Vanessa219/vditor/issues/946\n                && blockElement.tagName !== \"UL\" && blockElement.tagName !== \"OL\") {\n                var rangeStart = (0,selection/* getSelectPosition */.im)(blockElement, vditor.wysiwyg.element, range).start;\n                if ((rangeStart === 0 && range.startOffset === 0) || // https://github.com/Vanessa219/vditor/issues/894\n                    (rangeStart === 1 && blockElement.innerText.startsWith(constants/* Constants.ZWSP */.g.ZWSP))) {\n                    // 当前块删除后光标落于代码渲染块上，当前块会被删除，因此需要阻止事件，不能和 keyup 中的代码块处理合并\n                    showCode(blockElement.previousElementSibling.lastElementChild, vditor, false);\n                    if (blockElement.innerHTML.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                        // 当前块为空且不是最后一个时，需要删除\n                        blockElement.remove();\n                        afterRenderEvent(vditor);\n                    }\n                    event.preventDefault();\n                    return true;\n                }\n            }\n            var rangeStartOffset = range.startOffset;\n            if (range.toString() === \"\" && startContainer.nodeType === 3 &&\n                startContainer.textContent.charAt(rangeStartOffset - 2) === \"\\n\" &&\n                startContainer.textContent.charAt(rangeStartOffset - 1) !== constants/* Constants.ZWSP */.g.ZWSP\n                && [\"STRONG\", \"STRIKE\", \"S\", \"I\", \"EM\", \"B\"].includes(startContainer.parentElement.tagName)) {\n                // 保持行内元素软换行需继续的一致性\n                startContainer.textContent = startContainer.textContent.substring(0, rangeStartOffset - 1) +\n                    constants/* Constants.ZWSP */.g.ZWSP;\n                range.setStart(startContainer, rangeStartOffset);\n                range.collapse(true);\n                afterRenderEvent(vditor);\n                event.preventDefault();\n                return true;\n            }\n            // inline code、math、html 行前零宽字符后进行删除\n            if (startContainer.textContent === constants/* Constants.ZWSP */.g.ZWSP && range.startOffset === 1\n                && !startContainer.previousSibling && nextIsCode(range)) {\n                startContainer.textContent = \"\";\n                // 不能返回，其前面为代码渲染块时需进行以下处理：修正光标位于 inline math/html 前，按下删除按钮 code 中内容会被删除\n            }\n            // 修正光标位于 inline math/html, html-entity 前，按下删除按钮 code 中内容会被删除, 不能返回，还需要进行后续处理\n            blockElement.querySelectorAll(\"span.vditor-wysiwyg__block[data-type='math-inline']\").forEach(function (item) {\n                item.firstElementChild.style.display = \"inline\";\n                item.lastElementChild.style.display = \"none\";\n            });\n            blockElement.querySelectorAll(\"span.vditor-wysiwyg__block[data-type='html-entity']\").forEach(function (item) {\n                item.firstElementChild.style.display = \"inline\";\n                item.lastElementChild.style.display = \"none\";\n            });\n        }\n    }\n    if ((0,compatibility/* isFirefox */.vU)() && range.startOffset === 1 && startContainer.textContent.indexOf(constants/* Constants.ZWSP */.g.ZWSP) > -1 &&\n        startContainer.previousSibling && startContainer.previousSibling.nodeType !== 3 &&\n        startContainer.previousSibling.tagName === \"CODE\" &&\n        (event.key === \"Backspace\" || event.key === \"ArrowLeft\")) {\n        // https://github.com/Vanessa219/vditor/issues/410\n        range.selectNodeContents(startContainer.previousSibling);\n        range.collapse(false);\n        event.preventDefault();\n        return true;\n    }\n    if (fixFirefoxArrowUpTable(event, blockElement, range)) {\n        event.preventDefault();\n        return true;\n    }\n    fixCursorDownInlineMath(range, event.key);\n    if (event.key === \"ArrowDown\") {\n        // 光标位于内联数学公式前，按下键无作用\n        var nextElement = startContainer.nextSibling;\n        if (nextElement && nextElement.nodeType !== 3 && nextElement.getAttribute(\"data-type\") === \"math-inline\") {\n            range.setStartAfter(nextElement);\n        }\n    }\n    if (blockElement && keydownToc(blockElement, vditor, event, range)) {\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar removeBlockElement = function (vditor, event) {\n    // 删除有子工具栏的块\n    if (matchHotKey(\"⇧⌘X\", event)) {\n        var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"remove\"]');\n        if (itemElement) {\n            itemElement.click();\n        }\n        event.preventDefault();\n        return true;\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/highlightToolbarWYSIWYG.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar highlightToolbarWYSIWYG = function (vditor) {\n    clearTimeout(vditor.wysiwyg.hlToolbarTimeoutId);\n    vditor.wysiwyg.hlToolbarTimeoutId = window.setTimeout(function () {\n        if (vditor.wysiwyg.element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        if (!(0,selection/* selectIsEditor */.Gb)(vditor.wysiwyg.element)) {\n            return;\n        }\n        removeCurrentToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        enableToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        var range = getSelection().getRangeAt(0);\n        var typeElement = range.startContainer;\n        if (range.startContainer.nodeType === 3) {\n            typeElement = range.startContainer.parentElement;\n        }\n        else {\n            typeElement = typeElement.childNodes[range.startOffset >= typeElement.childNodes.length\n                ? typeElement.childNodes.length - 1\n                : range.startOffset];\n        }\n        var footnotesElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"footnotes-block\");\n        if (footnotesElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genClose(footnotesElement, vditor);\n            setPopoverPosition(vditor, footnotesElement);\n            return;\n        }\n        // 工具栏高亮和禁用\n        var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"LI\");\n        if (liElement) {\n            if (liElement.classList.contains(\"vditor-task\")) {\n                setCurrentToolbar(vditor.toolbar.elements, [\"check\"]);\n            }\n            else if (liElement.parentElement.tagName === \"OL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"ordered-list\"]);\n            }\n            else if (liElement.parentElement.tagName === \"UL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"list\"]);\n            }\n            enableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"BLOCKQUOTE\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"quote\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"B\") ||\n            (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"STRONG\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"bold\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"I\") ||\n            (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"EM\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"italic\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"STRIKE\") ||\n            (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"S\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"strike\"]);\n        }\n        // comments\n        vditor.wysiwyg.element\n            .querySelectorAll(\".vditor-comment--focus\")\n            .forEach(function (item) {\n            item.classList.remove(\"vditor-comment--focus\");\n        });\n        var commentElement = (0,hasClosest/* hasClosestByClassName */.fb)(typeElement, \"vditor-comment\");\n        if (commentElement) {\n            var ids_1 = commentElement.getAttribute(\"data-cmtids\").split(\" \");\n            if (ids_1.length > 1 && commentElement.nextSibling.isSameNode(commentElement.nextElementSibling)) {\n                var nextIds_1 = commentElement.nextElementSibling\n                    .getAttribute(\"data-cmtids\")\n                    .split(\" \");\n                ids_1.find(function (id) {\n                    if (nextIds_1.includes(id)) {\n                        ids_1 = [id];\n                        return true;\n                    }\n                });\n            }\n            vditor.wysiwyg.element\n                .querySelectorAll(\".vditor-comment\")\n                .forEach(function (item) {\n                if (item.getAttribute(\"data-cmtids\").indexOf(ids_1[0]) > -1) {\n                    item.classList.add(\"vditor-comment--focus\");\n                }\n            });\n        }\n        var aElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"A\");\n        if (aElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"link\"]);\n        }\n        var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"TABLE\");\n        var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(typeElement);\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"CODE\")) {\n            if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"PRE\")) {\n                disableToolbar(vditor.toolbar.elements, [\n                    \"headings\",\n                    \"bold\",\n                    \"italic\",\n                    \"strike\",\n                    \"line\",\n                    \"quote\",\n                    \"list\",\n                    \"ordered-list\",\n                    \"check\",\n                    \"code\",\n                    \"inline-code\",\n                    \"upload\",\n                    \"link\",\n                    \"table\",\n                    \"record\",\n                ]);\n                setCurrentToolbar(vditor.toolbar.elements, [\"code\"]);\n            }\n            else {\n                disableToolbar(vditor.toolbar.elements, [\n                    \"headings\",\n                    \"bold\",\n                    \"italic\",\n                    \"strike\",\n                    \"line\",\n                    \"quote\",\n                    \"list\",\n                    \"ordered-list\",\n                    \"check\",\n                    \"code\",\n                    \"upload\",\n                    \"link\",\n                    \"table\",\n                    \"record\",\n                ]);\n                setCurrentToolbar(vditor.toolbar.elements, [\"inline-code\"]);\n            }\n        }\n        else if (headingElement) {\n            disableToolbar(vditor.toolbar.elements, [\"bold\"]);\n            setCurrentToolbar(vditor.toolbar.elements, [\"headings\"]);\n        }\n        else if (tableElement) {\n            disableToolbar(vditor.toolbar.elements, [\"table\"]);\n        }\n        // toc popover\n        var tocElement = (0,hasClosest/* hasClosestByClassName */.fb)(typeElement, \"vditor-toc\");\n        if (tocElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genClose(tocElement, vditor);\n            setPopoverPosition(vditor, tocElement);\n            return;\n        }\n        // quote popover\n        var blockquoteElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(typeElement, \"BLOCKQUOTE\");\n        if (blockquoteElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genUp(range, blockquoteElement, vditor);\n            genDown(range, blockquoteElement, vditor);\n            genClose(blockquoteElement, vditor);\n            setPopoverPosition(vditor, blockquoteElement);\n        }\n        // list item popover\n        if (liElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genUp(range, liElement, vditor);\n            genDown(range, liElement, vditor);\n            genClose(liElement, vditor);\n            setPopoverPosition(vditor, liElement);\n        }\n        // table popover\n        if (tableElement) {\n            var lang = vditor.options.lang;\n            var options = vditor.options;\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            var updateTable_1 = function () {\n                var oldRow = tableElement.rows.length;\n                var oldColumn = tableElement.rows[0].cells.length;\n                var row = parseInt(input_1.value, 10) || oldRow;\n                var column = parseInt(input2_1.value, 10) || oldColumn;\n                if (row === oldRow && oldColumn === column) {\n                    return;\n                }\n                if (oldColumn !== column) {\n                    var columnDiff = column - oldColumn;\n                    for (var i = 0; i < tableElement.rows.length; i++) {\n                        if (columnDiff > 0) {\n                            for (var j = 0; j < columnDiff; j++) {\n                                if (i === 0) {\n                                    tableElement.rows[i].lastElementChild.insertAdjacentHTML(\"afterend\", \"<th> </th>\");\n                                }\n                                else {\n                                    tableElement.rows[i].lastElementChild.insertAdjacentHTML(\"afterend\", \"<td> </td>\");\n                                }\n                            }\n                        }\n                        else {\n                            for (var k = oldColumn - 1; k >= column; k--) {\n                                tableElement.rows[i].cells[k].remove();\n                            }\n                        }\n                    }\n                }\n                if (oldRow !== row) {\n                    var rowDiff = row - oldRow;\n                    if (rowDiff > 0) {\n                        var rowHTML = \"<tr>\";\n                        for (var m = 0; m < column; m++) {\n                            rowHTML += \"<td> </td>\";\n                        }\n                        for (var l = 0; l < rowDiff; l++) {\n                            if (tableElement.querySelector(\"tbody\")) {\n                                tableElement\n                                    .querySelector(\"tbody\")\n                                    .insertAdjacentHTML(\"beforeend\", rowHTML);\n                            }\n                            else {\n                                tableElement\n                                    .querySelector(\"thead\")\n                                    .insertAdjacentHTML(\"afterend\", rowHTML + \"</tr>\");\n                            }\n                        }\n                    }\n                    else {\n                        for (var m = oldRow - 1; m >= row; m--) {\n                            tableElement.rows[m].remove();\n                            if (tableElement.rows.length === 1) {\n                                tableElement.querySelector(\"tbody\").remove();\n                            }\n                        }\n                    }\n                }\n                if (typeof vditor.options.input === \"function\") {\n                    vditor.options.input(getMarkdown(vditor));\n                }\n            };\n            var setAlign_1 = function (type) {\n                setTableAlign(tableElement, type);\n                if (type === \"right\") {\n                    left_1.classList.remove(\"vditor-icon--current\");\n                    center_1.classList.remove(\"vditor-icon--current\");\n                    right_1.classList.add(\"vditor-icon--current\");\n                }\n                else if (type === \"center\") {\n                    left_1.classList.remove(\"vditor-icon--current\");\n                    right_1.classList.remove(\"vditor-icon--current\");\n                    center_1.classList.add(\"vditor-icon--current\");\n                }\n                else {\n                    center_1.classList.remove(\"vditor-icon--current\");\n                    right_1.classList.remove(\"vditor-icon--current\");\n                    left_1.classList.add(\"vditor-icon--current\");\n                }\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                afterRenderEvent(vditor);\n            };\n            var td = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"TD\");\n            var th = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"TH\");\n            var alignType = \"left\";\n            if (td) {\n                alignType = td.getAttribute(\"align\") || \"left\";\n            }\n            else if (th) {\n                alignType = th.getAttribute(\"align\") || \"center\";\n            }\n            var left_1 = document.createElement(\"button\");\n            left_1.setAttribute(\"type\", \"button\");\n            left_1.setAttribute(\"aria-label\", window.VditorI18n.alignLeft + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘L\") + \">\");\n            left_1.setAttribute(\"data-type\", \"left\");\n            left_1.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-align-left\"></use></svg>';\n            left_1.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\" +\n                    (alignType === \"left\" ? \" vditor-icon--current\" : \"\");\n            left_1.onclick = function () {\n                setAlign_1(\"left\");\n            };\n            var center_1 = document.createElement(\"button\");\n            center_1.setAttribute(\"type\", \"button\");\n            center_1.setAttribute(\"aria-label\", window.VditorI18n.alignCenter + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘C\") + \">\");\n            center_1.setAttribute(\"data-type\", \"center\");\n            center_1.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-align-center\"></use></svg>';\n            center_1.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\" +\n                    (alignType === \"center\" ? \" vditor-icon--current\" : \"\");\n            center_1.onclick = function () {\n                setAlign_1(\"center\");\n            };\n            var right_1 = document.createElement(\"button\");\n            right_1.setAttribute(\"type\", \"button\");\n            right_1.setAttribute(\"aria-label\", window.VditorI18n.alignRight + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘R\") + \">\");\n            right_1.setAttribute(\"data-type\", \"right\");\n            right_1.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-align-right\"></use></svg>';\n            right_1.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\" +\n                    (alignType === \"right\" ? \" vditor-icon--current\" : \"\");\n            right_1.onclick = function () {\n                setAlign_1(\"right\");\n            };\n            var insertRowElement = document.createElement(\"button\");\n            insertRowElement.setAttribute(\"type\", \"button\");\n            insertRowElement.setAttribute(\"aria-label\", window.VditorI18n.insertRowBelow + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌘=\") + \">\");\n            insertRowElement.setAttribute(\"data-type\", \"insertRow\");\n            insertRowElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-insert-row\"></use></svg>';\n            insertRowElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertRowElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertRow(vditor, range, cellElement);\n                }\n            };\n            var insertRowBElement = document.createElement(\"button\");\n            insertRowBElement.setAttribute(\"type\", \"button\");\n            insertRowBElement.setAttribute(\"aria-label\", window.VditorI18n.insertRowAbove + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘F\") + \">\");\n            insertRowBElement.setAttribute(\"data-type\", \"insertRow\");\n            insertRowBElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-insert-rowb\"></use></svg>';\n            insertRowBElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertRowBElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertRowAbove(vditor, range, cellElement);\n                }\n            };\n            var insertColumnElement = document.createElement(\"button\");\n            insertColumnElement.setAttribute(\"type\", \"button\");\n            insertColumnElement.setAttribute(\"aria-label\", window.VditorI18n.insertColumnRight + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘=\") + \">\");\n            insertColumnElement.setAttribute(\"data-type\", \"insertColumn\");\n            insertColumnElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-insert-column\"></use></svg>';\n            insertColumnElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertColumnElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertColumn(vditor, tableElement, cellElement);\n                }\n            };\n            var insertColumnBElement = document.createElement(\"button\");\n            insertColumnBElement.setAttribute(\"type\", \"button\");\n            insertColumnBElement.setAttribute(\"aria-label\", window.VditorI18n.insertColumnLeft + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘G\") + \">\");\n            insertColumnBElement.setAttribute(\"data-type\", \"insertColumn\");\n            insertColumnBElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-insert-columnb\"></use></svg>';\n            insertColumnBElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertColumnBElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertColumn(vditor, tableElement, cellElement, \"beforebegin\");\n                }\n            };\n            var deleteRowElement = document.createElement(\"button\");\n            deleteRowElement.setAttribute(\"type\", \"button\");\n            deleteRowElement.setAttribute(\"aria-label\", window.VditorI18n[\"delete-row\"] + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌘-\") + \">\");\n            deleteRowElement.setAttribute(\"data-type\", \"deleteRow\");\n            deleteRowElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-delete-row\"></use></svg>';\n            deleteRowElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            deleteRowElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    deleteRow(vditor, range, cellElement);\n                }\n            };\n            var deleteColumnElement = document.createElement(\"button\");\n            deleteColumnElement.setAttribute(\"type\", \"button\");\n            deleteColumnElement.setAttribute(\"aria-label\", window.VditorI18n[\"delete-column\"] + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘-\") + \">\");\n            deleteColumnElement.setAttribute(\"data-type\", \"deleteColumn\");\n            deleteColumnElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-delete-column\"></use></svg>';\n            deleteColumnElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            deleteColumnElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    deleteColumn(vditor, range, tableElement, cellElement);\n                }\n            };\n            var inputWrap = document.createElement(\"span\");\n            inputWrap.setAttribute(\"aria-label\", window.VditorI18n.row);\n            inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input_1 = document.createElement(\"input\");\n            inputWrap.appendChild(input_1);\n            input_1.type = \"number\";\n            input_1.min = \"1\";\n            input_1.className = \"vditor-input\";\n            input_1.style.width = \"42px\";\n            input_1.style.textAlign = \"center\";\n            input_1.setAttribute(\"placeholder\", window.VditorI18n.row);\n            input_1.value = tableElement.rows.length.toString();\n            input_1.oninput = function () {\n                updateTable_1();\n            };\n            input_1.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (event.key === \"Tab\") {\n                    input2_1.focus();\n                    input2_1.select();\n                    event.preventDefault();\n                    return;\n                }\n                if (removeBlockElement(vditor, event)) {\n                    return;\n                }\n                if (focusToElement(event, range)) {\n                    return;\n                }\n            };\n            var input2Wrap = document.createElement(\"span\");\n            input2Wrap.setAttribute(\"aria-label\", window.VditorI18n.column);\n            input2Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input2_1 = document.createElement(\"input\");\n            input2Wrap.appendChild(input2_1);\n            input2_1.type = \"number\";\n            input2_1.min = \"1\";\n            input2_1.className = \"vditor-input\";\n            input2_1.style.width = \"42px\";\n            input2_1.style.textAlign = \"center\";\n            input2_1.setAttribute(\"placeholder\", window.VditorI18n.column);\n            input2_1.value = tableElement.rows[0].cells.length.toString();\n            input2_1.oninput = function () {\n                updateTable_1();\n            };\n            input2_1.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (event.key === \"Tab\") {\n                    input_1.focus();\n                    input_1.select();\n                    event.preventDefault();\n                    return;\n                }\n                if (removeBlockElement(vditor, event)) {\n                    return;\n                }\n                if (focusToElement(event, range)) {\n                    return;\n                }\n            };\n            genUp(range, tableElement, vditor);\n            genDown(range, tableElement, vditor);\n            genClose(tableElement, vditor);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", left_1);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", center_1);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", right_1);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertRowBElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertRowElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertColumnBElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertColumnElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", deleteRowElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", deleteColumnElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n            vditor.wysiwyg.popover.insertAdjacentHTML(\"beforeend\", \" x \");\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input2Wrap);\n            setPopoverPosition(vditor, tableElement);\n        }\n        // link ref popover\n        var linkRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"link-ref\");\n        if (linkRefElement) {\n            genLinkRefPopover(vditor, linkRefElement, range);\n        }\n        // footnote popover\n        var footnotesRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"footnotes-ref\");\n        if (footnotesRefElement) {\n            var lang = vditor.options.lang;\n            var options = vditor.options;\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            var inputWrap = document.createElement(\"span\");\n            inputWrap.setAttribute(\"aria-label\", window.VditorI18n.footnoteRef + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n            inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input_2 = document.createElement(\"input\");\n            inputWrap.appendChild(input_2);\n            input_2.className = \"vditor-input\";\n            input_2.setAttribute(\"placeholder\", window.VditorI18n.footnoteRef + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n            input_2.style.width = \"120px\";\n            input_2.value = footnotesRefElement.getAttribute(\"data-footnotes-label\");\n            input_2.oninput = function () {\n                if (input_2.value.trim() !== \"\") {\n                    footnotesRefElement.setAttribute(\"data-footnotes-label\", input_2.value);\n                }\n                if (typeof vditor.options.input === \"function\") {\n                    vditor.options.input(getMarkdown(vditor));\n                }\n            };\n            input_2.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (removeBlockElement(vditor, event)) {\n                    return;\n                }\n                if (focusToElement(event, range)) {\n                    return;\n                }\n            };\n            genClose(footnotesRefElement, vditor);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n            setPopoverPosition(vditor, footnotesRefElement);\n        }\n        // block popover: math-inline, math-block, html-block, html-inline, code-block, html-entity\n        var blockRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(typeElement, \"vditor-wysiwyg__block\");\n        var isBlock = blockRenderElement ? blockRenderElement.getAttribute(\"data-type\").indexOf(\"block\") > -1 : false;\n        vditor.wysiwyg.element\n            .querySelectorAll(\".vditor-wysiwyg__preview\")\n            .forEach(function (itemElement) {\n            if (!blockRenderElement || (blockRenderElement && isBlock && !blockRenderElement.contains(itemElement))) {\n                var previousElement = itemElement.previousElementSibling;\n                previousElement.style.display = \"none\";\n            }\n        });\n        if (blockRenderElement && isBlock) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genUp(range, blockRenderElement, vditor);\n            genDown(range, blockRenderElement, vditor);\n            genClose(blockRenderElement, vditor);\n            if (blockRenderElement.getAttribute(\"data-type\") === \"code-block\") {\n                var languageWrap = document.createElement(\"span\");\n                languageWrap.setAttribute(\"aria-label\", window.VditorI18n.language + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n                languageWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n                var language_1 = document.createElement(\"input\");\n                languageWrap.appendChild(language_1);\n                var codeElement_1 = blockRenderElement.firstElementChild.firstElementChild;\n                language_1.className = \"vditor-input\";\n                language_1.setAttribute(\"placeholder\", window.VditorI18n.language + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n                language_1.value =\n                    codeElement_1.className.indexOf(\"language-\") > -1\n                        ? codeElement_1.className.split(\"-\")[1].split(\" \")[0]\n                        : \"\";\n                language_1.oninput = function (e) {\n                    if (language_1.value.trim() !== \"\") {\n                        codeElement_1.className = \"language-\".concat(language_1.value);\n                    }\n                    else {\n                        codeElement_1.className = \"\";\n                        vditor.hint.recentLanguage = \"\";\n                    }\n                    if (blockRenderElement.lastElementChild.classList.contains(\"vditor-wysiwyg__preview\")) {\n                        blockRenderElement.lastElementChild.innerHTML =\n                            blockRenderElement.firstElementChild.innerHTML;\n                        processCodeRender(blockRenderElement.lastElementChild, vditor);\n                    }\n                    afterRenderEvent(vditor);\n                    // 当鼠标点选语言时，触发自定义input事件\n                    if (e.detail === 1) {\n                        // 选择语言后，输入焦点切换到代码输入框\n                        range.setStart(codeElement_1.firstChild, 0);\n                        range.collapse(true);\n                        (0,selection/* setSelectionFocus */.Hc)(range);\n                    }\n                };\n                language_1.onkeydown = function (event) {\n                    if (event.isComposing) {\n                        return;\n                    }\n                    if (removeBlockElement(vditor, event)) {\n                        return;\n                    }\n                    if (event.key === \"Escape\" &&\n                        vditor.hint.element.style.display === \"block\") {\n                        vditor.hint.element.style.display = \"none\";\n                        event.preventDefault();\n                        return;\n                    }\n                    vditor.hint.select(event, vditor);\n                    focusToElement(event, range);\n                };\n                language_1.onkeyup = function (event) {\n                    var _a, _b;\n                    if (event.isComposing ||\n                        event.key === \"Enter\" ||\n                        event.key === \"ArrowUp\" ||\n                        event.key === \"Escape\" ||\n                        event.key === \"ArrowDown\") {\n                        return;\n                    }\n                    var matchLangData = [];\n                    var key = language_1.value.substring(0, language_1.selectionStart);\n                    (vditor.options.preview.hljs.langs || constants/* Constants.ALIAS_CODE_LANGUAGES.concat */.g.ALIAS_CODE_LANGUAGES.concat(((_b = (_a = window.hljs) === null || _a === void 0 ? void 0 : _a.listLanguages()) !== null && _b !== void 0 ? _b : []).sort())).forEach(function (keyName) {\n                        if (keyName.indexOf(key.toLowerCase()) > -1) {\n                            matchLangData.push({\n                                html: keyName,\n                                value: keyName,\n                            });\n                        }\n                    });\n                    vditor.hint.genHTML(matchLangData, key, vditor);\n                    event.preventDefault();\n                };\n                vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", languageWrap);\n            }\n            setPopoverPosition(vditor, blockRenderElement);\n        }\n        else {\n            blockRenderElement = undefined;\n        }\n        if (headingElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            var inputWrap = document.createElement(\"span\");\n            inputWrap.setAttribute(\"aria-label\", \"ID\" + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n            inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input_3 = document.createElement(\"input\");\n            inputWrap.appendChild(input_3);\n            input_3.className = \"vditor-input\";\n            input_3.setAttribute(\"placeholder\", \"ID\" + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n            input_3.style.width = \"120px\";\n            input_3.value = headingElement.getAttribute(\"data-id\") || \"\";\n            input_3.oninput = function () {\n                headingElement.setAttribute(\"data-id\", input_3.value);\n                if (typeof vditor.options.input === \"function\") {\n                    vditor.options.input(getMarkdown(vditor));\n                }\n            };\n            input_3.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (removeBlockElement(vditor, event)) {\n                    return;\n                }\n                if (focusToElement(event, range)) {\n                    return;\n                }\n            };\n            genUp(range, headingElement, vditor);\n            genDown(range, headingElement, vditor);\n            genClose(headingElement, vditor);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n            setPopoverPosition(vditor, headingElement);\n        }\n        // a popover\n        if (aElement) {\n            genAPopover(vditor, aElement, range);\n        }\n        if (!blockquoteElement &&\n            !liElement &&\n            !tableElement &&\n            !blockRenderElement &&\n            !aElement &&\n            !linkRefElement &&\n            !footnotesRefElement &&\n            !headingElement &&\n            !tocElement) {\n            var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-block\", \"0\");\n            if (blockElement &&\n                blockElement.parentElement.isEqualNode(vditor.wysiwyg.element)) {\n                vditor.wysiwyg.popover.innerHTML = \"\";\n                genUp(range, blockElement, vditor);\n                genDown(range, blockElement, vditor);\n                genClose(blockElement, vditor);\n                setPopoverPosition(vditor, blockElement);\n            }\n            else {\n                vditor.wysiwyg.popover.style.display = \"none\";\n            }\n        }\n        // 反斜杠特殊处理\n        vditor.wysiwyg.element\n            .querySelectorAll('span[data-type=\"backslash\"] > span')\n            .forEach(function (item) {\n            item.style.display = \"none\";\n        });\n        var backslashElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"backslash\");\n        if (backslashElement) {\n            backslashElement.querySelector(\"span\").style.display = \"inline\";\n        }\n    }, 200);\n};\nvar setPopoverPosition = function (vditor, element) {\n    var targetElement = element;\n    var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(element, \"TABLE\");\n    if (tableElement) {\n        targetElement = tableElement;\n    }\n    vditor.wysiwyg.popover.style.left = \"0\";\n    vditor.wysiwyg.popover.style.display = \"block\";\n    vditor.wysiwyg.popover.style.top =\n        Math.max(-8, targetElement.offsetTop - 21 - vditor.wysiwyg.element.scrollTop) + \"px\";\n    vditor.wysiwyg.popover.style.left =\n        Math.min(targetElement.offsetLeft, vditor.wysiwyg.element.clientWidth - vditor.wysiwyg.popover.clientWidth) + \"px\";\n    vditor.wysiwyg.popover.setAttribute(\"data-top\", (targetElement.offsetTop - 21).toString());\n};\nvar genLinkRefPopover = function (vditor, linkRefElement, range) {\n    if (range === void 0) { range = getSelection().getRangeAt(0); }\n    vditor.wysiwyg.popover.innerHTML = \"\";\n    var updateLinkRef = function () {\n        if (input.value.trim() !== \"\") {\n            if (linkRefElement.tagName === \"IMG\") {\n                linkRefElement.setAttribute(\"alt\", input.value);\n            }\n            else {\n                linkRefElement.textContent = input.value;\n            }\n        }\n        // data-link-label\n        if (input1.value.trim() !== \"\") {\n            linkRefElement.setAttribute(\"data-link-label\", input1.value);\n        }\n        if (typeof vditor.options.input === \"function\") {\n            vditor.options.input(getMarkdown(vditor));\n        }\n    };\n    var inputWrap = document.createElement(\"span\");\n    inputWrap.setAttribute(\"aria-label\", window.VditorI18n.textIsNotEmpty);\n    inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input = document.createElement(\"input\");\n    inputWrap.appendChild(input);\n    input.className = \"vditor-input\";\n    input.setAttribute(\"placeholder\", window.VditorI18n.textIsNotEmpty);\n    input.style.width = \"120px\";\n    input.value =\n        linkRefElement.getAttribute(\"alt\") || linkRefElement.textContent;\n    input.oninput = function () {\n        updateLinkRef();\n    };\n    input.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        if (focusToElement(event, range)) {\n            return;\n        }\n        linkHotkey(vditor, linkRefElement, event, input1);\n    };\n    var input1Wrap = document.createElement(\"span\");\n    input1Wrap.setAttribute(\"aria-label\", window.VditorI18n.linkRef);\n    input1Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input1 = document.createElement(\"input\");\n    input1Wrap.appendChild(input1);\n    input1.className = \"vditor-input\";\n    input1.setAttribute(\"placeholder\", window.VditorI18n.linkRef);\n    input1.value = linkRefElement.getAttribute(\"data-link-label\");\n    input1.oninput = function () {\n        updateLinkRef();\n    };\n    input1.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        if (focusToElement(event, range)) {\n            return;\n        }\n        linkHotkey(vditor, linkRefElement, event, input);\n    };\n    genClose(linkRefElement, vditor);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input1Wrap);\n    setPopoverPosition(vditor, linkRefElement);\n};\nvar genUp = function (range, element, vditor) {\n    var previousElement = element.previousElementSibling;\n    if (!previousElement ||\n        (!element.parentElement.isEqualNode(vditor.wysiwyg.element) &&\n            element.tagName !== \"LI\")) {\n        return;\n    }\n    var upElement = document.createElement(\"button\");\n    upElement.setAttribute(\"type\", \"button\");\n    upElement.setAttribute(\"data-type\", \"up\");\n    upElement.setAttribute(\"aria-label\", window.VditorI18n.up + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘U\") + \">\");\n    upElement.innerHTML = '<svg><use xlink:href=\"#vditor-icon-up\"></use></svg>';\n    upElement.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n    upElement.onclick = function () {\n        range.insertNode(document.createElement(\"wbr\"));\n        previousElement.insertAdjacentElement(\"beforebegin\", element);\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        afterRenderEvent(vditor);\n        highlightToolbarWYSIWYG(vditor);\n        scrollCenter(vditor);\n    };\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", upElement);\n};\nvar genDown = function (range, element, vditor) {\n    var nextElement = element.nextElementSibling;\n    if (!nextElement ||\n        (!element.parentElement.isEqualNode(vditor.wysiwyg.element) &&\n            element.tagName !== \"LI\")) {\n        return;\n    }\n    var downElement = document.createElement(\"button\");\n    downElement.setAttribute(\"type\", \"button\");\n    downElement.setAttribute(\"data-type\", \"down\");\n    downElement.setAttribute(\"aria-label\", window.VditorI18n.down + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘D\") + \">\");\n    downElement.innerHTML =\n        '<svg><use xlink:href=\"#vditor-icon-down\"></use></svg>';\n    downElement.className =\n        \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n    downElement.onclick = function () {\n        range.insertNode(document.createElement(\"wbr\"));\n        nextElement.insertAdjacentElement(\"afterend\", element);\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        afterRenderEvent(vditor);\n        highlightToolbarWYSIWYG(vditor);\n        scrollCenter(vditor);\n    };\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", downElement);\n};\nvar genClose = function (element, vditor) {\n    var close = document.createElement(\"button\");\n    close.setAttribute(\"type\", \"button\");\n    close.setAttribute(\"data-type\", \"remove\");\n    close.setAttribute(\"aria-label\", window.VditorI18n.remove + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘X\") + \">\");\n    close.innerHTML =\n        '<svg><use xlink:href=\"#vditor-icon-trashcan\"></use></svg>';\n    close.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n    close.onclick = function () {\n        var range = (0,selection/* getEditorRange */.zh)(vditor);\n        range.setStartAfter(element);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        element.remove();\n        afterRenderEvent(vditor);\n        highlightToolbarWYSIWYG(vditor);\n        if ([\"H1\", \"H2\", \"H3\", \"H4\", \"H5\", \"H6\"].includes(element.tagName)) {\n            renderToc(vditor);\n        }\n    };\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", close);\n};\nvar linkHotkey = function (vditor, element, event, nextInputElement) {\n    if (event.isComposing) {\n        return;\n    }\n    if (event.key === \"Tab\") {\n        nextInputElement.focus();\n        nextInputElement.select();\n        event.preventDefault();\n        return;\n    }\n    if (!(0,compatibility/* isCtrl */.yl)(event) &&\n        !event.shiftKey &&\n        event.altKey &&\n        event.key === \"Enter\") {\n        var range = (0,selection/* getEditorRange */.zh)(vditor);\n        // firefox 不会打断 link https://github.com/Vanessa219/vditor/issues/193\n        element.insertAdjacentHTML(\"afterend\", constants/* Constants.ZWSP */.g.ZWSP);\n        range.setStartAfter(element.nextSibling);\n        range.collapse(true);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        event.preventDefault();\n    }\n};\nvar genAPopover = function (vditor, aElement, range) {\n    vditor.wysiwyg.popover.innerHTML = \"\";\n    var updateA = function () {\n        if (input.value.trim() !== \"\") {\n            aElement.innerHTML = input.value;\n        }\n        aElement.setAttribute(\"href\", input1.value);\n        aElement.setAttribute(\"title\", input2.value);\n        afterRenderEvent(vditor);\n    };\n    aElement.querySelectorAll(\"[data-marker]\").forEach(function (item) {\n        item.removeAttribute(\"data-marker\");\n    });\n    var inputWrap = document.createElement(\"span\");\n    inputWrap.setAttribute(\"aria-label\", window.VditorI18n.textIsNotEmpty);\n    inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input = document.createElement(\"input\");\n    inputWrap.appendChild(input);\n    input.className = \"vditor-input\";\n    input.setAttribute(\"placeholder\", window.VditorI18n.textIsNotEmpty);\n    input.style.width = \"120px\";\n    input.value = aElement.innerHTML || \"\";\n    input.oninput = function () {\n        updateA();\n    };\n    input.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        if (focusToElement(event, range)) {\n            return;\n        }\n        linkHotkey(vditor, aElement, event, input1);\n    };\n    var input1Wrap = document.createElement(\"span\");\n    input1Wrap.setAttribute(\"aria-label\", window.VditorI18n.link);\n    input1Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input1 = document.createElement(\"input\");\n    input1Wrap.appendChild(input1);\n    input1.className = \"vditor-input\";\n    input1.setAttribute(\"placeholder\", window.VditorI18n.link);\n    input1.value = aElement.getAttribute(\"href\") || \"\";\n    input1.oninput = function () {\n        updateA();\n    };\n    input1.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        if (focusToElement(event, range)) {\n            return;\n        }\n        linkHotkey(vditor, aElement, event, input2);\n    };\n    var input2Wrap = document.createElement(\"span\");\n    input2Wrap.setAttribute(\"aria-label\", window.VditorI18n.tooltipText);\n    input2Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input2 = document.createElement(\"input\");\n    input2Wrap.appendChild(input2);\n    input2.className = \"vditor-input\";\n    input2.setAttribute(\"placeholder\", window.VditorI18n.tooltipText);\n    input2.style.width = \"60px\";\n    input2.value = aElement.getAttribute(\"title\") || \"\";\n    input2.oninput = function () {\n        updateA();\n    };\n    input2.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        if (focusToElement(event, range)) {\n            return;\n        }\n        linkHotkey(vditor, aElement, event, input);\n    };\n    genClose(aElement, vditor);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input1Wrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input2Wrap);\n    setPopoverPosition(vditor, aElement);\n};\nvar genImagePopover = function (event, vditor) {\n    var imgElement = event.target;\n    vditor.wysiwyg.popover.innerHTML = \"\";\n    var updateImg = function () {\n        imgElement.setAttribute(\"src\", inputElement.value);\n        imgElement.setAttribute(\"alt\", alt.value);\n        imgElement.setAttribute(\"title\", title.value);\n        if (typeof vditor.options.input === \"function\") {\n            vditor.options.input(getMarkdown(vditor));\n        }\n    };\n    var inputWrap = document.createElement(\"span\");\n    inputWrap.setAttribute(\"aria-label\", window.VditorI18n.imageURL);\n    inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var inputElement = document.createElement(\"input\");\n    inputWrap.appendChild(inputElement);\n    inputElement.className = \"vditor-input\";\n    inputElement.setAttribute(\"placeholder\", window.VditorI18n.imageURL);\n    inputElement.value = imgElement.getAttribute(\"src\") || \"\";\n    inputElement.oninput = function () {\n        updateImg();\n    };\n    inputElement.onkeydown = function (elementEvent) {\n        removeBlockElement(vditor, elementEvent);\n    };\n    var altWrap = document.createElement(\"span\");\n    altWrap.setAttribute(\"aria-label\", window.VditorI18n.alternateText);\n    altWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var alt = document.createElement(\"input\");\n    altWrap.appendChild(alt);\n    alt.className = \"vditor-input\";\n    alt.setAttribute(\"placeholder\", window.VditorI18n.alternateText);\n    alt.style.width = \"52px\";\n    alt.value = imgElement.getAttribute(\"alt\") || \"\";\n    alt.oninput = function () {\n        updateImg();\n    };\n    alt.onkeydown = function (elementEvent) {\n        removeBlockElement(vditor, elementEvent);\n    };\n    var titleWrap = document.createElement(\"span\");\n    titleWrap.setAttribute(\"aria-label\", window.VditorI18n.title);\n    titleWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var title = document.createElement(\"input\");\n    titleWrap.appendChild(title);\n    title.className = \"vditor-input\";\n    title.setAttribute(\"placeholder\", window.VditorI18n.title);\n    title.value = imgElement.getAttribute(\"title\") || \"\";\n    title.oninput = function () {\n        updateImg();\n    };\n    title.onkeydown = function (elementEvent) {\n        removeBlockElement(vditor, elementEvent);\n    };\n    genClose(imgElement, vditor);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", altWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", titleWrap);\n    setPopoverPosition(vditor, imgElement);\n};\nvar focusToElement = function (event, range) {\n    if ((!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && event.key === \"Enter\") || event.key === \"Escape\") {\n        if (range) {\n            (0,selection/* setSelectionFocus */.Hc)(range);\n        }\n        event.preventDefault();\n        event.stopPropagation();\n        return true;\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/highlightToolbar.ts\n\n\nvar highlightToolbar = function (vditor) {\n    if (vditor.currentMode === \"wysiwyg\") {\n        highlightToolbarWYSIWYG(vditor);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        highlightToolbarIR(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/renderDomByMd.ts\n\n\nvar renderDomByMd = function (vditor, md, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    var editorElement = vditor.wysiwyg.element;\n    editorElement.innerHTML = vditor.lute.Md2VditorDOM(md);\n    editorElement.querySelectorAll(\".vditor-wysiwyg__preview[data-render='2']\").forEach(function (item) {\n        processCodeRender(item, vditor);\n        item.previousElementSibling.setAttribute(\"style\", \"display:none\");\n    });\n    afterRenderEvent(vditor, options);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/toolbarEvent.ts\n\n\n\n\n\n\n\n\n\nvar cancelBES = function (range, vditor, commandName) {\n    var element = range.startContainer.parentElement;\n    var jump = false;\n    var lastTagName = \"\";\n    var lastEndTagName = \"\";\n    var splitHTML = splitElement(range);\n    var lastBeforeHTML = splitHTML.beforeHTML;\n    var lastAfterHTML = splitHTML.afterHTML;\n    while (element && !jump) {\n        var tagName = element.tagName;\n        if (tagName === \"STRIKE\") {\n            tagName = \"S\";\n        }\n        if (tagName === \"I\") {\n            tagName = \"EM\";\n        }\n        if (tagName === \"B\") {\n            tagName = \"STRONG\";\n        }\n        if (tagName === \"S\" || tagName === \"STRONG\" || tagName === \"EM\") {\n            var insertHTML = \"\";\n            var previousHTML = \"\";\n            var nextHTML = \"\";\n            if (element.parentElement.getAttribute(\"data-block\") !== \"0\") {\n                previousHTML = getPreviousHTML(element);\n                nextHTML = getNextHTML(element);\n            }\n            if (lastBeforeHTML || previousHTML) {\n                insertHTML = \"\".concat(previousHTML, \"<\").concat(tagName, \">\").concat(lastBeforeHTML, \"</\").concat(tagName, \">\");\n                lastBeforeHTML = insertHTML;\n            }\n            if ((commandName === \"bold\" && tagName === \"STRONG\") ||\n                (commandName === \"italic\" && tagName === \"EM\") ||\n                (commandName === \"strikeThrough\" && tagName === \"S\")) {\n                // 取消\n                insertHTML += \"\".concat(lastTagName).concat(constants/* Constants.ZWSP */.g.ZWSP, \"<wbr>\").concat(lastEndTagName);\n                jump = true;\n            }\n            if (lastAfterHTML || nextHTML) {\n                lastAfterHTML = \"<\".concat(tagName, \">\").concat(lastAfterHTML, \"</\").concat(tagName, \">\").concat(nextHTML);\n                insertHTML += lastAfterHTML;\n            }\n            if (element.parentElement.getAttribute(\"data-block\") !== \"0\") {\n                element = element.parentElement;\n                element.innerHTML = insertHTML;\n            }\n            else {\n                element.outerHTML = insertHTML;\n                element = element.parentElement;\n            }\n            lastTagName = \"<\".concat(tagName, \">\") + lastTagName;\n            lastEndTagName = \"</\".concat(tagName, \">\") + lastEndTagName;\n        }\n        else {\n            jump = true;\n        }\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n};\nvar toolbarEvent = function (vditor, actionBtn, event) {\n    if (vditor.wysiwyg.composingLock // Mac Chrome 中韩文结束会出发此事件，导致重复末尾字符 https://github.com/Vanessa219/vditor/issues/188\n        && event instanceof CustomEvent // 点击按钮应忽略输入法 https://github.com/Vanessa219/vditor/issues/473\n    ) {\n        return;\n    }\n    var useHighlight = true;\n    var useRender = true;\n    if (vditor.wysiwyg.element.querySelector(\"wbr\")) {\n        vditor.wysiwyg.element.querySelector(\"wbr\").remove();\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var commandName = actionBtn.getAttribute(\"data-type\");\n    // 移除\n    if (actionBtn.classList.contains(\"vditor-menu--current\")) {\n        if (commandName === \"strike\") {\n            commandName = \"strikeThrough\";\n        }\n        if (commandName === \"quote\") {\n            var quoteElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"BLOCKQUOTE\");\n            if (!quoteElement) {\n                quoteElement = range.startContainer.childNodes[range.startOffset];\n            }\n            if (quoteElement) {\n                useHighlight = false;\n                actionBtn.classList.remove(\"vditor-menu--current\");\n                range.insertNode(document.createElement(\"wbr\"));\n                quoteElement.outerHTML = quoteElement.innerHTML.trim() === \"\" ?\n                    \"<p data-block=\\\"0\\\">\".concat(quoteElement.innerHTML, \"</p>\") : quoteElement.innerHTML;\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else if (commandName === \"inline-code\") {\n            var inlineCodeElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"CODE\");\n            if (!inlineCodeElement) {\n                inlineCodeElement = range.startContainer.childNodes[range.startOffset];\n            }\n            if (inlineCodeElement) {\n                inlineCodeElement.outerHTML = inlineCodeElement.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") + \"<wbr>\";\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else if (commandName === \"link\") {\n            if (!range.collapsed) {\n                document.execCommand(\"unlink\", false, \"\");\n            }\n            else {\n                range.selectNode(range.startContainer.parentElement);\n                document.execCommand(\"unlink\", false, \"\");\n            }\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName);\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            useHighlight = false;\n            actionBtn.classList.remove(\"vditor-menu--current\");\n        }\n        else {\n            // bold, italic, strike\n            useHighlight = false;\n            actionBtn.classList.remove(\"vditor-menu--current\");\n            if (range.toString() === \"\") {\n                cancelBES(range, vditor, commandName);\n            }\n            else {\n                document.execCommand(commandName, false, \"\");\n            }\n        }\n    }\n    else {\n        // 添加\n        if (vditor.wysiwyg.element.childNodes.length === 0) {\n            vditor.wysiwyg.element.innerHTML = '<p data-block=\"0\"><wbr></p>';\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        }\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n        if (commandName === \"quote\") {\n            if (!blockElement) {\n                blockElement = range.startContainer.childNodes[range.startOffset];\n            }\n            if (blockElement) {\n                useHighlight = false;\n                actionBtn.classList.add(\"vditor-menu--current\");\n                range.insertNode(document.createElement(\"wbr\"));\n                var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n                // li 中软换行\n                if (liElement && blockElement.contains(liElement)) {\n                    liElement.innerHTML = \"<blockquote data-block=\\\"0\\\">\".concat(liElement.innerHTML, \"</blockquote>\");\n                }\n                else {\n                    blockElement.outerHTML = \"<blockquote data-block=\\\"0\\\">\".concat(blockElement.outerHTML, \"</blockquote>\");\n                }\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName, false);\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            useHighlight = false;\n            removeCurrentToolbar(vditor.toolbar.elements, [\"check\", \"list\", \"ordered-list\"]);\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"inline-code\") {\n            if (range.toString() === \"\") {\n                var node = document.createElement(\"code\");\n                node.textContent = constants/* Constants.ZWSP */.g.ZWSP;\n                range.insertNode(node);\n                range.setStart(node.firstChild, 1);\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else if (range.startContainer.nodeType === 3) {\n                var node = document.createElement(\"code\");\n                range.surroundContents(node);\n                range.insertNode(node);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"code\") {\n            var node = document.createElement(\"div\");\n            node.className = \"vditor-wysiwyg__block\";\n            node.setAttribute(\"data-type\", \"code-block\");\n            node.setAttribute(\"data-block\", \"0\");\n            node.setAttribute(\"data-marker\", \"```\");\n            if (range.toString() === \"\") {\n                node.innerHTML = \"<pre><code><wbr>\\n</code></pre>\";\n            }\n            else {\n                node.innerHTML = \"<pre><code>\".concat(range.toString(), \"<wbr></code></pre>\");\n                range.deleteContents();\n            }\n            range.insertNode(node);\n            if (blockElement) {\n                blockElement.outerHTML = vditor.lute.SpinVditorDOM(blockElement.outerHTML);\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            vditor.wysiwyg.element.querySelectorAll(\".vditor-wysiwyg__preview[data-render='2']\").forEach(function (item) {\n                processCodeRender(item, vditor);\n            });\n            actionBtn.classList.add(\"vditor-menu--disabled\");\n        }\n        else if (commandName === \"link\") {\n            if (range.toString() === \"\") {\n                var aElement = document.createElement(\"a\");\n                aElement.innerText = constants/* Constants.ZWSP */.g.ZWSP;\n                range.insertNode(aElement);\n                range.setStart(aElement.firstChild, 1);\n                range.collapse(true);\n                genAPopover(vditor, aElement, range);\n                var textInputElement = vditor.wysiwyg.popover.querySelector(\"input\");\n                textInputElement.value = \"\";\n                textInputElement.focus();\n                useRender = false;\n            }\n            else {\n                var node = document.createElement(\"a\");\n                node.setAttribute(\"href\", \"\");\n                node.innerHTML = range.toString();\n                range.surroundContents(node);\n                range.insertNode(node);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                genAPopover(vditor, node, range);\n                var textInputElements = vditor.wysiwyg.popover.querySelectorAll(\"input\");\n                textInputElements[0].value = node.innerText;\n                textInputElements[1].focus();\n            }\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"table\") {\n            var tableHTML_1 = \"<table data-block=\\\"0\\\"><thead><tr><th>col1<wbr></th><th>col2</th><th>col3</th></tr></thead><tbody><tr><td> </td><td> </td><td> </td></tr><tr><td> </td><td> </td><td> </td></tr></tbody></table>\";\n            if (range.toString().trim() === \"\") {\n                if (blockElement && blockElement.innerHTML.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                    blockElement.outerHTML = tableHTML_1;\n                }\n                else {\n                    document.execCommand(\"insertHTML\", false, tableHTML_1);\n                }\n                range.selectNode(vditor.wysiwyg.element.querySelector(\"wbr\").previousSibling);\n                vditor.wysiwyg.element.querySelector(\"wbr\").remove();\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else {\n                tableHTML_1 = \"<table data-block=\\\"0\\\"><thead><tr>\";\n                var tableText = range.toString().split(\"\\n\");\n                var delimiter_1 = tableText[0].split(\",\").length > tableText[0].split(\"\\t\").length ? \",\" : \"\\t\";\n                tableText.forEach(function (rows, index) {\n                    if (index === 0) {\n                        rows.split(delimiter_1).forEach(function (header, subIndex) {\n                            if (subIndex === 0) {\n                                tableHTML_1 += \"<th>\".concat(header, \"<wbr></th>\");\n                            }\n                            else {\n                                tableHTML_1 += \"<th>\".concat(header, \"</th>\");\n                            }\n                        });\n                        tableHTML_1 += \"</tr></thead>\";\n                    }\n                    else {\n                        if (index === 1) {\n                            tableHTML_1 += \"<tbody><tr>\";\n                        }\n                        else {\n                            tableHTML_1 += \"<tr>\";\n                        }\n                        rows.split(delimiter_1).forEach(function (cell) {\n                            tableHTML_1 += \"<td>\".concat(cell, \"</td>\");\n                        });\n                        tableHTML_1 += \"</tr>\";\n                    }\n                });\n                tableHTML_1 += \"</tbody></table>\";\n                document.execCommand(\"insertHTML\", false, tableHTML_1);\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--disabled\");\n        }\n        else if (commandName === \"line\") {\n            if (blockElement) {\n                var hrHTML = '<hr data-block=\"0\"><p data-block=\"0\"><wbr>\\n</p>';\n                if (blockElement.innerHTML.trim() === \"\") {\n                    blockElement.outerHTML = hrHTML;\n                }\n                else {\n                    blockElement.insertAdjacentHTML(\"afterend\", hrHTML);\n                }\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else {\n            // bold, italic, strike\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--current\");\n            if (commandName === \"strike\") {\n                commandName = \"strikeThrough\";\n            }\n            if (range.toString() === \"\" && (commandName === \"bold\" || commandName === \"italic\" || commandName === \"strikeThrough\")) {\n                var tagName = \"strong\";\n                if (commandName === \"italic\") {\n                    tagName = \"em\";\n                }\n                else if (commandName === \"strikeThrough\") {\n                    tagName = \"s\";\n                }\n                var node = document.createElement(tagName);\n                node.textContent = constants/* Constants.ZWSP */.g.ZWSP;\n                range.insertNode(node);\n                if (node.previousSibling && node.previousSibling.textContent === constants/* Constants.ZWSP */.g.ZWSP) {\n                    // 移除多层嵌套中的 zwsp\n                    node.previousSibling.textContent = \"\";\n                }\n                range.setStart(node.firstChild, 1);\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else {\n                document.execCommand(commandName, false, \"\");\n            }\n        }\n    }\n    if (useHighlight) {\n        highlightToolbarWYSIWYG(vditor);\n    }\n    if (useRender) {\n        afterRenderEvent(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/MenuItem.ts\n\n\n\n\n\n\nvar MenuItem = /** @class */ (function () {\n    function MenuItem(vditor, menuItem) {\n        var _a;\n        var _this = this;\n        this.element = document.createElement(\"div\");\n        if (menuItem.className) {\n            (_a = this.element.classList).add.apply(_a, menuItem.className.split(\" \"));\n        }\n        var hotkey = menuItem.hotkey ? \" <\".concat((0,compatibility/* updateHotkeyTip */.ns)(menuItem.hotkey), \">\") : \"\";\n        if (menuItem.level === 2) {\n            hotkey = menuItem.hotkey ? \" &lt;\".concat((0,compatibility/* updateHotkeyTip */.ns)(menuItem.hotkey), \"&gt;\") : \"\";\n        }\n        var tip = menuItem.tip ? menuItem.tip + hotkey : \"\".concat(window.VditorI18n[menuItem.name]).concat(hotkey);\n        var tagName = menuItem.name === \"upload\" ? \"div\" : \"button\";\n        if (menuItem.level === 2) {\n            this.element.innerHTML = \"<\".concat(tagName, \" data-type=\\\"\").concat(menuItem.name, \"\\\">\").concat(tip, \"</\").concat(tagName, \">\");\n        }\n        else {\n            this.element.classList.add(\"vditor-toolbar__item\");\n            var iconElement = document.createElement(tagName);\n            iconElement.setAttribute(\"data-type\", menuItem.name);\n            iconElement.className = \"vditor-tooltipped vditor-tooltipped__\".concat(menuItem.tipPosition);\n            iconElement.setAttribute(\"aria-label\", tip);\n            iconElement.innerHTML = menuItem.icon;\n            this.element.appendChild(iconElement);\n        }\n        if (!menuItem.prefix) {\n            return;\n        }\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            if (vditor.currentMode === \"wysiwyg\") {\n                toolbarEvent(vditor, _this.element.children[0], event);\n            }\n            else if (vditor.currentMode === \"ir\") {\n                process_processToolbar(vditor, _this.element.children[0], menuItem.prefix || \"\", menuItem.suffix || \"\");\n            }\n            else {\n                processToolbar(vditor, _this.element.children[0], menuItem.prefix || \"\", menuItem.suffix || \"\");\n            }\n        });\n    }\n    return MenuItem;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/EditMode.ts\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar setEditMode = function (vditor, type, event) {\n    var markdownText;\n    if (typeof event !== \"string\") {\n        hidePanel(vditor, [\"subToolbar\", \"hint\"]);\n        event.preventDefault();\n        markdownText = getMarkdown(vditor);\n    }\n    else {\n        markdownText = event;\n    }\n    if (vditor.currentMode === type && typeof event !== \"string\") {\n        return;\n    }\n    if (vditor.devtools) {\n        vditor.devtools.renderEchart(vditor);\n    }\n    if (vditor.options.preview.mode === \"both\" && type === \"sv\") {\n        vditor.preview.element.style.display = \"block\";\n    }\n    else {\n        vditor.preview.element.style.display = \"none\";\n    }\n    enableToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n    removeCurrentToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n    disableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n    if (type === \"ir\") {\n        hideToolbar(vditor.toolbar.elements, [\"both\"]);\n        showToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\", \"outline\", \"insert-before\", \"insert-after\"]);\n        vditor.sv.element.style.display = \"none\";\n        vditor.wysiwyg.element.parentElement.style.display = \"none\";\n        vditor.ir.element.parentElement.style.display = \"block\";\n        vditor.lute.SetVditorIR(true);\n        vditor.lute.SetVditorWYSIWYG(false);\n        vditor.lute.SetVditorSV(false);\n        vditor.currentMode = \"ir\";\n        vditor.ir.element.innerHTML = vditor.lute.Md2VditorIRDOM(markdownText);\n        process_processAfterRender(vditor, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n        setPadding(vditor);\n        vditor.ir.element.querySelectorAll(\".vditor-ir__preview[data-render='2']\").forEach(function (item) {\n            processCodeRender(item, vditor);\n        });\n        vditor.ir.element.querySelectorAll(\".vditor-toc\").forEach(function (item) {\n            (0,mathRender/* mathRender */.H)(item, {\n                cdn: vditor.options.cdn,\n                math: vditor.options.preview.math,\n            });\n        });\n    }\n    else if (type === \"wysiwyg\") {\n        hideToolbar(vditor.toolbar.elements, [\"both\"]);\n        showToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\", \"outline\", \"insert-before\", \"insert-after\"]);\n        vditor.sv.element.style.display = \"none\";\n        vditor.wysiwyg.element.parentElement.style.display = \"block\";\n        vditor.ir.element.parentElement.style.display = \"none\";\n        vditor.lute.SetVditorIR(false);\n        vditor.lute.SetVditorWYSIWYG(true);\n        vditor.lute.SetVditorSV(false);\n        vditor.currentMode = \"wysiwyg\";\n        setPadding(vditor);\n        renderDomByMd(vditor, markdownText, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n        vditor.wysiwyg.element.querySelectorAll(\".vditor-toc\").forEach(function (item) {\n            (0,mathRender/* mathRender */.H)(item, {\n                cdn: vditor.options.cdn,\n                math: vditor.options.preview.math,\n            });\n        });\n        vditor.wysiwyg.popover.style.display = \"none\";\n    }\n    else if (type === \"sv\") {\n        showToolbar(vditor.toolbar.elements, [\"both\"]);\n        hideToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\", \"outline\", \"insert-before\", \"insert-after\"]);\n        vditor.wysiwyg.element.parentElement.style.display = \"none\";\n        vditor.ir.element.parentElement.style.display = \"none\";\n        if (vditor.options.preview.mode === \"both\") {\n            vditor.sv.element.style.display = \"block\";\n        }\n        else if (vditor.options.preview.mode === \"editor\") {\n            vditor.sv.element.style.display = \"block\";\n        }\n        vditor.lute.SetVditorIR(false);\n        vditor.lute.SetVditorWYSIWYG(false);\n        vditor.lute.SetVditorSV(true);\n        vditor.currentMode = \"sv\";\n        var svHTML = processSpinVditorSVDOM(markdownText, vditor);\n        if (svHTML === \"<div data-block='0'></div>\") {\n            // https://github.com/Vanessa219/vditor/issues/654 SV 模式 Placeholder 显示问题\n            svHTML = \"\";\n        }\n        vditor.sv.element.innerHTML = svHTML;\n        combineFootnote(vditor.sv.element);\n        processAfterRender(vditor, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n        setPadding(vditor);\n    }\n    vditor.undo.resetIcon(vditor);\n    if (typeof event !== \"string\") {\n        // 初始化不 focus\n        vditor[vditor.currentMode].element.focus();\n        highlightToolbar(vditor);\n    }\n    renderToc(vditor);\n    setTypewriterPosition(vditor);\n    if (vditor.toolbar.elements[\"edit-mode\"]) {\n        vditor.toolbar.elements[\"edit-mode\"].querySelectorAll(\"button\").forEach(function (item) {\n            item.classList.remove(\"vditor-menu--current\");\n        });\n        vditor.toolbar.elements[\"edit-mode\"].querySelector(\"button[data-mode=\\\"\".concat(vditor.currentMode, \"\\\"]\")).classList.add(\"vditor-menu--current\");\n    }\n    vditor.outline.toggle(vditor, vditor.currentMode !== \"sv\" && vditor.options.outline.enable, typeof event !== \"string\");\n};\nvar EditMode = /** @class */ (function (_super) {\n    __extends(EditMode, _super);\n    function EditMode(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\".concat(menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        panelElement.innerHTML = \"<button data-mode=\\\"wysiwyg\\\">\".concat(window.VditorI18n.wysiwyg, \" &lt;\").concat((0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘7\"), \"></button>\\n<button data-mode=\\\"ir\\\">\").concat(window.VditorI18n.instantRendering, \" &lt;\").concat((0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘8\"), \"></button>\\n<button data-mode=\\\"sv\\\">\").concat(window.VditorI18n.splitView, \" &lt;\").concat((0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘9\"), \"></button>\");\n        _this.element.appendChild(panelElement);\n        _this._bindEvent(vditor, panelElement, menuItem);\n        return _this;\n    }\n    EditMode.prototype._bindEvent = function (vditor, panelElement, menuItem) {\n        var actionBtn = this.element.children[0];\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        panelElement.children.item(0).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            // wysiwyg\n            setEditMode(vditor, \"wysiwyg\", event);\n            event.preventDefault();\n            event.stopPropagation();\n        });\n        panelElement.children.item(1).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            // ir\n            setEditMode(vditor, \"ir\", event);\n            event.preventDefault();\n            event.stopPropagation();\n        });\n        panelElement.children.item(2).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            // markdown\n            setEditMode(vditor, \"sv\", event);\n            event.preventDefault();\n            event.stopPropagation();\n        });\n    };\n    return EditMode;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/util/getSelectText.ts\n\nvar getSelectText = function (editor, range) {\n    if ((0,selection/* selectIsEditor */.Gb)(editor, range)) {\n        return getSelection().toString();\n    }\n    return \"\";\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/editorCommonEvent.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar focusEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"focus\", function () {\n        if (vditor.options.focus) {\n            vditor.options.focus(getMarkdown(vditor));\n        }\n        hidePanel(vditor, [\"subToolbar\", \"hint\"]);\n    });\n};\nvar dblclickEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"dblclick\", function (event) {\n        if (event.target.tagName === \"IMG\") {\n            if (vditor.options.image.preview) {\n                vditor.options.image.preview(event.target);\n            }\n            else if (vditor.options.image.isPreview) {\n                (0,preview_image/* previewImage */.E)(event.target, vditor.options.lang, vditor.options.theme);\n            }\n        }\n    });\n};\nvar blurEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"blur\", function (event) {\n        if (vditor.currentMode === \"ir\") {\n            var expandElement = vditor.ir.element.querySelector(\".vditor-ir__node--expand\");\n            if (expandElement) {\n                expandElement.classList.remove(\"vditor-ir__node--expand\");\n            }\n        }\n        else if (vditor.currentMode === \"wysiwyg\" &&\n            !vditor.wysiwyg.selectPopover.contains(event.relatedTarget)) {\n            vditor.wysiwyg.hideComment();\n        }\n        vditor[vditor.currentMode].range = (0,selection/* getEditorRange */.zh)(vditor);\n        if (vditor.options.blur) {\n            vditor.options.blur(getMarkdown(vditor));\n        }\n    });\n};\nvar dropEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"dragstart\", function (event) {\n        // 选中编辑器中的文字进行拖拽\n        event.dataTransfer.setData(constants/* Constants.DROP_EDITOR */.g.DROP_EDITOR, constants/* Constants.DROP_EDITOR */.g.DROP_EDITOR);\n    });\n    editorElement.addEventListener(\"drop\", function (event) {\n        if (event.dataTransfer.getData(constants/* Constants.DROP_EDITOR */.g.DROP_EDITOR)) {\n            // 编辑器内选中文字拖拽\n            execAfterRender(vditor);\n        }\n        else if (event.dataTransfer.types.includes(\"Files\") || event.dataTransfer.types.includes(\"text/html\")) {\n            // 外部文件拖入编辑器中或者编辑器内选中文字拖拽\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    document.execCommand(\"insertHTML\", false, code);\n                },\n            });\n        }\n    });\n};\nvar copyEvent = function (vditor, editorElement, copy) {\n    editorElement.addEventListener(\"copy\", function (event) { return copy(event, vditor); });\n};\nvar cutEvent = function (vditor, editorElement, copy) {\n    editorElement.addEventListener(\"cut\", function (event) {\n        copy(event, vditor);\n        // 获取 comment\n        if (vditor.options.comment.enable && vditor.currentMode === \"wysiwyg\") {\n            vditor.wysiwyg.getComments(vditor);\n        }\n        document.execCommand(\"delete\");\n    });\n};\nvar scrollCenter = function (vditor) {\n    if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n        vditor.options.comment.adjustTop(vditor.wysiwyg.getComments(vditor, true));\n    }\n    if (!vditor.options.typewriterMode) {\n        return;\n    }\n    var editorElement = vditor[vditor.currentMode].element;\n    var cursorTop = (0,selection/* getCursorPosition */.Ny)(editorElement).top;\n    if (vditor.options.height === \"auto\" && !vditor.element.classList.contains(\"vditor--fullscreen\")) {\n        window.scrollTo(window.scrollX, cursorTop + vditor.element.offsetTop + vditor.toolbar.element.offsetHeight - window.innerHeight / 2 + 10);\n    }\n    if (vditor.options.height !== \"auto\" || vditor.element.classList.contains(\"vditor--fullscreen\")) {\n        editorElement.scrollTop = cursorTop + editorElement.scrollTop - editorElement.clientHeight / 2 + 10;\n    }\n};\nvar hotkeyEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"keydown\", function (event) {\n        if (!event.isComposing && vditor.options.keydown) {\n            vditor.options.keydown(event);\n        }\n        // hint: 上下选择\n        if ((vditor.options.hint.extend.length > 1 || vditor.toolbar.elements.emoji) &&\n            vditor.hint.select(event, vditor)) {\n            return;\n        }\n        // 重置 comment\n        if (vditor.options.comment.enable && vditor.currentMode === \"wysiwyg\" &&\n            (event.key === \"Backspace\" || matchHotKey(\"⌘X\", event))) {\n            vditor.wysiwyg.getComments(vditor);\n        }\n        if (vditor.currentMode === \"sv\") {\n            if (processKeydown_processKeydown(vditor, event)) {\n                return;\n            }\n        }\n        else if (vditor.currentMode === \"wysiwyg\") {\n            if (wysiwyg_processKeydown_processKeydown(vditor, event)) {\n                return;\n            }\n        }\n        else if (vditor.currentMode === \"ir\") {\n            if (processKeydown(vditor, event)) {\n                return;\n            }\n        }\n        if (vditor.options.ctrlEnter && matchHotKey(\"⌘Enter\", event)) {\n            vditor.options.ctrlEnter(getMarkdown(vditor));\n            event.preventDefault();\n            return;\n        }\n        // undo\n        if (matchHotKey(\"⌘Z\", event) && !vditor.toolbar.elements.undo) {\n            vditor.undo.undo(vditor);\n            event.preventDefault();\n            return;\n        }\n        // redo\n        if (matchHotKey(\"⌘Y\", event) && !vditor.toolbar.elements.redo) {\n            vditor.undo.redo(vditor);\n            event.preventDefault();\n            return;\n        }\n        // esc\n        if (event.key === \"Escape\") {\n            if (vditor.hint.element.style.display === \"block\") {\n                vditor.hint.element.style.display = \"none\";\n            }\n            else if (vditor.options.esc && !event.isComposing) {\n                vditor.options.esc(getMarkdown(vditor));\n            }\n            event.preventDefault();\n            return;\n        }\n        // h1 - h6 hotkey\n        if ((0,compatibility/* isCtrl */.yl)(event) && event.altKey && !event.shiftKey && /^Digit[1-6]$/.test(event.code)) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                var tagName = event.code.replace(\"Digit\", \"H\");\n                if ((0,hasClosest/* hasClosestByMatchTag */.lG)(getSelection().getRangeAt(0).startContainer, tagName)) {\n                    removeHeading(vditor);\n                }\n                else {\n                    setHeading(vditor, tagName);\n                }\n                afterRenderEvent(vditor);\n            }\n            else if (vditor.currentMode === \"sv\") {\n                processHeading(vditor, \"#\".repeat(parseInt(event.code.replace(\"Digit\", \"\"), 10)) + \" \");\n            }\n            else if (vditor.currentMode === \"ir\") {\n                process_processHeading(vditor, \"#\".repeat(parseInt(event.code.replace(\"Digit\", \"\"), 10)) + \" \");\n            }\n            event.preventDefault();\n            return true;\n        }\n        // toggle edit mode\n        if ((0,compatibility/* isCtrl */.yl)(event) && event.altKey && !event.shiftKey && /^Digit[7-9]$/.test(event.code)) {\n            if (event.code === \"Digit7\") {\n                setEditMode(vditor, \"wysiwyg\", event);\n            }\n            else if (event.code === \"Digit8\") {\n                setEditMode(vditor, \"ir\", event);\n            }\n            else if (event.code === \"Digit9\") {\n                setEditMode(vditor, \"sv\", event);\n            }\n            return true;\n        }\n        // toolbar action\n        vditor.options.toolbar.find(function (menuItem) {\n            if (!menuItem.hotkey || menuItem.toolbar) {\n                if (menuItem.toolbar) {\n                    var sub = menuItem.toolbar.find(function (subMenuItem) {\n                        if (!subMenuItem.hotkey) {\n                            return false;\n                        }\n                        if (matchHotKey(subMenuItem.hotkey, event)) {\n                            vditor.toolbar.elements[subMenuItem.name].children[0]\n                                .dispatchEvent(new CustomEvent((0,compatibility/* getEventName */.Le)()));\n                            event.preventDefault();\n                            return true;\n                        }\n                    });\n                    return sub ? true : false;\n                }\n                return false;\n            }\n            if (matchHotKey(menuItem.hotkey, event)) {\n                vditor.toolbar.elements[menuItem.name].children[0].dispatchEvent(new CustomEvent((0,compatibility/* getEventName */.Le)()));\n                event.preventDefault();\n                return true;\n            }\n        });\n    });\n};\nvar selectEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"selectstart\", function (event) {\n        editorElement.onmouseup = function () {\n            setTimeout(function () {\n                var selectText = getSelectText(vditor[vditor.currentMode].element);\n                if (selectText.trim()) {\n                    if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n                        if (!(0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"footnotes-block\") &&\n                            !(0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"link-ref-defs-block\")) {\n                            vditor.wysiwyg.showComment();\n                        }\n                        else {\n                            vditor.wysiwyg.hideComment();\n                        }\n                    }\n                    if (vditor.options.select) {\n                        vditor.options.select(selectText);\n                    }\n                }\n                else {\n                    if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n                        vditor.wysiwyg.hideComment();\n                    }\n                    if (typeof vditor.options.unSelect === 'function') {\n                        vditor.options.unSelect();\n                    }\n                }\n            });\n        };\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/sv/process.ts\n\n\n\n\n\n\n\n\n\nvar processPaste = function (vditor, text) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    range.extractContents();\n    range.insertNode(document.createTextNode(Lute.Caret));\n    range.insertNode(document.createTextNode(text));\n    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-block\", \"0\");\n    if (!blockElement) {\n        blockElement = vditor.sv.element;\n    }\n    var spinHTML = vditor.lute.SpinVditorSVDOM(blockElement.textContent);\n    spinHTML = \"<div data-block='0'>\" +\n        spinHTML.replace(/<span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span><span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span></g, '<span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span><span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span></div><div data-block=\"0\"><') +\n        \"</div>\";\n    if (blockElement.isEqualNode(vditor.sv.element)) {\n        blockElement.innerHTML = spinHTML;\n    }\n    else {\n        blockElement.outerHTML = spinHTML;\n    }\n    combineFootnote(vditor.sv.element);\n    (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    scrollCenter(vditor);\n};\nvar getSideByType = function (spanNode, type, isPrevious) {\n    if (isPrevious === void 0) { isPrevious = true; }\n    var sideElement = spanNode;\n    if (sideElement.nodeType === 3) {\n        sideElement = sideElement.parentElement;\n    }\n    while (sideElement) {\n        if (sideElement.getAttribute(\"data-type\") === type) {\n            return sideElement;\n        }\n        if (isPrevious) {\n            sideElement = sideElement.previousElementSibling;\n        }\n        else {\n            sideElement = sideElement.nextElementSibling;\n        }\n    }\n    return false;\n};\nvar processSpinVditorSVDOM = function (html, vditor) {\n    log(\"SpinVditorSVDOM\", html, \"argument\", vditor.options.debugger);\n    var spinHTML = vditor.lute.SpinVditorSVDOM(html);\n    html = \"<div data-block='0'>\" +\n        spinHTML.replace(/<span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span><span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span></g, '<span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span><span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span></div><div data-block=\"0\"><') +\n        \"</div>\";\n    log(\"SpinVditorSVDOM\", html, \"result\", vditor.options.debugger);\n    return html;\n};\nvar processPreviousMarkers = function (spanElement) {\n    var spanType = spanElement.getAttribute(\"data-type\");\n    var previousElement = spanElement.previousElementSibling;\n    // 有内容的子列表/标题，在其 marker 后换行\n    var markerText = (spanType && spanType !== \"text\" && spanType !== \"table\" && spanType !== \"heading-marker\" &&\n        spanType !== \"newline\" && spanType !== \"yaml-front-matter-open-marker\" && spanType !== \"yaml-front-matter-close-marker\"\n        && spanType !== \"code-block-info\" && spanType !== \"code-block-close-marker\" && spanType !== \"code-block-open-marker\") ?\n        spanElement.textContent : \"\";\n    var hasNL = false;\n    if (spanType === \"newline\") {\n        hasNL = true;\n    }\n    while (previousElement && !hasNL) {\n        var previousType = previousElement.getAttribute(\"data-type\");\n        if (previousType === \"li-marker\" || previousType === \"blockquote-marker\" || previousType === \"task-marker\" ||\n            previousType === \"padding\") {\n            var previousText = previousElement.textContent;\n            if (previousType === \"li-marker\" &&\n                (spanType === \"code-block-open-marker\" || spanType === \"code-block-info\")) {\n                // https://github.com/Vanessa219/vditor/issues/586\n                markerText = previousText.replace(/\\S/g, \" \") + markerText;\n            }\n            else if (spanType === \"code-block-close-marker\" &&\n                previousElement.nextElementSibling.isSameNode(spanElement)) {\n                // https://github.com/Vanessa219/vditor/issues/594\n                var openMarker = getSideByType(spanElement, \"code-block-open-marker\");\n                if (openMarker && openMarker.previousElementSibling) {\n                    previousElement = openMarker.previousElementSibling;\n                    markerText = previousText + markerText;\n                }\n            }\n            else {\n                markerText = previousText + markerText;\n            }\n        }\n        else if (previousType === \"newline\") {\n            hasNL = true;\n        }\n        previousElement = previousElement.previousElementSibling;\n    }\n    return markerText;\n};\nvar processAfterRender = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (options.enableHint) {\n        vditor.hint.render(vditor);\n    }\n    vditor.preview.render(vditor);\n    var text = getMarkdown(vditor);\n    if (typeof vditor.options.input === \"function\" && options.enableInput) {\n        vditor.options.input(text);\n    }\n    if (vditor.options.counter.enable) {\n        vditor.counter.render(vditor, text);\n    }\n    if (vditor.options.cache.enable && (0,compatibility/* accessLocalStorage */.pK)()) {\n        localStorage.setItem(vditor.options.cache.id, text);\n        if (vditor.options.cache.after) {\n            vditor.options.cache.after(text);\n        }\n    }\n    if (vditor.devtools) {\n        vditor.devtools.renderEchart(vditor);\n    }\n    clearTimeout(vditor.sv.processTimeoutId);\n    vditor.sv.processTimeoutId = window.setTimeout(function () {\n        if (options.enableAddUndoStack && !vditor.sv.composingLock) {\n            vditor.undo.addToUndoStack(vditor);\n        }\n    }, vditor.options.undoDelay);\n};\nvar processHeading = function (vditor, value) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var headingElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"SPAN\");\n    if (headingElement && headingElement.textContent.trim() !== \"\") {\n        value = \"\\n\" + value;\n    }\n    range.collapse(true);\n    document.execCommand(\"insertHTML\", false, value);\n};\nvar processToolbar = function (vditor, actionBtn, prefix, suffix) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var commandName = actionBtn.getAttribute(\"data-type\");\n    // 添加\n    if (vditor.sv.element.childNodes.length === 0) {\n        vditor.sv.element.innerHTML = \"<span data-type=\\\"p\\\" data-block=\\\"0\\\"><span data-type=\\\"text\\\"><wbr></span></span><span data-type=\\\"newline\\\"><br><span style=\\\"display: none\\\">\\n</span></span>\";\n        (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    var spanElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"SPAN\");\n    if (!blockElement) {\n        return;\n    }\n    if (commandName === \"link\") {\n        var html = void 0;\n        if (range.toString() === \"\") {\n            html = \"\".concat(prefix).concat(Lute.Caret).concat(suffix);\n        }\n        else {\n            html = \"\".concat(prefix).concat(range.toString()).concat(suffix.replace(\")\", Lute.Caret + \")\"));\n        }\n        document.execCommand(\"insertHTML\", false, html);\n        return;\n    }\n    else if (commandName === \"italic\" || commandName === \"bold\" || commandName === \"strike\" ||\n        commandName === \"inline-code\" || commandName === \"code\" || commandName === \"table\" || commandName === \"line\") {\n        var html = void 0;\n        // https://github.com/Vanessa219/vditor/issues/563 代码块不需要后面的 ```\n        if (range.toString() === \"\") {\n            html = \"\".concat(prefix).concat(Lute.Caret).concat(commandName === \"code\" ? \"\" : suffix);\n        }\n        else {\n            html = \"\".concat(prefix).concat(range.toString()).concat(Lute.Caret).concat(commandName === \"code\" ? \"\" : suffix);\n        }\n        if (commandName === \"table\" || (commandName === \"code\" && spanElement && spanElement.textContent !== \"\")) {\n            html = \"\\n\\n\" + html;\n        }\n        else if (commandName === \"line\") {\n            html = \"\\n\\n\".concat(prefix, \"\\n\").concat(Lute.Caret);\n        }\n        document.execCommand(\"insertHTML\", false, html);\n        return;\n    }\n    else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\" ||\n        commandName === \"quote\") {\n        if (spanElement) {\n            var marker = \"* \";\n            if (commandName === \"check\") {\n                marker = \"* [ ] \";\n            }\n            else if (commandName === \"ordered-list\") {\n                marker = \"1. \";\n            }\n            else if (commandName === \"quote\") {\n                marker = \"> \";\n            }\n            var newLine = getSideByType(spanElement, \"newline\");\n            if (newLine) {\n                newLine.insertAdjacentText(\"afterend\", marker);\n            }\n            else {\n                blockElement.insertAdjacentText(\"afterbegin\", marker);\n            }\n            inputEvent(vditor);\n            return;\n        }\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    processAfterRender(vditor);\n};\n\n;// CONCATENATED MODULE: ./src/ts/upload/getElement.ts\nvar getElement = function (vditor) {\n    switch (vditor.currentMode) {\n        case \"ir\":\n            return vditor.ir.element;\n        case \"wysiwyg\":\n            return vditor.wysiwyg.element;\n        case \"sv\":\n            return vditor.sv.element;\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/upload/setHeaders.ts\nvar setHeaders = function (vditor, xhr) {\n    if (vditor.options.upload.setHeaders) {\n        vditor.options.upload.headers = vditor.options.upload.setHeaders();\n    }\n    if (vditor.options.upload.headers) {\n        Object.keys(vditor.options.upload.headers).forEach(function (key) {\n            xhr.setRequestHeader(key, vditor.options.upload.headers[key]);\n        });\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/upload/index.ts\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\nvar Upload = /** @class */ (function () {\n    function Upload() {\n        this.isUploading = false;\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-upload\";\n    }\n    return Upload;\n}());\nvar validateFile = function (vditor, files) {\n    vditor.tip.hide();\n    var uploadFileList = [];\n    var errorTip = \"\";\n    var uploadingStr = \"\";\n    var lang = vditor.options.lang;\n    var options = vditor.options;\n    var _loop_1 = function (iMax, i) {\n        var file = files[i];\n        var validate = true;\n        if (!file.name) {\n            errorTip += \"<li>\".concat(window.VditorI18n.nameEmpty, \"</li>\");\n            validate = false;\n        }\n        if (file.size > vditor.options.upload.max) {\n            errorTip += \"<li>\".concat(file.name, \" \").concat(window.VditorI18n.over, \" \").concat(vditor.options.upload.max / 1024 / 1024, \"M</li>\");\n            validate = false;\n        }\n        var lastIndex = file.name.lastIndexOf(\".\");\n        var fileExt = file.name.substr(lastIndex);\n        var filename = vditor.options.upload.filename(file.name.substr(0, lastIndex)) + fileExt;\n        if (vditor.options.upload.accept) {\n            var isAccept = vditor.options.upload.accept.split(\",\").some(function (item) {\n                var type = item.trim();\n                if (type.indexOf(\".\") === 0) {\n                    if (fileExt.toLowerCase() === type.toLowerCase()) {\n                        return true;\n                    }\n                }\n                else {\n                    if (file.type.split(\"/\")[0] === type.split(\"/\")[0]) {\n                        return true;\n                    }\n                }\n                return false;\n            });\n            if (!isAccept) {\n                errorTip += \"<li>\".concat(file.name, \" \").concat(window.VditorI18n.fileTypeError, \"</li>\");\n                validate = false;\n            }\n        }\n        if (validate) {\n            uploadFileList.push(file);\n            uploadingStr += \"<li>\".concat(filename, \" \").concat(window.VditorI18n.uploading, \" <a class=\\\"vditorCancelUpload\\\" href=\\\"javascript:void(0)\\\">\").concat(window.VditorI18n.cancelUpload, \"</a></li>\");\n        }\n    };\n    for (var iMax = files.length, i = 0; i < iMax; i++) {\n        _loop_1(iMax, i);\n    }\n    vditor.tip.show(\"<ul>\".concat(errorTip).concat(uploadingStr, \"</ul>\"));\n    if (vditor.options.upload.cancel) {\n        var vditorCancelUploadElement = vditor.tip.element.querySelector(\".vditorCancelUpload\");\n        if (vditorCancelUploadElement) {\n            vditorCancelUploadElement.addEventListener(\"click\", function () {\n                vditor.options.upload.cancel(uploadFileList);\n                vditor.tip.hide();\n                vditor.upload.isUploading = false;\n            });\n        }\n    }\n    return uploadFileList;\n};\nvar genUploadedLabel = function (responseText, vditor) {\n    var editorElement = getElement(vditor);\n    editorElement.focus();\n    var response = JSON.parse(responseText);\n    var errorTip = \"\";\n    if (response.code === 1) {\n        errorTip = \"\".concat(response.msg);\n    }\n    if (response.data.errFiles && response.data.errFiles.length > 0) {\n        errorTip = \"<ul><li>\".concat(errorTip, \"</li>\");\n        response.data.errFiles.forEach(function (data) {\n            var lastIndex = data.lastIndexOf(\".\");\n            var filename = vditor.options.upload.filename(data.substr(0, lastIndex)) + data.substr(lastIndex);\n            errorTip += \"<li>\".concat(filename, \" \").concat(window.VditorI18n.uploadError, \"</li>\");\n        });\n        errorTip += \"</ul>\";\n    }\n    if (errorTip) {\n        vditor.tip.show(errorTip);\n    }\n    else {\n        vditor.tip.hide();\n    }\n    var succFileText = \"\";\n    Object.keys(response.data.succMap).forEach(function (key) {\n        var path = response.data.succMap[key];\n        var lastIndex = key.lastIndexOf(\".\");\n        var type = key.substr(lastIndex);\n        var filename = vditor.options.upload.filename(key.substr(0, lastIndex)) + type;\n        type = type.toLowerCase();\n        if (type.indexOf(\".wav\") === 0 || type.indexOf(\".mp3\") === 0 || type.indexOf(\".ogg\") === 0) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                succFileText += \"<div class=\\\"vditor-wysiwyg__block\\\" data-type=\\\"html-block\\\"\\n data-block=\\\"0\\\"><pre><code>&lt;audio controls=\\\"controls\\\" src=\\\"\".concat(path, \"\\\"&gt;&lt;/audio&gt;</code></pre><pre class=\\\"vditor-wysiwyg__preview\\\" data-render=\\\"1\\\"><audio controls=\\\"controls\\\" src=\\\"\").concat(path, \"\\\"></audio></pre></div>\\n\");\n            }\n            else if (vditor.currentMode === \"ir\") {\n                succFileText += \"<audio controls=\\\"controls\\\" src=\\\"\".concat(path, \"\\\"></audio>\\n\");\n            }\n            else {\n                succFileText += \"[\".concat(filename, \"](\").concat(path, \")\\n\");\n            }\n        }\n        else if (type.indexOf(\".apng\") === 0\n            || type.indexOf(\".bmp\") === 0\n            || type.indexOf(\".gif\") === 0\n            || type.indexOf(\".ico\") === 0 || type.indexOf(\".cur\") === 0\n            || type.indexOf(\".jpg\") === 0 || type.indexOf(\".jpeg\") === 0 || type.indexOf(\".jfif\") === 0 || type.indexOf(\".pjp\") === 0 || type.indexOf(\".pjpeg\") === 0\n            || type.indexOf(\".png\") === 0\n            || type.indexOf(\".svg\") === 0\n            || type.indexOf(\".webp\") === 0) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                succFileText += \"<img alt=\\\"\".concat(filename, \"\\\" src=\\\"\").concat(path, \"\\\">\\n\");\n            }\n            else {\n                succFileText += \"![\".concat(filename, \"](\").concat(path, \")\\n\");\n            }\n        }\n        else {\n            if (vditor.currentMode === \"wysiwyg\") {\n                succFileText += \"<a href=\\\"\".concat(path, \"\\\">\").concat(filename, \"</a>\\n\");\n            }\n            else {\n                succFileText += \"[\".concat(filename, \"](\").concat(path, \")\\n\");\n            }\n        }\n    });\n    (0,selection/* setSelectionFocus */.Hc)(vditor.upload.range);\n    document.execCommand(\"insertHTML\", false, succFileText);\n    vditor.upload.range = getSelection().getRangeAt(0).cloneRange();\n};\nvar uploadFiles = function (vditor, files, element) { return __awaiter(void 0, void 0, void 0, function () {\n    var fileList, filesMax, i, fileItem, isValidate, isValidate, editorElement, validateResult, formData, extraData, _i, _a, key, i, iMax, xhr;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                fileList = [];\n                filesMax = vditor.options.upload.multiple === true ? files.length : 1;\n                for (i = 0; i < filesMax; i++) {\n                    fileItem = files[i];\n                    if (fileItem instanceof DataTransferItem) {\n                        fileItem = fileItem.getAsFile();\n                    }\n                    fileList.push(fileItem);\n                }\n                if (!vditor.options.upload.handler) return [3 /*break*/, 2];\n                return [4 /*yield*/, vditor.options.upload.handler(fileList)];\n            case 1:\n                isValidate = _b.sent();\n                if (element) {\n                    element.value = \"\";\n                }\n                if (typeof isValidate === \"string\") {\n                    vditor.tip.show(isValidate);\n                    return [2 /*return*/];\n                }\n                return [2 /*return*/];\n            case 2:\n                if (!vditor.options.upload.url || !vditor.upload) {\n                    if (element) {\n                        element.value = \"\";\n                    }\n                    vditor.tip.show(\"please config: options.upload.url\");\n                    return [2 /*return*/];\n                }\n                if (!vditor.options.upload.file) return [3 /*break*/, 4];\n                return [4 /*yield*/, vditor.options.upload.file(fileList)];\n            case 3:\n                fileList = _b.sent();\n                _b.label = 4;\n            case 4:\n                if (vditor.options.upload.validate) {\n                    isValidate = vditor.options.upload.validate(fileList);\n                    if (typeof isValidate === \"string\") {\n                        vditor.tip.show(isValidate);\n                        return [2 /*return*/];\n                    }\n                }\n                editorElement = getElement(vditor);\n                vditor.upload.range = (0,selection/* getEditorRange */.zh)(vditor);\n                validateResult = validateFile(vditor, fileList);\n                if (validateResult.length === 0) {\n                    if (element) {\n                        element.value = \"\";\n                    }\n                    return [2 /*return*/];\n                }\n                formData = new FormData();\n                extraData = vditor.options.upload.extraData;\n                for (_i = 0, _a = Object.keys(extraData); _i < _a.length; _i++) {\n                    key = _a[_i];\n                    formData.append(key, extraData[key]);\n                }\n                for (i = 0, iMax = validateResult.length; i < iMax; i++) {\n                    formData.append(vditor.options.upload.fieldName, validateResult[i]);\n                }\n                xhr = new XMLHttpRequest();\n                vditor.upload.xhr = xhr;\n                xhr.open(\"POST\", vditor.options.upload.url);\n                if (vditor.options.upload.token) {\n                    xhr.setRequestHeader(\"X-Upload-Token\", vditor.options.upload.token);\n                }\n                if (vditor.options.upload.withCredentials) {\n                    xhr.withCredentials = true;\n                }\n                setHeaders(vditor, xhr);\n                vditor.upload.isUploading = true;\n                editorElement.setAttribute(\"contenteditable\", \"false\");\n                xhr.onreadystatechange = function () {\n                    if (xhr.readyState === XMLHttpRequest.DONE) {\n                        vditor.upload.isUploading = false;\n                        editorElement.setAttribute(\"contenteditable\", \"true\");\n                        if (xhr.status >= 200 && xhr.status < 300) {\n                            if (vditor.options.upload.success) {\n                                vditor.options.upload.success(editorElement, xhr.responseText);\n                            }\n                            else {\n                                var responseText = xhr.responseText;\n                                if (vditor.options.upload.format) {\n                                    responseText = vditor.options.upload.format(files, xhr.responseText);\n                                }\n                                genUploadedLabel(responseText, vditor);\n                            }\n                        }\n                        else {\n                            if (vditor.options.upload.error) {\n                                vditor.options.upload.error(xhr.responseText);\n                            }\n                            else {\n                                vditor.tip.show(xhr.responseText);\n                            }\n                        }\n                        if (element) {\n                            element.value = \"\";\n                        }\n                        vditor.upload.element.style.display = \"none\";\n                        vditor.upload.xhr = undefined;\n                    }\n                };\n                xhr.upload.onprogress = function (event) {\n                    if (!event.lengthComputable) {\n                        return;\n                    }\n                    var progress = event.loaded / event.total * 100;\n                    vditor.upload.element.style.display = \"block\";\n                    var progressBar = vditor.upload.element;\n                    progressBar.style.width = progress + \"%\";\n                };\n                xhr.send(formData);\n                return [2 /*return*/];\n        }\n    });\n}); };\n\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/input.ts\n\n\n\n\n\n\n\n\nvar input_input = function (vditor, range, event) {\n    var _a;\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (!blockElement) {\n        // 使用顶级块元素，应使用 innerHTML\n        blockElement = vditor.wysiwyg.element;\n    }\n    if (event && event.inputType !== \"formatItalic\"\n        && event.inputType !== \"deleteByDrag\"\n        && event.inputType !== \"insertFromDrop\"\n        && event.inputType !== \"formatBold\"\n        && event.inputType !== \"formatRemove\"\n        && event.inputType !== \"formatStrikeThrough\"\n        && event.inputType !== \"insertUnorderedList\"\n        && event.inputType !== \"insertOrderedList\"\n        && event.inputType !== \"formatOutdent\"\n        && event.inputType !== \"formatIndent\"\n        && event.inputType !== \"\" // document.execCommand('unlink', false)\n        || !event) {\n        var previousAEmptyElement = previoueIsEmptyA(range.startContainer);\n        if (previousAEmptyElement) {\n            // 链接结尾回车不应该复制到下一行 https://github.com/Vanessa219/vditor/issues/163\n            previousAEmptyElement.remove();\n        }\n        // 保存光标\n        vditor.wysiwyg.element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n            wbr.remove();\n        });\n        range.insertNode(document.createElement(\"wbr\"));\n        // 在行首进行删除，后面的元素会带有样式，需清除\n        blockElement.querySelectorAll(\"[style]\").forEach(function (item) {\n            item.removeAttribute(\"style\");\n        });\n        // 移除空评论\n        blockElement.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n            if (item.textContent.trim() === \"\") {\n                item.classList.remove(\"vditor-comment\", \"vditor-comment--focus\");\n                item.removeAttribute(\"data-cmtids\");\n            }\n        });\n        //  在有评论的行首换行后，该行的前一段会带有评论标识\n        (_a = blockElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n            if (item.textContent.trim() === \"\") {\n                item.classList.remove(\"vditor-comment\", \"vditor-comment--focus\");\n                item.removeAttribute(\"data-cmtids\");\n            }\n        });\n        var html_1 = \"\";\n        if (blockElement.getAttribute(\"data-type\") === \"link-ref-defs-block\") {\n            // 修改链接引用\n            blockElement = vditor.wysiwyg.element;\n        }\n        var isWYSIWYGElement = blockElement.isEqualNode(vditor.wysiwyg.element);\n        var footnoteElement = (0,hasClosest/* hasClosestByAttribute */.a1)(blockElement, \"data-type\", \"footnotes-block\");\n        if (!isWYSIWYGElement) {\n            // 列表需要到最顶层\n            var topListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n            if (topListElement && !footnoteElement) {\n                var blockquoteElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"BLOCKQUOTE\");\n                if (blockquoteElement) {\n                    // li 中有 blockquote 就只渲染 blockquote\n                    blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer) || blockElement;\n                }\n                else {\n                    blockElement = topListElement;\n                }\n            }\n            // 修改脚注\n            if (footnoteElement) {\n                blockElement = footnoteElement;\n            }\n            html_1 = blockElement.outerHTML;\n            if (blockElement.tagName === \"UL\" || blockElement.tagName === \"OL\") {\n                // 如果为列表的话，需要把上下的列表都重绘\n                var listPrevElement = blockElement.previousElementSibling;\n                var listNextElement = blockElement.nextElementSibling;\n                if (listPrevElement && (listPrevElement.tagName === \"UL\" || listPrevElement.tagName === \"OL\")) {\n                    html_1 = listPrevElement.outerHTML + html_1;\n                    listPrevElement.remove();\n                }\n                if (listNextElement && (listNextElement.tagName === \"UL\" || listNextElement.tagName === \"OL\")) {\n                    html_1 = html_1 + listNextElement.outerHTML;\n                    listNextElement.remove();\n                }\n                // firefox 列表回车不会产生新的 list item https://github.com/Vanessa219/vditor/issues/194\n                html_1 = html_1.replace(\"<div><wbr><br></div>\", \"<li><p><wbr><br></p></li>\");\n            }\n            if (!blockElement.innerText.startsWith(\"```\")) {\n                // 添加链接引用\n                vditor.wysiwyg.element.querySelectorAll(\"[data-type='link-ref-defs-block']\").forEach(function (item) {\n                    if (item && !blockElement.isEqualNode(item)) {\n                        html_1 += item.outerHTML;\n                        item.remove();\n                    }\n                });\n                // 添加脚注\n                vditor.wysiwyg.element.querySelectorAll(\"[data-type='footnotes-block']\").forEach(function (item) {\n                    if (item && !blockElement.isEqualNode(item)) {\n                        html_1 += item.outerHTML;\n                        item.remove();\n                    }\n                });\n            }\n        }\n        else {\n            html_1 = blockElement.innerHTML;\n        }\n        // 合并多个 em， strong，s。以防止多个相同元素在一起时不满足 commonmark 规范，出现标记符\n        html_1 = html_1.replace(/<\\/(strong|b)><strong data-marker=\"\\W{2}\">/g, \"\")\n            .replace(/<\\/(em|i)><em data-marker=\"\\W{1}\">/g, \"\")\n            .replace(/<\\/(s|strike)><s data-marker=\"~{1,2}\">/g, \"\");\n        if (html_1 === '<p data-block=\"0\">```<wbr></p>' && vditor.hint.recentLanguage) {\n            html_1 = '<p data-block=\"0\">```<wbr></p>'.replace(\"```\", \"```\" + vditor.hint.recentLanguage);\n        }\n        log(\"SpinVditorDOM\", html_1, \"argument\", vditor.options.debugger);\n        html_1 = vditor.lute.SpinVditorDOM(html_1);\n        log(\"SpinVditorDOM\", html_1, \"result\", vditor.options.debugger);\n        if (isWYSIWYGElement) {\n            blockElement.innerHTML = html_1;\n        }\n        else {\n            blockElement.outerHTML = html_1;\n            if (footnoteElement) {\n                // 更新正文中的 tip\n                var footnoteItemElement = (0,hasClosest/* hasTopClosestByTag */.E2)(vditor.wysiwyg.element.querySelector(\"wbr\"), \"LI\");\n                if (footnoteItemElement) {\n                    var footnoteRefElement = vditor.wysiwyg.element.querySelector(\"sup[data-type=\\\"footnotes-ref\\\"][data-footnotes-label=\\\"\".concat(footnoteItemElement.getAttribute(\"data-marker\"), \"\\\"]\"));\n                    if (footnoteRefElement) {\n                        footnoteRefElement.setAttribute(\"aria-label\", footnoteItemElement.textContent.trim().substr(0, 24));\n                    }\n                }\n            }\n        }\n        var firstLinkRefDefElement_1;\n        var allLinkRefDefsElement = vditor.wysiwyg.element.querySelectorAll(\"[data-type='link-ref-defs-block']\");\n        allLinkRefDefsElement.forEach(function (item, index) {\n            if (index === 0) {\n                firstLinkRefDefElement_1 = item;\n            }\n            else {\n                firstLinkRefDefElement_1.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n                item.remove();\n            }\n        });\n        if (allLinkRefDefsElement.length > 0) {\n            vditor.wysiwyg.element.insertAdjacentElement(\"beforeend\", allLinkRefDefsElement[0]);\n        }\n        // 脚注合并后添加的末尾\n        var firstFootnoteElement_1;\n        var allFootnoteElement = vditor.wysiwyg.element.querySelectorAll(\"[data-type='footnotes-block']\");\n        allFootnoteElement.forEach(function (item, index) {\n            if (index === 0) {\n                firstFootnoteElement_1 = item;\n            }\n            else {\n                firstFootnoteElement_1.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n                item.remove();\n            }\n        });\n        if (allFootnoteElement.length > 0) {\n            vditor.wysiwyg.element.insertAdjacentElement(\"beforeend\", allFootnoteElement[0]);\n        }\n        // 设置光标\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        vditor.wysiwyg.element.querySelectorAll(\".vditor-wysiwyg__preview[data-render='2']\")\n            .forEach(function (item) {\n            processCodeRender(item, vditor);\n        });\n        if (event && (event.inputType === \"deleteContentBackward\" || event.inputType === \"deleteContentForward\") &&\n            vditor.options.comment.enable) {\n            vditor.wysiwyg.triggerRemoveComment(vditor);\n            vditor.options.comment.adjustTop(vditor.wysiwyg.getComments(vditor, true));\n        }\n    }\n    renderToc(vditor);\n    afterRenderEvent(vditor, {\n        enableAddUndoStack: true,\n        enableHint: true,\n        enableInput: true,\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/fixBrowserBehavior.ts\nvar __makeTemplateObject = (undefined && undefined.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar fixBrowserBehavior_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar fixBrowserBehavior_generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// https://github.com/Vanessa219/vditor/issues/508 软键盘无法删除空块\nvar fixGSKeyBackspace = function (event, vditor, startContainer) {\n    if (event.keyCode === 229 && event.code === \"\" && event.key === \"Unidentified\" && vditor.currentMode !== \"sv\") {\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n        // 移动端的标点符号都显示为 299，因此需限定为空删除的条件\n        if (blockElement && blockElement.textContent.trim() === \"\") {\n            vditor[vditor.currentMode].composingLock = true;\n            return false;\n        }\n    }\n    return true;\n};\n// https://github.com/Vanessa219/vditor/issues/361 代码块后输入中文\nvar fixCJKPosition = function (range, vditor, event) {\n    if (event.key === \"Enter\" || event.key === \"Tab\" || event.key === \"Backspace\" || event.key.indexOf(\"Arrow\") > -1\n        || (0,compatibility/* isCtrl */.yl)(event) || event.key === \"Escape\" || event.shiftKey || event.altKey) {\n        return;\n    }\n    var pLiElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"P\") ||\n        (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n    if (pLiElement && (0,selection/* getSelectPosition */.im)(pLiElement, vditor[vditor.currentMode].element, range).start === 0) {\n        // https://github.com/Vanessa219/vditor/issues/1289 WKWebView切换输入法产生六分之一空格，造成光标错位\n        if (pLiElement.nodeValue) {\n            pLiElement.nodeValue = pLiElement.nodeValue.replace(/\\u2006/g, '');\n        }\n        var zwspNode = document.createTextNode(constants/* Constants.ZWSP */.g.ZWSP);\n        range.insertNode(zwspNode);\n        range.setStartAfter(zwspNode);\n    }\n};\n// https://github.com/Vanessa219/vditor/issues/381 光标在内联数学公式中无法向下移动\nvar fixCursorDownInlineMath = function (range, key) {\n    if (key === \"ArrowDown\" || key === \"ArrowUp\") {\n        var inlineElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"math-inline\") ||\n            (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"html-entity\") ||\n            (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"html-inline\");\n        if (inlineElement) {\n            if (key === \"ArrowDown\") {\n                range.setStartAfter(inlineElement.parentElement);\n            }\n            if (key === \"ArrowUp\") {\n                range.setStartBefore(inlineElement.parentElement);\n            }\n        }\n    }\n};\nvar insertEmptyBlock = function (vditor, position) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (blockElement) {\n        blockElement.insertAdjacentHTML(position, \"<p data-block=\\\"0\\\">\".concat(constants/* Constants.ZWSP */.g.ZWSP, \"<wbr>\\n</p>\"));\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        highlightToolbar(vditor);\n        execAfterRender(vditor);\n    }\n};\nvar isFirstCell = function (cellElement) {\n    var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(cellElement, \"TABLE\");\n    if (tableElement && tableElement.rows[0].cells[0].isSameNode(cellElement)) {\n        return tableElement;\n    }\n    return false;\n};\nvar isLastCell = function (cellElement) {\n    var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(cellElement, \"TABLE\");\n    if (tableElement && tableElement.lastElementChild.lastElementChild.lastElementChild.isSameNode(cellElement)) {\n        return tableElement;\n    }\n    return false;\n};\n// 光标设置到前一个表格中\nvar goPreviousCell = function (cellElement, range, isSelected) {\n    if (isSelected === void 0) { isSelected = true; }\n    var previousElement = cellElement.previousElementSibling;\n    if (!previousElement) {\n        if (cellElement.parentElement.previousElementSibling) {\n            previousElement = cellElement.parentElement.previousElementSibling.lastElementChild;\n        }\n        else if (cellElement.parentElement.parentElement.tagName === \"TBODY\" &&\n            cellElement.parentElement.parentElement.previousElementSibling) {\n            previousElement = cellElement.parentElement\n                .parentElement.previousElementSibling.lastElementChild.lastElementChild;\n        }\n        else {\n            previousElement = null;\n        }\n    }\n    if (previousElement) {\n        range.selectNodeContents(previousElement);\n        if (!isSelected) {\n            range.collapse(false);\n        }\n        (0,selection/* setSelectionFocus */.Hc)(range);\n    }\n    return previousElement;\n};\nvar insertAfterBlock = function (vditor, event, range, element, blockElement) {\n    var position = (0,selection/* getSelectPosition */.im)(element, vditor[vditor.currentMode].element, range);\n    if ((event.key === \"ArrowDown\" && element.textContent.trimRight().substr(position.start).indexOf(\"\\n\") === -1) ||\n        (event.key === \"ArrowRight\" && position.start >= element.textContent.trimRight().length)) {\n        var nextElement = blockElement.nextElementSibling;\n        if (!nextElement ||\n            (nextElement && (nextElement.tagName === \"TABLE\" || nextElement.getAttribute(\"data-type\")))) {\n            blockElement.insertAdjacentHTML(\"afterend\", \"<p data-block=\\\"0\\\">\".concat(constants/* Constants.ZWSP */.g.ZWSP, \"<wbr></p>\"));\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        }\n        else {\n            range.selectNodeContents(nextElement);\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n        }\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar insertBeforeBlock = function (vditor, event, range, element, blockElement) {\n    var position = (0,selection/* getSelectPosition */.im)(element, vditor[vditor.currentMode].element, range);\n    if ((event.key === \"ArrowUp\" && element.textContent.substr(0, position.start).indexOf(\"\\n\") === -1) ||\n        ((event.key === \"ArrowLeft\" || (event.key === \"Backspace\" && range.toString() === \"\")) &&\n            position.start === 0)) {\n        var previousElement = blockElement.previousElementSibling;\n        // table || code\n        if (!previousElement ||\n            (previousElement && (previousElement.tagName === \"TABLE\" || previousElement.getAttribute(\"data-type\")))) {\n            blockElement.insertAdjacentHTML(\"beforebegin\", \"<p data-block=\\\"0\\\">\".concat(constants/* Constants.ZWSP */.g.ZWSP, \"<wbr></p>\"));\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        }\n        else {\n            range.selectNodeContents(previousElement);\n            range.collapse(false);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n        }\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar listToggle = function (vditor, range, type, cancel) {\n    if (cancel === void 0) { cancel = true; }\n    var itemElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n    vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n        wbr.remove();\n    });\n    range.insertNode(document.createElement(\"wbr\"));\n    if (cancel && itemElement) {\n        // 取消\n        var pHTML = \"\";\n        for (var i = 0; i < itemElement.parentElement.childElementCount; i++) {\n            var inputElement = itemElement.parentElement.children[i].querySelector(\"input\");\n            if (inputElement) {\n                inputElement.remove();\n            }\n            pHTML += \"<p data-block=\\\"0\\\">\".concat(itemElement.parentElement.children[i].innerHTML.trimLeft(), \"</p>\");\n        }\n        itemElement.parentElement.insertAdjacentHTML(\"beforebegin\", pHTML);\n        itemElement.parentElement.remove();\n    }\n    else {\n        if (!itemElement) {\n            // 添加\n            var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-block\", \"0\");\n            if (!blockElement) {\n                vditor[vditor.currentMode].element.querySelector(\"wbr\").remove();\n                blockElement = vditor[vditor.currentMode].element.querySelector(\"p\");\n                blockElement.innerHTML = \"<wbr>\";\n            }\n            if (type === \"check\") {\n                blockElement.insertAdjacentHTML(\"beforebegin\", \"<ul data-block=\\\"0\\\"><li class=\\\"vditor-task\\\"><input type=\\\"checkbox\\\" /> \".concat(blockElement.innerHTML, \"</li></ul>\"));\n                blockElement.remove();\n            }\n            else if (type === \"list\") {\n                blockElement.insertAdjacentHTML(\"beforebegin\", \"<ul data-block=\\\"0\\\"><li>\".concat(blockElement.innerHTML, \"</li></ul>\"));\n                blockElement.remove();\n            }\n            else if (type === \"ordered-list\") {\n                blockElement.insertAdjacentHTML(\"beforebegin\", \"<ol data-block=\\\"0\\\"><li>\".concat(blockElement.innerHTML, \"</li></ol>\"));\n                blockElement.remove();\n            }\n        }\n        else {\n            // 切换\n            if (type === \"check\") {\n                itemElement.parentElement.querySelectorAll(\"li\").forEach(function (item) {\n                    item.insertAdjacentHTML(\"afterbegin\", \"<input type=\\\"checkbox\\\" />\".concat(item.textContent.indexOf(\" \") === 0 ? \"\" : \" \"));\n                    item.classList.add(\"vditor-task\");\n                });\n            }\n            else {\n                if (itemElement.querySelector(\"input\")) {\n                    itemElement.parentElement.querySelectorAll(\"li\").forEach(function (item) {\n                        item.querySelector(\"input\").remove();\n                        item.classList.remove(\"vditor-task\");\n                    });\n                }\n                var element = void 0;\n                if (type === \"list\") {\n                    element = document.createElement(\"ul\");\n                    element.setAttribute(\"data-marker\", \"*\");\n                }\n                else {\n                    element = document.createElement(\"ol\");\n                    element.setAttribute(\"data-marker\", \"1.\");\n                }\n                element.setAttribute(\"data-block\", \"0\");\n                element.setAttribute(\"data-tight\", itemElement.parentElement.getAttribute(\"data-tight\"));\n                element.innerHTML = itemElement.parentElement.innerHTML;\n                itemElement.parentElement.parentNode.replaceChild(element, itemElement.parentElement);\n            }\n        }\n    }\n};\nvar listIndent = function (vditor, liElement, range) {\n    var previousElement = liElement.previousElementSibling;\n    if (liElement && previousElement) {\n        var liElements_1 = [liElement];\n        Array.from(range.cloneContents().children).forEach(function (item, index) {\n            if (item.nodeType !== 3 && liElement && item.textContent.trim() !== \"\"\n                && liElement.getAttribute(\"data-node-id\") === item.getAttribute(\"data-node-id\")) {\n                if (index !== 0) {\n                    liElements_1.push(liElement);\n                }\n                liElement = liElement.nextElementSibling;\n            }\n        });\n        vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n            wbr.remove();\n        });\n        range.insertNode(document.createElement(\"wbr\"));\n        var liParentElement = previousElement.parentElement;\n        var liHTML_1 = \"\";\n        liElements_1.forEach(function (item) {\n            var marker = item.getAttribute(\"data-marker\");\n            if (marker.length !== 1) {\n                marker = \"1\".concat(marker.slice(-1));\n            }\n            liHTML_1 += \"<li data-node-id=\\\"\".concat(item.getAttribute(\"data-node-id\"), \"\\\" data-marker=\\\"\").concat(marker, \"\\\">\").concat(item.innerHTML, \"</li>\");\n            item.remove();\n        });\n        previousElement.insertAdjacentHTML(\"beforeend\", \"<\".concat(liParentElement.tagName, \" data-block=\\\"0\\\">\").concat(liHTML_1, \"</\").concat(liParentElement.tagName, \">\"));\n        if (vditor.currentMode === \"wysiwyg\") {\n            liParentElement.outerHTML = vditor.lute.SpinVditorDOM(liParentElement.outerHTML);\n        }\n        else {\n            liParentElement.outerHTML = vditor.lute.SpinVditorIRDOM(liParentElement.outerHTML);\n        }\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        var tempTopListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n        if (tempTopListElement) {\n            tempTopListElement.querySelectorAll(\".vditor-\".concat(vditor.currentMode, \"__preview[data-render='2']\"))\n                .forEach(function (item) {\n                processCodeRender(item, vditor);\n                if (vditor.currentMode === \"wysiwyg\") {\n                    item.previousElementSibling.setAttribute(\"style\", \"display:none\");\n                }\n            });\n        }\n        execAfterRender(vditor);\n        highlightToolbar(vditor);\n    }\n    else {\n        vditor[vditor.currentMode].element.focus();\n    }\n};\nvar listOutdent = function (vditor, liElement, range, topListElement) {\n    var liParentLiElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(liElement.parentElement, \"LI\");\n    if (liParentLiElement) {\n        vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n            wbr.remove();\n        });\n        range.insertNode(document.createElement(\"wbr\"));\n        var liParentElement = liElement.parentElement;\n        var liParentAfterElement = liParentElement.cloneNode();\n        var liElements_2 = [liElement];\n        Array.from(range.cloneContents().children).forEach(function (item, index) {\n            if (item.nodeType !== 3 && liElement && item.textContent.trim() !== \"\" &&\n                liElement.getAttribute(\"data-node-id\") === item.getAttribute(\"data-node-id\")) {\n                if (index !== 0) {\n                    liElements_2.push(liElement);\n                }\n                liElement = liElement.nextElementSibling;\n            }\n        });\n        var isMatch_1 = false;\n        var afterHTML_1 = \"\";\n        liParentElement.querySelectorAll(\"li\").forEach(function (item) {\n            if (isMatch_1) {\n                afterHTML_1 += item.outerHTML;\n                if (!item.nextElementSibling && !item.previousElementSibling) {\n                    item.parentElement.remove();\n                }\n                else {\n                    item.remove();\n                }\n            }\n            if (item.isSameNode(liElements_2[liElements_2.length - 1])) {\n                isMatch_1 = true;\n            }\n        });\n        liElements_2.reverse().forEach(function (item) {\n            liParentLiElement.insertAdjacentElement(\"afterend\", item);\n        });\n        if (afterHTML_1) {\n            liParentAfterElement.innerHTML = afterHTML_1;\n            liElements_2[0].insertAdjacentElement(\"beforeend\", liParentAfterElement);\n        }\n        if (vditor.currentMode === \"wysiwyg\") {\n            topListElement.outerHTML = vditor.lute.SpinVditorDOM(topListElement.outerHTML);\n        }\n        else {\n            topListElement.outerHTML = vditor.lute.SpinVditorIRDOM(topListElement.outerHTML);\n        }\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        var tempTopListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n        if (tempTopListElement) {\n            tempTopListElement.querySelectorAll(\".vditor-\".concat(vditor.currentMode, \"__preview[data-render='2']\"))\n                .forEach(function (item) {\n                processCodeRender(item, vditor);\n                if (vditor.currentMode === \"wysiwyg\") {\n                    item.previousElementSibling.setAttribute(\"style\", \"display:none\");\n                }\n            });\n        }\n        execAfterRender(vditor);\n        highlightToolbar(vditor);\n    }\n    else {\n        vditor[vditor.currentMode].element.focus();\n    }\n};\nvar setTableAlign = function (tableElement, type) {\n    var cell = getSelection().getRangeAt(0).startContainer.parentElement;\n    var columnCnt = tableElement.rows[0].cells.length;\n    var rowCnt = tableElement.rows.length;\n    var currentColumn = 0;\n    for (var i = 0; i < rowCnt; i++) {\n        for (var j = 0; j < columnCnt; j++) {\n            if (tableElement.rows[i].cells[j].isSameNode(cell)) {\n                currentColumn = j;\n                break;\n            }\n        }\n    }\n    for (var k = 0; k < rowCnt; k++) {\n        tableElement.rows[k].cells[currentColumn].setAttribute(\"align\", type);\n    }\n};\nvar isHrMD = function (text) {\n    // - _ *\n    var marker = text.trimRight().split(\"\\n\").pop();\n    if (marker === \"\") {\n        return false;\n    }\n    if (marker.replace(/ |-/g, \"\") === \"\"\n        || marker.replace(/ |_/g, \"\") === \"\"\n        || marker.replace(/ |\\*/g, \"\") === \"\") {\n        if (marker.replace(/ /g, \"\").length > 2) {\n            if (marker.indexOf(\"-\") > -1 && marker.trimLeft().indexOf(\" \") === -1\n                && text.trimRight().split(\"\\n\").length > 1) {\n                // 满足 heading\n                return false;\n            }\n            if (marker.indexOf(\"    \") === 0 || marker.indexOf(\"\\t\") === 0) {\n                // 代码块\n                return false;\n            }\n            return true;\n        }\n        return false;\n    }\n    return false;\n};\nvar isHeadingMD = function (text) {\n    // - =\n    var textArray = text.trimRight().split(\"\\n\");\n    text = textArray.pop();\n    if (text.indexOf(\"    \") === 0 || text.indexOf(\"\\t\") === 0) {\n        return false;\n    }\n    text = text.trimLeft();\n    if (text === \"\" || textArray.length === 0) {\n        return false;\n    }\n    if (text.replace(/-/g, \"\") === \"\"\n        || text.replace(/=/g, \"\") === \"\") {\n        return true;\n    }\n    return false;\n};\nvar execAfterRender = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (vditor.currentMode === \"wysiwyg\") {\n        afterRenderEvent(vditor, options);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        process_processAfterRender(vditor, options);\n    }\n    else if (vditor.currentMode === \"sv\") {\n        processAfterRender(vditor, options);\n    }\n};\nvar fixList = function (range, vditor, pElement, event) {\n    var _a;\n    var startContainer = range.startContainer;\n    var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"LI\");\n    if (liElement) {\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\" &&\n            // fix li 中有多个 P 时，在第一个 P 中换行会在下方生成新的 li\n            (!event.shiftKey && pElement && liElement.contains(pElement) && pElement.nextElementSibling)) {\n            if (liElement && !liElement.textContent.endsWith(\"\\n\")) {\n                // li 结尾需 \\n\n                liElement.insertAdjacentText(\"beforeend\", \"\\n\");\n            }\n            range.insertNode(document.createTextNode(\"\\n\\n\"));\n            range.collapse(false);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Backspace\" &&\n            !liElement.previousElementSibling && range.toString() === \"\" &&\n            (0,selection/* getSelectPosition */.im)(liElement, vditor[vditor.currentMode].element, range).start === 0) {\n            // 光标位于点和第一个字符中间时，无法删除 li 元素\n            if (liElement.nextElementSibling) {\n                liElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<p data-block=\\\"0\\\"><wbr>\".concat(liElement.innerHTML, \"</p>\"));\n                liElement.remove();\n            }\n            else {\n                liElement.parentElement.outerHTML = \"<p data-block=\\\"0\\\"><wbr>\".concat(liElement.innerHTML, \"</p>\");\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // 空列表删除后与上一级段落对齐\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Backspace\" &&\n            liElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" &&\n            range.toString() === \"\" && ((_a = liElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.tagName) === \"LI\") {\n            liElement.previousElementSibling.insertAdjacentText(\"beforeend\", \"\\n\\n\");\n            range.selectNodeContents(liElement.previousElementSibling);\n            range.collapse(false);\n            liElement.remove();\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Tab\") {\n            // 光标位于第一/零字符时，tab 用于列表的缩进\n            var isFirst = false;\n            if (range.startOffset === 0\n                && ((startContainer.nodeType === 3 && !startContainer.previousSibling)\n                    || (startContainer.nodeType !== 3 && startContainer.nodeName === \"LI\"))) {\n                // 有序/无序列表\n                isFirst = true;\n            }\n            else if (liElement.classList.contains(\"vditor-task\") && range.startOffset === 1\n                && startContainer.previousSibling.nodeType !== 3\n                && startContainer.previousSibling.tagName === \"INPUT\") {\n                // 任务列表\n                isFirst = true;\n            }\n            if (isFirst || range.toString() !== \"\") {\n                if (event.shiftKey) {\n                    listOutdent(vditor, liElement, range, liElement.parentElement);\n                }\n                else {\n                    listIndent(vditor, liElement, range);\n                }\n                event.preventDefault();\n                return true;\n            }\n        }\n    }\n    return false;\n};\n// tab 处理: block code render, table, 列表第一个字符中的 tab 处理单独写在上面\nvar fixTab = function (vditor, range, event) {\n    if (vditor.options.tab && event.key === \"Tab\") {\n        if (event.shiftKey) {\n            // TODO shift+tab\n        }\n        else {\n            if (range.toString() === \"\") {\n                range.insertNode(document.createTextNode(vditor.options.tab));\n                range.collapse(false);\n            }\n            else {\n                range.extractContents();\n                range.insertNode(document.createTextNode(vditor.options.tab));\n                range.collapse(false);\n            }\n        }\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        execAfterRender(vditor);\n        event.preventDefault();\n        return true;\n    }\n};\nvar fixMarkdown = function (event, vditor, pElement, range) {\n    if (!pElement) {\n        return;\n    }\n    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\") {\n        var pText = String.raw(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\", \"\"], [\"\", \"\"])), pElement.textContent).replace(/\\\\\\|/g, \"\").trim();\n        var pTextList = pText.split(\"|\");\n        if (pText.startsWith(\"|\") && pText.endsWith(\"|\") && pTextList.length > 3) {\n            // table 自动完成\n            var tableHeaderMD = pTextList.map(function () { return \"---\"; }).join(\"|\");\n            tableHeaderMD =\n                pElement.textContent + \"\\n\" + tableHeaderMD.substring(3, tableHeaderMD.length - 3) + \"\\n|<wbr>\";\n            pElement.outerHTML = vditor.lute.SpinVditorDOM(tableHeaderMD);\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // hr 渲染\n        if (isHrMD(pElement.innerHTML) && pElement.previousElementSibling) {\n            // 软换行后 hr 前有内容\n            var pInnerHTML = \"\";\n            var innerHTMLList = pElement.innerHTML.trimRight().split(\"\\n\");\n            if (innerHTMLList.length > 1) {\n                innerHTMLList.pop();\n                pInnerHTML = \"<p data-block=\\\"0\\\">\".concat(innerHTMLList.join(\"\\n\"), \"</p>\");\n            }\n            pElement.insertAdjacentHTML(\"afterend\", \"\".concat(pInnerHTML, \"<hr data-block=\\\"0\\\"><p data-block=\\\"0\\\"><wbr>\\n</p>\"));\n            pElement.remove();\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (isHeadingMD(pElement.innerHTML)) {\n            // heading 渲染\n            if (vditor.currentMode === \"wysiwyg\") {\n                pElement.outerHTML = vditor.lute.SpinVditorDOM(pElement.innerHTML + '<p data-block=\"0\"><wbr>\\n</p>');\n            }\n            else {\n                pElement.outerHTML = vditor.lute.SpinVditorIRDOM(pElement.innerHTML + '<p data-block=\"0\"><wbr>\\n</p>');\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // 软换行会被切割 https://github.com/Vanessa219/vditor/issues/220\n    if (range.collapsed && pElement.previousElementSibling && event.key === \"Backspace\" &&\n        !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey &&\n        pElement.textContent.trimRight().split(\"\\n\").length > 1 &&\n        (0,selection/* getSelectPosition */.im)(pElement, vditor[vditor.currentMode].element, range).start === 0) {\n        var lastElement = (0,hasClosest/* getLastNode */.DX)(pElement.previousElementSibling);\n        if (!lastElement.textContent.endsWith(\"\\n\")) {\n            lastElement.textContent = lastElement.textContent + \"\\n\";\n        }\n        lastElement.parentElement.insertAdjacentHTML(\"beforeend\", \"<wbr>\".concat(pElement.innerHTML));\n        pElement.remove();\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        return false;\n    }\n    return false;\n};\nvar insertRow = function (vditor, range, cellElement) {\n    var rowHTML = \"\";\n    for (var m = 0; m < cellElement.parentElement.childElementCount; m++) {\n        rowHTML += \"<td align=\\\"\".concat(cellElement.parentElement.children[m].getAttribute(\"align\"), \"\\\"> </td>\");\n    }\n    if (cellElement.tagName === \"TH\") {\n        cellElement.parentElement.parentElement.insertAdjacentHTML(\"afterend\", \"<tbody><tr>\".concat(rowHTML, \"</tr></tbody>\"));\n    }\n    else {\n        cellElement.parentElement.insertAdjacentHTML(\"afterend\", \"<tr>\".concat(rowHTML, \"</tr>\"));\n    }\n    execAfterRender(vditor);\n};\nvar insertRowAbove = function (vditor, range, cellElement) {\n    var rowHTML = \"\";\n    for (var m = 0; m < cellElement.parentElement.childElementCount; m++) {\n        if (cellElement.tagName === \"TH\") {\n            rowHTML += \"<th align=\\\"\".concat(cellElement.parentElement.children[m].getAttribute(\"align\"), \"\\\"> </th>\");\n        }\n        else {\n            rowHTML += \"<td align=\\\"\".concat(cellElement.parentElement.children[m].getAttribute(\"align\"), \"\\\"> </td>\");\n        }\n    }\n    if (cellElement.tagName === \"TH\") {\n        cellElement.parentElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<thead><tr>\".concat(rowHTML, \"</tr></thead>\"));\n        range.insertNode(document.createElement(\"wbr\"));\n        var theadHTML = cellElement.parentElement.innerHTML.replace(/<th>/g, \"<td>\").replace(/<\\/th>/g, \"</td>\");\n        cellElement.parentElement.parentElement.nextElementSibling.insertAdjacentHTML(\"afterbegin\", theadHTML);\n        cellElement.parentElement.parentElement.remove();\n        (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n    }\n    else {\n        cellElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<tr>\".concat(rowHTML, \"</tr>\"));\n    }\n    execAfterRender(vditor);\n};\nvar insertColumn = function (vditor, tableElement, cellElement, type) {\n    if (type === void 0) { type = \"afterend\"; }\n    var index = 0;\n    var previousElement = cellElement.previousElementSibling;\n    while (previousElement) {\n        index++;\n        previousElement = previousElement.previousElementSibling;\n    }\n    for (var i = 0; i < tableElement.rows.length; i++) {\n        if (i === 0) {\n            tableElement.rows[i].cells[index].insertAdjacentHTML(type, \"<th> </th>\");\n        }\n        else {\n            tableElement.rows[i].cells[index].insertAdjacentHTML(type, \"<td> </td>\");\n        }\n    }\n    execAfterRender(vditor);\n};\nvar deleteRow = function (vditor, range, cellElement) {\n    if (cellElement.tagName === \"TD\") {\n        var tbodyElement = cellElement.parentElement.parentElement;\n        if (cellElement.parentElement.previousElementSibling) {\n            range.selectNodeContents(cellElement.parentElement.previousElementSibling.lastElementChild);\n        }\n        else {\n            range.selectNodeContents(tbodyElement.previousElementSibling.lastElementChild.lastElementChild);\n        }\n        if (tbodyElement.childElementCount === 1) {\n            tbodyElement.remove();\n        }\n        else {\n            cellElement.parentElement.remove();\n        }\n        range.collapse(false);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        execAfterRender(vditor);\n    }\n};\nvar deleteColumn = function (vditor, range, tableElement, cellElement) {\n    var index = 0;\n    var previousElement = cellElement.previousElementSibling;\n    while (previousElement) {\n        index++;\n        previousElement = previousElement.previousElementSibling;\n    }\n    if (cellElement.previousElementSibling || cellElement.nextElementSibling) {\n        range.selectNodeContents(cellElement.previousElementSibling || cellElement.nextElementSibling);\n        range.collapse(true);\n    }\n    for (var i = 0; i < tableElement.rows.length; i++) {\n        var cells = tableElement.rows[i].cells;\n        if (cells.length === 1) {\n            tableElement.remove();\n            highlightToolbar(vditor);\n            break;\n        }\n        cells[index].remove();\n    }\n    (0,selection/* setSelectionFocus */.Hc)(range);\n    execAfterRender(vditor);\n};\nvar fixTable = function (vditor, event, range) {\n    var startContainer = range.startContainer;\n    var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n        (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n    if (cellElement) {\n        // 换行或软换行：在 cell 中添加 br\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\") {\n            if (!cellElement.lastElementChild ||\n                (cellElement.lastElementChild && (!cellElement.lastElementChild.isSameNode(cellElement.lastChild) ||\n                    cellElement.lastElementChild.tagName !== \"BR\"))) {\n                cellElement.insertAdjacentHTML(\"beforeend\", \"<br>\");\n            }\n            var brElement = document.createElement(\"br\");\n            range.insertNode(brElement);\n            range.setStartAfter(brElement);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // tab：光标移向下一个 cell\n        if (event.key === \"Tab\") {\n            if (event.shiftKey) {\n                // shift + tab 光标移动到前一个 cell\n                goPreviousCell(cellElement, range);\n                event.preventDefault();\n                return true;\n            }\n            var nextElement = cellElement.nextElementSibling;\n            if (!nextElement) {\n                if (cellElement.parentElement.nextElementSibling) {\n                    nextElement = cellElement.parentElement.nextElementSibling.firstElementChild;\n                }\n                else if (cellElement.parentElement.parentElement.tagName === \"THEAD\" &&\n                    cellElement.parentElement.parentElement.nextElementSibling) {\n                    nextElement =\n                        cellElement.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild;\n                }\n                else {\n                    nextElement = null;\n                }\n            }\n            if (nextElement) {\n                range.selectNodeContents(nextElement);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            event.preventDefault();\n            return true;\n        }\n        var tableElement = cellElement.parentElement.parentElement.parentElement;\n        if (event.key === \"ArrowUp\") {\n            event.preventDefault();\n            if (cellElement.tagName === \"TH\") {\n                if (tableElement.previousElementSibling) {\n                    range.selectNodeContents(tableElement.previousElementSibling);\n                    range.collapse(false);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                }\n                else {\n                    insertEmptyBlock(vditor, \"beforebegin\");\n                }\n                return true;\n            }\n            var m = 0;\n            var trElement = cellElement.parentElement;\n            for (; m < trElement.cells.length; m++) {\n                if (trElement.cells[m].isSameNode(cellElement)) {\n                    break;\n                }\n            }\n            var previousElement = trElement.previousElementSibling;\n            if (!previousElement) {\n                previousElement = trElement.parentElement.previousElementSibling.firstChild;\n            }\n            range.selectNodeContents(previousElement.cells[m]);\n            range.collapse(false);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            return true;\n        }\n        if (event.key === \"ArrowDown\") {\n            event.preventDefault();\n            var trElement = cellElement.parentElement;\n            if (!trElement.nextElementSibling && cellElement.tagName === \"TD\") {\n                if (tableElement.nextElementSibling) {\n                    range.selectNodeContents(tableElement.nextElementSibling);\n                    range.collapse(true);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                }\n                else {\n                    insertEmptyBlock(vditor, \"afterend\");\n                }\n                return true;\n            }\n            var m = 0;\n            for (; m < trElement.cells.length; m++) {\n                if (trElement.cells[m].isSameNode(cellElement)) {\n                    break;\n                }\n            }\n            var nextElement = trElement.nextElementSibling;\n            if (!nextElement) {\n                nextElement = trElement.parentElement.nextElementSibling.firstChild;\n            }\n            range.selectNodeContents(nextElement.cells[m]);\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            return true;\n        }\n        // focus row input, only wysiwyg\n        if (vditor.currentMode === \"wysiwyg\" &&\n            !(0,compatibility/* isCtrl */.yl)(event) && event.key === \"Enter\" && !event.shiftKey && event.altKey) {\n            var inputElement = vditor.wysiwyg.popover.querySelector(\".vditor-input\");\n            inputElement.focus();\n            inputElement.select();\n            event.preventDefault();\n            return true;\n        }\n        // Backspace：光标移动到前一个 cell\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Backspace\"\n            && range.startOffset === 0 && range.toString() === \"\") {\n            var previousCellElement = goPreviousCell(cellElement, range, false);\n            if (!previousCellElement && tableElement) {\n                if (tableElement.textContent.trim() === \"\") {\n                    tableElement.outerHTML = \"<p data-block=\\\"0\\\"><wbr>\\n</p>\";\n                    (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n                }\n                else {\n                    range.setStartBefore(tableElement);\n                    range.collapse(true);\n                }\n                execAfterRender(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        // 上方新添加一行\n        if (matchHotKey(\"⇧⌘F\", event)) {\n            insertRowAbove(vditor, range, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 下方新添加一行 https://github.com/Vanessa219/vditor/issues/46\n        if (matchHotKey(\"⌘=\", event)) {\n            insertRow(vditor, range, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 左方新添加一列\n        if (matchHotKey(\"⇧⌘G\", event)) {\n            insertColumn(vditor, tableElement, cellElement, \"beforebegin\");\n            event.preventDefault();\n            return true;\n        }\n        // 后方新添加一列\n        if (matchHotKey(\"⇧⌘=\", event)) {\n            insertColumn(vditor, tableElement, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 删除当前行\n        if (matchHotKey(\"⌘-\", event)) {\n            deleteRow(vditor, range, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 删除当前列\n        if (matchHotKey(\"⇧⌘-\", event)) {\n            deleteColumn(vditor, range, tableElement, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 剧左\n        if (matchHotKey(\"⇧⌘L\", event)) {\n            if (vditor.currentMode === \"ir\") {\n                setTableAlign(tableElement, \"left\");\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"left\"]');\n                if (itemElement) {\n                    itemElement.click();\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        }\n        // 剧中\n        if (matchHotKey(\"⇧⌘C\", event)) {\n            if (vditor.currentMode === \"ir\") {\n                setTableAlign(tableElement, \"center\");\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"center\"]');\n                if (itemElement) {\n                    itemElement.click();\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        }\n        // 剧右\n        if (matchHotKey(\"⇧⌘R\", event)) {\n            if (vditor.currentMode === \"ir\") {\n                setTableAlign(tableElement, \"right\");\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"right\"]');\n                if (itemElement) {\n                    itemElement.click();\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        }\n    }\n    return false;\n};\nvar fixCodeBlock = function (vditor, event, codeRenderElement, range) {\n    // 行级代码块中 command + a，近对当前代码块进行全选\n    if (codeRenderElement.tagName === \"PRE\" && matchHotKey(\"⌘A\", event)) {\n        range.selectNodeContents(codeRenderElement.firstElementChild);\n        event.preventDefault();\n        return true;\n    }\n    // tab\n    // TODO shift + tab, shift and 选中文字\n    if (vditor.options.tab && event.key === \"Tab\" && !event.shiftKey && range.toString() === \"\") {\n        range.insertNode(document.createTextNode(vditor.options.tab));\n        range.collapse(false);\n        execAfterRender(vditor);\n        event.preventDefault();\n        return true;\n    }\n    // Backspace: 光标位于第零个字符，仅删除代码块标签\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey) {\n        var codePosition = (0,selection/* getSelectPosition */.im)(codeRenderElement, vditor[vditor.currentMode].element, range);\n        if ((codePosition.start === 0 ||\n            (codePosition.start === 1 && codeRenderElement.innerText === \"\\n\")) // 空代码块，光标在 \\n 后\n            && range.toString() === \"\") {\n            codeRenderElement.parentElement.outerHTML =\n                \"<p data-block=\\\"0\\\"><wbr>\".concat(codeRenderElement.firstElementChild.innerHTML, \"</p>\");\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // 换行\n    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\") {\n        if (!codeRenderElement.firstElementChild.textContent.endsWith(\"\\n\")) {\n            codeRenderElement.firstElementChild.insertAdjacentText(\"beforeend\", \"\\n\");\n        }\n        range.extractContents();\n        range.insertNode(document.createTextNode(\"\\n\"));\n        range.collapse(false);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        if (!(0,compatibility/* isFirefox */.vU)()) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                input_input(vditor, range);\n            }\n            else {\n                input(vditor, range);\n            }\n        }\n        scrollCenter(vditor);\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar fixBlockquote = function (vditor, range, event, pElement) {\n    var startContainer = range.startContainer;\n    var blockquoteElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"BLOCKQUOTE\");\n    if (blockquoteElement && range.toString() === \"\") {\n        if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey &&\n            (0,selection/* getSelectPosition */.im)(blockquoteElement, vditor[vditor.currentMode].element, range).start === 0) {\n            // Backspace: 光标位于引用中的第零个字符，仅删除引用标签\n            range.insertNode(document.createElement(\"wbr\"));\n            blockquoteElement.outerHTML = blockquoteElement.innerHTML;\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (pElement && event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey\n            && pElement.parentElement.tagName === \"BLOCKQUOTE\") {\n            // Enter: 空行回车应逐层跳出\n            var isEmpty = false;\n            if (pElement.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\\n\" ||\n                pElement.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                // 空 P\n                isEmpty = true;\n                pElement.remove();\n            }\n            else if (pElement.innerHTML.endsWith(\"\\n\\n\") &&\n                (0,selection/* getSelectPosition */.im)(pElement, vditor[vditor.currentMode].element, range).start ===\n                    pElement.textContent.length - 1) {\n                // 软换行\n                pElement.innerHTML = pElement.innerHTML.substr(0, pElement.innerHTML.length - 2);\n                isEmpty = true;\n            }\n            if (isEmpty) {\n                // 需添加零宽字符，否则的话无法记录 undo\n                blockquoteElement.insertAdjacentHTML(\"afterend\", \"<p data-block=\\\"0\\\">\".concat(constants/* Constants.ZWSP */.g.ZWSP, \"<wbr>\\n</p>\"));\n                (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n        }\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n        if (vditor.currentMode === \"wysiwyg\" && blockElement && matchHotKey(\"⇧⌘;\", event)) {\n            // 插入 blockquote\n            range.insertNode(document.createElement(\"wbr\"));\n            blockElement.outerHTML = \"<blockquote data-block=\\\"0\\\">\".concat(blockElement.outerHTML, \"</blockquote>\");\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            afterRenderEvent(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (insertAfterBlock(vditor, event, range, blockquoteElement, blockquoteElement)) {\n            return true;\n        }\n        if (insertBeforeBlock(vditor, event, range, blockquoteElement, blockquoteElement)) {\n            return true;\n        }\n    }\n    return false;\n};\nvar fixTask = function (vditor, range, event) {\n    var startContainer = range.startContainer;\n    var taskItemElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"LI\");\n    if (taskItemElement && taskItemElement.classList.contains(\"vditor-task\")) {\n        if (matchHotKey(\"⇧⌘J\", event)) {\n            // ctrl + shift: toggle checked\n            var inputElement = taskItemElement.firstElementChild;\n            if (inputElement.checked) {\n                inputElement.removeAttribute(\"checked\");\n            }\n            else {\n                inputElement.setAttribute(\"checked\", \"checked\");\n            }\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // Backspace: 在选择框前进行删除\n        if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && range.toString() === \"\"\n            && range.startOffset === 1\n            && ((startContainer.nodeType === 3 && startContainer.previousSibling &&\n                startContainer.previousSibling.tagName === \"INPUT\")\n                || startContainer.nodeType !== 3)) {\n            var previousElement = taskItemElement.previousElementSibling;\n            taskItemElement.querySelector(\"input\").remove();\n            if (previousElement) {\n                var lastNode = (0,hasClosest/* getLastNode */.DX)(previousElement);\n                lastNode.parentElement.insertAdjacentHTML(\"beforeend\", \"<wbr>\" + taskItemElement.innerHTML.trim());\n                taskItemElement.remove();\n            }\n            else {\n                taskItemElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<p data-block=\\\"0\\\"><wbr>\".concat(taskItemElement.innerHTML.trim() || \"\\n\", \"</p>\"));\n                if (taskItemElement.nextElementSibling) {\n                    taskItemElement.remove();\n                }\n                else {\n                    taskItemElement.parentElement.remove();\n                }\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey) {\n            if (taskItemElement.textContent.trim() === \"\") {\n                // 当前任务列表无文字\n                if ((0,hasClosest/* hasClosestByClassName */.fb)(taskItemElement.parentElement, \"vditor-task\")) {\n                    // 为子元素时，需进行反向缩进\n                    var topListElement = (0,hasClosest/* getTopList */.O9)(startContainer);\n                    if (topListElement) {\n                        listOutdent(vditor, taskItemElement, range, topListElement);\n                    }\n                }\n                else {\n                    // 仅有一级任务列表\n                    if (taskItemElement.nextElementSibling) {\n                        // 任务列表下方还有元素，需要使用用段落隔断\n                        var afterHTML_2 = \"\";\n                        var beforeHTML_1 = \"\";\n                        var isAfter_1 = false;\n                        Array.from(taskItemElement.parentElement.children).forEach(function (taskItem) {\n                            if (taskItemElement.isSameNode(taskItem)) {\n                                isAfter_1 = true;\n                            }\n                            else {\n                                if (isAfter_1) {\n                                    afterHTML_2 += taskItem.outerHTML;\n                                }\n                                else {\n                                    beforeHTML_1 += taskItem.outerHTML;\n                                }\n                            }\n                        });\n                        var parentTagName = taskItemElement.parentElement.tagName;\n                        var dataMarker = taskItemElement.parentElement.tagName === \"OL\" ? \"\" : \" data-marker=\\\"\".concat(taskItemElement.parentElement.getAttribute(\"data-marker\"), \"\\\"\");\n                        var startAttribute = \"\";\n                        if (beforeHTML_1) {\n                            startAttribute = taskItemElement.parentElement.tagName === \"UL\" ? \"\" : \" start=\\\"1\\\"\";\n                            beforeHTML_1 = \"<\".concat(parentTagName, \" data-tight=\\\"true\\\"\").concat(dataMarker, \" data-block=\\\"0\\\">\").concat(beforeHTML_1, \"</\").concat(parentTagName, \">\");\n                        }\n                        // <p data-block=\"0\">\\n<wbr></p> => <p data-block=\"0\"><wbr>\\n</p>\n                        // https://github.com/Vanessa219/vditor/issues/430\n                        taskItemElement.parentElement.outerHTML = \"\".concat(beforeHTML_1, \"<p data-block=\\\"0\\\"><wbr>\\n</p><\").concat(parentTagName, \"\\n data-tight=\\\"true\\\"\").concat(dataMarker, \" data-block=\\\"0\\\"\").concat(startAttribute, \">\").concat(afterHTML_2, \"</\").concat(parentTagName, \">\");\n                    }\n                    else {\n                        // 任务列表下方无任务列表元素\n                        taskItemElement.parentElement.insertAdjacentHTML(\"afterend\", \"<p data-block=\\\"0\\\"><wbr>\\n</p>\");\n                        if (taskItemElement.parentElement.querySelectorAll(\"li\").length === 1) {\n                            // 任务列表仅有一项时，使用 p 元素替换\n                            taskItemElement.parentElement.remove();\n                        }\n                        else {\n                            // 任务列表有多项时，当前任务列表位于最后一项，移除该任务列表\n                            taskItemElement.remove();\n                        }\n                    }\n                }\n            }\n            else if (startContainer.nodeType !== 3 && range.startOffset === 0 &&\n                startContainer.firstChild.tagName === \"INPUT\") {\n                // 光标位于 input 之前\n                range.setStart(startContainer.childNodes[1], 1);\n            }\n            else {\n                // 当前任务列表有文字，光标后的文字需添加到新任务列表中\n                range.setEndAfter(taskItemElement.lastChild);\n                taskItemElement.insertAdjacentHTML(\"afterend\", \"<li class=\\\"vditor-task\\\" data-marker=\\\"\".concat(taskItemElement.getAttribute(\"data-marker\"), \"\\\"><input type=\\\"checkbox\\\"> <wbr></li>\"));\n                document.querySelector(\"wbr\").after(range.extractContents());\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    return false;\n};\nvar fixDelete = function (vditor, range, event, pElement) {\n    if (range.startContainer.nodeType !== 3) {\n        // 光标位于 hr 前，hr 前有内容\n        var rangeElement = range.startContainer.children[range.startOffset];\n        if (rangeElement && rangeElement.tagName === \"HR\") {\n            range.selectNodeContents(rangeElement.previousElementSibling);\n            range.collapse(false);\n            event.preventDefault();\n            return true;\n        }\n    }\n    if (pElement) {\n        var previousElement = pElement.previousElementSibling;\n        if (previousElement && (0,selection/* getSelectPosition */.im)(pElement, vditor[vditor.currentMode].element, range).start === 0 &&\n            (((0,compatibility/* isFirefox */.vU)() && previousElement.tagName === \"HR\") || previousElement.tagName === \"TABLE\")) {\n            if (previousElement.tagName === \"TABLE\") {\n                // table 后删除 https://github.com/Vanessa219/vditor/issues/243\n                var lastCellElement = previousElement.lastElementChild.lastElementChild.lastElementChild;\n                lastCellElement.innerHTML =\n                    lastCellElement.innerHTML.trimLeft() + \"<wbr>\" + pElement.textContent.trim();\n                pElement.remove();\n            }\n            else {\n                // 光标位于 hr 后进行删除\n                previousElement.remove();\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    return false;\n};\nvar fixHR = function (range) {\n    if ((0,compatibility/* isFirefox */.vU)() && range.startContainer.nodeType !== 3 &&\n        range.startContainer.tagName === \"HR\") {\n        range.setStartBefore(range.startContainer);\n    }\n};\n// firefox https://github.com/Vanessa219/vditor/issues/407\nvar fixFirefoxArrowUpTable = function (event, blockElement, range) {\n    var _a, _b;\n    if (!(0,compatibility/* isFirefox */.vU)()) {\n        return false;\n    }\n    if (event.key === \"ArrowUp\" && blockElement && ((_a = blockElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.tagName) === \"TABLE\") {\n        var tableElement = blockElement.previousElementSibling;\n        range.selectNodeContents(tableElement.rows[tableElement.rows.length - 1].lastElementChild);\n        range.collapse(false);\n        event.preventDefault();\n        return true;\n    }\n    if (event.key === \"ArrowDown\" && blockElement && ((_b = blockElement.nextElementSibling) === null || _b === void 0 ? void 0 : _b.tagName) === \"TABLE\") {\n        range.selectNodeContents(blockElement.nextElementSibling.rows[0].cells[0]);\n        range.collapse(true);\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar paste = function (vditor, event, callback) { return fixBrowserBehavior_awaiter(void 0, void 0, void 0, function () {\n    var textHTML, textPlain, files, renderers, renderLinkDest, doc, height, code, codeElement, position, tempElement, fileReader_1, file_1, range, blockElement, range;\n    var _a;\n    return fixBrowserBehavior_generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                if (vditor[vditor.currentMode].element.getAttribute(\"contenteditable\") !== \"true\") {\n                    return [2 /*return*/];\n                }\n                event.stopPropagation();\n                event.preventDefault();\n                if (\"clipboardData\" in event) {\n                    textHTML = event.clipboardData.getData(\"text/html\");\n                    textPlain = event.clipboardData.getData(\"text/plain\");\n                    files = event.clipboardData.files;\n                }\n                else {\n                    textHTML = event.dataTransfer.getData(\"text/html\");\n                    textPlain = event.dataTransfer.getData(\"text/plain\");\n                    if (event.dataTransfer.types.includes(\"Files\")) {\n                        files = event.dataTransfer.items;\n                    }\n                }\n                renderers = {};\n                renderLinkDest = function (node, entering) {\n                    if (!entering) {\n                        return [\"\", Lute.WalkContinue];\n                    }\n                    if (vditor.options.upload.renderLinkDest) {\n                        return vditor.options.upload.renderLinkDest(vditor, node, entering);\n                    }\n                    var src = node.TokensStr();\n                    if (node.__internal_object__.Parent.Type === 34 && src && src.indexOf(\"file://\") === -1 &&\n                        vditor.options.upload.linkToImgUrl) {\n                        var xhr_1 = new XMLHttpRequest();\n                        xhr_1.open(\"POST\", vditor.options.upload.linkToImgUrl);\n                        if (vditor.options.upload.token) {\n                            xhr_1.setRequestHeader(\"X-Upload-Token\", vditor.options.upload.token);\n                        }\n                        if (vditor.options.upload.withCredentials) {\n                            xhr_1.withCredentials = true;\n                        }\n                        setHeaders(vditor, xhr_1);\n                        xhr_1.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\");\n                        xhr_1.onreadystatechange = function () {\n                            if (xhr_1.readyState === XMLHttpRequest.DONE) {\n                                if (xhr_1.status === 200) {\n                                    var responseText = xhr_1.responseText;\n                                    if (vditor.options.upload.linkToImgFormat) {\n                                        responseText = vditor.options.upload.linkToImgFormat(xhr_1.responseText);\n                                    }\n                                    var responseJSON_1 = JSON.parse(responseText);\n                                    if (responseJSON_1.code !== 0) {\n                                        vditor.tip.show(responseJSON_1.msg);\n                                        return;\n                                    }\n                                    var original_1 = responseJSON_1.data.originalURL;\n                                    if (vditor.currentMode === \"sv\") {\n                                        vditor.sv.element.querySelectorAll(\".vditor-sv__marker--link\")\n                                            .forEach(function (item) {\n                                            if (item.textContent === original_1) {\n                                                item.textContent = responseJSON_1.data.url;\n                                            }\n                                        });\n                                    }\n                                    else {\n                                        var imgElement = vditor[vditor.currentMode].element.querySelector(\"img[src=\\\"\".concat(original_1, \"\\\"]\"));\n                                        imgElement.src = responseJSON_1.data.url;\n                                        if (vditor.currentMode === \"ir\") {\n                                            imgElement.previousElementSibling.previousElementSibling.innerHTML =\n                                                responseJSON_1.data.url;\n                                        }\n                                    }\n                                    execAfterRender(vditor);\n                                }\n                                else {\n                                    vditor.tip.show(xhr_1.responseText);\n                                }\n                                if (vditor.options.upload.linkToImgCallback) {\n                                    vditor.options.upload.linkToImgCallback(xhr_1.responseText);\n                                }\n                            }\n                        };\n                        xhr_1.send(JSON.stringify({ url: src }));\n                    }\n                    if (vditor.currentMode === \"ir\") {\n                        return [\"<span class=\\\"vditor-ir__marker vditor-ir__marker--link\\\">\".concat(Lute.EscapeHTMLStr(src), \"</span>\"), Lute.WalkContinue];\n                    }\n                    else if (vditor.currentMode === \"wysiwyg\") {\n                        return [\"\", Lute.WalkContinue];\n                    }\n                    else {\n                        return [\"<span class=\\\"vditor-sv__marker--link\\\">\".concat(Lute.EscapeHTMLStr(src), \"</span>\"), Lute.WalkContinue];\n                    }\n                };\n                // 浏览器地址栏拷贝处理\n                if (textHTML.replace(/&amp;/g, \"&\").replace(/<(|\\/)(html|body|meta)[^>]*?>/ig, \"\").trim() ===\n                    \"<a href=\\\"\".concat(textPlain, \"\\\">\").concat(textPlain, \"</a>\") ||\n                    textHTML.replace(/&amp;/g, \"&\").replace(/<(|\\/)(html|body|meta)[^>]*?>/ig, \"\").trim() ===\n                        \"<!--StartFragment--><a href=\\\"\".concat(textPlain, \"\\\">\").concat(textPlain, \"</a><!--EndFragment-->\")) {\n                    textHTML = \"\";\n                }\n                doc = new DOMParser().parseFromString(textHTML, \"text/html\");\n                if (doc.body) {\n                    textHTML = doc.body.innerHTML;\n                }\n                textHTML = Lute.Sanitize(textHTML);\n                vditor.wysiwyg.getComments(vditor);\n                height = vditor[vditor.currentMode].element.scrollHeight;\n                code = processPasteCode(textHTML, textPlain, vditor.currentMode);\n                codeElement = vditor.currentMode === \"sv\" ?\n                    (0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"code-block\") :\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"CODE\");\n                if (!codeElement) return [3 /*break*/, 1];\n                // 粘贴在代码位置\n                if (vditor.currentMode === \"sv\") {\n                    document.execCommand(\"insertHTML\", false, textPlain.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\"));\n                }\n                else {\n                    position = (0,selection/* getSelectPosition */.im)(event.target, vditor[vditor.currentMode].element);\n                    if (codeElement.parentElement.tagName !== \"PRE\") {\n                        // https://github.com/Vanessa219/vditor/issues/463\n                        textPlain += constants/* Constants.ZWSP */.g.ZWSP;\n                    }\n                    codeElement.textContent = codeElement.textContent.substring(0, position.start)\n                        + textPlain + codeElement.textContent.substring(position.end);\n                    (0,selection/* setSelectionByPosition */.$j)(position.start + textPlain.length, position.start + textPlain.length, codeElement.parentElement);\n                    if ((_a = codeElement.parentElement) === null || _a === void 0 ? void 0 : _a.nextElementSibling.classList.contains(\"vditor-\".concat(vditor.currentMode, \"__preview\"))) {\n                        codeElement.parentElement.nextElementSibling.innerHTML = codeElement.outerHTML;\n                        processCodeRender(codeElement.parentElement.nextElementSibling, vditor);\n                    }\n                }\n                return [3 /*break*/, 8];\n            case 1:\n                if (!code) return [3 /*break*/, 2];\n                callback.pasteCode(code);\n                return [3 /*break*/, 8];\n            case 2:\n                if (!(textHTML.trim() !== \"\")) return [3 /*break*/, 3];\n                tempElement = document.createElement(\"div\");\n                tempElement.innerHTML = textHTML;\n                tempElement.querySelectorAll(\"[style]\").forEach(function (e) {\n                    e.removeAttribute(\"style\");\n                });\n                tempElement.querySelectorAll(\".vditor-copy\").forEach(function (e) {\n                    e.remove();\n                });\n                if (vditor.currentMode === \"ir\") {\n                    renderers.HTML2VditorIRDOM = { renderLinkDest: renderLinkDest };\n                    vditor.lute.SetJSRenderers({ renderers: renderers });\n                    (0,selection/* insertHTML */.oC)(vditor.lute.HTML2VditorIRDOM(tempElement.innerHTML), vditor);\n                }\n                else if (vditor.currentMode === \"wysiwyg\") {\n                    renderers.HTML2VditorDOM = { renderLinkDest: renderLinkDest };\n                    vditor.lute.SetJSRenderers({ renderers: renderers });\n                    (0,selection/* insertHTML */.oC)(vditor.lute.HTML2VditorDOM(tempElement.innerHTML), vditor);\n                }\n                else {\n                    renderers.Md2VditorSVDOM = { renderLinkDest: renderLinkDest };\n                    vditor.lute.SetJSRenderers({ renderers: renderers });\n                    processPaste(vditor, vditor.lute.HTML2Md(tempElement.innerHTML).trimRight());\n                }\n                vditor.outline.render(vditor);\n                return [3 /*break*/, 8];\n            case 3:\n                if (!(files.length > 0)) return [3 /*break*/, 7];\n                if (!(vditor.options.upload.url || vditor.options.upload.handler)) return [3 /*break*/, 5];\n                return [4 /*yield*/, uploadFiles(vditor, files)];\n            case 4:\n                _b.sent();\n                return [3 /*break*/, 6];\n            case 5:\n                fileReader_1 = new FileReader();\n                if (\"clipboardData\" in event) {\n                    files = event.clipboardData.files;\n                    file_1 = files[0];\n                }\n                else if (event.dataTransfer.types.includes(\"Files\")) {\n                    files = event.dataTransfer.items;\n                    file_1 = files[0].getAsFile();\n                }\n                if (file_1 && file_1.type.startsWith(\"image\")) {\n                    fileReader_1.readAsDataURL(file_1);\n                    fileReader_1.onload = function () {\n                        var imgHTML = '';\n                        if (vditor.currentMode === \"wysiwyg\") {\n                            imgHTML += \"<img alt=\\\"\".concat(file_1.name, \"\\\" src=\\\"\").concat(fileReader_1.result.toString(), \"\\\">\\n\");\n                        }\n                        else {\n                            imgHTML += \"![\".concat(file_1.name, \"](\").concat(fileReader_1.result.toString(), \")\\n\");\n                        }\n                        document.execCommand(\"insertHTML\", false, imgHTML);\n                    };\n                }\n                _b.label = 6;\n            case 6: return [3 /*break*/, 8];\n            case 7:\n                if (textPlain.trim() !== \"\" && files.length === 0) {\n                    range = (0,selection/* getEditorRange */.zh)(vditor);\n                    if (range.toString() !== \"\" && vditor.lute.IsValidLinkDest(textPlain)) {\n                        textPlain = \"[\".concat(range.toString(), \"](\").concat(textPlain, \")\");\n                    }\n                    if (vditor.currentMode === \"ir\") {\n                        renderers.Md2VditorIRDOM = { renderLinkDest: renderLinkDest };\n                        vditor.lute.SetJSRenderers({ renderers: renderers });\n                        (0,selection/* insertHTML */.oC)(vditor.lute.Md2VditorIRDOM(textPlain), vditor);\n                    }\n                    else if (vditor.currentMode === \"wysiwyg\") {\n                        renderers.Md2VditorDOM = { renderLinkDest: renderLinkDest };\n                        vditor.lute.SetJSRenderers({ renderers: renderers });\n                        (0,selection/* insertHTML */.oC)(vditor.lute.Md2VditorDOM(textPlain), vditor);\n                    }\n                    else {\n                        renderers.Md2VditorSVDOM = { renderLinkDest: renderLinkDest };\n                        vditor.lute.SetJSRenderers({ renderers: renderers });\n                        processPaste(vditor, textPlain);\n                    }\n                    vditor.outline.render(vditor);\n                }\n                _b.label = 8;\n            case 8:\n                if (vditor.currentMode !== \"sv\") {\n                    blockElement = (0,hasClosest/* hasClosestBlock */.F9)((0,selection/* getEditorRange */.zh)(vditor).startContainer);\n                    if (blockElement) {\n                        range = (0,selection/* getEditorRange */.zh)(vditor);\n                        vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n                            wbr.remove();\n                        });\n                        range.insertNode(document.createElement(\"wbr\"));\n                        if (vditor.currentMode === \"wysiwyg\") {\n                            blockElement.outerHTML = vditor.lute.SpinVditorDOM(blockElement.outerHTML);\n                        }\n                        else {\n                            blockElement.outerHTML = vditor.lute.SpinVditorIRDOM(blockElement.outerHTML);\n                        }\n                        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n                    }\n                    vditor[vditor.currentMode].element.querySelectorAll(\".vditor-\".concat(vditor.currentMode, \"__preview[data-render='2']\"))\n                        .forEach(function (item) {\n                        processCodeRender(item, vditor);\n                    });\n                }\n                vditor.wysiwyg.triggerRemoveComment(vditor);\n                execAfterRender(vditor);\n                if (vditor[vditor.currentMode].element.scrollHeight - height >\n                    Math.min(vditor[vditor.currentMode].element.clientHeight, window.innerHeight) / 2) {\n                    scrollCenter(vditor);\n                }\n                return [2 /*return*/];\n        }\n    });\n}); };\nvar templateObject_1;\n\n;// CONCATENATED MODULE: ./src/ts/ir/process.ts\n\n\n\n\n\n\n\n\n\nvar processHint = function (vditor) {\n    var _a, _b;\n    vditor.hint.render(vditor);\n    var startContainer = (0,selection/* getEditorRange */.zh)(vditor).startContainer;\n    // 代码块语言提示\n    var preBeforeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-info\");\n    if (preBeforeElement) {\n        if (preBeforeElement.textContent.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && vditor.hint.recentLanguage) {\n            preBeforeElement.textContent = constants/* Constants.ZWSP */.g.ZWSP + vditor.hint.recentLanguage;\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            range.selectNodeContents(preBeforeElement);\n        }\n        else {\n            var matchLangData_1 = [];\n            var key_1 = preBeforeElement.textContent.substring(0, (0,selection/* getSelectPosition */.im)(preBeforeElement, vditor.ir.element).start)\n                .replace(constants/* Constants.ZWSP */.g.ZWSP, \"\");\n            (vditor.options.preview.hljs.langs || constants/* Constants.ALIAS_CODE_LANGUAGES.concat */.g.ALIAS_CODE_LANGUAGES.concat(((_b = (_a = window.hljs) === null || _a === void 0 ? void 0 : _a.listLanguages()) !== null && _b !== void 0 ? _b : []).sort())).forEach(function (keyName) {\n                if (keyName.indexOf(key_1.toLowerCase()) > -1) {\n                    matchLangData_1.push({\n                        html: keyName,\n                        value: keyName,\n                    });\n                }\n            });\n            vditor.hint.genHTML(matchLangData_1, key_1, vditor);\n        }\n    }\n};\nvar process_processAfterRender = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (options.enableHint) {\n        processHint(vditor);\n    }\n    clearTimeout(vditor.ir.processTimeoutId);\n    vditor.ir.processTimeoutId = window.setTimeout(function () {\n        if (vditor.ir.composingLock) {\n            return;\n        }\n        var text = getMarkdown(vditor);\n        if (typeof vditor.options.input === \"function\" && options.enableInput) {\n            vditor.options.input(text);\n        }\n        if (vditor.options.counter.enable) {\n            vditor.counter.render(vditor, text);\n        }\n        if (vditor.options.cache.enable && (0,compatibility/* accessLocalStorage */.pK)()) {\n            localStorage.setItem(vditor.options.cache.id, text);\n            if (vditor.options.cache.after) {\n                vditor.options.cache.after(text);\n            }\n        }\n        if (vditor.devtools) {\n            vditor.devtools.renderEchart(vditor);\n        }\n        if (options.enableAddUndoStack) {\n            vditor.undo.addToUndoStack(vditor);\n        }\n    }, vditor.options.undoDelay);\n};\nvar process_processHeading = function (vditor, value) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var headingElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer) || range.startContainer;\n    if (headingElement) {\n        var headingMarkerElement = headingElement.querySelector(\".vditor-ir__marker--heading\");\n        if (headingMarkerElement) {\n            headingMarkerElement.innerHTML = value;\n        }\n        else {\n            headingElement.insertAdjacentText(\"afterbegin\", value);\n            range.selectNodeContents(headingElement);\n            range.collapse(false);\n        }\n        input(vditor, range.cloneRange());\n        highlightToolbarIR(vditor);\n    }\n};\nvar removeInline = function (range, vditor, type) {\n    var inlineElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", type);\n    if (inlineElement) {\n        inlineElement.firstElementChild.remove();\n        inlineElement.lastElementChild.remove();\n        range.insertNode(document.createElement(\"wbr\"));\n        var tempElement = document.createElement(\"div\");\n        tempElement.innerHTML = vditor.lute.SpinVditorIRDOM(inlineElement.outerHTML);\n        inlineElement.outerHTML = tempElement.firstElementChild.innerHTML.trim();\n    }\n};\nvar process_processToolbar = function (vditor, actionBtn, prefix, suffix) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var commandName = actionBtn.getAttribute(\"data-type\");\n    var typeElement = range.startContainer;\n    if (typeElement.nodeType === 3) {\n        typeElement = typeElement.parentElement;\n    }\n    var useHighlight = true;\n    // 移除\n    if (actionBtn.classList.contains(\"vditor-menu--current\")) {\n        if (commandName === \"quote\") {\n            var quoteElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"BLOCKQUOTE\");\n            if (quoteElement) {\n                range.insertNode(document.createElement(\"wbr\"));\n                quoteElement.outerHTML = quoteElement.innerHTML.trim() === \"\" ?\n                    \"<p data-block=\\\"0\\\">\".concat(quoteElement.innerHTML, \"</p>\") : quoteElement.innerHTML;\n            }\n        }\n        else if (commandName === \"link\") {\n            var aElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"a\");\n            if (aElement) {\n                var aTextElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__link\");\n                if (aTextElement) {\n                    range.insertNode(document.createElement(\"wbr\"));\n                    aElement.outerHTML = aTextElement.innerHTML;\n                }\n                else {\n                    aElement.outerHTML = aElement.querySelector(\".vditor-ir__link\").innerHTML + \"<wbr>\";\n                }\n            }\n        }\n        else if (commandName === \"italic\") {\n            removeInline(range, vditor, \"em\");\n        }\n        else if (commandName === \"bold\") {\n            removeInline(range, vditor, \"strong\");\n        }\n        else if (commandName === \"strike\") {\n            removeInline(range, vditor, \"s\");\n        }\n        else if (commandName === \"inline-code\") {\n            removeInline(range, vditor, \"code\");\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName);\n            useHighlight = false;\n            actionBtn.classList.remove(\"vditor-menu--current\");\n        }\n    }\n    else {\n        // 添加\n        if (vditor.ir.element.childNodes.length === 0) {\n            vditor.ir.element.innerHTML = '<p data-block=\"0\"><wbr></p>';\n            (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n        }\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n        if (commandName === \"line\") {\n            if (blockElement) {\n                var hrHTML = '<hr data-block=\"0\"><p data-block=\"0\"><wbr>\\n</p>';\n                if (blockElement.innerHTML.trim() === \"\") {\n                    blockElement.outerHTML = hrHTML;\n                }\n                else {\n                    blockElement.insertAdjacentHTML(\"afterend\", hrHTML);\n                }\n            }\n        }\n        else if (commandName === \"quote\") {\n            if (blockElement) {\n                range.insertNode(document.createElement(\"wbr\"));\n                blockElement.outerHTML = \"<blockquote data-block=\\\"0\\\">\".concat(blockElement.outerHTML, \"</blockquote>\");\n                useHighlight = false;\n                actionBtn.classList.add(\"vditor-menu--current\");\n            }\n        }\n        else if (commandName === \"link\") {\n            var html = void 0;\n            if (range.toString() === \"\") {\n                html = \"\".concat(prefix, \"<wbr>\").concat(suffix);\n            }\n            else {\n                html = \"\".concat(prefix).concat(range.toString()).concat(suffix.replace(\")\", \"<wbr>)\"));\n            }\n            document.execCommand(\"insertHTML\", false, html);\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"italic\" || commandName === \"bold\" || commandName === \"strike\"\n            || commandName === \"inline-code\" || commandName === \"code\" || commandName === \"table\") {\n            var html = void 0;\n            if (range.toString() === \"\") {\n                html = \"\".concat(prefix, \"<wbr>\").concat(suffix);\n            }\n            else {\n                if (commandName === \"code\") {\n                    html = \"\".concat(prefix, \"\\n\").concat(range.toString(), \"<wbr>\").concat(suffix);\n                }\n                else if (commandName === \"table\") {\n                    html = \"\".concat(prefix).concat(range.toString(), \"<wbr>\").concat(suffix);\n                }\n                else {\n                    html = \"\".concat(prefix).concat(range.toString()).concat(suffix, \"<wbr>\");\n                }\n                range.deleteContents();\n            }\n            if (commandName === \"table\" || commandName === \"code\") {\n                html = \"\\n\" + html + \"\\n\\n\";\n            }\n            var spanElement = document.createElement(\"span\");\n            spanElement.innerHTML = html;\n            range.insertNode(spanElement);\n            input(vditor, range);\n            if (commandName === \"table\") {\n                range.selectNodeContents(getSelection().getRangeAt(0).startContainer.parentElement);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName, false);\n            useHighlight = false;\n            removeCurrentToolbar(vditor.toolbar.elements, [\"check\", \"list\", \"ordered-list\"]);\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n    process_processAfterRender(vditor);\n    if (useHighlight) {\n        highlightToolbarIR(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/hint/index.ts\nvar hint_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar hint_generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\nvar Hint = /** @class */ (function () {\n    function Hint(hintExtends) {\n        var _this = this;\n        this.splitChar = \"\";\n        this.lastIndex = -1;\n        this.fillEmoji = function (element, vditor) {\n            _this.element.style.display = \"none\";\n            var value = decodeURIComponent(element.getAttribute(\"data-value\"));\n            var range = window.getSelection().getRangeAt(0);\n            // 代码提示\n            if (vditor.currentMode === \"ir\") {\n                var preBeforeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"code-block-info\");\n                if (preBeforeElement) {\n                    preBeforeElement.textContent = constants/* Constants.ZWSP */.g.ZWSP + value.trimRight();\n                    range.selectNodeContents(preBeforeElement);\n                    range.collapse(false);\n                    process_processAfterRender(vditor);\n                    preBeforeElement.parentElement.querySelectorAll(\"code\").forEach(function (item) {\n                        item.className = \"language-\" + value.trimRight();\n                    });\n                    processCodeRender(preBeforeElement.parentElement.querySelector(\".vditor-ir__preview\"), vditor);\n                    _this.recentLanguage = value.trimRight();\n                    return;\n                }\n            }\n            if (vditor.currentMode === \"wysiwyg\" && range.startContainer.nodeType !== 3) {\n                var startContainer = range.startContainer;\n                var inputElement = void 0;\n                if (startContainer.classList.contains(\"vditor-input\")) {\n                    inputElement = startContainer;\n                }\n                else {\n                    inputElement = startContainer.firstElementChild;\n                }\n                if (inputElement && inputElement.classList.contains(\"vditor-input\")) {\n                    inputElement.value = value.trimRight();\n                    range.selectNodeContents(inputElement);\n                    range.collapse(false);\n                    // {detail: 1}用于标识这个自定义事件是在编程语言选择后触发的\n                    // 用于在鼠标选择语言后，自动聚焦到代码输入框\n                    inputElement.dispatchEvent(new CustomEvent(\"input\", { detail: 1 }));\n                    _this.recentLanguage = value.trimRight();\n                    return;\n                }\n            }\n            range.setStart(range.startContainer, _this.lastIndex);\n            range.deleteContents();\n            if (vditor.options.hint.parse) {\n                if (vditor.currentMode === \"sv\") {\n                    (0,selection/* insertHTML */.oC)(vditor.lute.SpinVditorSVDOM(value), vditor);\n                }\n                else if (vditor.currentMode === \"wysiwyg\") {\n                    (0,selection/* insertHTML */.oC)(vditor.lute.SpinVditorDOM(value), vditor);\n                }\n                else {\n                    (0,selection/* insertHTML */.oC)(vditor.lute.SpinVditorIRDOM(value), vditor);\n                }\n            }\n            else {\n                (0,selection/* insertHTML */.oC)(value, vditor);\n            }\n            if (_this.splitChar === \":\" && value.indexOf(\":\") > -1 && vditor.currentMode !== \"sv\") {\n                range.insertNode(document.createTextNode(\" \"));\n            }\n            range.collapse(false);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            if (vditor.currentMode === \"wysiwyg\") {\n                var preElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-wysiwyg__block\");\n                if (preElement && preElement.lastElementChild.classList.contains(\"vditor-wysiwyg__preview\")) {\n                    preElement.lastElementChild.innerHTML = preElement.firstElementChild.innerHTML;\n                    processCodeRender(preElement.lastElementChild, vditor);\n                }\n            }\n            else if (vditor.currentMode === \"ir\") {\n                var preElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__marker--pre\");\n                if (preElement && preElement.nextElementSibling.classList.contains(\"vditor-ir__preview\")) {\n                    preElement.nextElementSibling.innerHTML = preElement.innerHTML;\n                    processCodeRender(preElement.nextElementSibling, vditor);\n                }\n            }\n            execAfterRender(vditor);\n        };\n        this.timeId = -1;\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-hint\";\n        this.recentLanguage = \"\";\n        hintExtends.push({ key: \":\" });\n    }\n    Hint.prototype.render = function (vditor) {\n        var _this = this;\n        if (!window.getSelection().focusNode) {\n            return;\n        }\n        var currentLineValue;\n        var range = getSelection().getRangeAt(0);\n        currentLineValue = range.startContainer.textContent.substring(0, range.startOffset) || \"\";\n        var key = this.getKey(currentLineValue, vditor.options.hint.extend);\n        if (typeof key === \"undefined\") {\n            this.element.style.display = \"none\";\n            clearTimeout(this.timeId);\n        }\n        else {\n            if (this.splitChar === \":\") {\n                var emojiHint_1 = key === \"\" ? vditor.options.hint.emoji : vditor.lute.GetEmojis();\n                var matchEmojiData_1 = [];\n                Object.keys(emojiHint_1).forEach(function (keyName) {\n                    if (keyName.indexOf(key.toLowerCase()) === 0) {\n                        if (emojiHint_1[keyName].indexOf(\".\") > -1) {\n                            matchEmojiData_1.push({\n                                html: \"<img src=\\\"\".concat(emojiHint_1[keyName], \"\\\" title=\\\":\").concat(keyName, \":\\\"/> :\").concat(keyName, \":\"),\n                                value: \":\".concat(keyName, \":\"),\n                            });\n                        }\n                        else {\n                            matchEmojiData_1.push({\n                                html: \"<span class=\\\"vditor-hint__emoji\\\">\".concat(emojiHint_1[keyName], \"</span>\").concat(keyName),\n                                value: emojiHint_1[keyName],\n                            });\n                        }\n                    }\n                });\n                this.genHTML(matchEmojiData_1, key, vditor);\n            }\n            else {\n                vditor.options.hint.extend.forEach(function (item) {\n                    if (item.key === _this.splitChar) {\n                        clearTimeout(_this.timeId);\n                        _this.timeId = window.setTimeout(function () { return hint_awaiter(_this, void 0, void 0, function () {\n                            var _a;\n                            return hint_generator(this, function (_b) {\n                                switch (_b.label) {\n                                    case 0:\n                                        _a = this.genHTML;\n                                        return [4 /*yield*/, item.hint(key)];\n                                    case 1:\n                                        _a.apply(this, [_b.sent(), key, vditor]);\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); }, vditor.options.hint.delay);\n                    }\n                });\n            }\n        }\n    };\n    Hint.prototype.genHTML = function (data, key, vditor) {\n        var _this = this;\n        if (data.length === 0) {\n            this.element.style.display = \"none\";\n            return;\n        }\n        var editorElement = vditor[vditor.currentMode].element;\n        var textareaPosition = (0,selection/* getCursorPosition */.Ny)(editorElement);\n        var x = textareaPosition.left +\n            (vditor.options.outline.position === \"left\" ? vditor.outline.element.offsetWidth : 0);\n        var y = textareaPosition.top;\n        var hintsHTML = \"\";\n        data.forEach(function (hintData, i) {\n            if (i > 7) {\n                return;\n            }\n            // process high light\n            var html = hintData.html;\n            if (key !== \"\") {\n                var lastIndex = html.lastIndexOf(\">\") + 1;\n                var replaceHtml = html.substr(lastIndex);\n                var replaceIndex = replaceHtml.toLowerCase().indexOf(key.toLowerCase());\n                if (replaceIndex > -1) {\n                    replaceHtml = replaceHtml.substring(0, replaceIndex) + \"<b>\" +\n                        replaceHtml.substring(replaceIndex, replaceIndex + key.length) + \"</b>\" +\n                        replaceHtml.substring(replaceIndex + key.length);\n                    html = html.substr(0, lastIndex) + replaceHtml;\n                }\n            }\n            hintsHTML += \"<button type=\\\"button\\\" data-value=\\\"\".concat(encodeURIComponent(hintData.value), \" \\\"\\n\").concat(i === 0 ? \"class='vditor-hint--current'\" : \"\", \"> \").concat(html, \"</button>\");\n        });\n        this.element.innerHTML = hintsHTML;\n        var lineHeight = parseInt(document.defaultView.getComputedStyle(editorElement, null)\n            .getPropertyValue(\"line-height\"), 10);\n        this.element.style.top = \"\".concat(y + (lineHeight || 22), \"px\");\n        this.element.style.left = \"\".concat(x, \"px\");\n        this.element.style.display = \"block\";\n        this.element.style.right = \"auto\";\n        this.element.querySelectorAll(\"button\").forEach(function (element) {\n            element.addEventListener(\"click\", function (event) {\n                _this.fillEmoji(element, vditor);\n                event.preventDefault();\n            });\n        });\n        // hint 展现在上部\n        if (this.element.getBoundingClientRect().bottom > window.innerHeight) {\n            this.element.style.top = \"\".concat(y - this.element.offsetHeight, \"px\");\n        }\n        if (this.element.getBoundingClientRect().right > window.innerWidth) {\n            this.element.style.left = \"auto\";\n            this.element.style.right = \"0\";\n        }\n    };\n    Hint.prototype.select = function (event, vditor) {\n        if (this.element.querySelectorAll(\"button\").length === 0 ||\n            this.element.style.display === \"none\") {\n            return false;\n        }\n        var currentHintElement = this.element.querySelector(\".vditor-hint--current\");\n        if (event.key === \"ArrowDown\") {\n            event.preventDefault();\n            event.stopPropagation();\n            currentHintElement.removeAttribute(\"class\");\n            if (!currentHintElement.nextElementSibling) {\n                this.element.children[0].className = \"vditor-hint--current\";\n            }\n            else {\n                currentHintElement.nextElementSibling.className = \"vditor-hint--current\";\n            }\n            return true;\n        }\n        else if (event.key === \"ArrowUp\") {\n            event.preventDefault();\n            event.stopPropagation();\n            currentHintElement.removeAttribute(\"class\");\n            if (!currentHintElement.previousElementSibling) {\n                var length_1 = this.element.children.length;\n                this.element.children[length_1 - 1].className = \"vditor-hint--current\";\n            }\n            else {\n                currentHintElement.previousElementSibling.className = \"vditor-hint--current\";\n            }\n            return true;\n        }\n        else if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Enter\" && !event.isComposing) {\n            event.preventDefault();\n            event.stopPropagation();\n            this.fillEmoji(currentHintElement, vditor);\n            return true;\n        }\n        return false;\n    };\n    Hint.prototype.getKey = function (currentLineValue, extend) {\n        var _this = this;\n        this.lastIndex = -1;\n        this.splitChar = \"\";\n        extend.forEach(function (item) {\n            var currentLastIndex = currentLineValue.lastIndexOf(item.key);\n            if (_this.lastIndex < currentLastIndex) {\n                _this.splitChar = item.key;\n                _this.lastIndex = currentLastIndex;\n            }\n        });\n        var key;\n        if (this.lastIndex === -1) {\n            return key;\n        }\n        var lineArray = currentLineValue.split(this.splitChar);\n        var lastItem = lineArray[lineArray.length - 1];\n        var maxLength = 32;\n        if (lineArray.length > 1 && lastItem.trim() === lastItem) {\n            if (lineArray.length === 2 && lineArray[0] === \"\" && lineArray[1].length < maxLength) {\n                key = lineArray[1];\n            }\n            else {\n                var preChar = lineArray[lineArray.length - 2].slice(-1);\n                if ((0,code160to32/* code160to32 */.X)(preChar) === \" \" && lastItem.length < maxLength) {\n                    key = lastItem;\n                }\n            }\n        }\n        return key;\n    };\n    return Hint;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/ir/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\nvar IR = /** @class */ (function () {\n    function IR(vditor) {\n        this.composingLock = false;\n        var divElement = document.createElement(\"div\");\n        divElement.className = \"vditor-ir\";\n        divElement.innerHTML = \"<pre class=\\\"vditor-reset\\\" placeholder=\\\"\".concat(vditor.options.placeholder, \"\\\"\\n contenteditable=\\\"true\\\" spellcheck=\\\"false\\\"></pre>\");\n        this.element = divElement.firstElementChild;\n        this.bindEvent(vditor);\n        focusEvent(vditor, this.element);\n        dblclickEvent(vditor, this.element);\n        blurEvent(vditor, this.element);\n        hotkeyEvent(vditor, this.element);\n        selectEvent(vditor, this.element);\n        dropEvent(vditor, this.element);\n        copyEvent(vditor, this.element, this.copy);\n        cutEvent(vditor, this.element, this.copy);\n    }\n    IR.prototype.copy = function (event, vditor) {\n        var range = getSelection().getRangeAt(0);\n        if (range.toString() === \"\") {\n            return;\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        var tempElement = document.createElement(\"div\");\n        tempElement.appendChild(range.cloneContents());\n        event.clipboardData.setData(\"text/plain\", vditor.lute.VditorIRDOM2Md(tempElement.innerHTML).trim());\n        event.clipboardData.setData(\"text/html\", \"\");\n    };\n    IR.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.element.addEventListener(\"paste\", function (event) {\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    document.execCommand(\"insertHTML\", false, code);\n                },\n            });\n        });\n        this.element.addEventListener(\"scroll\", function () {\n            hidePanel(vditor, [\"hint\"]);\n        });\n        this.element.addEventListener(\"compositionstart\", function (event) {\n            _this.composingLock = true;\n        });\n        this.element.addEventListener(\"compositionend\", function (event) {\n            if (!(0,compatibility/* isFirefox */.vU)()) {\n                input(vditor, getSelection().getRangeAt(0).cloneRange());\n            }\n            _this.composingLock = false;\n        });\n        this.element.addEventListener(\"input\", function (event) {\n            if (event.inputType === \"deleteByDrag\" || event.inputType === \"insertFromDrop\") {\n                // https://github.com/Vanessa219/vditor/issues/801 编辑器内容拖拽问题\n                return;\n            }\n            if (_this.preventInput) {\n                _this.preventInput = false;\n                process_processAfterRender(vditor, {\n                    enableAddUndoStack: true,\n                    enableHint: true,\n                    enableInput: true,\n                });\n                return;\n            }\n            if (_this.composingLock || event.data === \"‘\" || event.data === \"“\" || event.data === \"《\") {\n                return;\n            }\n            input(vditor, getSelection().getRangeAt(0).cloneRange(), false, event);\n        });\n        this.element.addEventListener(\"click\", function (event) {\n            if (event.target.tagName === \"INPUT\") {\n                if (event.target.checked) {\n                    event.target.setAttribute(\"checked\", \"checked\");\n                }\n                else {\n                    event.target.removeAttribute(\"checked\");\n                }\n                _this.preventInput = true;\n                process_processAfterRender(vditor);\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            // 点击后光标落于预览区\n            var previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(event.target, \"vditor-ir__preview\");\n            if (!previewElement) {\n                previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__preview\");\n            }\n            if (previewElement) {\n                if (previewElement.previousElementSibling.firstElementChild) {\n                    range.selectNodeContents(previewElement.previousElementSibling.firstElementChild);\n                }\n                else {\n                    // 行内数学公式\n                    range.selectNodeContents(previewElement.previousElementSibling);\n                }\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                scrollCenter(vditor);\n            }\n            // 点击图片光标选中图片地址\n            if (event.target.tagName === \"IMG\") {\n                var linkElement = event.target.parentElement.querySelector(\".vditor-ir__marker--link\");\n                if (linkElement) {\n                    range.selectNode(linkElement);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                }\n            }\n            // 打开链接\n            var aElement = (0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"a\");\n            if (aElement && (!aElement.classList.contains(\"vditor-ir__node--expand\"))) {\n                if (vditor.options.link.click) {\n                    vditor.options.link.click(aElement.querySelector(\":scope > .vditor-ir__marker--link\"));\n                }\n                else if (vditor.options.link.isOpen) {\n                    window.open(aElement.querySelector(\":scope > .vditor-ir__marker--link\").textContent);\n                }\n                return;\n            }\n            if (event.target.isEqualNode(_this.element) && _this.element.lastElementChild && range.collapsed) {\n                var lastRect = _this.element.lastElementChild.getBoundingClientRect();\n                if (event.y > lastRect.top + lastRect.height) {\n                    if (_this.element.lastElementChild.tagName === \"P\" &&\n                        _this.element.lastElementChild.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                        range.selectNodeContents(_this.element.lastElementChild);\n                        range.collapse(false);\n                    }\n                    else {\n                        _this.element.insertAdjacentHTML(\"beforeend\", \"<p data-block=\\\"0\\\">\".concat(constants/* Constants.ZWSP */.g.ZWSP, \"<wbr></p>\"));\n                        (0,selection/* setRangeByWbr */.ib)(_this.element, range);\n                    }\n                }\n            }\n            if (range.toString() === \"\") {\n                expandMarker(range, vditor);\n            }\n            else {\n                // https://github.com/Vanessa219/vditor/pull/681 当点击选中区域时 eventTarget 与 range 不一致，需延迟等待 range 发生变化\n                setTimeout(function () {\n                    expandMarker((0,selection/* getEditorRange */.zh)(vditor), vditor);\n                });\n            }\n            clickToc(event, vditor);\n            highlightToolbarIR(vditor);\n        });\n        this.element.addEventListener(\"keyup\", function (event) {\n            if (event.isComposing || (0,compatibility/* isCtrl */.yl)(event)) {\n                return;\n            }\n            if (event.key === \"Enter\") {\n                scrollCenter(vditor);\n            }\n            highlightToolbarIR(vditor);\n            if ((event.key === \"Backspace\" || event.key === \"Delete\") &&\n                vditor.ir.element.innerHTML !== \"\" && vditor.ir.element.childNodes.length === 1 &&\n                vditor.ir.element.firstElementChild && vditor.ir.element.firstElementChild.tagName === \"P\"\n                && vditor.ir.element.firstElementChild.childElementCount === 0\n                && (vditor.ir.element.textContent === \"\" || vditor.ir.element.textContent === \"\\n\")) {\n                // 为空时显示 placeholder\n                vditor.ir.element.innerHTML = \"\";\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            if (event.key === \"Backspace\") {\n                // firefox headings https://github.com/Vanessa219/vditor/issues/211\n                if ((0,compatibility/* isFirefox */.vU)() && range.startContainer.textContent === \"\\n\" && range.startOffset === 1) {\n                    range.startContainer.textContent = \"\";\n                    expandMarker(range, vditor);\n                }\n                // 数学公式前是空块，空块前是 table，在空块前删除，数学公式会多一个 br\n                _this.element.querySelectorAll(\".language-math\").forEach(function (item) {\n                    var brElement = item.querySelector(\"br\");\n                    if (brElement) {\n                        brElement.remove();\n                    }\n                });\n            }\n            else if (event.key.indexOf(\"Arrow\") > -1) {\n                if (event.key === \"ArrowLeft\" || event.key === \"ArrowRight\") {\n                    processHint(vditor);\n                }\n                expandMarker(range, vditor);\n            }\n            else if (event.keyCode === 229 && event.code === \"\" && event.key === \"Unidentified\") {\n                // https://github.com/Vanessa219/vditor/issues/508 IR 删除到节点需展开\n                expandMarker(range, vditor);\n            }\n            var previewRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__preview\");\n            if (previewRenderElement) {\n                if (event.key === \"ArrowUp\" || event.key === \"ArrowLeft\") {\n                    if (previewRenderElement.previousElementSibling.firstElementChild) {\n                        range.selectNodeContents(previewRenderElement.previousElementSibling.firstElementChild);\n                    }\n                    else {\n                        // 行内数学公式/html entity\n                        range.selectNodeContents(previewRenderElement.previousElementSibling);\n                    }\n                    range.collapse(false);\n                    event.preventDefault();\n                    return true;\n                }\n                if (previewRenderElement.tagName === \"SPAN\" &&\n                    (event.key === \"ArrowDown\" || event.key === \"ArrowRight\")) {\n                    if (previewRenderElement.parentElement.getAttribute(\"data-type\") === \"html-entity\") {\n                        // html entity\n                        previewRenderElement.parentElement.insertAdjacentText(\"afterend\", constants/* Constants.ZWSP */.g.ZWSP);\n                        range.setStart(previewRenderElement.parentElement.nextSibling, 1);\n                    }\n                    else {\n                        range.selectNodeContents(previewRenderElement.parentElement.lastElementChild);\n                    }\n                    range.collapse(false);\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        });\n    };\n    return IR;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/markdown/getHTML.ts\n\nvar getHTML = function (vditor) {\n    if (vditor.currentMode === \"sv\") {\n        return vditor.lute.Md2HTML(getMarkdown(vditor));\n    }\n    else if (vditor.currentMode === \"wysiwyg\") {\n        return vditor.lute.VditorDOM2HTML(vditor.wysiwyg.element.innerHTML);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        return vditor.lute.VditorIRDOM2HTML(vditor.ir.element.innerHTML);\n    }\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/setLute.ts\nvar setLute = __webpack_require__(214);\n// EXTERNAL MODULE: ./src/ts/markdown/outlineRender.ts\nvar outlineRender = __webpack_require__(436);\n;// CONCATENATED MODULE: ./src/ts/outline/index.ts\n\n\n\n\nvar Outline = /** @class */ (function () {\n    function Outline(outlineLabel) {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-outline\";\n        this.element.innerHTML = \"<div class=\\\"vditor-outline__title\\\">\".concat(outlineLabel, \"</div>\\n<div class=\\\"vditor-outline__content\\\"></div>\");\n    }\n    Outline.prototype.render = function (vditor) {\n        var html = \"\";\n        if (vditor.preview.element.style.display === \"block\") {\n            html = (0,outlineRender/* outlineRender */.k)(vditor.preview.previewElement, this.element.lastElementChild, vditor);\n        }\n        else {\n            html = (0,outlineRender/* outlineRender */.k)(vditor[vditor.currentMode].element, this.element.lastElementChild, vditor);\n        }\n        return html;\n    };\n    Outline.prototype.toggle = function (vditor, show, focus) {\n        var _a;\n        if (show === void 0) { show = true; }\n        if (focus === void 0) { focus = true; }\n        var btnElement = (_a = vditor.toolbar.elements.outline) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n        if (show && window.innerWidth >= constants/* Constants.MOBILE_WIDTH */.g.MOBILE_WIDTH) {\n            this.element.style.display = \"block\";\n            this.render(vditor);\n            btnElement === null || btnElement === void 0 ? void 0 : btnElement.classList.add(\"vditor-menu--current\");\n        }\n        else {\n            this.element.style.display = \"none\";\n            btnElement === null || btnElement === void 0 ? void 0 : btnElement.classList.remove(\"vditor-menu--current\");\n        }\n        if (focus && getSelection().rangeCount > 0) {\n            var range = getSelection().getRangeAt(0);\n            if (vditor[vditor.currentMode].element.contains(range.startContainer)) {\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n        }\n        setPadding(vditor);\n    };\n    return Outline;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/markdown/mediaRender.ts\nvar mediaRender = __webpack_require__(280);\n;// CONCATENATED MODULE: ./src/ts/preview/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Preview = /** @class */ (function () {\n    function Preview(vditor) {\n        var _this = this;\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-preview\";\n        this.previewElement = document.createElement(\"div\");\n        this.previewElement.className = \"vditor-reset\";\n        if (vditor.options.classes.preview) {\n            this.previewElement.classList.add(vditor.options.classes.preview);\n        }\n        this.previewElement.style.maxWidth = vditor.options.preview.maxWidth + \"px\";\n        this.previewElement.addEventListener(\"copy\", function (event) {\n            if (event.target.tagName === \"TEXTAREA\") {\n                // https://github.com/Vanessa219/vditor/issues/901\n                return;\n            }\n            var tempElement = document.createElement(\"div\");\n            tempElement.className = \"vditor-reset\";\n            tempElement.appendChild(getSelection().getRangeAt(0).cloneContents());\n            _this.copyToX(vditor, tempElement, \"default\");\n            event.preventDefault();\n        });\n        this.previewElement.addEventListener(\"click\", function (event) {\n            var spanElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"SPAN\");\n            if (spanElement && (0,hasClosest/* hasClosestByClassName */.fb)(spanElement, \"vditor-toc\")) {\n                var headingElement = _this.previewElement.querySelector(\"#\" + spanElement.getAttribute(\"data-target-id\"));\n                if (headingElement) {\n                    _this.element.scrollTop = headingElement.offsetTop;\n                }\n                return;\n            }\n            if (event.target.tagName === \"A\") {\n                if (vditor.options.link.click) {\n                    vditor.options.link.click(event.target);\n                }\n                else if (vditor.options.link.isOpen) {\n                    window.open(event.target.getAttribute(\"href\"));\n                }\n                event.preventDefault();\n                return;\n            }\n            if (event.target.tagName === \"IMG\") {\n                if (vditor.options.image.preview) {\n                    vditor.options.image.preview(event.target);\n                }\n                else if (vditor.options.image.isPreview) {\n                    (0,preview_image/* previewImage */.E)(event.target, vditor.options.lang, vditor.options.theme);\n                }\n            }\n        });\n        this.element.appendChild(this.previewElement);\n        var actions = vditor.options.preview.actions;\n        if (actions.length === 0) {\n            return;\n        }\n        var actionElement = document.createElement(\"div\");\n        actionElement.className = \"vditor-preview__action\";\n        var actionHtml = [];\n        for (var i = 0; i < actions.length; i++) {\n            var action = actions[i];\n            if (typeof action === \"object\") {\n                actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"\".concat(action.key, \"\\\" class=\\\"\").concat(action.className, \"\\\"\").concat(action.tooltip ? \" aria-label=\\\"\".concat(action.tooltip, \"\\\"\") : \"\", \"\\\">\").concat(action.text, \"</button>\"));\n                continue;\n            }\n            switch (action) {\n                case \"desktop\":\n                    actionHtml.push(\"<button type=\\\"button\\\" class=\\\"vditor-preview__action--current\\\" data-type=\\\"desktop\\\">Desktop</button>\");\n                    break;\n                case \"tablet\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"tablet\\\">Tablet</button>\");\n                    break;\n                case \"mobile\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"mobile\\\">Mobile/Wechat</button>\");\n                    break;\n                case \"mp-wechat\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"mp-wechat\\\" class=\\\"vditor-tooltipped vditor-tooltipped__w\\\" aria-label=\\\"\\u590D\\u5236\\u5230\\u516C\\u4F17\\u53F7\\\"><svg><use xlink:href=\\\"#vditor-icon-mp-wechat\\\"></use></svg></button>\");\n                    break;\n                case \"zhihu\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"zhihu\\\" class=\\\"vditor-tooltipped vditor-tooltipped__w\\\" aria-label=\\\"\\u590D\\u5236\\u5230\\u77E5\\u4E4E\\\"><svg><use xlink:href=\\\"#vditor-icon-zhihu\\\"></use></svg></button>\");\n                    break;\n            }\n        }\n        actionElement.innerHTML = actionHtml.join(\"\");\n        actionElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btn = (0,hasClosestByHeadings/* hasClosestByTag */.S)(event.target, \"BUTTON\");\n            if (!btn) {\n                return;\n            }\n            var type = btn.getAttribute(\"data-type\");\n            var actionCustom = actions.find(function (w) { return (w === null || w === void 0 ? void 0 : w.key) === type; });\n            if (actionCustom) {\n                actionCustom.click(type);\n                return;\n            }\n            if (type === \"mp-wechat\" || type === \"zhihu\") {\n                _this.copyToX(vditor, _this.previewElement.cloneNode(true), type);\n                return;\n            }\n            if (type === \"desktop\") {\n                _this.previewElement.style.width = \"auto\";\n            }\n            else if (type === \"tablet\") {\n                _this.previewElement.style.width = \"780px\";\n            }\n            else {\n                _this.previewElement.style.width = \"360px\";\n            }\n            if (_this.previewElement.scrollWidth > _this.previewElement.parentElement.clientWidth) {\n                _this.previewElement.style.width = \"auto\";\n            }\n            _this.render(vditor);\n            actionElement.querySelectorAll(\"button\").forEach(function (item) {\n                item.classList.remove(\"vditor-preview__action--current\");\n            });\n            btn.classList.add(\"vditor-preview__action--current\");\n        });\n        this.element.insertBefore(actionElement, this.previewElement);\n    }\n    Preview.prototype.render = function (vditor, value) {\n        var _this = this;\n        clearTimeout(this.mdTimeoutId);\n        if (this.element.style.display === \"none\") {\n            if (this.element.getAttribute(\"data-type\") === \"renderPerformance\") {\n                vditor.tip.hide();\n            }\n            return;\n        }\n        if (value) {\n            this.previewElement.innerHTML = value;\n            return;\n        }\n        if (getMarkdown(vditor)\n            .replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, \"\") === \"\") {\n            this.previewElement.innerHTML = \"\";\n            return;\n        }\n        var renderStartTime = new Date().getTime();\n        var markdownText = getMarkdown(vditor);\n        this.mdTimeoutId = window.setTimeout(function () {\n            if (vditor.options.preview.url) {\n                var xhr_1 = new XMLHttpRequest();\n                xhr_1.open(\"POST\", vditor.options.preview.url);\n                xhr_1.setRequestHeader(\"Content-Type\", \"application/json;charset=UTF-8\");\n                xhr_1.onreadystatechange = function () {\n                    if (xhr_1.readyState === XMLHttpRequest.DONE) {\n                        if (xhr_1.status === 200) {\n                            var responseJSON = JSON.parse(xhr_1.responseText);\n                            if (responseJSON.code !== 0) {\n                                vditor.tip.show(responseJSON.msg);\n                                return;\n                            }\n                            if (vditor.options.preview.transform) {\n                                responseJSON.data = vditor.options.preview.transform(responseJSON.data);\n                            }\n                            _this.previewElement.innerHTML = responseJSON.data;\n                            _this.afterRender(vditor, renderStartTime);\n                        }\n                        else {\n                            var html = vditor.lute.Md2HTML(markdownText);\n                            if (vditor.options.preview.transform) {\n                                html = vditor.options.preview.transform(html);\n                            }\n                            _this.previewElement.innerHTML = html;\n                            _this.afterRender(vditor, renderStartTime);\n                        }\n                    }\n                };\n                xhr_1.send(JSON.stringify({ markdownText: markdownText }));\n            }\n            else {\n                var html = vditor.lute.Md2HTML(markdownText);\n                if (vditor.options.preview.transform) {\n                    html = vditor.options.preview.transform(html);\n                }\n                _this.previewElement.innerHTML = html;\n                _this.afterRender(vditor, renderStartTime);\n            }\n        }, vditor.options.preview.delay);\n    };\n    Preview.prototype.afterRender = function (vditor, startTime) {\n        if (vditor.options.preview.parse) {\n            vditor.options.preview.parse(this.element);\n        }\n        var time = (new Date().getTime() - startTime);\n        if ((new Date().getTime() - startTime) > 2600) {\n            // https://github.com/b3log/vditor/issues/67\n            vditor.tip.show(window.VditorI18n.performanceTip.replace(\"${x}\", time.toString()));\n            vditor.preview.element.setAttribute(\"data-type\", \"renderPerformance\");\n        }\n        else if (vditor.preview.element.getAttribute(\"data-type\") === \"renderPerformance\") {\n            vditor.tip.hide();\n            vditor.preview.element.removeAttribute(\"data-type\");\n        }\n        var cmtFocusElement = vditor.preview.element.querySelector(\".vditor-comment--focus\");\n        if (cmtFocusElement) {\n            cmtFocusElement.classList.remove(\"vditor-comment--focus\");\n        }\n        (0,codeRender/* codeRender */.O)(vditor.preview.previewElement, vditor.options.preview.hljs);\n        (0,highlightRender/* highlightRender */.s)(vditor.options.preview.hljs, vditor.preview.previewElement, vditor.options.cdn);\n        (0,mermaidRender/* mermaidRender */.i)(vditor.preview.previewElement, vditor.options.cdn, vditor.options.theme);\n        (0,markmapRender/* markmapRender */.K)(vditor.preview.previewElement, vditor.options.cdn);\n        (0,SMILESRender/* SMILESRender */.J)(vditor.preview.previewElement, vditor.options.cdn, vditor.options.theme);\n        (0,flowchartRender/* flowchartRender */.P)(vditor.preview.previewElement, vditor.options.cdn);\n        (0,graphvizRender/* graphvizRender */.v)(vditor.preview.previewElement, vditor.options.cdn);\n        (0,chartRender/* chartRender */.p)(vditor.preview.previewElement, vditor.options.cdn, vditor.options.theme);\n        (0,mindmapRender/* mindmapRender */.P)(vditor.preview.previewElement, vditor.options.cdn, vditor.options.theme);\n        (0,plantumlRender/* plantumlRender */.B)(vditor.preview.previewElement, vditor.options.cdn);\n        (0,abcRender/* abcRender */.Q)(vditor.preview.previewElement, vditor.options.cdn);\n        if (vditor.options.preview.render.media.enable) {\n            (0,mediaRender/* mediaRender */.Y)(vditor.preview.previewElement);\n        }\n        vditor.options.customRenders.forEach(function (item) {\n            item.render(vditor.preview.previewElement, vditor);\n        });\n        // toc render\n        var editorElement = vditor.preview.element;\n        var tocHTML = vditor.outline.render(vditor);\n        if (tocHTML === \"\") {\n            tocHTML = \"[ToC]\";\n        }\n        editorElement.querySelectorAll('[data-type=\"toc-block\"]').forEach(function (item) {\n            item.innerHTML = tocHTML;\n            (0,mathRender/* mathRender */.H)(item, {\n                cdn: vditor.options.cdn,\n                math: vditor.options.preview.math,\n            });\n        });\n        (0,mathRender/* mathRender */.H)(vditor.preview.previewElement, {\n            cdn: vditor.options.cdn,\n            math: vditor.options.preview.math,\n        });\n    };\n    Preview.prototype.copyToX = function (vditor, copyElement, type) {\n        if (type === void 0) { type = \"mp-wechat\"; }\n        // fix math render\n        if (type !== \"zhihu\") {\n            copyElement.querySelectorAll(\".katex-html .base\").forEach(function (item) {\n                item.style.display = \"initial\";\n            });\n        }\n        else {\n            copyElement.querySelectorAll(\".language-math\").forEach(function (item) {\n                item.outerHTML = \"<img class=\\\"Formula-image\\\" data-eeimg=\\\"true\\\" src=\\\"//www.zhihu.com/equation?tex=\\\" alt=\\\"\".concat(item.getAttribute(\"data-math\"), \"\\\\\\\" style=\\\"display: block; margin: 0 auto; max-width: 100%;\\\">\");\n            });\n        }\n        // 防止背景色被粘贴到公众号中\n        copyElement.style.backgroundColor = \"#fff\";\n        // 代码背景\n        copyElement.querySelectorAll(\"code\").forEach(function (item) {\n            item.style.backgroundImage = \"none\";\n        });\n        this.element.append(copyElement);\n        var range = copyElement.ownerDocument.createRange();\n        range.selectNode(copyElement);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        document.execCommand(\"copy\");\n        copyElement.remove();\n        vditor.tip.show(['zhihu', 'mp-wechat'].includes(type) ? \"\\u5DF2\\u590D\\u5236\\uFF0C\\u53EF\\u5230\".concat(type === \"zhihu\" ? \"知乎\" : \"微信公众号平台\", \"\\u8FDB\\u884C\\u7C98\\u8D34\") : \"\\u5DF2\\u590D\\u5236\\u5230\\u526A\\u5207\\u677F\");\n    };\n    return Preview;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/resize/index.ts\nvar Resize = /** @class */ (function () {\n    function Resize(vditor) {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-resize vditor-resize--\".concat(vditor.options.resize.position);\n        this.element.innerHTML = \"<div><svg><use xlink:href=\\\"#vditor-icon-resize\\\"></use></svg></div>\";\n        this.bindEvent(vditor);\n    }\n    Resize.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.element.addEventListener(\"mousedown\", function (event) {\n            var documentSelf = document;\n            var y = event.clientY;\n            var height = vditor.element.offsetHeight;\n            var minHeight = 63 + vditor.element.querySelector(\".vditor-toolbar\").clientHeight;\n            documentSelf.ondragstart = function () { return false; };\n            if (window.captureEvents) {\n                window.captureEvents();\n            }\n            _this.element.classList.add(\"vditor-resize--selected\");\n            documentSelf.onmousemove = function (moveEvent) {\n                if (vditor.options.resize.position === \"top\") {\n                    vditor.element.style.height = Math.max(minHeight, height + (y - moveEvent.clientY)) + \"px\";\n                }\n                else {\n                    vditor.element.style.height = Math.max(minHeight, height + (moveEvent.clientY - y)) + \"px\";\n                }\n                if (vditor.options.typewriterMode) {\n                    vditor.sv.element.style.paddingBottom =\n                        vditor.sv.element.parentElement.offsetHeight / 2 + \"px\";\n                }\n            };\n            documentSelf.onmouseup = function () {\n                if (vditor.options.resize.after) {\n                    vditor.options.resize.after(vditor.element.offsetHeight - height);\n                }\n                if (window.captureEvents) {\n                    window.captureEvents();\n                }\n                documentSelf.onmousemove = null;\n                documentSelf.onmouseup = null;\n                documentSelf.ondragstart = null;\n                documentSelf.onselectstart = null;\n                documentSelf.onselect = null;\n                _this.element.classList.remove(\"vditor-resize--selected\");\n            };\n        });\n    };\n    return Resize;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/sv/index.ts\n\n\n\n\n\n\nvar Editor = /** @class */ (function () {\n    function Editor(vditor) {\n        this.composingLock = false;\n        this.element = document.createElement(\"pre\");\n        this.element.className = \"vditor-sv vditor-reset\";\n        this.element.setAttribute(\"placeholder\", vditor.options.placeholder);\n        this.element.setAttribute(\"contenteditable\", \"true\");\n        this.element.setAttribute(\"spellcheck\", \"false\");\n        this.bindEvent(vditor);\n        focusEvent(vditor, this.element);\n        blurEvent(vditor, this.element);\n        hotkeyEvent(vditor, this.element);\n        selectEvent(vditor, this.element);\n        dropEvent(vditor, this.element);\n        copyEvent(vditor, this.element, this.copy);\n        cutEvent(vditor, this.element, this.copy);\n    }\n    Editor.prototype.copy = function (event, vditor) {\n        event.stopPropagation();\n        event.preventDefault();\n        event.clipboardData.setData(\"text/plain\", getSelectText(vditor[vditor.currentMode].element));\n    };\n    Editor.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.element.addEventListener(\"paste\", function (event) {\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    document.execCommand(\"insertHTML\", false, code);\n                },\n            });\n        });\n        this.element.addEventListener(\"scroll\", function () {\n            if (vditor.preview.element.style.display !== \"block\") {\n                return;\n            }\n            var textScrollTop = _this.element.scrollTop;\n            var textHeight = _this.element.clientHeight;\n            var textScrollHeight = _this.element.scrollHeight - parseFloat(_this.element.style.paddingBottom || \"0\");\n            var preview = vditor.preview.element;\n            if ((textScrollTop / textHeight > 0.5)) {\n                preview.scrollTop = (textScrollTop + textHeight) *\n                    preview.scrollHeight / textScrollHeight - textHeight;\n            }\n            else {\n                preview.scrollTop = textScrollTop *\n                    preview.scrollHeight / textScrollHeight;\n            }\n        });\n        this.element.addEventListener(\"compositionstart\", function (event) {\n            _this.composingLock = true;\n        });\n        this.element.addEventListener(\"compositionend\", function (event) {\n            if (!(0,compatibility/* isFirefox */.vU)()) {\n                inputEvent(vditor, event);\n            }\n            _this.composingLock = false;\n        });\n        this.element.addEventListener(\"input\", function (event) {\n            if (event.inputType === \"deleteByDrag\" || event.inputType === \"insertFromDrop\") {\n                // https://github.com/Vanessa219/vditor/issues/801 编辑器内容拖拽问题\n                return;\n            }\n            if (_this.composingLock || event.data === \"‘\" || event.data === \"“\" || event.data === \"《\") {\n                return;\n            }\n            if (_this.preventInput) {\n                _this.preventInput = false;\n                processAfterRender(vditor, {\n                    enableAddUndoStack: true,\n                    enableHint: true,\n                    enableInput: true,\n                });\n                return;\n            }\n            inputEvent(vditor, event);\n        });\n        this.element.addEventListener(\"keyup\", function (event) {\n            if (event.isComposing || (0,compatibility/* isCtrl */.yl)(event)) {\n                return;\n            }\n            if ((event.key === \"Backspace\" || event.key === \"Delete\") &&\n                vditor.sv.element.innerHTML !== \"\" && vditor.sv.element.childNodes.length === 1 &&\n                vditor.sv.element.firstElementChild && vditor.sv.element.firstElementChild.tagName === \"DIV\"\n                && vditor.sv.element.firstElementChild.childElementCount === 2\n                && (vditor.sv.element.firstElementChild.textContent === \"\" || vditor.sv.element.textContent === \"\\n\")) {\n                // 为空时显示 placeholder\n                vditor.sv.element.innerHTML = \"\";\n                return;\n            }\n            if (event.key === \"Enter\") {\n                scrollCenter(vditor);\n            }\n        });\n    };\n    return Editor;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/tip/index.ts\nvar Tip = /** @class */ (function () {\n    function Tip() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-tip\";\n    }\n    Tip.prototype.show = function (text, time) {\n        var _this = this;\n        if (time === void 0) { time = 6000; }\n        this.element.className = \"vditor-tip vditor-tip--show\";\n        if (time === 0) {\n            this.element.innerHTML = \"<div class=\\\"vditor-tip__content\\\">\".concat(text, \"\\n<div class=\\\"vditor-tip__close\\\">X</div></div>\");\n            this.element.querySelector(\".vditor-tip__close\").addEventListener(\"click\", function () {\n                _this.hide();\n            });\n        }\n        else {\n            this.element.innerHTML = \"<div class=\\\"vditor-tip__content\\\">\".concat(text, \"</div>\");\n            setTimeout(function () {\n                _this.hide();\n            }, time);\n        }\n        // 需在动画结束后才能确定位置\n        this.element.removeAttribute(\"style\");\n        setTimeout(function () {\n            var rect = _this.element.getBoundingClientRect();\n            if (rect.top < 46) {\n                _this.element.style.position = \"fixed\";\n                _this.element.style.top = \"46px\";\n            }\n        }, 150);\n    };\n    Tip.prototype.hide = function () {\n        this.element.className = \"vditor-messageElementtip\";\n        this.element.innerHTML = \"\";\n    };\n    return Tip;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/ui/setPreviewMode.ts\n\n\nvar setPreviewMode = function (mode, vditor) {\n    if (vditor.options.preview.mode === mode) {\n        return;\n    }\n    vditor.options.preview.mode = mode;\n    switch (mode) {\n        case \"both\":\n            vditor.sv.element.style.display = \"block\";\n            vditor.preview.element.style.display = \"block\";\n            vditor.preview.render(vditor);\n            setCurrentToolbar(vditor.toolbar.elements, [\"both\"]);\n            break;\n        case \"editor\":\n            vditor.sv.element.style.display = \"block\";\n            vditor.preview.element.style.display = \"none\";\n            removeCurrentToolbar(vditor.toolbar.elements, [\"both\"]);\n            break;\n        default:\n            break;\n    }\n    if (vditor.devtools) {\n        vditor.devtools.renderEchart(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Both.ts\nvar Both_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Both = /** @class */ (function (_super) {\n    Both_extends(Both, _super);\n    function Both(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        if (vditor.options.preview.mode === \"both\") {\n            _this.element.children[0].classList.add(\"vditor-menu--current\");\n        }\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btnElement = _this.element.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            event.preventDefault();\n            if (vditor.currentMode !== \"sv\") {\n                return;\n            }\n            if (vditor.options.preview.mode === \"both\") {\n                setPreviewMode(\"editor\", vditor);\n            }\n            else {\n                setPreviewMode(\"both\", vditor);\n            }\n        });\n        return _this;\n    }\n    return Both;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Br.ts\nvar Br = /** @class */ (function () {\n    function Br() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-toolbar__br\";\n    }\n    return Br;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/ui/setCodeTheme.ts\nvar setCodeTheme = __webpack_require__(580);\n;// CONCATENATED MODULE: ./src/ts/toolbar/CodeTheme.ts\nvar CodeTheme_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar CodeTheme = /** @class */ (function (_super) {\n    CodeTheme_extends(CodeTheme, _super);\n    function CodeTheme(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var actionBtn = _this.element.children[0];\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\".concat(menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        var innerHTML = \"\";\n        constants/* Constants.CODE_THEME.forEach */.g.CODE_THEME.forEach(function (theme) {\n            innerHTML += \"<button>\".concat(theme, \"</button>\");\n        });\n        panelElement.innerHTML =\n            \"<div style=\\\"overflow: auto;max-height:\".concat(window.innerHeight / 2, \"px\\\">\").concat(innerHTML, \"</div>\");\n        panelElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            if (event.target.tagName === \"BUTTON\") {\n                hidePanel(vditor, [\"subToolbar\"]);\n                vditor.options.preview.hljs.style = event.target.textContent;\n                (0,setCodeTheme/* setCodeTheme */.Y)(event.target.textContent, vditor.options.cdn);\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        return _this;\n    }\n    return CodeTheme;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/ContentTheme.ts\nvar ContentTheme_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar ContentTheme = /** @class */ (function (_super) {\n    ContentTheme_extends(ContentTheme, _super);\n    function ContentTheme(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var actionBtn = _this.element.children[0];\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\".concat(menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        var innerHTML = \"\";\n        Object.keys(vditor.options.preview.theme.list).forEach(function (key) {\n            innerHTML += \"<button data-type=\\\"\".concat(key, \"\\\">\").concat(vditor.options.preview.theme.list[key], \"</button>\");\n        });\n        panelElement.innerHTML =\n            \"<div style=\\\"overflow: auto;max-height:\".concat(window.innerHeight / 2, \"px\\\">\").concat(innerHTML, \"</div>\");\n        panelElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            if (event.target.tagName === \"BUTTON\") {\n                hidePanel(vditor, [\"subToolbar\"]);\n                vditor.options.preview.theme.current = event.target.getAttribute(\"data-type\");\n                (0,setContentTheme/* setContentTheme */.Z)(vditor.options.preview.theme.current, vditor.options.preview.theme.path);\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        return _this;\n    }\n    return ContentTheme;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Counter.ts\nvar Counter = /** @class */ (function () {\n    function Counter(vditor) {\n        this.element = document.createElement(\"span\");\n        this.element.className = \"vditor-counter vditor-tooltipped vditor-tooltipped__nw\";\n        this.render(vditor, \"\");\n    }\n    Counter.prototype.render = function (vditor, mdText) {\n        var length = mdText.endsWith(\"\\n\") ? mdText.length - 1 : mdText.length;\n        if (vditor.options.counter.type === \"text\" && vditor[vditor.currentMode]) {\n            var tempElement = vditor[vditor.currentMode].element.cloneNode(true);\n            tempElement.querySelectorAll(\".vditor-wysiwyg__preview\").forEach(function (item) {\n                item.remove();\n            });\n            length = tempElement.textContent.length;\n        }\n        if (typeof vditor.options.counter.max === \"number\") {\n            if (length > vditor.options.counter.max) {\n                this.element.className = \"vditor-counter vditor-counter--error\";\n            }\n            else {\n                this.element.className = \"vditor-counter\";\n            }\n            this.element.innerHTML = \"\".concat(length, \"/\").concat(vditor.options.counter.max);\n        }\n        else {\n            this.element.innerHTML = \"\".concat(length);\n        }\n        this.element.setAttribute(\"aria-label\", vditor.options.counter.type);\n        if (vditor.options.counter.after) {\n            vditor.options.counter.after(length, {\n                enable: vditor.options.counter.enable,\n                max: vditor.options.counter.max,\n                type: vditor.options.counter.type,\n            });\n        }\n    };\n    return Counter;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Custom.ts\nvar Custom_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Custom = /** @class */ (function (_super) {\n    Custom_extends(Custom, _super);\n    function Custom(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].innerHTML = menuItem.icon;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (event.currentTarget.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            menuItem.click(event, vditor);\n        });\n        return _this;\n    }\n    return Custom;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Devtools.ts\nvar Devtools_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Devtools = /** @class */ (function (_super) {\n    Devtools_extends(Devtools, _super);\n    function Devtools(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.firstElementChild.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btnElement = _this.element.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            event.preventDefault();\n            if (btnElement.classList.contains(\"vditor-menu--current\")) {\n                btnElement.classList.remove(\"vditor-menu--current\");\n                vditor.devtools.element.style.display = \"none\";\n                setPadding(vditor);\n            }\n            else {\n                btnElement.classList.add(\"vditor-menu--current\");\n                vditor.devtools.element.style.display = \"block\";\n                setPadding(vditor);\n                vditor.devtools.renderEchart(vditor);\n            }\n        });\n        return _this;\n    }\n    return Devtools;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Divider.ts\nvar Divider = /** @class */ (function () {\n    function Divider() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-toolbar__divider\";\n    }\n    return Divider;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Emoji.ts\nvar Emoji_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\nvar Emoji = /** @class */ (function (_super) {\n    Emoji_extends(Emoji, _super);\n    function Emoji(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-panel vditor-panel--arrow\";\n        var commonEmojiHTML = \"\";\n        Object.keys(vditor.options.hint.emoji).forEach(function (key) {\n            var emojiValue = vditor.options.hint.emoji[key];\n            if (emojiValue.indexOf(\".\") > -1) {\n                commonEmojiHTML += \"<button data-value=\\\":\".concat(key, \": \\\" data-key=\\\":\").concat(key, \":\\\"><img\\ndata-value=\\\":\").concat(key, \": \\\" data-key=\\\":\").concat(key, \":\\\" class=\\\"vditor-emojis__icon\\\" src=\\\"\").concat(emojiValue, \"\\\"/></button>\");\n            }\n            else {\n                commonEmojiHTML += \"<button data-value=\\\"\".concat(emojiValue, \" \\\"\\n data-key=\\\"\").concat(key, \"\\\"><span class=\\\"vditor-emojis__icon\\\">\").concat(emojiValue, \"</span></button>\");\n            }\n        });\n        panelElement.innerHTML = \"<div class=\\\"vditor-emojis\\\" style=\\\"max-height: \".concat(vditor.options.height === \"auto\" ? \"auto\" : vditor.options.height - 80, \"px\\\">\").concat(commonEmojiHTML, \"</div><div class=\\\"vditor-emojis__tail\\\">\\n    <span class=\\\"vditor-emojis__tip\\\"></span><span>\").concat(vditor.options.hint.emojiTail || \"\", \"</span>\\n</div>\");\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, _this.element.firstElementChild, menuItem.level);\n        _this.bindEvent(vditor);\n        return _this;\n    }\n    Emoji.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.element.lastElementChild.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btnElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(event.target, \"BUTTON\");\n            if (btnElement) {\n                event.preventDefault();\n                var value = btnElement.getAttribute(\"data-value\");\n                var range = (0,selection/* getEditorRange */.zh)(vditor);\n                var html = value;\n                if (vditor.currentMode === \"wysiwyg\") {\n                    html = vditor.lute.SpinVditorDOM(value);\n                }\n                else if (vditor.currentMode === \"ir\") {\n                    html = vditor.lute.SpinVditorIRDOM(value);\n                }\n                if (value.indexOf(\":\") > -1 && vditor.currentMode !== \"sv\") {\n                    var tempElement = document.createElement(\"div\");\n                    tempElement.innerHTML = html;\n                    html = tempElement.firstElementChild.firstElementChild.outerHTML + \" \";\n                    (0,selection/* insertHTML */.oC)(html, vditor);\n                }\n                else {\n                    range.extractContents();\n                    range.insertNode(document.createTextNode(value));\n                    if (!(0,hasClosest/* hasClosestBlock */.F9)(range.startContainer)) {\n                        modifyPre(vditor, range);\n                    }\n                }\n                range.collapse(false);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                _this.element.lastElementChild.style.display = \"none\";\n                execAfterRender(vditor);\n            }\n        });\n        this.element.lastElementChild.addEventListener(\"mouseover\", function (event) {\n            var btnElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(event.target, \"BUTTON\");\n            if (btnElement) {\n                _this.element.querySelector(\".vditor-emojis__tip\").innerHTML = btnElement.getAttribute(\"data-key\");\n            }\n        });\n    };\n    return Emoji;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/export/index.ts\n\n\nvar download = function (vditor, content, filename) {\n    var aElement = document.createElement(\"a\");\n    if (\"download\" in aElement) {\n        aElement.download = filename;\n        aElement.style.display = \"none\";\n        aElement.href = URL.createObjectURL(new Blob([content]));\n        document.body.appendChild(aElement);\n        aElement.click();\n        aElement.remove();\n    }\n    else {\n        vditor.tip.show(window.VditorI18n.downloadTip, 0);\n    }\n};\nvar exportMarkdown = function (vditor) {\n    var content = getMarkdown(vditor);\n    download(vditor, content, content.substr(0, 10) + \".md\");\n};\nvar exportPDF = function (vditor) {\n    vditor.tip.show(window.VditorI18n.generate, 3800);\n    var iframe = document.querySelector(\"#vditorExportIframe\");\n    iframe.contentDocument.open();\n    iframe.contentDocument.write(\"<link rel=\\\"stylesheet\\\" href=\\\"\".concat(vditor.options.cdn, \"/dist/index.css\\\"/>\\n<script src=\\\"\").concat(vditor.options.cdn, \"/dist/method.min.js\\\"></script>\\n<div id=\\\"preview\\\" style=\\\"width: 800px\\\"></div>\\n<script>\\nwindow.addEventListener(\\\"message\\\", (e) => {\\n  if(!e.data) {\\n    return;\\n  }\\n  Vditor.preview(document.getElementById('preview'), e.data, {\\n    cdn: \\\"\").concat(vditor.options.cdn, \"\\\",\\n    markdown: {\\n      theme: \").concat(JSON.stringify(vditor.options.preview.theme), \"\\n    },\\n    hljs: {\\n      style: \\\"\").concat(vditor.options.preview.hljs.style, \"\\\"\\n    }\\n  });\\n  setTimeout(() => {\\n        window.print();\\n    }, 3600);\\n}, false);\\n</script>\"));\n    iframe.contentDocument.close();\n    setTimeout(function () {\n        iframe.contentWindow.postMessage(getMarkdown(vditor), \"*\");\n    }, 200);\n};\nvar exportHTML = function (vditor) {\n    var content = getHTML(vditor);\n    var html = \"<html><head><link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"\".concat(vditor.options.cdn, \"/dist/index.css\\\"/>\\n<script src=\\\"\").concat(vditor.options.cdn, \"/dist/js/i18n/\").concat(vditor.options.lang, \".js\\\"></script>\\n<script src=\\\"\").concat(vditor.options.cdn, \"/dist/method.min.js\\\"></script></head>\\n<body><div class=\\\"vditor-reset\\\" id=\\\"preview\\\">\").concat(content, \"</div>\\n<script>\\n    const previewElement = document.getElementById('preview')\\n    Vditor.setContentTheme('\").concat(vditor.options.preview.theme.current, \"', '\").concat(vditor.options.preview.theme.path, \"');\\n    Vditor.codeRender(previewElement);\\n    Vditor.highlightRender(\").concat(JSON.stringify(vditor.options.preview.hljs), \", previewElement, '\").concat(vditor.options.cdn, \"');\\n    Vditor.mathRender(previewElement, {\\n        cdn: '\").concat(vditor.options.cdn, \"',\\n        math: \").concat(JSON.stringify(vditor.options.preview.math), \",\\n    });\\n    Vditor.mermaidRender(previewElement, '\").concat(vditor.options.cdn, \"', '\").concat(vditor.options.theme, \"');\\n    Vditor.SMILESRender(previewElement, '\").concat(vditor.options.cdn, \"', '\").concat(vditor.options.theme, \"');\\n    Vditor.markmapRender(previewElement, '\").concat(vditor.options.cdn, \"');\\n    Vditor.flowchartRender(previewElement, '\").concat(vditor.options.cdn, \"');\\n    Vditor.graphvizRender(previewElement, '\").concat(vditor.options.cdn, \"');\\n    Vditor.chartRender(previewElement, '\").concat(vditor.options.cdn, \"', '\").concat(vditor.options.theme, \"');\\n    Vditor.mindmapRender(previewElement, '\").concat(vditor.options.cdn, \"', '\").concat(vditor.options.theme, \"');\\n    Vditor.abcRender(previewElement, '\").concat(vditor.options.cdn, \"');\\n    \").concat(vditor.options.preview.render.media.enable ? 'Vditor.mediaRender(previewElement);' : \"\", \"\\n    Vditor.speechRender(previewElement);\\n</script>\\n<script src=\\\"\").concat(vditor.options.cdn, \"/dist/js/icons/\").concat(vditor.options.icon, \".js\\\"></script></body></html>\");\n    download(vditor, html, content.substr(0, 10) + \".html\");\n};\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Export.ts\nvar Export_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Export = /** @class */ (function (_super) {\n    Export_extends(Export, _super);\n    function Export(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var actionBtn = _this.element.children[0];\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\".concat(menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        panelElement.innerHTML = \"<button data-type=\\\"markdown\\\">Markdown</button>\\n<button data-type=\\\"pdf\\\">PDF</button>\\n<button data-type=\\\"html\\\">HTML</button>\";\n        panelElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btnElement = event.target;\n            if (btnElement.tagName === \"BUTTON\") {\n                switch (btnElement.getAttribute(\"data-type\")) {\n                    case \"markdown\":\n                        exportMarkdown(vditor);\n                        break;\n                    case \"pdf\":\n                        exportPDF(vditor);\n                        break;\n                    case \"html\":\n                        exportHTML(vditor);\n                        break;\n                    default:\n                        break;\n                }\n                hidePanel(vditor, [\"subToolbar\"]);\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        return _this;\n    }\n    return Export;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Fullscreen.ts\nvar Fullscreen_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Fullscreen = /** @class */ (function (_super) {\n    Fullscreen_extends(Fullscreen, _super);\n    function Fullscreen(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this._bindEvent(vditor, menuItem);\n        return _this;\n    }\n    Fullscreen.prototype._bindEvent = function (vditor, menuItem) {\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (vditor.element.className.includes(\"vditor--fullscreen\")) {\n                if (!menuItem.level) {\n                    this.innerHTML = menuItem.icon;\n                }\n                vditor.element.style.zIndex = \"\";\n                document.body.style.overflow = \"\";\n                vditor.element.classList.remove(\"vditor--fullscreen\");\n                Object.keys(vditor.toolbar.elements).forEach(function (key) {\n                    var svgElement = vditor.toolbar.elements[key].firstChild;\n                    if (svgElement) {\n                        svgElement.className = svgElement.className.replace(\"__s\", \"__n\");\n                        vditor.options.toolbar.forEach(function (item) {\n                            if (typeof item !== \"string\" && item.tipPosition && item.name === svgElement.dataset.type) {\n                                svgElement.className = \"vditor-tooltipped vditor-tooltipped__\".concat(item.tipPosition);\n                            }\n                        });\n                    }\n                });\n                if (vditor.counter) {\n                    vditor.counter.element.className = vditor.counter.element.className.replace(\"__s\", \"__n\");\n                }\n            }\n            else {\n                if (!menuItem.level) {\n                    this.innerHTML = '<svg><use xlink:href=\"#vditor-icon-contract\"></use></svg>';\n                }\n                vditor.element.style.zIndex = vditor.options.fullscreen.index.toString();\n                document.body.style.overflow = \"hidden\";\n                vditor.element.classList.add(\"vditor--fullscreen\");\n                Object.keys(vditor.toolbar.elements).forEach(function (key) {\n                    var svgElement = vditor.toolbar.elements[key].firstChild;\n                    if (svgElement) {\n                        svgElement.className = svgElement.className.replace(\"__n\", \"__s\");\n                    }\n                });\n                if (vditor.counter) {\n                    vditor.counter.element.className = vditor.counter.element.className.replace(\"__n\", \"__s\");\n                }\n            }\n            if (vditor.devtools) {\n                vditor.devtools.renderEchart(vditor);\n            }\n            if (menuItem.click) {\n                menuItem.click(event, vditor);\n            }\n            setPadding(vditor);\n            setTypewriterPosition(vditor);\n        });\n    };\n    return Fullscreen;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Headings.ts\nvar Headings_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\nvar Headings = /** @class */ (function (_super) {\n    Headings_extends(Headings, _super);\n    function Headings(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint vditor-panel--arrow\";\n        panelElement.innerHTML = \"<button data-tag=\\\"h1\\\" data-value=\\\"# \\\">\".concat(window.VditorI18n.heading1, \" \").concat((0,compatibility/* updateHotkeyTip */.ns)(\"&lt;⌥⌘1>\"), \"</button>\\n<button data-tag=\\\"h2\\\" data-value=\\\"## \\\">\").concat(window.VditorI18n.heading2, \" &lt;\").concat((0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘2\"), \"></button>\\n<button data-tag=\\\"h3\\\" data-value=\\\"### \\\">\").concat(window.VditorI18n.heading3, \" &lt;\").concat((0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘3\"), \"></button>\\n<button data-tag=\\\"h4\\\" data-value=\\\"#### \\\">\").concat(window.VditorI18n.heading4, \" &lt;\").concat((0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘4\"), \"></button>\\n<button data-tag=\\\"h5\\\" data-value=\\\"##### \\\">\").concat(window.VditorI18n.heading5, \" &lt;\").concat((0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘5\"), \"></button>\\n<button data-tag=\\\"h6\\\" data-value=\\\"###### \\\">\").concat(window.VditorI18n.heading6, \" &lt;\").concat((0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘6\"), \"></button>\");\n        _this.element.appendChild(panelElement);\n        _this._bindEvent(vditor, panelElement);\n        return _this;\n    }\n    Headings.prototype._bindEvent = function (vditor, panelElement) {\n        var actionBtn = this.element.children[0];\n        actionBtn.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            // https://github.com/Vanessa219/vditor/issues/1391\n            clearTimeout(vditor.wysiwyg.afterRenderTimeoutId);\n            clearTimeout(vditor.ir.processTimeoutId);\n            clearTimeout(vditor.sv.processTimeoutId);\n            if (actionBtn.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            actionBtn.blur();\n            if (actionBtn.classList.contains(\"vditor-menu--current\")) {\n                if (vditor.currentMode === \"wysiwyg\") {\n                    removeHeading(vditor);\n                    afterRenderEvent(vditor);\n                }\n                else if (vditor.currentMode === \"ir\") {\n                    process_processHeading(vditor, \"\");\n                }\n                actionBtn.classList.remove(\"vditor-menu--current\");\n            }\n            else {\n                hidePanel(vditor, [\"subToolbar\"]);\n                panelElement.style.display = \"block\";\n            }\n        });\n        for (var i = 0; i < 6; i++) {\n            panelElement.children.item(i).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n                event.preventDefault();\n                if (vditor.currentMode === \"wysiwyg\") {\n                    setHeading(vditor, event.target.getAttribute(\"data-tag\"));\n                    afterRenderEvent(vditor);\n                    actionBtn.classList.add(\"vditor-menu--current\");\n                }\n                else if (vditor.currentMode === \"ir\") {\n                    process_processHeading(vditor, event.target.getAttribute(\"data-value\"));\n                    actionBtn.classList.add(\"vditor-menu--current\");\n                }\n                else {\n                    processHeading(vditor, event.target.getAttribute(\"data-value\"));\n                }\n                panelElement.style.display = \"none\";\n            });\n        }\n    };\n    return Headings;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Help.ts\nvar Help_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar Help = /** @class */ (function (_super) {\n    Help_extends(Help, _super);\n    function Help(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            vditor.tip.show(\"<div style=\\\"margin-bottom:14px;font-size: 14px;line-height: 22px;min-width:300px;max-width: 360px;display: flex;\\\">\\n<div style=\\\"margin-top: 14px;flex: 1\\\">\\n    <div>Markdown \\u4F7F\\u7528\\u6307\\u5357</div>\\n    <ul style=\\\"list-style: none\\\">\\n        <li><a href=\\\"https://ld246.com/article/1583308420519\\\" target=\\\"_blank\\\">\\u8BED\\u6CD5\\u901F\\u67E5\\u624B\\u518C</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1583129520165\\\" target=\\\"_blank\\\">\\u57FA\\u7840\\u8BED\\u6CD5</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1583305480675\\\" target=\\\"_blank\\\">\\u6269\\u5C55\\u8BED\\u6CD5</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1582778815353\\\" target=\\\"_blank\\\">\\u952E\\u76D8\\u5FEB\\u6377\\u952E</a></li>\\n    </ul>\\n</div>\\n<div style=\\\"margin-top: 14px;flex: 1\\\">\\n    <div>Vditor \\u652F\\u6301</div>\\n    <ul style=\\\"list-style: none\\\">\\n        <li><a href=\\\"https://github.com/Vanessa219/vditor/issues\\\" target=\\\"_blank\\\">Issues</a></li>\\n        <li><a href=\\\"https://ld246.com/tag/vditor\\\" target=\\\"_blank\\\">\\u5B98\\u65B9\\u8BA8\\u8BBA\\u533A</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1549638745630\\\" target=\\\"_blank\\\">\\u5F00\\u53D1\\u624B\\u518C</a></li>\\n        <li><a href=\\\"https://ld246.com/guide/markdown\\\" target=\\\"_blank\\\">\\u6F14\\u793A\\u5730\\u5740</a></li>\\n    </ul>\\n</div></div>\", 0);\n        });\n        return _this;\n    }\n    return Help;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Indent.ts\nvar Indent_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar Indent = /** @class */ (function (_super) {\n    Indent_extends(Indent, _super);\n    function Indent(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n            if (liElement) {\n                listIndent(vditor, liElement, range);\n            }\n        });\n        return _this;\n    }\n    return Indent;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Info.ts\nvar Info_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Info = /** @class */ (function (_super) {\n    Info_extends(Info, _super);\n    function Info(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            vditor.tip.show(\"<div style=\\\"max-width: 520px; font-size: 14px;line-height: 22px;margin-bottom: 14px;\\\">\\n<p style=\\\"text-align: center;margin: 14px 0\\\">\\n    <em>\\u4E0B\\u4E00\\u4EE3\\u7684 Markdown \\u7F16\\u8F91\\u5668\\uFF0C\\u4E3A\\u672A\\u6765\\u800C\\u6784\\u5EFA</em>\\n</p>\\n<div style=\\\"display: flex;margin-bottom: 14px;flex-wrap: wrap;align-items: center\\\">\\n    <img src=\\\"https://unpkg.com/vditor/dist/images/logo.png\\\" style=\\\"margin: 0 auto;height: 68px\\\"/>\\n    <div>&nbsp;&nbsp;</div>\\n    <div style=\\\"flex: 1;min-width: 250px\\\">\\n        Vditor \\u662F\\u4E00\\u6B3E\\u6D4F\\u89C8\\u5668\\u7AEF\\u7684 Markdown \\u7F16\\u8F91\\u5668\\uFF0C\\u652F\\u6301\\u6240\\u89C1\\u5373\\u6240\\u5F97\\u3001\\u5373\\u65F6\\u6E32\\u67D3\\uFF08\\u7C7B\\u4F3C Typora\\uFF09\\u548C\\u5206\\u5C4F\\u9884\\u89C8\\u6A21\\u5F0F\\u3002\\n        \\u5B83\\u4F7F\\u7528 TypeScript \\u5B9E\\u73B0\\uFF0C\\u652F\\u6301\\u539F\\u751F JavaScript \\u4EE5\\u53CA Vue\\u3001React\\u3001Angular \\u548C Svelte \\u7B49\\u6846\\u67B6\\u3002\\n    </div>\\n</div>\\n<div style=\\\"display: flex;flex-wrap: wrap;\\\">\\n    <ul style=\\\"list-style: none;flex: 1;min-width:148px\\\">\\n        <li>\\n        \\u9879\\u76EE\\u5730\\u5740\\uFF1A<a href=\\\"https://b3log.org/vditor\\\" target=\\\"_blank\\\">b3log.org/vditor</a>\\n        </li>\\n        <li>\\n        \\u5F00\\u6E90\\u534F\\u8BAE\\uFF1AMIT\\n        </li>\\n    </ul>\\n    <ul style=\\\"list-style: none;margin-right: 18px\\\">\\n        <li>\\n        \\u7EC4\\u4EF6\\u7248\\u672C\\uFF1AVditor v\".concat(constants/* VDITOR_VERSION */.H, \" / Lute v\").concat(Lute.Version, \"\\n        </li>\\n        <li>\\n        \\u8D5E\\u52A9\\u6350\\u8D60\\uFF1A<a href=\\\"https://ld246.com/sponsor\\\" target=\\\"_blank\\\">https://ld246.com/sponsor</a>\\n        </li>\\n    </ul>\\n</div>\\n</div>\"), 0);\n        });\n        return _this;\n    }\n    return Info;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/InsertAfter.ts\nvar InsertAfter_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar InsertAfter = /** @class */ (function (_super) {\n    InsertAfter_extends(InsertAfter, _super);\n    function InsertAfter(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            insertEmptyBlock(vditor, \"afterend\");\n        });\n        return _this;\n    }\n    return InsertAfter;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/InsertBefore.ts\nvar InsertBefore_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar InsertBefore = /** @class */ (function (_super) {\n    InsertBefore_extends(InsertBefore, _super);\n    function InsertBefore(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            insertEmptyBlock(vditor, \"beforebegin\");\n        });\n        return _this;\n    }\n    return InsertBefore;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Outdent.ts\nvar Outdent_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar Outdent = /** @class */ (function (_super) {\n    Outdent_extends(Outdent, _super);\n    function Outdent(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n            if (liElement) {\n                listOutdent(vditor, liElement, range, liElement.parentElement);\n            }\n        });\n        return _this;\n    }\n    return Outdent;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Outline.ts\nvar Outline_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Outline_Outline = /** @class */ (function (_super) {\n    Outline_extends(Outline, _super);\n    function Outline(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        if (vditor.options.outline) {\n            _this.element.firstElementChild.classList.add(\"vditor-menu--current\");\n        }\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            var btnElement = vditor.toolbar.elements.outline.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            vditor.options.outline.enable = !_this.element.firstElementChild.classList.contains(\"vditor-menu--current\");\n            vditor.outline.toggle(vditor, vditor.options.outline.enable);\n        });\n        return _this;\n    }\n    return Outline;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Preview.ts\nvar Preview_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar Preview_Preview = /** @class */ (function (_super) {\n    Preview_extends(Preview, _super);\n    function Preview(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this._bindEvent(vditor);\n        return _this;\n    }\n    Preview.prototype._bindEvent = function (vditor) {\n        var _this = this;\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            var btnElement = _this.element.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            var toolbars = constants/* Constants.EDIT_TOOLBARS.concat */.g.EDIT_TOOLBARS.concat([\"both\", \"edit-mode\", \"devtools\"]);\n            if (btnElement.classList.contains(\"vditor-menu--current\")) {\n                btnElement.classList.remove(\"vditor-menu--current\");\n                if (vditor.currentMode === \"sv\") {\n                    vditor.sv.element.style.display = \"block\";\n                    if (vditor.options.preview.mode === \"both\") {\n                        vditor.preview.element.style.display = \"block\";\n                    }\n                    else {\n                        vditor.preview.element.style.display = \"none\";\n                    }\n                }\n                else {\n                    vditor[vditor.currentMode].element.parentElement.style.display = \"block\";\n                    vditor.preview.element.style.display = \"none\";\n                }\n                enableToolbar(vditor.toolbar.elements, toolbars);\n                vditor.outline.render(vditor);\n            }\n            else {\n                disableToolbar(vditor.toolbar.elements, toolbars);\n                vditor.preview.element.style.display = \"block\";\n                if (vditor.currentMode === \"sv\") {\n                    vditor.sv.element.style.display = \"none\";\n                }\n                else {\n                    vditor[vditor.currentMode].element.parentElement.style.display = \"none\";\n                }\n                vditor.preview.render(vditor);\n                btnElement.classList.add(\"vditor-menu--current\");\n                hidePanel(vditor, [\"subToolbar\", \"hint\", \"popover\"]);\n                setTimeout(function () {\n                    vditor.outline.render(vditor);\n                }, vditor.options.preview.delay + 10);\n            }\n            setPadding(vditor);\n        });\n    };\n    return Preview;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/util/RecordMedia.ts\nvar RecordMedia = /** @class */ (function () {\n    function RecordMedia(e) {\n        this.SAMPLE_RATE = 5000; // 44100 suggested by demos;\n        this.isRecording = false;\n        this.readyFlag = false;\n        this.leftChannel = [];\n        this.rightChannel = [];\n        this.recordingLength = 0;\n        var context;\n        // creates the audio context\n        if (typeof AudioContext !== \"undefined\") {\n            context = new AudioContext();\n        }\n        else if (webkitAudioContext) {\n            context = new webkitAudioContext();\n        }\n        else {\n            return;\n        }\n        this.DEFAULT_SAMPLE_RATE = context.sampleRate;\n        // creates a gain node\n        var volume = context.createGain();\n        // creates an audio node from the microphone incoming stream\n        var audioInput = context.createMediaStreamSource(e);\n        // connect the stream to the gain node\n        audioInput.connect(volume);\n        /* From the spec: The size of the buffer controls how frequently the audioprocess event is\n         dispatched and how many sample-frames need to be processed each call.\n         Lower values for buffer size will result in a lower (better) latency.\n         Higher values will be necessary to avoid audio breakup and glitches */\n        this.recorder = context.createScriptProcessor(2048, 2, 1);\n        // The onaudioprocess event needs to be defined externally, so make sure it is not set:\n        this.recorder.onaudioprocess = null;\n        // we connect the recorder\n        volume.connect(this.recorder);\n        this.recorder.connect(context.destination);\n        this.readyFlag = true;\n    }\n    // Publicly accessible methods:\n    RecordMedia.prototype.cloneChannelData = function (leftChannelData, rightChannelData) {\n        this.leftChannel.push(new Float32Array(leftChannelData));\n        this.rightChannel.push(new Float32Array(rightChannelData));\n        this.recordingLength += 2048;\n    };\n    RecordMedia.prototype.startRecordingNewWavFile = function () {\n        if (this.readyFlag) {\n            this.isRecording = true;\n            this.leftChannel.length = this.rightChannel.length = 0;\n            this.recordingLength = 0;\n        }\n    };\n    RecordMedia.prototype.stopRecording = function () {\n        this.isRecording = false;\n    };\n    RecordMedia.prototype.buildWavFileBlob = function () {\n        // we flat the left and right channels down\n        var leftBuffer = this.mergeBuffers(this.leftChannel);\n        var rightBuffer = this.mergeBuffers(this.rightChannel);\n        // Interleave the left and right channels together:\n        var interleaved = new Float32Array(leftBuffer.length);\n        for (var i = 0; i < leftBuffer.length; ++i) {\n            interleaved[i] = 0.5 * (leftBuffer[i] + rightBuffer[i]);\n        }\n        // Downsample the audio data if necessary:\n        if (this.DEFAULT_SAMPLE_RATE > this.SAMPLE_RATE) {\n            interleaved = this.downSampleBuffer(interleaved, this.SAMPLE_RATE);\n        }\n        var totalByteCount = (44 + interleaved.length * 2);\n        var buffer = new ArrayBuffer(totalByteCount);\n        var view = new DataView(buffer);\n        // Build the RIFF chunk descriptor:\n        this.writeUTFBytes(view, 0, \"RIFF\");\n        view.setUint32(4, totalByteCount, true);\n        this.writeUTFBytes(view, 8, \"WAVE\");\n        // Build the FMT sub-chunk:\n        this.writeUTFBytes(view, 12, \"fmt \"); // subchunk1 ID is format\n        view.setUint32(16, 16, true); // The sub-chunk size is 16.\n        view.setUint16(20, 1, true); // The audio format is 1.\n        view.setUint16(22, 1, true); // Number of interleaved channels.\n        view.setUint32(24, this.SAMPLE_RATE, true); // Sample rate.\n        view.setUint32(28, this.SAMPLE_RATE * 2, true); // Byte rate.\n        view.setUint16(32, 2, true); // Block align\n        view.setUint16(34, 16, true); // Bits per sample.\n        // Build the data sub-chunk:\n        var subChunk2ByteCount = interleaved.length * 2;\n        this.writeUTFBytes(view, 36, \"data\");\n        view.setUint32(40, subChunk2ByteCount, true);\n        // Write the PCM samples to the view:\n        var lng = interleaved.length;\n        var index = 44;\n        var volume = 1;\n        for (var j = 0; j < lng; j++) {\n            view.setInt16(index, interleaved[j] * (0x7FFF * volume), true);\n            index += 2;\n        }\n        return new Blob([view], { type: \"audio/wav\" });\n    };\n    RecordMedia.prototype.downSampleBuffer = function (buffer, rate) {\n        if (rate === this.DEFAULT_SAMPLE_RATE) {\n            return buffer;\n        }\n        if (rate > this.DEFAULT_SAMPLE_RATE) {\n            // throw \"downsampling rate show be smaller than original sample rate\";\n            return buffer;\n        }\n        var sampleRateRatio = this.DEFAULT_SAMPLE_RATE / rate;\n        var newLength = Math.round(buffer.length / sampleRateRatio);\n        var result = new Float32Array(newLength);\n        var offsetResult = 0;\n        var offsetBuffer = 0;\n        while (offsetResult < result.length) {\n            var nextOffsetBuffer = Math.round((offsetResult + 1) * sampleRateRatio);\n            var accum = 0;\n            var count = 0;\n            for (var i = offsetBuffer; i < nextOffsetBuffer && i < buffer.length; i++) {\n                accum += buffer[i];\n                count++;\n            }\n            result[offsetResult] = accum / count;\n            offsetResult++;\n            offsetBuffer = nextOffsetBuffer;\n        }\n        return result;\n    };\n    RecordMedia.prototype.mergeBuffers = function (desiredChannelBuffer) {\n        var result = new Float32Array(this.recordingLength);\n        var offset = 0;\n        var lng = desiredChannelBuffer.length;\n        for (var i = 0; i < lng; ++i) {\n            var buffer = desiredChannelBuffer[i];\n            result.set(buffer, offset);\n            offset += buffer.length;\n        }\n        return result;\n    };\n    RecordMedia.prototype.writeUTFBytes = function (view, offset, value) {\n        var lng = value.length;\n        for (var i = 0; i < lng; i++) {\n            view.setUint8(offset + i, value.charCodeAt(i));\n        }\n    };\n    return RecordMedia;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Record.ts\nvar Record_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar Record = /** @class */ (function (_super) {\n    Record_extends(Record, _super);\n    function Record(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this._bindEvent(vditor);\n        return _this;\n    }\n    Record.prototype._bindEvent = function (vditor) {\n        var _this = this;\n        var mediaRecorder;\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            var editorElement = vditor[vditor.currentMode].element;\n            if (!mediaRecorder) {\n                navigator.mediaDevices.getUserMedia({ audio: true }).then(function (mediaStream) {\n                    mediaRecorder = new RecordMedia(mediaStream);\n                    mediaRecorder.recorder.onaudioprocess = function (e) {\n                        // Do nothing if not recording:\n                        if (!mediaRecorder.isRecording) {\n                            return;\n                        }\n                        // Copy the data from the input buffers;\n                        var left = e.inputBuffer.getChannelData(0);\n                        var right = e.inputBuffer.getChannelData(1);\n                        mediaRecorder.cloneChannelData(left, right);\n                    };\n                    mediaRecorder.startRecordingNewWavFile();\n                    vditor.tip.show(window.VditorI18n.recording);\n                    editorElement.setAttribute(\"contenteditable\", \"false\");\n                    _this.element.children[0].classList.add(\"vditor-menu--current\");\n                }).catch(function () {\n                    vditor.tip.show(window.VditorI18n[\"record-tip\"]);\n                });\n                return;\n            }\n            if (mediaRecorder.isRecording) {\n                mediaRecorder.stopRecording();\n                vditor.tip.hide();\n                var file = new File([mediaRecorder.buildWavFileBlob()], \"record\".concat((new Date()).getTime(), \".wav\"), { type: \"video/webm\" });\n                uploadFiles(vditor, [file]);\n                _this.element.children[0].classList.remove(\"vditor-menu--current\");\n            }\n            else {\n                vditor.tip.show(window.VditorI18n.recording);\n                editorElement.setAttribute(\"contenteditable\", \"false\");\n                mediaRecorder.startRecordingNewWavFile();\n                _this.element.children[0].classList.add(\"vditor-menu--current\");\n            }\n        });\n    };\n    return Record;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Redo.ts\nvar Redo_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Redo = /** @class */ (function (_super) {\n    Redo_extends(Redo, _super);\n    function Redo(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        disableToolbar({ redo: _this.element }, [\"redo\"]);\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            vditor.undo.redo(vditor);\n        });\n        return _this;\n    }\n    return Redo;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Undo.ts\nvar Undo_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Undo = /** @class */ (function (_super) {\n    Undo_extends(Undo, _super);\n    function Undo(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        disableToolbar({ undo: _this.element }, [\"undo\"]);\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            vditor.undo.undo(vditor);\n        });\n        return _this;\n    }\n    return Undo;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Upload.ts\nvar Upload_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Upload_Upload = /** @class */ (function (_super) {\n    Upload_extends(Upload, _super);\n    function Upload(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var inputHTML = '<input type=\"file\"';\n        if (vditor.options.upload.multiple) {\n            inputHTML += ' multiple=\"multiple\"';\n        }\n        if (vditor.options.upload.accept) {\n            inputHTML += \" accept=\\\"\".concat(vditor.options.upload.accept, \"\\\"\");\n        }\n        _this.element.children[0].innerHTML = \"\".concat((menuItem.icon || '<svg><use xlink:href=\"#vditor-icon-upload\"></use></svg>')).concat(inputHTML, \">\");\n        _this._bindEvent(vditor);\n        return _this;\n    }\n    Upload.prototype._bindEvent = function (vditor) {\n        var _this = this;\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                event.stopPropagation();\n                event.preventDefault();\n                return;\n            }\n        });\n        this.element.querySelector(\"input\").addEventListener(\"change\", function (event) {\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                event.stopPropagation();\n                event.preventDefault();\n                return;\n            }\n            if (event.target.files.length === 0) {\n                return;\n            }\n            uploadFiles(vditor, event.target.files, event.target);\n        });\n    };\n    return Upload;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(vditor) {\n        var _this = this;\n        var options = vditor.options;\n        this.elements = {};\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-toolbar\";\n        options.toolbar.forEach(function (menuItem, i) {\n            var itemElement = _this.genItem(vditor, menuItem, i);\n            _this.element.appendChild(itemElement);\n            if (menuItem.toolbar) {\n                var panelElement_1 = document.createElement(\"div\");\n                panelElement_1.className = \"vditor-hint vditor-panel--arrow\";\n                panelElement_1.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n                    panelElement_1.style.display = \"none\";\n                });\n                menuItem.toolbar.forEach(function (subMenuItem, subI) {\n                    subMenuItem.level = 2;\n                    panelElement_1.appendChild(_this.genItem(vditor, subMenuItem, i + subI));\n                });\n                itemElement.appendChild(panelElement_1);\n                toggleSubMenu(vditor, panelElement_1, itemElement.children[0], 2);\n            }\n        });\n        if (vditor.options.toolbarConfig.hide) {\n            this.element.classList.add(\"vditor-toolbar--hide\");\n        }\n        if (vditor.options.toolbarConfig.pin) {\n            this.element.classList.add(\"vditor-toolbar--pin\");\n        }\n        if (vditor.options.counter.enable) {\n            vditor.counter = new Counter(vditor);\n            this.element.appendChild(vditor.counter.element);\n        }\n    }\n    Toolbar.prototype.updateConfig = function (vditor, options) {\n        vditor.options.toolbarConfig = Object.assign({\n            hide: false,\n            pin: false,\n        }, options);\n        if (vditor.options.toolbarConfig.hide) {\n            this.element.classList.add(\"vditor-toolbar--hide\");\n        }\n        else {\n            this.element.classList.remove(\"vditor-toolbar--hide\");\n        }\n        if (vditor.options.toolbarConfig.pin) {\n            this.element.classList.add(\"vditor-toolbar--pin\");\n        }\n        else {\n            this.element.classList.remove(\"vditor-toolbar--pin\");\n        }\n    };\n    Toolbar.prototype.genItem = function (vditor, menuItem, index) {\n        var menuItemObj;\n        switch (menuItem.name) {\n            case \"bold\":\n            case \"italic\":\n            case \"more\":\n            case \"strike\":\n            case \"line\":\n            case \"quote\":\n            case \"list\":\n            case \"ordered-list\":\n            case \"check\":\n            case \"code\":\n            case \"inline-code\":\n            case \"link\":\n            case \"table\":\n                menuItemObj = new MenuItem(vditor, menuItem);\n                break;\n            case \"emoji\":\n                menuItemObj = new Emoji(vditor, menuItem);\n                break;\n            case \"headings\":\n                menuItemObj = new Headings(vditor, menuItem);\n                break;\n            case \"|\":\n                menuItemObj = new Divider();\n                break;\n            case \"br\":\n                menuItemObj = new Br();\n                break;\n            case \"undo\":\n                menuItemObj = new Undo(vditor, menuItem);\n                break;\n            case \"redo\":\n                menuItemObj = new Redo(vditor, menuItem);\n                break;\n            case \"help\":\n                menuItemObj = new Help(vditor, menuItem);\n                break;\n            case \"both\":\n                menuItemObj = new Both(vditor, menuItem);\n                break;\n            case \"preview\":\n                menuItemObj = new Preview_Preview(vditor, menuItem);\n                break;\n            case \"fullscreen\":\n                menuItemObj = new Fullscreen(vditor, menuItem);\n                break;\n            case \"upload\":\n                menuItemObj = new Upload_Upload(vditor, menuItem);\n                break;\n            case \"record\":\n                menuItemObj = new Record(vditor, menuItem);\n                break;\n            case \"info\":\n                menuItemObj = new Info(vditor, menuItem);\n                break;\n            case \"edit-mode\":\n                menuItemObj = new EditMode(vditor, menuItem);\n                break;\n            case \"devtools\":\n                menuItemObj = new Devtools(vditor, menuItem);\n                break;\n            case \"outdent\":\n                menuItemObj = new Outdent(vditor, menuItem);\n                break;\n            case \"indent\":\n                menuItemObj = new Indent(vditor, menuItem);\n                break;\n            case \"outline\":\n                menuItemObj = new Outline_Outline(vditor, menuItem);\n                break;\n            case \"insert-after\":\n                menuItemObj = new InsertAfter(vditor, menuItem);\n                break;\n            case \"insert-before\":\n                menuItemObj = new InsertBefore(vditor, menuItem);\n                break;\n            case \"code-theme\":\n                menuItemObj = new CodeTheme(vditor, menuItem);\n                break;\n            case \"content-theme\":\n                menuItemObj = new ContentTheme(vditor, menuItem);\n                break;\n            case \"export\":\n                menuItemObj = new Export(vditor, menuItem);\n                break;\n            default:\n                menuItemObj = new Custom(vditor, menuItem);\n                break;\n        }\n        if (!menuItemObj) {\n            return;\n        }\n        var key = menuItem.name;\n        if (key === \"br\" || key === \"|\") {\n            key = key + index;\n        }\n        this.elements[key] = menuItemObj.element;\n        return menuItemObj.element;\n    };\n    return Toolbar;\n}());\n\n\n// EXTERNAL MODULE: ./node_modules/.pnpm/diff-match-patch@1.0.5/node_modules/diff-match-patch/index.js\nvar diff_match_patch = __webpack_require__(173);\n;// CONCATENATED MODULE: ./src/ts/undo/index.ts\n\n\n\n\n\n\n\n\n\nvar undo_Undo = /** @class */ (function () {\n    function Undo() {\n        this.stackSize = 50;\n        this.resetStack();\n        // @ts-ignore\n        this.dmp = new diff_match_patch();\n    }\n    Undo.prototype.clearStack = function (vditor) {\n        this.resetStack();\n        this.resetIcon(vditor);\n    };\n    Undo.prototype.resetIcon = function (vditor) {\n        if (!vditor.toolbar) {\n            return;\n        }\n        if (this[vditor.currentMode].undoStack.length > 1) {\n            enableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        if (this[vditor.currentMode].redoStack.length !== 0) {\n            enableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n    };\n    Undo.prototype.undo = function (vditor) {\n        if (vditor[vditor.currentMode].element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        if (this[vditor.currentMode].undoStack.length < 2) {\n            return;\n        }\n        var state = this[vditor.currentMode].undoStack.pop();\n        if (!state) {\n            return;\n        }\n        this[vditor.currentMode].redoStack.push(state);\n        this.renderDiff(state, vditor);\n        this[vditor.currentMode].hasUndo = true;\n        // undo 操作后，需要关闭 hint\n        hidePanel(vditor, [\"hint\"]);\n    };\n    Undo.prototype.redo = function (vditor) {\n        if (vditor[vditor.currentMode].element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        var state = this[vditor.currentMode].redoStack.pop();\n        if (!state) {\n            return;\n        }\n        this[vditor.currentMode].undoStack.push(state);\n        this.renderDiff(state, vditor, true);\n    };\n    Undo.prototype.recordFirstPosition = function (vditor, event) {\n        if (getSelection().rangeCount === 0) {\n            return;\n        }\n        if (this[vditor.currentMode].undoStack.length !== 1 || this[vditor.currentMode].undoStack[0].length === 0 ||\n            this[vditor.currentMode].redoStack.length > 0) {\n            return;\n        }\n        if ((0,compatibility/* isFirefox */.vU)() && event.key === \"Backspace\") {\n            // Firefox 第一次删除无效\n            return;\n        }\n        if ((0,compatibility/* isSafari */.G6)()) {\n            // Safari keydown 在 input 之后，不需要重复记录历史\n            return;\n        }\n        var text = this.addCaret(vditor);\n        if (text.replace(\"<wbr>\", \"\").replace(\" vditor-ir__node--expand\", \"\")\n            !== this[vditor.currentMode].undoStack[0][0].diffs[0][1].replace(\"<wbr>\", \"\")) {\n            // 当还不没有存入 undo 栈时，按下 ctrl 后会覆盖 lastText\n            return;\n        }\n        this[vditor.currentMode].undoStack[0][0].diffs[0][1] = text;\n        this[vditor.currentMode].lastText = text;\n        // 不能添加 setSelectionFocus(cloneRange); 否则 windows chrome 首次输入会烂\n    };\n    Undo.prototype.addToUndoStack = function (vditor) {\n        // afterRenderEvent.ts 已经 debounce\n        var text = this.addCaret(vditor, true);\n        var diff = this.dmp.diff_main(text, this[vditor.currentMode].lastText, true);\n        var patchList = this.dmp.patch_make(text, this[vditor.currentMode].lastText, diff);\n        if (patchList.length === 0 && this[vditor.currentMode].undoStack.length > 0) {\n            return;\n        }\n        this[vditor.currentMode].lastText = text;\n        this[vditor.currentMode].undoStack.push(patchList);\n        if (this[vditor.currentMode].undoStack.length > this.stackSize) {\n            this[vditor.currentMode].undoStack.shift();\n        }\n        if (this[vditor.currentMode].hasUndo) {\n            this[vditor.currentMode].redoStack = [];\n            this[vditor.currentMode].hasUndo = false;\n            disableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n        if (this[vditor.currentMode].undoStack.length > 1) {\n            enableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n    };\n    Undo.prototype.renderDiff = function (state, vditor, isRedo) {\n        if (isRedo === void 0) { isRedo = false; }\n        var text;\n        if (isRedo) {\n            var redoPatchList = this.dmp.patch_deepCopy(state).reverse();\n            redoPatchList.forEach(function (patch) {\n                patch.diffs.forEach(function (diff) {\n                    diff[0] = -diff[0];\n                });\n            });\n            text = this.dmp.patch_apply(redoPatchList, this[vditor.currentMode].lastText)[0];\n        }\n        else {\n            text = this.dmp.patch_apply(state, this[vditor.currentMode].lastText)[0];\n        }\n        this[vditor.currentMode].lastText = text;\n        vditor[vditor.currentMode].element.innerHTML = text;\n        if (vditor.currentMode !== \"sv\") {\n            vditor[vditor.currentMode].element.querySelectorAll(\".vditor-\".concat(vditor.currentMode, \"__preview\"))\n                .forEach(function (blockElement) {\n                if (blockElement.parentElement.querySelector(\".language-echarts\")) {\n                    if (vditor.currentMode === \"ir\") {\n                        blockElement.parentElement.outerHTML = vditor.lute.SpinVditorIRDOM(blockElement.parentElement.outerHTML);\n                    }\n                    else {\n                        blockElement.parentElement.outerHTML = vditor.lute.SpinVditorDOM(blockElement.parentElement.outerHTML);\n                    }\n                }\n            });\n            vditor[vditor.currentMode].element.querySelectorAll(\".vditor-\".concat(vditor.currentMode, \"__preview[data-render='2']\"))\n                .forEach(function (blockElement) {\n                processCodeRender(blockElement, vditor);\n            });\n        }\n        if (!vditor[vditor.currentMode].element.querySelector(\"wbr\")) {\n            // Safari 第一次输入没有光标，需手动定位到结尾\n            var range = getSelection().getRangeAt(0);\n            range.setEndBefore(vditor[vditor.currentMode].element);\n            range.collapse(false);\n        }\n        else {\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, vditor[vditor.currentMode].element.ownerDocument.createRange());\n            scrollCenter(vditor);\n        }\n        renderToc(vditor);\n        execAfterRender(vditor, {\n            enableAddUndoStack: false,\n            enableHint: false,\n            enableInput: true,\n        });\n        highlightToolbar(vditor);\n        vditor[vditor.currentMode].element.querySelectorAll(\".vditor-\".concat(vditor.currentMode, \"__preview[data-render='2']\"))\n            .forEach(function (item) {\n            processCodeRender(item, vditor);\n        });\n        if (this[vditor.currentMode].undoStack.length > 1) {\n            enableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        if (this[vditor.currentMode].redoStack.length !== 0) {\n            enableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n    };\n    Undo.prototype.resetStack = function () {\n        this.ir = {\n            hasUndo: false,\n            lastText: \"\",\n            redoStack: [],\n            undoStack: [],\n        };\n        this.sv = {\n            hasUndo: false,\n            lastText: \"\",\n            redoStack: [],\n            undoStack: [],\n        };\n        this.wysiwyg = {\n            hasUndo: false,\n            lastText: \"\",\n            redoStack: [],\n            undoStack: [],\n        };\n    };\n    Undo.prototype.addCaret = function (vditor, setFocus) {\n        if (setFocus === void 0) { setFocus = false; }\n        var cloneRange;\n        if (getSelection().rangeCount !== 0 && !vditor[vditor.currentMode].element.querySelector(\"wbr\")) {\n            var range = getSelection().getRangeAt(0);\n            if (vditor[vditor.currentMode].element.contains(range.startContainer)) {\n                cloneRange = range.cloneRange();\n                var wbrElement = document.createElement(\"span\");\n                wbrElement.className = \"vditor-wbr\";\n                range.insertNode(wbrElement);\n            }\n        }\n        // 移除数学公式、echart 渲染 https://github.com/Vanessa219/vditor/issues/1738\n        var cloneElement = vditor[vditor.currentMode].element.cloneNode(true);\n        cloneElement.querySelectorAll(\".vditor-\".concat(vditor.currentMode, \"__preview[data-render='1']\"))\n            .forEach(function (item) {\n            if (!item.firstElementChild) {\n                return;\n            }\n            if (item.firstElementChild.classList.contains(\"language-echarts\") ||\n                item.firstElementChild.classList.contains(\"language-plantuml\") ||\n                item.firstElementChild.classList.contains(\"language-mindmap\")) {\n                item.firstElementChild.removeAttribute(\"_echarts_instance_\");\n                item.firstElementChild.removeAttribute(\"data-processed\");\n                item.firstElementChild.innerHTML = item.previousElementSibling.firstElementChild.innerHTML;\n                item.setAttribute(\"data-render\", \"2\");\n            }\n            else if (item.firstElementChild.classList.contains(\"language-math\")) {\n                item.setAttribute(\"data-render\", \"2\");\n                item.firstElementChild.textContent = item.firstElementChild.getAttribute(\"data-math\");\n                item.firstElementChild.removeAttribute(\"data-math\");\n            }\n        });\n        var text = cloneElement.innerHTML;\n        vditor[vditor.currentMode].element.querySelectorAll(\".vditor-wbr\").forEach(function (item) {\n            item.remove();\n            // 使用 item.outerHTML = \"\" 会产生 https://github.com/Vanessa219/vditor/pull/686;\n        });\n        if (setFocus && cloneRange) {\n            (0,selection/* setSelectionFocus */.Hc)(cloneRange);\n        }\n        return text.replace('<span class=\"vditor-wbr\"></span>', \"<wbr>\");\n    };\n    return Undo;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/util/merge.ts\nvar merge = __webpack_require__(673);\n;// CONCATENATED MODULE: ./src/ts/util/Options.ts\n\n\nvar Options = /** @class */ (function () {\n    function Options(options) {\n        this.defaultOptions = {\n            rtl: false,\n            after: undefined,\n            cache: {\n                enable: true,\n            },\n            cdn: constants/* Constants.CDN */.g.CDN,\n            classes: {\n                preview: \"\",\n            },\n            comment: {\n                enable: false,\n            },\n            counter: {\n                enable: false,\n                type: \"markdown\",\n            },\n            customRenders: [],\n            debugger: false,\n            fullscreen: {\n                index: 90,\n            },\n            height: \"auto\",\n            hint: {\n                delay: 200,\n                emoji: {\n                    \"+1\": \"👍\",\n                    \"-1\": \"👎\",\n                    \"confused\": \"😕\",\n                    \"eyes\": \"👀️\",\n                    \"heart\": \"❤️\",\n                    \"rocket\": \"🚀️\",\n                    \"smile\": \"😄\",\n                    \"tada\": \"🎉️\",\n                },\n                emojiPath: \"\".concat(constants/* Constants.CDN */.g.CDN, \"/dist/images/emoji\"),\n                extend: [],\n                parse: true,\n            },\n            icon: \"ant\",\n            lang: \"zh_CN\",\n            mode: \"ir\",\n            outline: {\n                enable: false,\n                position: \"left\",\n            },\n            placeholder: \"\",\n            preview: {\n                actions: [\"desktop\", \"tablet\", \"mobile\", \"mp-wechat\", \"zhihu\"],\n                delay: 1000,\n                hljs: constants/* Constants.HLJS_OPTIONS */.g.HLJS_OPTIONS,\n                markdown: constants/* Constants.MARKDOWN_OPTIONS */.g.MARKDOWN_OPTIONS,\n                math: constants/* Constants.MATH_OPTIONS */.g.MATH_OPTIONS,\n                maxWidth: 800,\n                mode: \"both\",\n                theme: constants/* Constants.THEME_OPTIONS */.g.THEME_OPTIONS,\n                render: {\n                    media: {\n                        enable: true,\n                    }\n                }\n            },\n            link: {\n                isOpen: true,\n            },\n            image: {\n                isPreview: true,\n            },\n            resize: {\n                enable: false,\n                position: \"bottom\",\n            },\n            theme: \"classic\",\n            toolbar: [\n                \"emoji\",\n                \"headings\",\n                \"bold\",\n                \"italic\",\n                \"strike\",\n                \"link\",\n                \"|\",\n                \"list\",\n                \"ordered-list\",\n                \"check\",\n                \"outdent\",\n                \"indent\",\n                \"|\",\n                \"quote\",\n                \"line\",\n                \"code\",\n                \"inline-code\",\n                \"insert-before\",\n                \"insert-after\",\n                \"|\",\n                \"upload\",\n                \"record\",\n                \"table\",\n                \"|\",\n                \"undo\",\n                \"redo\",\n                \"|\",\n                \"fullscreen\",\n                \"edit-mode\",\n                {\n                    name: \"more\",\n                    toolbar: [\n                        \"both\",\n                        \"code-theme\",\n                        \"content-theme\",\n                        \"export\",\n                        \"outline\",\n                        \"preview\",\n                        \"devtools\",\n                        \"info\",\n                        \"help\",\n                    ],\n                },\n            ],\n            toolbarConfig: {\n                hide: false,\n                pin: false,\n            },\n            typewriterMode: false,\n            undoDelay: 800,\n            upload: {\n                extraData: {},\n                fieldName: \"file[]\",\n                filename: function (name) { return name.replace(/\\W/g, \"\"); },\n                linkToImgUrl: \"\",\n                max: 10 * 1024 * 1024,\n                multiple: true,\n                url: \"\",\n                withCredentials: false,\n            },\n            value: \"\",\n            width: \"auto\",\n        };\n        this.options = options;\n    }\n    Options.prototype.merge = function () {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        if (this.options) {\n            if (this.options.toolbar) {\n                this.options.toolbar = this.mergeToolbar(this.options.toolbar);\n            }\n            else {\n                this.options.toolbar = this.mergeToolbar(this.defaultOptions.toolbar);\n            }\n            if ((_b = (_a = this.options.preview) === null || _a === void 0 ? void 0 : _a.theme) === null || _b === void 0 ? void 0 : _b.list) {\n                this.defaultOptions.preview.theme.list = this.options.preview.theme.list;\n            }\n            if ((_e = (_d = (_c = this.options.preview) === null || _c === void 0 ? void 0 : _c.render) === null || _d === void 0 ? void 0 : _d.media) === null || _e === void 0 ? void 0 : _e.enable) {\n                this.defaultOptions.preview.render.media.enable = this.options.preview.render.media.enable;\n            }\n            if ((_f = this.options.hint) === null || _f === void 0 ? void 0 : _f.emoji) {\n                this.defaultOptions.hint.emoji = this.options.hint.emoji;\n            }\n            if (this.options.comment) {\n                this.defaultOptions.comment = this.options.comment;\n            }\n            if (this.options.cdn) {\n                if (!((_h = (_g = this.options.preview) === null || _g === void 0 ? void 0 : _g.theme) === null || _h === void 0 ? void 0 : _h.path)) {\n                    this.defaultOptions.preview.theme.path = \"\".concat(this.options.cdn, \"/dist/css/content-theme\");\n                }\n                if (!((_j = this.options.hint) === null || _j === void 0 ? void 0 : _j.emojiPath)) {\n                    this.defaultOptions.hint.emojiPath = \"\".concat(this.options.cdn, \"/dist/images/emoji\");\n                }\n            }\n        }\n        var mergedOptions = (0,merge/* merge */.T)(this.defaultOptions, this.options);\n        if (mergedOptions.cache.enable && !mergedOptions.cache.id) {\n            throw new Error(\"need options.cache.id, see https://ld246.com/article/1549638745630#options\");\n        }\n        return mergedOptions;\n    };\n    Options.prototype.mergeToolbar = function (toolbar) {\n        var _this = this;\n        var toolbarItem = [\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-export\"></use></svg>',\n                name: \"export\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘E\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-emoji\"></use></svg>',\n                name: \"emoji\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘H\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-headings\"></use></svg>',\n                name: \"headings\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘B\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-bold\"></use></svg>',\n                name: \"bold\",\n                prefix: \"**\",\n                suffix: \"**\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘I\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-italic\"></use></svg>',\n                name: \"italic\",\n                prefix: \"*\",\n                suffix: \"*\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘D\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-strike\"></use></svg>',\n                name: \"strike\",\n                prefix: \"~~\",\n                suffix: \"~~\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘K\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-link\"></use></svg>',\n                name: \"link\",\n                prefix: \"[\",\n                suffix: \"](https://)\",\n                tipPosition: \"n\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                hotkey: \"⌘L\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-list\"></use></svg>',\n                name: \"list\",\n                prefix: \"* \",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘O\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-ordered-list\"></use></svg>',\n                name: \"ordered-list\",\n                prefix: \"1. \",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘J\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-check\"></use></svg>',\n                name: \"check\",\n                prefix: \"* [ ] \",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘I\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-outdent\"></use></svg>',\n                name: \"outdent\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘O\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-indent\"></use></svg>',\n                name: \"indent\",\n                tipPosition: \"n\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                hotkey: \"⌘;\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-quote\"></use></svg>',\n                name: \"quote\",\n                prefix: \"> \",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘H\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-line\"></use></svg>',\n                name: \"line\",\n                prefix: \"---\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘U\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-code\"></use></svg>',\n                name: \"code\",\n                prefix: \"```\",\n                suffix: \"\\n```\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘G\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-inline-code\"></use></svg>',\n                name: \"inline-code\",\n                prefix: \"`\",\n                suffix: \"`\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘B\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-before\"></use></svg>',\n                name: \"insert-before\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘E\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-after\"></use></svg>',\n                name: \"insert-after\",\n                tipPosition: \"n\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-upload\"></use></svg>',\n                name: \"upload\",\n                tipPosition: \"n\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-record\"></use></svg>',\n                name: \"record\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘M\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-table\"></use></svg>',\n                name: \"table\",\n                prefix: \"| col1\",\n                suffix: \" | col2 | col3 |\\n| --- | --- | --- |\\n|  |  |  |\\n|  |  |  |\",\n                tipPosition: \"n\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                hotkey: \"⌘Z\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-undo\"></use></svg>',\n                name: \"undo\",\n                tipPosition: \"nw\",\n            },\n            {\n                hotkey: \"⌘Y\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-redo\"></use></svg>',\n                name: \"redo\",\n                tipPosition: \"nw\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-more\"></use></svg>',\n                name: \"more\",\n                tipPosition: \"e\",\n            },\n            {\n                hotkey: \"⌘'\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-fullscreen\"></use></svg>',\n                name: \"fullscreen\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-edit\"></use></svg>',\n                name: \"edit-mode\",\n                tipPosition: \"nw\",\n            },\n            {\n                hotkey: \"⌘P\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-both\"></use></svg>',\n                name: \"both\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-preview\"></use></svg>',\n                name: \"preview\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-align-center\"></use></svg>',\n                name: \"outline\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-theme\"></use></svg>',\n                name: \"content-theme\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-code-theme\"></use></svg>',\n                name: \"code-theme\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-bug\"></use></svg>',\n                name: \"devtools\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-info\"></use></svg>',\n                name: \"info\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-help\"></use></svg>',\n                name: \"help\",\n                tipPosition: \"nw\",\n            },\n            {\n                name: \"br\",\n            },\n        ];\n        var toolbarResult = [];\n        toolbar.forEach(function (menuItem) {\n            var currentMenuItem = menuItem;\n            toolbarItem.forEach(function (defaultMenuItem) {\n                if (typeof menuItem === \"string\" &&\n                    defaultMenuItem.name === menuItem) {\n                    currentMenuItem = defaultMenuItem;\n                }\n                if (typeof menuItem === \"object\" &&\n                    defaultMenuItem.name === menuItem.name) {\n                    currentMenuItem = Object.assign({}, defaultMenuItem, menuItem);\n                }\n            });\n            if (menuItem.toolbar) {\n                currentMenuItem.toolbar = _this.mergeToolbar(menuItem.toolbar);\n            }\n            toolbarResult.push(currentMenuItem);\n        });\n        return toolbarResult;\n    };\n    return Options;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar WYSIWYG = /** @class */ (function () {\n    function WYSIWYG(vditor) {\n        var _this = this;\n        this.composingLock = false;\n        this.commentIds = [];\n        var divElement = document.createElement(\"div\");\n        divElement.className = \"vditor-wysiwyg\";\n        divElement.innerHTML = \"<pre class=\\\"vditor-reset\\\" placeholder=\\\"\".concat(vditor.options.placeholder, \"\\\"\\n contenteditable=\\\"true\\\" spellcheck=\\\"false\\\"></pre>\\n<div class=\\\"vditor-panel vditor-panel--none\\\"></div>\\n<div class=\\\"vditor-panel vditor-panel--none\\\">\\n    <button type=\\\"button\\\" aria-label=\\\"\").concat(window.VditorI18n.comment, \"\\\" class=\\\"vditor-icon vditor-tooltipped vditor-tooltipped__n\\\">\\n        <svg><use xlink:href=\\\"#vditor-icon-comment\\\"></use></svg>\\n    </button>\\n</div>\");\n        this.element = divElement.firstElementChild;\n        this.popover = divElement.firstElementChild.nextElementSibling;\n        this.selectPopover = divElement.lastElementChild;\n        this.bindEvent(vditor);\n        focusEvent(vditor, this.element);\n        dblclickEvent(vditor, this.element);\n        blurEvent(vditor, this.element);\n        hotkeyEvent(vditor, this.element);\n        selectEvent(vditor, this.element);\n        dropEvent(vditor, this.element);\n        copyEvent(vditor, this.element, this.copy);\n        cutEvent(vditor, this.element, this.copy);\n        if (vditor.options.comment.enable) {\n            this.selectPopover.querySelector(\"button\").onclick = function () {\n                var id = Lute.NewNodeID();\n                var range = getSelection().getRangeAt(0);\n                var rangeClone = range.cloneRange();\n                var contents = range.extractContents();\n                var blockStartElement;\n                var blockEndElement;\n                var removeStart = false;\n                var removeEnd = false;\n                contents.childNodes.forEach(function (item, index) {\n                    var wrap = false;\n                    if (item.nodeType === 3) {\n                        wrap = true;\n                    }\n                    else if (!item.classList.contains(\"vditor-comment\")) {\n                        wrap = true;\n                    }\n                    else if (item.classList.contains(\"vditor-comment\")) {\n                        item.setAttribute(\"data-cmtids\", item.getAttribute(\"data-cmtids\") + \" \" + id);\n                    }\n                    if (wrap) {\n                        if (item.nodeType !== 3 && item.getAttribute(\"data-block\") === \"0\"\n                            && index === 0 && rangeClone.startOffset > 0) {\n                            item.innerHTML =\n                                \"<span class=\\\"vditor-comment\\\" data-cmtids=\\\"\".concat(id, \"\\\">\").concat(item.innerHTML, \"</span>\");\n                            blockStartElement = item;\n                        }\n                        else if (item.nodeType !== 3 && item.getAttribute(\"data-block\") === \"0\"\n                            && index === contents.childNodes.length - 1\n                            && rangeClone.endOffset < rangeClone.endContainer.textContent.length) {\n                            item.innerHTML =\n                                \"<span class=\\\"vditor-comment\\\" data-cmtids=\\\"\".concat(id, \"\\\">\").concat(item.innerHTML, \"</span>\");\n                            blockEndElement = item;\n                        }\n                        else if (item.nodeType !== 3 && item.getAttribute(\"data-block\") === \"0\") {\n                            if (index === 0) {\n                                removeStart = true;\n                            }\n                            else if (index === contents.childNodes.length - 1) {\n                                removeEnd = true;\n                            }\n                            item.innerHTML =\n                                \"<span class=\\\"vditor-comment\\\" data-cmtids=\\\"\".concat(id, \"\\\">\").concat(item.innerHTML, \"</span>\");\n                        }\n                        else {\n                            var commentElement = document.createElement(\"span\");\n                            commentElement.classList.add(\"vditor-comment\");\n                            commentElement.setAttribute(\"data-cmtids\", id);\n                            item.parentNode.insertBefore(commentElement, item);\n                            commentElement.appendChild(item);\n                        }\n                    }\n                });\n                var startElement = (0,hasClosest/* hasClosestBlock */.F9)(rangeClone.startContainer);\n                if (startElement) {\n                    if (blockStartElement) {\n                        startElement.insertAdjacentHTML(\"beforeend\", blockStartElement.innerHTML);\n                        blockStartElement.remove();\n                    }\n                    else if (startElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && removeStart) {\n                        startElement.remove();\n                    }\n                }\n                var endElement = (0,hasClosest/* hasClosestBlock */.F9)(rangeClone.endContainer);\n                if (endElement) {\n                    if (blockEndElement) {\n                        endElement.insertAdjacentHTML(\"afterbegin\", blockEndElement.innerHTML);\n                        blockEndElement.remove();\n                    }\n                    else if (endElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && removeEnd) {\n                        endElement.remove();\n                    }\n                }\n                range.insertNode(contents);\n                vditor.options.comment.add(id, range.toString(), _this.getComments(vditor, true));\n                afterRenderEvent(vditor, {\n                    enableAddUndoStack: true,\n                    enableHint: false,\n                    enableInput: false,\n                });\n                _this.hideComment();\n            };\n        }\n    }\n    WYSIWYG.prototype.getComments = function (vditor, getData) {\n        var _this = this;\n        if (getData === void 0) { getData = false; }\n        if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n            this.commentIds = [];\n            this.element.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n                _this.commentIds =\n                    _this.commentIds.concat(item.getAttribute(\"data-cmtids\").split(\" \"));\n            });\n            this.commentIds = Array.from(new Set(this.commentIds));\n            var comments_1 = [];\n            if (getData) {\n                this.commentIds.forEach(function (id) {\n                    comments_1.push({\n                        id: id,\n                        top: _this.element.querySelector(\".vditor-comment[data-cmtids=\\\"\".concat(id, \"\\\"]\")).offsetTop,\n                    });\n                });\n                return comments_1;\n            }\n        }\n        else {\n            return [];\n        }\n    };\n    WYSIWYG.prototype.triggerRemoveComment = function (vditor) {\n        var difference = function (a, b) {\n            var s = new Set(b);\n            return a.filter(function (x) { return !s.has(x); });\n        };\n        if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable && vditor.wysiwyg.commentIds.length > 0) {\n            var oldIds = JSON.parse(JSON.stringify(this.commentIds));\n            this.getComments(vditor);\n            var removedIds = difference(oldIds, this.commentIds);\n            if (removedIds.length > 0) {\n                vditor.options.comment.remove(removedIds);\n            }\n        }\n    };\n    WYSIWYG.prototype.showComment = function () {\n        var position = (0,selection/* getCursorPosition */.Ny)(this.element);\n        this.selectPopover.setAttribute(\"style\", \"left:\".concat(position.left, \"px;display:block;top:\").concat(Math.max(-8, position.top - 21), \"px\"));\n    };\n    WYSIWYG.prototype.hideComment = function () {\n        this.selectPopover.setAttribute(\"style\", \"display:none\");\n    };\n    WYSIWYG.prototype.unbindListener = function () {\n        window.removeEventListener(\"scroll\", this.scrollListener);\n    };\n    WYSIWYG.prototype.copy = function (event, vditor) {\n        var range = getSelection().getRangeAt(0);\n        if (range.toString() === \"\") {\n            return;\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        var codeElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"CODE\");\n        var codeEndElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.endContainer, \"CODE\");\n        if (codeElement && codeEndElement && codeEndElement.isSameNode(codeElement)) {\n            var codeText = \"\";\n            if (codeElement.parentElement.tagName === \"PRE\") {\n                codeText = range.toString();\n            }\n            else {\n                codeText = \"`\" + range.toString() + \"`\";\n            }\n            event.clipboardData.setData(\"text/plain\", codeText);\n            event.clipboardData.setData(\"text/html\", \"\");\n            return;\n        }\n        var aElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"A\");\n        var aEndElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.endContainer, \"A\");\n        if (aElement && aEndElement && aEndElement.isSameNode(aElement)) {\n            var aTitle = aElement.getAttribute(\"title\") || \"\";\n            if (aTitle) {\n                aTitle = \" \\\"\".concat(aTitle, \"\\\"\");\n            }\n            event.clipboardData.setData(\"text/plain\", \"[\".concat(range.toString(), \"](\").concat(aElement.getAttribute(\"href\")).concat(aTitle, \")\"));\n            event.clipboardData.setData(\"text/html\", \"\");\n            return;\n        }\n        var tempElement = document.createElement(\"div\");\n        tempElement.appendChild(range.cloneContents());\n        event.clipboardData.setData(\"text/plain\", vditor.lute.VditorDOM2Md(tempElement.innerHTML).trim());\n        event.clipboardData.setData(\"text/html\", \"\");\n    };\n    WYSIWYG.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.unbindListener();\n        window.addEventListener(\"scroll\", this.scrollListener = function () {\n            hidePanel(vditor, [\"hint\"]);\n            if (_this.popover.style.display !== \"block\" || _this.selectPopover.style.display !== \"block\") {\n                return;\n            }\n            var top = parseInt(_this.popover.getAttribute(\"data-top\"), 10);\n            if (vditor.options.height !== \"auto\") {\n                if (vditor.options.toolbarConfig.pin && vditor.toolbar.element.getBoundingClientRect().top === 0) {\n                    var popoverTop = Math.max(window.scrollY - vditor.element.offsetTop - 8, Math.min(top - vditor.wysiwyg.element.scrollTop, _this.element.clientHeight - 21)) + \"px\";\n                    if (_this.popover.style.display === \"block\") {\n                        _this.popover.style.top = popoverTop;\n                    }\n                    if (_this.selectPopover.style.display === \"block\") {\n                        _this.selectPopover.style.top = popoverTop;\n                    }\n                }\n                return;\n            }\n            else if (!vditor.options.toolbarConfig.pin) {\n                return;\n            }\n            var popoverTop1 = Math.max(top, (window.scrollY - vditor.element.offsetTop - 8)) + \"px\";\n            if (_this.popover.style.display === \"block\") {\n                _this.popover.style.top = popoverTop1;\n            }\n            if (_this.selectPopover.style.display === \"block\") {\n                _this.selectPopover.style.top = popoverTop1;\n            }\n        });\n        this.element.addEventListener(\"scroll\", function () {\n            hidePanel(vditor, [\"hint\"]);\n            if (vditor.options.comment && vditor.options.comment.enable && vditor.options.comment.scroll) {\n                vditor.options.comment.scroll(vditor.wysiwyg.element.scrollTop);\n            }\n            if (_this.popover.style.display !== \"block\") {\n                return;\n            }\n            var top = parseInt(_this.popover.getAttribute(\"data-top\"), 10) - vditor.wysiwyg.element.scrollTop;\n            var max = -8;\n            if (vditor.options.toolbarConfig.pin && vditor.toolbar.element.getBoundingClientRect().top === 0) {\n                max = window.scrollY - vditor.element.offsetTop + max;\n            }\n            var topPx = Math.max(max, Math.min(top, _this.element.clientHeight - 21)) + \"px\";\n            _this.popover.style.top = topPx;\n            _this.selectPopover.style.top = topPx;\n        });\n        this.element.addEventListener(\"paste\", function (event) {\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    var range = (0,selection/* getEditorRange */.zh)(vditor);\n                    var node = document.createElement(\"template\");\n                    node.innerHTML = code;\n                    range.insertNode(node.content.cloneNode(true));\n                    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-block\", \"0\");\n                    if (blockElement) {\n                        blockElement.outerHTML = vditor.lute.SpinVditorDOM(blockElement.outerHTML);\n                    }\n                    else {\n                        vditor.wysiwyg.element.innerHTML = vditor.lute.SpinVditorDOM(vditor.wysiwyg.element.innerHTML);\n                    }\n                    (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n                },\n            });\n        });\n        // 中文处理\n        this.element.addEventListener(\"compositionstart\", function () {\n            _this.composingLock = true;\n        });\n        this.element.addEventListener(\"compositionend\", function (event) {\n            var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(getSelection().getRangeAt(0).startContainer);\n            if (headingElement && headingElement.textContent === \"\") {\n                // heading 为空删除 https://github.com/Vanessa219/vditor/issues/150\n                renderToc(vditor);\n                return;\n            }\n            if (!(0,compatibility/* isFirefox */.vU)()) {\n                input_input(vditor, getSelection().getRangeAt(0).cloneRange(), event);\n            }\n            _this.composingLock = false;\n        });\n        this.element.addEventListener(\"input\", function (event) {\n            if (event.inputType === \"deleteByDrag\" || event.inputType === \"insertFromDrop\") {\n                // https://github.com/Vanessa219/vditor/issues/801 编辑器内容拖拽问题\n                return;\n            }\n            if (_this.preventInput) {\n                _this.preventInput = false;\n                afterRenderEvent(vditor);\n                return;\n            }\n            if (_this.composingLock || event.data === \"‘\" || event.data === \"“\" || event.data === \"《\") {\n                afterRenderEvent(vditor);\n                return;\n            }\n            var range = getSelection().getRangeAt(0);\n            var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n            if (!blockElement) {\n                // 没有被块元素包裹\n                modifyPre(vditor, range);\n                blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n            }\n            if (!blockElement) {\n                return;\n            }\n            // 前后空格处理\n            var startOffset = (0,selection/* getSelectPosition */.im)(blockElement, vditor.wysiwyg.element, range).start;\n            // 开始可以输入空格\n            var startSpace = true;\n            for (var i = startOffset - 1; i > blockElement.textContent.substr(0, startOffset).lastIndexOf(\"\\n\"); i--) {\n                if (blockElement.textContent.charAt(i) !== \" \" &&\n                    // 多个 tab 前删除不形成代码块 https://github.com/Vanessa219/vditor/issues/162 1\n                    blockElement.textContent.charAt(i) !== \"\\t\") {\n                    startSpace = false;\n                    break;\n                }\n            }\n            if (startOffset === 0) {\n                startSpace = false;\n            }\n            // 结尾可以输入空格\n            var endSpace = true;\n            for (var i = startOffset - 1; i < blockElement.textContent.length; i++) {\n                if (blockElement.textContent.charAt(i) !== \" \" && blockElement.textContent.charAt(i) !== \"\\n\") {\n                    endSpace = false;\n                    break;\n                }\n            }\n            // https://github.com/Vanessa219/vditor/issues/729\n            if (endSpace && /^#{1,6} $/.test(blockElement.textContent)) {\n                endSpace = false;\n            }\n            var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(getSelection().getRangeAt(0).startContainer);\n            if (headingElement && headingElement.textContent === \"\") {\n                // heading 为空删除 https://github.com/Vanessa219/vditor/issues/150\n                renderToc(vditor);\n                headingElement.remove();\n            }\n            if ((startSpace && blockElement.getAttribute(\"data-type\") !== \"code-block\")\n                || endSpace || isHeadingMD(blockElement.innerHTML) ||\n                (isHrMD(blockElement.innerHTML) && blockElement.previousElementSibling)) {\n                if (typeof vditor.options.input === \"function\") {\n                    vditor.options.input(getMarkdown(vditor));\n                }\n                return;\n            }\n            // https://github.com/Vanessa219/vditor/issues/1565\n            if (event.inputType === \"insertParagraph\" && _this.element.innerHTML === '<p><br></p><p><br></p>') {\n                blockElement.previousElementSibling.remove();\n            }\n            input_input(vditor, range, event);\n        });\n        this.element.addEventListener(\"click\", function (event) {\n            if (event.target.tagName === \"INPUT\") {\n                var checkElement = event.target;\n                if (checkElement.checked) {\n                    checkElement.setAttribute(\"checked\", \"checked\");\n                }\n                else {\n                    checkElement.removeAttribute(\"checked\");\n                }\n                _this.preventInput = true;\n                if (getSelection().rangeCount > 0) {\n                    (0,selection/* setSelectionFocus */.Hc)(getSelection().getRangeAt(0));\n                }\n                afterRenderEvent(vditor);\n                return;\n            }\n            if (event.target.tagName === \"IMG\" &&\n                // plantuml 图片渲染不进行提示\n                !event.target.parentElement.classList.contains(\"vditor-wysiwyg__preview\")) {\n                if (event.target.getAttribute(\"data-type\") === \"link-ref\") {\n                    genLinkRefPopover(vditor, event.target);\n                }\n                else {\n                    genImagePopover(event, vditor);\n                }\n                return;\n            }\n            // 打开链接\n            var a = (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"A\");\n            if (a) {\n                if (vditor.options.link.click) {\n                    vditor.options.link.click(a);\n                }\n                else if (vditor.options.link.isOpen) {\n                    window.open(a.getAttribute(\"href\"));\n                }\n                event.preventDefault();\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            if (event.target.isEqualNode(_this.element) && _this.element.lastElementChild && range.collapsed) {\n                var lastRect = _this.element.lastElementChild.getBoundingClientRect();\n                if (event.y > lastRect.top + lastRect.height) {\n                    if (_this.element.lastElementChild.tagName === \"P\" &&\n                        _this.element.lastElementChild.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                        range.selectNodeContents(_this.element.lastElementChild);\n                        range.collapse(false);\n                    }\n                    else {\n                        _this.element.insertAdjacentHTML(\"beforeend\", \"<p data-block=\\\"0\\\">\".concat(constants/* Constants.ZWSP */.g.ZWSP, \"<wbr></p>\"));\n                        (0,selection/* setRangeByWbr */.ib)(_this.element, range);\n                    }\n                }\n            }\n            highlightToolbarWYSIWYG(vditor);\n            // 点击后光标落于预览区，需展开代码块\n            var previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(event.target, \"vditor-wysiwyg__preview\");\n            if (!previewElement) {\n                previewElement =\n                    (0,hasClosest/* hasClosestByClassName */.fb)((0,selection/* getEditorRange */.zh)(vditor).startContainer, \"vditor-wysiwyg__preview\");\n            }\n            if (previewElement) {\n                showCode(previewElement, vditor);\n            }\n            clickToc(event, vditor);\n        });\n        this.element.addEventListener(\"keyup\", function (event) {\n            if (event.isComposing || (0,compatibility/* isCtrl */.yl)(event)) {\n                return;\n            }\n            // 除 md 处理、cell 内换行、table 添加新行/列、代码块语言切换、block render 换行、跳出/逐层跳出 blockquote、h6 换行、\n            // 任务列表换行、软换行外需在换行时调整文档位置\n            if (event.key === \"Enter\") {\n                scrollCenter(vditor);\n            }\n            if ((event.key === \"Backspace\" || event.key === \"Delete\") &&\n                vditor.wysiwyg.element.innerHTML !== \"\" && vditor.wysiwyg.element.childNodes.length === 1 &&\n                vditor.wysiwyg.element.firstElementChild && vditor.wysiwyg.element.firstElementChild.tagName === \"P\"\n                && vditor.wysiwyg.element.firstElementChild.childElementCount === 0\n                && (vditor.wysiwyg.element.textContent === \"\" || vditor.wysiwyg.element.textContent === \"\\n\")) {\n                // 为空时显示 placeholder\n                vditor.wysiwyg.element.innerHTML = \"\";\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            if (event.key === \"Backspace\") {\n                // firefox headings https://github.com/Vanessa219/vditor/issues/211\n                if ((0,compatibility/* isFirefox */.vU)() && range.startContainer.textContent === \"\\n\" && range.startOffset === 1) {\n                    range.startContainer.textContent = \"\";\n                }\n            }\n            // 没有被块元素包裹\n            modifyPre(vditor, range);\n            highlightToolbarWYSIWYG(vditor);\n            if (event.key !== \"ArrowDown\" && event.key !== \"ArrowRight\" && event.key !== \"Backspace\"\n                && event.key !== \"ArrowLeft\" && event.key !== \"ArrowUp\") {\n                return;\n            }\n            if (event.key === \"ArrowLeft\" || event.key === \"ArrowRight\") {\n                vditor.hint.render(vditor);\n            }\n            // 上下左右，删除遇到块预览的处理\n            var previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-wysiwyg__preview\");\n            if (!previewElement && range.startContainer.nodeType !== 3 && range.startOffset > 0) {\n                // table 前删除遇到代码块\n                var blockRenderElement = range.startContainer;\n                if (blockRenderElement.classList.contains(\"vditor-wysiwyg__block\")) {\n                    previewElement = blockRenderElement.lastElementChild;\n                }\n            }\n            if (!previewElement) {\n                return;\n            }\n            var previousElement = previewElement.previousElementSibling;\n            if (previousElement.style.display === \"none\") {\n                if (event.key === \"ArrowDown\" || event.key === \"ArrowRight\") {\n                    showCode(previewElement, vditor);\n                }\n                else {\n                    showCode(previewElement, vditor, false);\n                }\n                return;\n            }\n            var codeElement = previewElement.previousElementSibling;\n            if (codeElement.tagName === \"PRE\") {\n                codeElement = codeElement.firstElementChild;\n            }\n            if (event.key === \"ArrowDown\" || event.key === \"ArrowRight\") {\n                var blockRenderElement = previewElement.parentElement;\n                var nextNode = getRenderElementNextNode(blockRenderElement);\n                if (nextNode && nextNode.nodeType !== 3) {\n                    // 下一节点依旧为代码渲染块\n                    var nextRenderElement = nextNode.querySelector(\".vditor-wysiwyg__preview\");\n                    if (nextRenderElement) {\n                        showCode(nextRenderElement, vditor);\n                        return;\n                    }\n                }\n                // 跳过渲染块，光标移动到下一个节点\n                if (nextNode.nodeType === 3) {\n                    // inline\n                    while (nextNode.textContent.length === 0 && nextNode.nextSibling) {\n                        // https://github.com/Vanessa219/vditor/issues/100 2\n                        nextNode = nextNode.nextSibling;\n                    }\n                    range.setStart(nextNode, 1);\n                }\n                else {\n                    // block\n                    range.setStart(nextNode.firstChild, 0);\n                }\n            }\n            else {\n                range.selectNodeContents(codeElement);\n                range.collapse(false);\n            }\n        });\n    };\n    return WYSIWYG;\n}());\n\n\n;// CONCATENATED MODULE: ./src/index.ts\nvar src_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Vditor = /** @class */ (function (_super) {\n    src_extends(Vditor, _super);\n    /**\n     * @param id 要挂载 Vditor 的元素或者元素 ID。\n     * @param options Vditor 参数\n     */\n    function Vditor(id, options) {\n        var _this = _super.call(this) || this;\n        _this.isDestroyed = false;\n        _this.version = constants/* VDITOR_VERSION */.H;\n        if (typeof id === \"string\") {\n            if (!options) {\n                options = {\n                    cache: {\n                        id: \"vditor\".concat(id),\n                    },\n                };\n            }\n            else if (!options.cache) {\n                options.cache = { id: \"vditor\".concat(id) };\n            }\n            else if (!options.cache.id) {\n                options.cache.id = \"vditor\".concat(id);\n            }\n            if (!document.getElementById(id)) {\n                _this.showErrorTip(\"Failed to get element by id: \".concat(id));\n                return _this;\n            }\n            id = document.getElementById(id);\n        }\n        var getOptions = new Options(options);\n        var mergedOptions = getOptions.merge();\n        // 支持自定义国际化\n        if (!mergedOptions.i18n) {\n            if (![\"de_DE\", \"en_US\", \"fr_FR\", \"pt_BR\", \"ja_JP\", \"ko_KR\", \"ru_RU\", \"sv_SE\", \"zh_CN\", \"zh_TW\"].includes(mergedOptions.lang)) {\n                throw new Error(\"options.lang error, see https://ld246.com/article/1549638745630#options\");\n            }\n            else {\n                var i18nScriptPrefix = \"vditorI18nScript\";\n                var i18nScriptID_1 = i18nScriptPrefix + mergedOptions.lang;\n                document.querySelectorAll(\"head script[id^=\\\"\".concat(i18nScriptPrefix, \"\\\"]\")).forEach(function (el) {\n                    if (el.id !== i18nScriptID_1) {\n                        document.head.removeChild(el);\n                    }\n                });\n                (0,addScript/* addScript */.G)(\"\".concat(mergedOptions.cdn, \"/dist/js/i18n/\").concat(mergedOptions.lang, \".js\"), i18nScriptID_1).then(function () {\n                    _this.init(id, mergedOptions);\n                }).catch(function (error) {\n                    _this.showErrorTip(\"GET \".concat(mergedOptions.cdn, \"/dist/js/i18n/\").concat(mergedOptions.lang, \".js net::ERR_ABORTED 404 (Not Found)\"));\n                });\n            }\n        }\n        else {\n            window.VditorI18n = mergedOptions.i18n;\n            _this.init(id, mergedOptions);\n        }\n        return _this;\n    }\n    Vditor.prototype.showErrorTip = function (error) {\n        var tip = new Tip();\n        document.body.appendChild(tip.element);\n        tip.show(error, 0);\n    };\n    Vditor.prototype.updateToolbarConfig = function (options) {\n        this.vditor.toolbar.updateConfig(this.vditor, options);\n    };\n    /** 设置主题 */\n    Vditor.prototype.setTheme = function (theme, contentTheme, codeTheme, contentThemePath) {\n        this.vditor.options.theme = theme;\n        setTheme(this.vditor);\n        if (contentTheme) {\n            this.vditor.options.preview.theme.current = contentTheme;\n            (0,setContentTheme/* setContentTheme */.Z)(contentTheme, contentThemePath || this.vditor.options.preview.theme.path);\n        }\n        if (codeTheme) {\n            this.vditor.options.preview.hljs.style = codeTheme;\n            (0,setCodeTheme/* setCodeTheme */.Y)(codeTheme, this.vditor.options.cdn);\n        }\n    };\n    /** 获取 Markdown 内容 */\n    Vditor.prototype.getValue = function () {\n        return getMarkdown(this.vditor);\n    };\n    /** 获取编辑器当前编辑模式 */\n    Vditor.prototype.getCurrentMode = function () {\n        return this.vditor.currentMode;\n    };\n    /** 聚焦到编辑器 */\n    Vditor.prototype.focus = function () {\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.element.focus();\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            this.vditor.wysiwyg.element.focus();\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            this.vditor.ir.element.focus();\n        }\n    };\n    /** 让编辑器失焦 */\n    Vditor.prototype.blur = function () {\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.element.blur();\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            this.vditor.wysiwyg.element.blur();\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            this.vditor.ir.element.blur();\n        }\n    };\n    /** 禁用编辑器 */\n    Vditor.prototype.disabled = function () {\n        hidePanel(this.vditor, [\"subToolbar\", \"hint\", \"popover\"]);\n        disableToolbar(this.vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS.concat */.g.EDIT_TOOLBARS.concat([\"undo\", \"redo\", \"fullscreen\", \"edit-mode\"]));\n        this.vditor[this.vditor.currentMode].element.setAttribute(\"contenteditable\", \"false\");\n    };\n    /** 解除编辑器禁用 */\n    Vditor.prototype.enable = function () {\n        enableToolbar(this.vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS.concat */.g.EDIT_TOOLBARS.concat([\"undo\", \"redo\", \"fullscreen\", \"edit-mode\"]));\n        this.vditor.undo.resetIcon(this.vditor);\n        this.vditor[this.vditor.currentMode].element.setAttribute(\"contenteditable\", \"true\");\n    };\n    /** 返回选中的字符串 */\n    Vditor.prototype.getSelection = function () {\n        if (this.vditor.currentMode === \"wysiwyg\") {\n            return getSelectText(this.vditor.wysiwyg.element);\n        }\n        else if (this.vditor.currentMode === \"sv\") {\n            return getSelectText(this.vditor.sv.element);\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            return getSelectText(this.vditor.ir.element);\n        }\n    };\n    /** 设置预览区域内容 */\n    Vditor.prototype.renderPreview = function (value) {\n        this.vditor.preview.render(this.vditor, value);\n    };\n    /** 获取焦点位置 */\n    Vditor.prototype.getCursorPosition = function () {\n        return (0,selection/* getCursorPosition */.Ny)(this.vditor[this.vditor.currentMode].element);\n    };\n    /** 上传是否还在进行中 */\n    Vditor.prototype.isUploading = function () {\n        return this.vditor.upload.isUploading;\n    };\n    /** 清除缓存 */\n    Vditor.prototype.clearCache = function () {\n        if (this.vditor.options.cache.enable && (0,compatibility/* accessLocalStorage */.pK)()) {\n            localStorage.removeItem(this.vditor.options.cache.id);\n        }\n    };\n    /** 禁用缓存 */\n    Vditor.prototype.disabledCache = function () {\n        this.vditor.options.cache.enable = false;\n    };\n    /** 启用缓存 */\n    Vditor.prototype.enableCache = function () {\n        if (!this.vditor.options.cache.id) {\n            throw new Error(\"need options.cache.id, see https://ld246.com/article/1549638745630#options\");\n        }\n        this.vditor.options.cache.enable = true;\n    };\n    /** HTML 转 md */\n    Vditor.prototype.html2md = function (value) {\n        return this.vditor.lute.HTML2Md(value);\n    };\n    /** markdown 转 JSON 输出 */\n    Vditor.prototype.exportJSON = function (value) {\n        return this.vditor.lute.RenderJSON(value);\n    };\n    /** 获取 HTML */\n    Vditor.prototype.getHTML = function () {\n        return getHTML(this.vditor);\n    };\n    /** 消息提示。time 为 0 将一直显示 */\n    Vditor.prototype.tip = function (text, time) {\n        this.vditor.tip.show(text, time);\n    };\n    /** 设置预览模式 */\n    Vditor.prototype.setPreviewMode = function (mode) {\n        setPreviewMode(mode, this.vditor);\n    };\n    /** 删除选中内容 */\n    Vditor.prototype.deleteValue = function () {\n        if (window.getSelection().isCollapsed) {\n            return;\n        }\n        document.execCommand(\"delete\", false);\n    };\n    /** 更新选中内容 */\n    Vditor.prototype.updateValue = function (value) {\n        document.execCommand(\"insertHTML\", false, value);\n    };\n    /** 在焦点处插入内容，并默认进行 Markdown 渲染 */\n    Vditor.prototype.insertValue = function (value, render) {\n        if (render === void 0) { render = true; }\n        var range = (0,selection/* getEditorRange */.zh)(this.vditor);\n        range.collapse(true);\n        // https://github.com/Vanessa219/vditor/issues/716\n        // https://github.com/Vanessa219/vditor/issues/917\n        var tmpElement = document.createElement(\"template\");\n        tmpElement.innerHTML = value;\n        range.insertNode(tmpElement.content.cloneNode(true));\n        range.collapse(false);\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.preventInput = true;\n            if (render) {\n                inputEvent(this.vditor);\n            }\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            // 由于 https://github.com/Vanessa219/vditor/issues/1566 不能使用 this.vditor.wysiwyg.preventInput = true;\n            if (render) {\n                input_input(this.vditor, getSelection().getRangeAt(0));\n            }\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            this.vditor.ir.preventInput = true;\n            if (render) {\n                input(this.vditor, getSelection().getRangeAt(0), true);\n            }\n        }\n    };\n    /** 在焦点处插入 Markdown */\n    Vditor.prototype.insertMD = function (md) {\n        // https://github.com/Vanessa219/vditor/issues/1640\n        if (this.vditor.currentMode === \"ir\") {\n            (0,selection/* insertHTML */.oC)(this.vditor.lute.Md2VditorIRDOM(md), this.vditor);\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            (0,selection/* insertHTML */.oC)(this.vditor.lute.Md2VditorDOM(md), this.vditor);\n        }\n        else {\n            processPaste(this.vditor, md);\n        }\n        this.vditor.outline.render(this.vditor);\n        execAfterRender(this.vditor);\n    };\n    /** 设置编辑器内容 */\n    Vditor.prototype.setValue = function (markdown, clearStack) {\n        var _this = this;\n        if (clearStack === void 0) { clearStack = false; }\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.element.innerHTML = \"<div data-block='0'>\".concat(this.vditor.lute.SpinVditorSVDOM(markdown), \"</div>\");\n            processAfterRender(this.vditor, {\n                enableAddUndoStack: true,\n                enableHint: false,\n                enableInput: false,\n            });\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            renderDomByMd(this.vditor, markdown, {\n                enableAddUndoStack: true,\n                enableHint: false,\n                enableInput: false,\n            });\n        }\n        else {\n            this.vditor.ir.element.innerHTML = this.vditor.lute.Md2VditorIRDOM(markdown);\n            this.vditor.ir.element\n                .querySelectorAll(\".vditor-ir__preview[data-render='2']\")\n                .forEach(function (item) {\n                processCodeRender(item, _this.vditor);\n            });\n            process_processAfterRender(this.vditor, {\n                enableAddUndoStack: true,\n                enableHint: false,\n                enableInput: false,\n            });\n        }\n        this.vditor.outline.render(this.vditor);\n        if (!markdown) {\n            hidePanel(this.vditor, [\"emoji\", \"headings\", \"submenu\", \"hint\"]);\n            if (this.vditor.wysiwyg.popover) {\n                this.vditor.wysiwyg.popover.style.display = \"none\";\n            }\n            this.clearCache();\n        }\n        if (clearStack) {\n            this.clearStack();\n        }\n    };\n    /** 空块 */\n    Vditor.prototype.insertEmptyBlock = function (position) {\n        insertEmptyBlock(this.vditor, position);\n    };\n    /** 清空 undo & redo 栈 */\n    Vditor.prototype.clearStack = function () {\n        this.vditor.undo.clearStack(this.vditor);\n        this.vditor.undo.addToUndoStack(this.vditor);\n    };\n    /** 销毁编辑器 */\n    Vditor.prototype.destroy = function () {\n        this.vditor.element.innerHTML = this.vditor.originalInnerHTML;\n        this.vditor.element.classList.remove(\"vditor\");\n        this.vditor.element.removeAttribute(\"style\");\n        var iconScript = document.getElementById(\"vditorIconScript\");\n        if (iconScript) {\n            iconScript.remove();\n        }\n        this.clearCache();\n        UIUnbindListener();\n        this.vditor.wysiwyg.unbindListener();\n        this.vditor.options.after = undefined;\n        this.isDestroyed = true;\n    };\n    /** 获取评论 ID */\n    Vditor.prototype.getCommentIds = function () {\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return [];\n        }\n        return this.vditor.wysiwyg.getComments(this.vditor, true);\n    };\n    /** 高亮评论 */\n    Vditor.prototype.hlCommentIds = function (ids) {\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return;\n        }\n        var hlItem = function (item) {\n            item.classList.remove(\"vditor-comment--hover\");\n            ids.forEach(function (id) {\n                if (item.getAttribute(\"data-cmtids\").indexOf(id) > -1) {\n                    item.classList.add(\"vditor-comment--hover\");\n                }\n            });\n        };\n        this.vditor.wysiwyg.element\n            .querySelectorAll(\".vditor-comment\")\n            .forEach(function (item) {\n            hlItem(item);\n        });\n        if (this.vditor.preview.element.style.display !== \"none\") {\n            this.vditor.preview.element\n                .querySelectorAll(\".vditor-comment\")\n                .forEach(function (item) {\n                hlItem(item);\n            });\n        }\n    };\n    /** 取消评论高亮 */\n    Vditor.prototype.unHlCommentIds = function (ids) {\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return;\n        }\n        var unHlItem = function (item) {\n            ids.forEach(function (id) {\n                if (item.getAttribute(\"data-cmtids\").indexOf(id) > -1) {\n                    item.classList.remove(\"vditor-comment--hover\");\n                }\n            });\n        };\n        this.vditor.wysiwyg.element\n            .querySelectorAll(\".vditor-comment\")\n            .forEach(function (item) {\n            unHlItem(item);\n        });\n        if (this.vditor.preview.element.style.display !== \"none\") {\n            this.vditor.preview.element\n                .querySelectorAll(\".vditor-comment\")\n                .forEach(function (item) {\n                unHlItem(item);\n            });\n        }\n    };\n    /** 删除评论 */\n    Vditor.prototype.removeCommentIds = function (removeIds) {\n        var _this = this;\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return;\n        }\n        var removeItem = function (item, removeId) {\n            var ids = item.getAttribute(\"data-cmtids\").split(\" \");\n            ids.find(function (id, index) {\n                if (id === removeId) {\n                    ids.splice(index, 1);\n                    return true;\n                }\n            });\n            if (ids.length === 0) {\n                item.outerHTML = item.innerHTML;\n                (0,selection/* getEditorRange */.zh)(_this.vditor).collapse(true);\n            }\n            else {\n                item.setAttribute(\"data-cmtids\", ids.join(\" \"));\n            }\n        };\n        removeIds.forEach(function (removeId) {\n            _this.vditor.wysiwyg.element\n                .querySelectorAll(\".vditor-comment\")\n                .forEach(function (item) {\n                removeItem(item, removeId);\n            });\n            if (_this.vditor.preview.element.style.display !== \"none\") {\n                _this.vditor.preview.element\n                    .querySelectorAll(\".vditor-comment\")\n                    .forEach(function (item) {\n                    removeItem(item, removeId);\n                });\n            }\n        });\n        afterRenderEvent(this.vditor, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n    };\n    Vditor.prototype.init = function (id, mergedOptions) {\n        var _this = this;\n        if (this.isDestroyed) {\n            return;\n        }\n        this.vditor = {\n            currentMode: mergedOptions.mode,\n            element: id,\n            hint: new Hint(mergedOptions.hint.extend),\n            lute: undefined,\n            options: mergedOptions,\n            originalInnerHTML: id.innerHTML,\n            outline: new Outline(window.VditorI18n.outline),\n            tip: new Tip(),\n        };\n        this.vditor.sv = new Editor(this.vditor);\n        this.vditor.undo = new undo_Undo();\n        this.vditor.wysiwyg = new WYSIWYG(this.vditor);\n        this.vditor.ir = new IR(this.vditor);\n        this.vditor.toolbar = new Toolbar(this.vditor);\n        if (mergedOptions.resize.enable) {\n            this.vditor.resize = new Resize(this.vditor);\n        }\n        if (this.vditor.toolbar.elements.devtools) {\n            this.vditor.devtools = new DevTools();\n        }\n        if (mergedOptions.upload.url || mergedOptions.upload.handler) {\n            this.vditor.upload = new Upload();\n        }\n        (0,addScript/* addScript */.G)(mergedOptions._lutePath ||\n            \"\".concat(mergedOptions.cdn, \"/dist/js/lute/lute.min.js\"), \"vditorLuteScript\").then(function () {\n            _this.vditor.lute = (0,setLute/* setLute */.X)({\n                autoSpace: _this.vditor.options.preview.markdown.autoSpace,\n                gfmAutoLink: _this.vditor.options.preview.markdown.gfmAutoLink,\n                codeBlockPreview: _this.vditor.options.preview.markdown\n                    .codeBlockPreview,\n                emojiSite: _this.vditor.options.hint.emojiPath,\n                emojis: _this.vditor.options.hint.emoji,\n                fixTermTypo: _this.vditor.options.preview.markdown.fixTermTypo,\n                footnotes: _this.vditor.options.preview.markdown.footnotes,\n                headingAnchor: false,\n                inlineMathDigit: _this.vditor.options.preview.math.inlineDigit,\n                linkBase: _this.vditor.options.preview.markdown.linkBase,\n                linkPrefix: _this.vditor.options.preview.markdown.linkPrefix,\n                listStyle: _this.vditor.options.preview.markdown.listStyle,\n                mark: _this.vditor.options.preview.markdown.mark,\n                mathBlockPreview: _this.vditor.options.preview.markdown\n                    .mathBlockPreview,\n                paragraphBeginningSpace: _this.vditor.options.preview.markdown\n                    .paragraphBeginningSpace,\n                sanitize: _this.vditor.options.preview.markdown.sanitize,\n                toc: _this.vditor.options.preview.markdown.toc,\n            });\n            _this.vditor.preview = new Preview(_this.vditor);\n            initUI(_this.vditor);\n            if (mergedOptions.after) {\n                mergedOptions.after();\n            }\n            if (mergedOptions.icon) {\n                // 防止初始化 2 个编辑器时加载 2 次\n                (0,addScript/* addScriptSync */.J)(\"\".concat(mergedOptions.cdn, \"/dist/js/icons/\").concat(mergedOptions.icon, \".js\"), \"vditorIconScript\");\n            }\n        });\n    };\n    return Vditor;\n}(method[\"default\"]));\n/* harmony default export */ const src = (Vditor);\n\n})();\n\n__webpack_exports__ = __webpack_exports__[\"default\"];\n/******/ \treturn __webpack_exports__;\n/******/ })()\n;\n});"],"names":["props","ref","AntdIcon","A","icon","factory","__webpack_modules__","module","diff_match_patch","this","Diff_Timeout","Diff_EditCost","Match_Threshold","Match_Distance","Patch_DeleteThreshold","Patch_Margin","Match_MaxBits","DIFF_DELETE","Diff","op","text","prototype","diff_main","text1","text2","opt_checklines","opt_deadline","Number","MAX_VALUE","Date","getTime","deadline","Error","checklines","commonlength","diff_commonPrefix","commonprefix","substring","diff_commonSuffix","commonsuffix","length","diffs","diff_compute_","unshift","push","diff_cleanupMerge","longtext","shorttext","i","indexOf","hm","diff_halfMatch_","text1_a","text1_b","text2_a","text2_b","mid_common","diffs_a","diffs_b","concat","diff_lineMode_","diff_bisect_","a","diff_linesToChars_","chars1","chars2","linearray","lineArray","diff_charsToLines_","diff_cleanupSemantic","pointer","count_delete","count_insert","text_delete","text_insert","splice","subDiff","j","pop","text1_length","text2_length","max_d","Math","ceil","v_offset","v_length","v1","Array","v2","x","delta","front","k1start","k1end","k2start","k2end","d","k1","k1_offset","y1","x1","charAt","k2_offset","x2","diff_bisectSplit_","k2","y2","y","text1a","text2a","text1b","text2b","diffsb","lineHash","diff_linesToCharsMunge_","chars","lineStart","lineEnd","lineArrayLength","line","hasOwnProperty","undefined","String","fromCharCode","maxLines","charCodeAt","join","pointermin","pointermax","min","pointermid","pointerstart","floor","pointerend","diff_commonOverlap_","text_length","best","pattern","found","dmp","diff_halfMatchI_","best_longtext_a","best_longtext_b","best_shorttext_a","best_shorttext_b","seed","best_common","prefixLength","suffixLength","hm1","hm2","changes","equalities","equalitiesLength","lastEquality","length_insertions1","length_deletions1","length_insertions2","length_deletions2","max","diff_cleanupSemanticLossless","deletion","insertion","overlap_length1","overlap_length2","diff_cleanupSemanticScore_","one","two","char1","char2","nonAlphaNumeric1","match","nonAlphaNumericRegex_","nonAlphaNumeric2","whitespace1","whitespaceRegex_","whitespace2","lineBreak1","linebreakRegex_","lineBreak2","blankLine1","blanklineEndRegex_","blankLine2","blanklineStartRegex_","equality1","edit","equality2","commonOffset","commonString","bestEquality1","bestEdit","bestEquality2","bestScore","score","diff_cleanupEfficiency","pre_ins","pre_del","post_ins","post_del","diff_xIndex","loc","last_chars1","last_chars2","diff_prettyHtml","html","pattern_amp","pattern_lt","pattern_gt","pattern_para","replace","diff_text1","diff_text2","diff_levenshtein","levenshtein","insertions","deletions","data","diff_toDelta","encodeURI","diff_fromDelta","diffsLength","tokens","split","param","decodeURI","ex","n","parseInt","isNaN","match_main","match_bitap_","s","match_alphabet_","match_bitapScore_","e","accuracy","proximity","abs","score_threshold","best_loc","lastIndexOf","bin_min","bin_mid","matchmask","last_rd","bin_max","start","finish","rd","charMatch","patch_addContext_","patch","start2","length1","padding","prefix","suffix","start1","length2","patch_make","opt_b","opt_c","patches","patch_obj","patchDiffLength","char_count1","char_count2","prepatch_text","postpatch_text","diff_type","diff_text","patch_deepCopy","patchesCopy","patchCopy","patch_apply","nullPadding","patch_addPadding","patch_splitMax","results","start_loc","expected_loc","end_loc","index2","index1","mod","paddingLength","extraLength","patch_size","bigpatch","precontext","empty","shift","postcontext","patch_toText","patch_fromText","textline","textPointer","patchHeader","m","sign","toString","exports","DIFF_INSERT","DIFF_EQUAL","__unused_webpack_module","abcRender","adapterRender","chartRender","codeRender","flowchartRender","graphvizRender","highlightRender","lazyLoadImageRender","element","document","loadImg","it","testImage","createElement","src","getAttribute","addEventListener","naturalHeight","naturalWidth","querySelector","clientWidth","window","innerHeight","style","height","removeAttribute","querySelectorAll","forEach","imgElement","vditorImageIntersectionObserver","disconnect","observe","IntersectionObserver","entries","entrie","isIntersecting","intersectionRatio","target","mathRender","mediaRender","mermaidRender","SMILESRender","markmapRender","mindmapRender","outlineRender","plantumlRender","constants","setContentTheme","addScript","hasClosest","merge","setLute","selection","speechRender","lang","speechSynthesis","SpeechSynthesisUtterance","getVoice","currentVoice","defaultVoice","getVoices","item","default","playSVG","pauseSVG","getElementById","speechDom","className","insertAdjacentElement","onvoiceschanged","voice","utterThis","onend","onerror","display","cancel","classList","remove","innerHTML","ontouchstart","event","contains","parentElement","speaking","paused","resume","pause","speak","add","Hc","vditorSpeechRange","focus","getSelection","rangeCount","range","getRangeAt","trim","cloneRange","rect","getBoundingClientRect","top","scrollTop","left","changedTouches","pageX","clientX","setAttribute","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","rejected","result","done","then","apply","__generator","body","f","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","v","TypeError","call","mergeOptions","options","_a","defaultOption","anchor","cdn","CDN","customEmoji","emojiPath","hljs","HLJS_OPTIONS","markdown","MARKDOWN_OPTIONS","math","MATH_OPTIONS","mode","speech","enable","render","media","theme","THEME_OPTIONS","path","T","md2html","mdText","mergedOptions","G","lute","X","autoSpace","gfmAutoLink","codeBlockPreview","emojiSite","emojis","fixTermTypo","footnotes","headingAnchor","inlineMathDigit","inlineDigit","lazyLoadImage","linkBase","linkPrefix","listStyle","mark","mathBlockPreview","paragraphBeginningSpace","sanitize","toc","renderers","SetJSRenderers","Md2HTML","SetHeadingID","previewRender","previewElement","i18nScriptPrefix","i18nScriptID_1","transform","i18n","includes","el","id","head","removeChild","VditorI18n","Z","current","O","H","J","K","p","B","Q","Y","type","onclick","substr","offsetTop","onhashchange","decodeURIComponent","location","hash","after","spanElement","lG","fb","headingElement","scrollTo","scrollX","preview_image","setCodeTheme","method","Vditor","previewImage","E","k","preview","_VDITOR_VERSION","Constants","ZWSP","DROP_EDITOR","MOBILE_WIDTH","CLASS_MENU_DISABLED","EDIT_TOOLBARS","CODE_THEME","ALIAS_CODE_LANGUAGES","lineNumber","defaultLang","engine","macros","list","_constants__WEBPACK_IMPORTED_MODULE_0__","_util_addScript__WEBPACK_IMPORTED_MODULE_2__","_adapterRender__WEBPACK_IMPORTED_MODULE_1__","_util_function__WEBPACK_IMPORTED_MODULE_3__","SMILESElements","SMILESRenderAdapter","getElements","sd","SmiDrawer","code","getCode","Wb","draw","abcElements","abcRenderAdapter","ABCJS","renderAbc","overflowX","r","mathRenderAdapter","textContent","mermaidRenderAdapter","markmapRenderAdapter","mindmapRenderAdapter","chartRenderAdapter","innerText","graphvizRenderAdapter","flowchartRenderAdapter","plantumlRenderAdapter","echartsElements","option","error_1","Qf","echarts","init","setOption","_util_code160to32__WEBPACK_IMPORTED_MODULE_1__","from","filter","index","maxHeight","_b","_c","codeText","codeElement","cloneNode","endsWith","iconHTML","divElement","copy","copied","textarea","renderMenu","before","outerHeight","insertAdjacentHTML","flowchartElements","flowchartObj","flowchart","parse","drawSVG","graphvizElements","blob","Blob","blobUrl","URL","webkitURL","createObjectURL","worker","Worker","Viz","renderSVGElement","outerHTML","catch","error","console","_util_addStyle__WEBPACK_IMPORTED_MODULE_1__","hljsOption","vditorHljsStyle","href","c","block","language","getLanguage","highlight","ignoreIllegals","linenNumberTemp","whiteSpace","getComputedStyle","isSoftWrap","lineNumberHTML","lineList","map","lineHeight","enabled","markmap","Transformer","Markmap","deriveOptions","transformer","globalCSS","svg","firstChild","mm","create","content","keys","Object","features","key","getAssets","styles","scripts","loadCSS","loadJS","root","frontmatter","frontmatterOptions","setData","fit","markmapElements","parentNode","appendChild","childNodes","nodeName","_util_addScript__WEBPACK_IMPORTED_MODULE_3__","_util_addStyle__WEBPACK_IMPORTED_MODULE_2__","_util_code160to32__WEBPACK_IMPORTED_MODULE_4__","mathElements","defaultOptions","assign","mathElement","katex","renderToString","displayMode","tagName","output","message","stopPropagation","preventDefault","vditorMathElement","currentTarget","closest","clipboardData","MathJax","loader","paths","mathjax","startup","typeset","tex","mathJaxOptions","renderMath_1","mathOptions","getMetricsFor","tex2svgPromise","node","append","clear","updateDocument","errorTextElement","promise","chains","_loop_1","fns","curr","last","fn","chainAsync_1","_util_function__WEBPACK_IMPORTED_MODULE_0__","aElement","url","videoRender","audioRender","youtubeMatch","youkuMatch","qqMatch","coubMatch","facebookMatch","dailymotionMatch","bilibiliMatch","tedMatch","encodeURIComponent","params_1","bvid","on","page","high_quality","as_wide","allowfullscreen","autoplay","startsWith","search","keyValue","src_1","keys_1","iframeRender","mermaidElements","config","securityLevel","altFontFamily","fontFamily","startOnLoad","htmlLabels","useMaxWidth","sequence","diagramMarginX","diagramMarginY","boxMargin","showSequenceNumbers","gantt","leftPadding","rightPadding","mermaid","initialize","mermaidData","e_1","errorElement","mindmapElements","series","JSON","initialTreeDepth","itemStyle","borderWidth","color","backgroundColor","borderColor","borderRadius","offset","position","lineStyle","width","roam","symbol","params","children","tooltip","trigger","triggerOn","_util_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_1__","_mathRender__WEBPACK_IMPORTED_MODULE_0__","contentElement","targetElement","vditor","tocHTML","ids","W","lastIndex","tempElement","SetToC","currentMode","HTML2VditorDOM","SpinVditorIRDOM","SpinVditorDOM","Lute","New","headingsElement","firstElementChild","nextElementSibling","isEqualNode","idElement","windowScrollY","toolbarConfig","pin","toolbar","offsetHeight","scrollY","plantumlElements","plantumlEncoder","encode","PutEmojis","SetEmojiSite","SetHeadingAnchor","SetInlineMathAllowDigitAfterOpenMarker","SetAutoSpace","SetFootnotes","SetFixTermTypo","SetVditorCodeBlockPreview","SetVditorMathBlockPreview","SetSanitize","SetChineseParagraphBeginningSpace","SetRenderListStyle","SetLinkBase","SetLinkPrefix","SetMark","SetGFMAutoLink","SetImageLazyLoading","oldImgElement","oldImgRect","spin","close","overflow","translate3d","innerWidth","setTimeout","scrollWidth","scrollHeight","clientHeight","btnElement","deg","codeTheme","_util_addStyle__WEBPACK_IMPORTED_MODULE_0__","contentTheme","vditorContentTheme","cssPath","addScriptSync","xhrObj","XMLHttpRequest","open","setRequestHeader","send","scriptElement","responseText","async","onload","addStyle","styleElement","rel","getElementsByTagName","code160to32","isSafari","navigator","userAgent","isFirefox","toLowerCase","accessLocalStorage","localStorage","getEventName","isCtrl","platform","toUpperCase","metaKey","ctrlKey","updateHotkeyTip","hotkey","test","isChrome","vendor","genUUID","crypto","getRandomValues","Uint32Array","getSearch","link","hashIndex","URLSearchParams","get","looseJsonParse","Function","_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__","hasTopClosestByClassName","hasClosestByClassName","parentClosest","findTop","hasTopClosestByTag","S","getTopList","topUlElement","topOlElement","topListElement","hasClosestByAttribute","attr","nodeType","isClosest","hasClosestBlock","blockElement","hasClosestByMatchTag","getLastNode","lastChild","hasClosestByTag","hasClosestByHeadings","_i","arguments","merger","obj","prop","_compatibility__WEBPACK_IMPORTED_MODULE_2__","_hasClosest__WEBPACK_IMPORTED_MODULE_1__","getEditorRange","startContainer","ownerDocument","createRange","setStart","collapse","getCursorPosition","editor","cursorRect","parentRect","getClientRects","parent_1","startOffset","selectNode","setEnd","endContainer","endOffset","selectIsEditor","container","commonAncestorContainer","setSelectionFocus","removeAllRanges","addRange","getSelectPosition","selectElement","editorElement","end","preSelectionRange","selectNodeContents","setSelectionByPosition","charIndex","pNode","foundStart","stop","nextCharIndex","nextSibling","setStartBefore","setStartAfter","setEndBefore","setEndAfter","setRangeByWbr","wbrElement","previousElementSibling","isSameNode","previousSibling","i7","insertNode","createTextNode","insertHTML","tempBlockElement","pasteElement","preventInput","execCommand","lastElementChild","F9","pasteTemplate","__webpack_module_cache__","moduleId","cachedModule","definition","o","defineProperty","enumerable","toStringTag","resizeCb","getMarkdown","sv","VditorDOM2Md","wysiwyg","VditorIRDOM2Md","ir","DevTools","renderEchart","_this","devtools","ASTChart","RenderEChartsJSON","align","fontSize","verticalAlign","orient","toolbox","bottom","emphasis","iconStyle","feature","restore","show","saveAsImage","right","resize","compatibility","removeCurrentToolbar","names","name","itemElement","setCurrentToolbar","enableToolbar","disableToolbar","hideToolbar","showToolbar","hidePanel","panels","exceptElement","elements","emoji","hint","popover","toggleSubMenu","panelElement","actionBtn","level","Le","log","print","processCodeRender","previewPanel","customRenders","find","renderToc","outline","clickToc","keydownToc","im","execAfterRender","insertBeforeBlock","trimRight","insertAfterBlock","tocElement","input","ignoreSpace","isHrMD","isHeadingMD","startSpace","endSpace","previousNode","previewRenderElement","firstLinkRefDefElement","isIRElement","footnoteElement","a1","blockquoteElement","O9","listPrevElement","listNextElement","inputType","debugger","footnoteItemElement","footnoteItemText","marker","footnoteRefElement","firstFootnoteElement","allLinkRefDefsElement","allFootnoteElement","ib","process_processAfterRender","enableAddUndoStack","enableHint","enableInput","matchHotKey","hotKey","yl","altKey","shiftKey","hotKeys","keyCode","hasShift","vU","expandMarker","nodeElement","JQ","nodeElementEnd","collapsed","nextNode","nodeValue","markerElement","parentNextNode","nextIsNode","previousIsNode","combineFootnote","afterCombine","footnote","thisNode","inputEvent","processAfterRender","codeBlockMarkerElement","openMarkerElement","getSideByType","mathBlockMarkerElement","mathBlockCloseElement","Caret","isSVElement","footnotes_1","processSpinVditorSVDOM","scrollCenter","setTheme","setPadding","minPadding","maxWidth","paddingLeft","offsetWidth","setTypewriterPosition","typewriterMode","minHeight","setProperty","UIUnbindListener","removeEventListener","extendStatics","templateObject_1","afterRender","initValue","pK","getItem","cache","originalInnerHTML","HTML2Md","highlightToolbarIR","clearTimeout","hlToolbarTimeoutId","Gb","zh","typeElement","liElement","afterRenderEvent","afterRenderTimeoutId","composingLock","counter","setItem","undo","addToUndoStack","undoDelay","getNextHTML","getPreviousHTML","modifyPre","pElement","cloneRangeOffset","insertBefore","setHeading","removeHeading","showCode","first","previousElement","removeBlockElement","click","highlightToolbarWYSIWYG","footnotesElement","genClose","setPopoverPosition","commentElement","ids_1","nextIds_1","tableElement","genUp","genDown","updateTable_1","oldRow","rows","oldColumn","cells","row","input_1","column","input2_1","columnDiff","rowDiff","rowHTML","l","setAlign_1","setTableAlign","left_1","center_1","right_1","td","th","alignType","alignLeft","ns","alignCenter","alignRight","insertRowElement","insertRowBelow","cellElement","insertRow","insertRowBElement","insertRowAbove","insertColumnElement","insertColumnRight","insertColumn","insertColumnBElement","insertColumnLeft","deleteRowElement","deleteRow","deleteColumnElement","deleteColumn","inputWrap","textAlign","oninput","onkeydown","isComposing","select","focusToElement","input2Wrap","linkRefElement","genLinkRefPopover","footnotesRefElement","footnoteRef","input_2","blockRenderElement","isBlock","languageWrap","language_1","codeElement_1","recentLanguage","detail","onkeyup","matchLangData","selectionStart","langs","listLanguages","sort","keyName","genHTML","input_3","genAPopover","backslashElement","offsetLeft","updateLinkRef","input1","textIsNotEmpty","linkHotkey","input1Wrap","linkRef","upElement","up","nextElement","downElement","down","nextInputElement","updateA","input2","tooltipText","highlightToolbar","renderDomByMd","md","Md2VditorDOM","cancelBES","commandName","jump","lastTagName","lastEndTagName","splitHTML","previousHTML","nextHTML","beforeHTML","afterHTML","splitElement","lastBeforeHTML","lastAfterHTML","MenuItem","menuItem","tip","iconElement","tipPosition","CustomEvent","useHighlight","useRender","quoteElement","inlineCodeElement","listToggle","surroundContents","deleteContents","textInputElement","textInputElements","tableHTML_1","tableText","delimiter_1","header","subIndex","cell","hrHTML","toolbarEvent","process_processToolbar","processToolbar","__extends","b","setPrototypeOf","__proto__","__","constructor","setEditMode","markdownText","SetVditorIR","SetVditorWYSIWYG","SetVditorSV","Md2VditorIRDOM","svHTML","resetIcon","toggle","EditMode","_super","instantRendering","splitView","_bindEvent","getSelectText","focusEvent","dblclickEvent","image","isPreview","blurEvent","expandElement","selectPopover","relatedTarget","hideComment","blur","dropEvent","dataTransfer","getData","types","paste","pasteCode","copyEvent","cutEvent","comment","getComments","adjustTop","cursorTop","Ny","hotkeyEvent","keydown","extend","_d","_e","recordFirstPosition","textElement","blockquoteMarkerElement","listMarkerElement","taskMarkerElement","listLastMarkerElement","startIndex","isTask","listFirstMarkerElement","fixTab","isFirst","newLineMatch","newLineText","processPreviousMarkers","extractContents","previousLastElement","processKeydown_processKeydown","fixGSKeyBackspace","fixCJKPosition","fixHR","fixMarkdown","fixList","fixTable","codeRenderElement","inputElemment","fixCodeBlock","fixBlockquote","topBQElement","E2","pTempElement","fixTask","linRefElement","inputElement","fixDelete","rangeStart","rangeStartOffset","nextIsCode","fixFirefoxArrowUpTable","fixCursorDownInlineMath","wysiwyg_processKeydown_processKeydown","newlineElement","beforeMarkerElement","afterMarkerElement","preRenderElement","preBeforeElement","isFirstCell","table2Element","isLastCell","headingMarkerElement","process_processHeading","headingLength","processKeydown","ctrlEnter","redo","esc","processHeading","repeat","subMenuItem","dispatchEvent","selectEvent","onmouseup","selectText","showComment","unSelect","processPaste","spinHTML","SpinVditorSVDOM","spanNode","isPrevious","sideElement","spanType","markerText","hasNL","previousType","previousText","openMarker","processTimeoutId","newLine","insertAdjacentText","getElement","setHeaders","xhr","upload","headers","Upload","isUploading","uploadFiles","files","fileList","filesMax","fileItem","isValidate","validateResult","formData","extraData","iMax","multiple","DataTransferItem","getAsFile","handler","file","validate","hide","uploadFileList","errorTip","uploadingStr","nameEmpty","size","over","fileExt","filename","accept","some","fileTypeError","uploading","cancelUpload","vditorCancelUploadElement","validateFile","FormData","fieldName","token","withCredentials","onreadystatechange","readyState","DONE","status","success","format","response","msg","errFiles","uploadError","succFileText","succMap","genUploadedLabel","onprogress","lengthComputable","progress","loaded","total","input_input","previousAEmptyElement","previoueIsEmptyA","wbr","html_1","firstLinkRefDefElement_1","isWYSIWYGElement","firstFootnoteElement_1","triggerRemoveComment","__makeTemplateObject","cooked","raw","fixBrowserBehavior_awaiter","fixBrowserBehavior_generator","pLiElement","zwspNode","inlineElement","insertEmptyBlock","goPreviousCell","isSelected","pHTML","childElementCount","trimLeft","replaceChild","listIndent","liElements_1","cloneContents","liParentElement","liHTML_1","slice","tempTopListElement","listOutdent","liParentLiElement","liParentAfterElement","liElements_2","isMatch_1","afterHTML_1","reverse","columnCnt","rowCnt","currentColumn","textArray","tab","pText","pTextList","tableHeaderMD","pInnerHTML","innerHTMLList","lastElement","DX","theadHTML","tbodyElement","brElement","trElement","codePosition","isEmpty","taskItemElement","checked","afterHTML_2","beforeHTML_1","isAfter_1","taskItem","parentTagName","dataMarker","startAttribute","rangeElement","lastCellElement","callback","textHTML","textPlain","renderLinkDest","doc","fileReader_1","file_1","items","entering","WalkContinue","TokensStr","__internal_object__","Parent","Type","linkToImgUrl","xhr_1","linkToImgFormat","responseJSON_1","original_1","originalURL","linkToImgCallback","stringify","EscapeHTMLStr","DOMParser","parseFromString","Sanitize","isCode","pres","processPasteCode","$j","HTML2VditorIRDOM","oC","Md2VditorSVDOM","FileReader","readAsDataURL","imgHTML","IsValidLinkDest","processHint","matchLangData_1","key_1","removeInline","aTextElement","hint_awaiter","hint_generator","Hint","hintExtends","splitChar","fillEmoji","preElement","timeId","focusNode","currentLineValue","getKey","emojiHint_1","GetEmojis","matchEmojiData_1","delay","textareaPosition","hintsHTML","hintData","replaceHtml","replaceIndex","defaultView","getPropertyValue","currentHintElement","length_1","currentLastIndex","lastItem","preChar","IR","placeholder","bindEvent","linkElement","lastRect","isOpen","getHTML","VditorDOM2HTML","VditorIRDOM2HTML","Outline","outlineLabel","Preview","classes","copyToX","actions","actionElement","actionHtml","action","btn","actionCustom","w","mdTimeoutId","renderStartTime","responseJSON","startTime","time","performanceTip","cmtFocusElement","copyElement","backgroundImage","Resize","documentSelf","clientY","ondragstart","captureEvents","onmousemove","moveEvent","paddingBottom","onselectstart","onselect","Editor","textScrollTop","textHeight","textScrollHeight","parseFloat","Tip","setPreviewMode","Both_extends","Both","Br","CodeTheme_extends","CodeTheme","ContentTheme_extends","ContentTheme","Counter","Custom_extends","Custom","Devtools_extends","Devtools","Divider","Emoji_extends","Emoji","commonEmojiHTML","emojiValue","emojiTail","download","downloadTip","Export_extends","Export","exportMarkdown","generate","iframe","contentDocument","write","contentWindow","postMessage","exportPDF","exportHTML","Fullscreen_extends","Fullscreen","zIndex","svgElement","dataset","fullscreen","Headings_extends","Headings","heading1","heading2","heading3","heading4","heading5","heading6","Help_extends","Help","Indent_extends","Indent","Info_extends","Info","Version","InsertAfter_extends","InsertAfter","InsertBefore_extends","InsertBefore","Outdent_extends","Outdent","Outline_extends","Outline_Outline","Preview_extends","Preview_Preview","toolbars","RecordMedia","context","SAMPLE_RATE","isRecording","readyFlag","leftChannel","rightChannel","recordingLength","AudioContext","webkitAudioContext","DEFAULT_SAMPLE_RATE","sampleRate","volume","createGain","createMediaStreamSource","connect","recorder","createScriptProcessor","onaudioprocess","destination","cloneChannelData","leftChannelData","rightChannelData","Float32Array","startRecordingNewWavFile","stopRecording","buildWavFileBlob","leftBuffer","mergeBuffers","rightBuffer","interleaved","downSampleBuffer","totalByteCount","buffer","ArrayBuffer","view","DataView","writeUTFBytes","setUint32","setUint16","subChunk2ByteCount","lng","setInt16","rate","sampleRateRatio","newLength","round","offsetResult","offsetBuffer","nextOffsetBuffer","accum","count","desiredChannelBuffer","set","setUint8","Record_extends","Record","mediaRecorder","File","recording","mediaDevices","getUserMedia","audio","mediaStream","inputBuffer","getChannelData","Redo_extends","Redo","Undo_extends","Undo","Upload_extends","Upload_Upload","inputHTML","Toolbar","genItem","panelElement_1","subI","updateConfig","menuItemObj","undo_Undo","stackSize","resetStack","clearStack","undoStack","redoStack","state","renderDiff","hasUndo","G6","addCaret","lastText","diff","patchList","isRedo","redoPatchList","setFocus","cloneElement","Options","rtl","_f","_g","_h","_j","mergeToolbar","toolbarItem","toolbarResult","currentMenuItem","defaultMenuItem","WYSIWYG","commentIds","blockStartElement","blockEndElement","NewNodeID","rangeClone","contents","removeStart","removeEnd","wrap","startElement","endElement","Set","comments_1","oldIds","removedIds","has","unbindListener","scrollListener","codeEndElement","aEndElement","aTitle","popoverTop1","popoverTop","scroll","topPx","checkElement","updateImg","alt","title","imageURL","elementEvent","altWrap","alternateText","titleWrap","genImagePopover","blockCodeElement","getRenderElementNextNode","nextRenderElement","src_extends","isDestroyed","version","showErrorTip","updateToolbarConfig","contentThemePath","getValue","getCurrentMode","disabled","renderPreview","clearCache","removeItem","disabledCache","enableCache","html2md","exportJSON","RenderJSON","deleteValue","isCollapsed","updateValue","insertValue","tmpElement","insertMD","setValue","destroy","iconScript","getCommentIds","hlCommentIds","hlItem","unHlCommentIds","unHlItem","removeCommentIds","removeIds","removeId","_lutePath","export","visualViewport","pendingUpdate_1","viewportHandler","requestAnimationFrame","layoutViewport","initUI"],"sourceRoot":""}