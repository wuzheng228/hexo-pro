{"version":3,"file":"static/js/6373b5e073c884.chunk.js","mappings":"iuCAIA,IAAMA,EAAgBC,EAAAA,EAASC,MAExB,SAASC,EAAQC,GAA0E,IAAvEC,EAASD,EAATC,UAAWC,EAAIF,EAAJE,KAAMC,EAAQH,EAARG,SAAUC,EAAOJ,EAAPI,QAASC,EAAOL,EAAPK,QAASC,EAASN,EAATM,UAAWC,EAAWP,EAAXO,YACvEC,GAAaC,EAAAA,EAAAA,KAAbD,SAC8CE,EAAAC,GAAZC,EAAAA,EAAAA,UAAS,IAAG,GAA/CC,EAAaH,EAAA,GAAEI,EAAgBJ,EAAA,GACmBK,EAAAJ,GAAjBC,EAAAA,EAAAA,UAASP,GAAQ,GAAlDW,EAAYD,EAAA,GAAEE,EAAeF,EAAA,IAEpCG,EAAAA,EAAAA,YAAU,WAEND,EAAgBZ,EACpB,GAAG,CAACA,IAEJ,IAwBUc,EAxBJC,EAAuB,WACzB,GAA6B,KAAzBP,EAAcQ,OAAlB,CAGA,IAAMC,EAAS,IAAIC,IAAIrB,GACvBoB,EAAOE,IAAIX,GACXV,EAASsB,MAAMC,KAAKJ,IACpBR,EAAiB,GAJjB,CAKJ,EAiFA,OACIE,EACIW,EAAAA,cAACC,EAAAA,EAAI,CACDC,MAAOvB,EACPwB,UAAU,EACVC,WAAW,EACXC,MAAO,CACHC,SAAU,WACVC,OAAQ,IACRC,MAAO3B,EAAW,QAAU,QAC5B4B,SAAU,OACVC,KAAM7B,EAAW,OAAI8B,EACrBC,UAAW,aACXC,UAAW,+BAEfC,MA1DJd,EAAAA,cAAA,OAAKK,MAAO,CACRU,QAAS,OACTC,cAAe,SACfC,IAAK,EACLT,MAAO,SAEPR,EAAAA,cAAA,OAAKK,MAAO,CACRU,QAAS,OACTG,oBAAqBrC,EAAW,UAAY,gBAC5CsC,iBAAkBtC,EAAW,YAAc,QAC3CoC,IAAK,EACLG,WAAY,WAEZpB,EAAAA,cAACqB,EAAAA,EAAK,CACFzC,YAAaA,EACb0C,MAAOpC,EACPqC,SAAU,SAACC,GAAC,OAAKrC,EAAiBqC,EAAEC,OAAOH,MAAM,EACjDI,aAAc,SAACF,IArDjB,SAACA,GACf,IAAMG,EAAaH,EAAEC,OAAOH,MAC5B,GAA0B,KAAtBK,EAAWjC,OAAf,CAIA,IAAMC,EAAS,IAAIC,IAAIrB,GACvBoB,EAAOE,IAAI8B,GACXnD,EAASsB,MAAMC,KAAKJ,IACpBR,EAAiB,GAJjB,MAFIA,EAAiB,GAOzB,CA2C2CyC,CAAUJ,EAAG,EACpCK,OAAS3C,EAAcQ,YAAmBiB,EAAV,UAEpCX,EAAAA,cAAC8B,EAAAA,GAAM,CACHC,KAAK,UACLC,QAASvC,EACTwC,UAAW/C,EAAcQ,OACzBW,MAAO,CAAE6B,SAAqB,SACjC,MAGDlC,EAAAA,cAAC8B,EAAAA,GAAM,CACHK,QAAM,EACNH,QAAS,WACL1C,GAAgB,GAChBb,GACJ,EACA4B,MAAO,CAAE6B,SAAqB,SACjC,QAwBLE,UAAW,CAAEC,QAASxD,EAAW,GAAK,KAEtCmB,EAAAA,cAAA,OAAKK,MAAO,CACRiC,UAAW,OACXC,UAAW,OACXC,aAAc,KAtFpBhD,EAAU,GAChBiD,OAAOC,KAAKpE,GAAWqE,SAAQ,SAACC,GAC5BpD,EAAQqD,KAAKvE,EAAUsE,GAC3B,IAEI5C,EAAAA,cAAC/B,EAAa,CACVuB,QAASA,EAAQsD,KAAI,SAACC,EAAMC,GAAC,MAAM,CAC/BC,MACIjD,EAAAA,cAACkD,EAAAA,EAAG,CAACC,MAAO5E,EAAK6E,SAASL,GAAQ,SAAW,GAAI1C,MAAO,CAAEgD,aAAc,IACnEN,GAGTzB,MAAOyB,EACV,IACDzB,MAAO/C,EACPgD,SAAU,SAACC,GAAQhD,EAASgD,EAAG,OA4EnC,IAEZ,C","sources":["webpack://hexo-pro-client/./client/src/pages/content/posts/post/tagAdder.tsx"],"sourcesContent":["import { Button, Card, Checkbox, Input, Tag } from \"antd\"\r\nimport React, { useEffect, useState } from \"react\"\r\nimport useDeviceDetect from '../../../../hooks/useDeviceDetect'\r\n\r\nconst CheckboxGroup = Checkbox.Group\r\n\r\nexport function TagAdder({ existTags, tags, onchange, onClose, visible, cardTitle, placeholder }) {\r\n    const { isMobile } = useDeviceDetect()\r\n    const [tagInputValue, setTagInputValue] = useState('')\r\n    const [localVisible, setLocalVisible] = useState(visible)\r\n\r\n    useEffect(() => {\r\n        // 当外部的 visible 发生变化时，同步更新本地的状态\r\n        setLocalVisible(visible)\r\n    }, [visible])\r\n\r\n    const onInputEnterKeyPress = () => {\r\n        if (tagInputValue.trim() === '') {\r\n            return\r\n        }\r\n        const tagSet = new Set(tags)\r\n        tagSet.add(tagInputValue)\r\n        onchange(Array.from(tagSet))\r\n        setTagInputValue('')\r\n    }\r\n\r\n    const addNewTag = (v) => {\r\n        const inputValue = v.target.value\r\n        if (inputValue.trim() === '') {\r\n            setTagInputValue('')\r\n            return\r\n        }\r\n        const tagSet = new Set(tags)\r\n        tagSet.add(inputValue)\r\n        onchange(Array.from(tagSet))\r\n        setTagInputValue('')\r\n    }\r\n\r\n\r\n    function tagModified() {\r\n        const options = []\r\n        Object.keys(existTags).forEach((name) => {\r\n            options.push(existTags[name])\r\n        })\r\n        return (\r\n            <CheckboxGroup\r\n                options={options.map((item, i) => ({\r\n                    label: (\r\n                        <Tag color={tags.includes(item) ? 'purple' : ''} style={{ marginBottom: 5 }}>\r\n                            {item}\r\n                        </Tag>\r\n                    ),\r\n                    value: item\r\n                }))}\r\n                value={tags}\r\n                onChange={(v) => { onchange(v) }}\r\n            />\r\n        )\r\n    }\r\n\r\n    function addTag() {\r\n        return (\r\n            <div style={{\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                gap: 8,\r\n                width: '100%'\r\n            }}>\r\n                <div style={{\r\n                    display: 'grid',\r\n                    gridTemplateColumns: isMobile ? '1fr 1fr' : '1fr auto auto',\r\n                    gridTemplateRows: isMobile ? 'auto auto' : 'unset',\r\n                    gap: 8,\r\n                    alignItems: 'center'\r\n                }}>\r\n                    <Input\r\n                        placeholder={placeholder}\r\n                        value={tagInputValue}\r\n                        onChange={(v) => setTagInputValue(v.target.value)}\r\n                        onPressEnter={(v) => { addNewTag(v) }}\r\n                        status={!tagInputValue.trim() ? 'error' : undefined}\r\n                    />\r\n                    <Button\r\n                        type=\"primary\"\r\n                        onClick={onInputEnterKeyPress}\r\n                        disabled={!tagInputValue.trim()}\r\n                        style={{ minWidth: isMobile ? '100%' : '100%' }}\r\n                    >\r\n                        添加\r\n                    </Button>\r\n                    <Button\r\n                        danger\r\n                        onClick={() => {\r\n                            setLocalVisible(false)\r\n                            onClose()\r\n                        }}\r\n                        style={{ minWidth: isMobile ? '100%' : '100%' }}\r\n                    >\r\n                        关闭\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        localVisible ? (\r\n            <Card\r\n                title={cardTitle}\r\n                bordered={true}\r\n                hoverable={true}\r\n                style={{\r\n                    position: 'absolute',\r\n                    zIndex: 999,\r\n                    width: isMobile ? '100vw' : '600px',\r\n                    maxWidth: '100%',\r\n                    left: isMobile ? 0 : undefined,\r\n                    boxSizing: 'border-box',\r\n                    boxShadow: '0 4px 12px rgba(0,0,0,0.15)'\r\n                }}\r\n                extra={addTag()}\r\n                bodyStyle={{ padding: isMobile ? 12 : 24 }}\r\n            >\r\n                <div style={{\r\n                    maxHeight: '60vh',\r\n                    overflowY: 'auto',\r\n                    paddingRight: 8\r\n                }}>\r\n                    {tagModified()}\r\n                </div>\r\n            </Card>\r\n        ) : null\r\n    )\r\n}"],"names":["CheckboxGroup","Checkbox","Group","TagAdder","_ref","existTags","tags","onchange","onClose","visible","cardTitle","placeholder","isMobile","useDeviceDetect","_useState2","_slicedToArray","useState","tagInputValue","setTagInputValue","_useState4","localVisible","setLocalVisible","useEffect","options","onInputEnterKeyPress","trim","tagSet","Set","add","Array","from","React","Card","title","bordered","hoverable","style","position","zIndex","width","maxWidth","left","undefined","boxSizing","boxShadow","extra","display","flexDirection","gap","gridTemplateColumns","gridTemplateRows","alignItems","Input","value","onChange","v","target","onPressEnter","inputValue","addNewTag","status","Button","type","onClick","disabled","minWidth","danger","bodyStyle","padding","maxHeight","overflowY","paddingRight","Object","keys","forEach","name","push","map","item","i","label","Tag","color","includes","marginBottom"],"sourceRoot":""}