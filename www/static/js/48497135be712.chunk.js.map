{"version":3,"file":"static/js/48497135be712.chunk.js","mappings":"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","sources":["webpack://hexo-pro-client/./node_modules/@ant-design/icons-svg/es/asn/InboxOutlined.js","webpack://hexo-pro-client/./node_modules/@ant-design/icons/es/icons/InboxOutlined.js","webpack://hexo-pro-client/./node_modules/@ant-design/icons-svg/es/asn/SaveOutlined.js","webpack://hexo-pro-client/./node_modules/@ant-design/icons/es/icons/SaveOutlined.js","webpack://hexo-pro-client/./node_modules/vditor/dist/index.js"],"sourcesContent":["// This icon file is generated automatically.\nvar InboxOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"0 0 1024 1024\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z\" } }] }, \"name\": \"inbox\", \"theme\": \"outlined\" };\nexport default InboxOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport InboxOutlinedSvg from \"@ant-design/icons-svg/es/asn/InboxOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar InboxOutlined = function InboxOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: InboxOutlinedSvg\n  }));\n};\n\n/**![inbox](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTg4NS4yIDQ0Ni4zbC0uMi0uOC0xMTIuMi0yODUuMWMtNS0xNi4xLTE5LjktMjcuMi0zNi44LTI3LjJIMjgxLjJjLTE3IDAtMzIuMSAxMS4zLTM2LjkgMjcuNkwxMzkuNCA0NDNsLS4zLjctLjIuOGMtMS4zIDQuOS0xLjcgOS45LTEgMTQuOC0uMSAxLjYtLjIgMy4yLS4yIDQuOFY4MzBhNjAuOSA2MC45IDAgMDA2MC44IDYwLjhoNjI3LjJjMzMuNSAwIDYwLjgtMjcuMyA2MC45LTYwLjhWNDY0LjFjMC0xLjMgMC0yLjYtLjEtMy43LjQtNC45IDAtOS42LTEuMy0xNC4xem0tMjk1LjgtNDNsLS4zIDE1LjdjLS44IDQ0LjktMzEuOCA3NS4xLTc3LjEgNzUuMS0yMi4xIDAtNDEuMS03LjEtNTQuOC0yMC42UzQzNiA0NDEuMiA0MzUuNiA0MTlsLS4zLTE1LjdIMjI5LjVMMzA5IDIxMGgzOTkuMmw4MS43IDE5My4zSDU4OS40em0tMzc1IDc2LjhoMTU3LjNjMjQuMyA1Ny4xIDc2IDkwLjggMTQwLjQgOTAuOCAzMy43IDAgNjUtOS40IDkwLjMtMjcuMiAyMi4yLTE1LjYgMzkuNS0zNy40IDUwLjctNjMuNmgxNTYuNVY4MTRIMjE0LjRWNDgwLjF6IiAvPjwvc3ZnPg==) */\nvar RefIcon = /*#__PURE__*/React.forwardRef(InboxOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'InboxOutlined';\n}\nexport default RefIcon;","// This icon file is generated automatically.\nvar SaveOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z\" } }] }, \"name\": \"save\", \"theme\": \"outlined\" };\nexport default SaveOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport SaveOutlinedSvg from \"@ant-design/icons-svg/es/asn/SaveOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar SaveOutlined = function SaveOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: SaveOutlinedSvg\n  }));\n};\n\n/**![save](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTg5My4zIDI5My4zTDczMC43IDEzMC43Yy03LjUtNy41LTE2LjctMTMtMjYuNy0xNlYxMTJIMTQ0Yy0xNy43IDAtMzIgMTQuMy0zMiAzMnY3MzZjMCAxNy43IDE0LjMgMzIgMzIgMzJoNzM2YzE3LjcgMCAzMi0xNC4zIDMyLTMyVjMzOC41YzAtMTctNi43LTMzLjItMTguNy00NS4yek0zODQgMTg0aDI1NnYxMDRIMzg0VjE4NHptNDU2IDY1NkgxODRWMTg0aDEzNnYxMzZjMCAxNy43IDE0LjMgMzIgMzIgMzJoMzIwYzE3LjcgMCAzMi0xNC4zIDMyLTMyVjIwNS44bDEzNiAxMzZWODQwek01MTIgNDQyYy03OS41IDAtMTQ0IDY0LjUtMTQ0IDE0NHM2NC41IDE0NCAxNDQgMTQ0IDE0NC02NC41IDE0NC0xNDQtNjQuNS0xNDQtMTQ0LTE0NHptMCAyMjRjLTQ0LjIgMC04MC0zNS44LTgwLTgwczM1LjgtODAgODAtODAgODAgMzUuOCA4MCA4MC0zNS44IDgwLTgwIDgweiIgLz48L3N2Zz4=) */\nvar RefIcon = /*#__PURE__*/React.forwardRef(SaveOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'SaveOutlined';\n}\nexport default RefIcon;","/*!\n * Vditor v3.10.5 - A markdown editor written in TypeScript.\n *\n * MIT License\n *\n * Copyright (c) 2018-present B3log 开源, b3log.org\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Vditor\"] = factory();\n\telse\n\t\troot[\"Vditor\"] = factory();\n})(this, () => {\nreturn /******/ (() => { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 85:\n/***/ ((module) => {\n\n/**\n * Diff Match and Patch\n * Copyright 2018 The diff-match-patch Authors.\n * https://github.com/google/diff-match-patch\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Computes the difference between two texts to create a patch.\n * Applies the patch onto another text, allowing for errors.\n * @author fraser@google.com (Neil Fraser)\n */\n\n/**\n * Class containing the diff, match and patch methods.\n * @constructor\n */\nvar diff_match_patch = function () {\n  // Defaults.\n  // Redefine these in your program to override the defaults.\n\n  // Number of seconds to map a diff before giving up (0 for infinity).\n  this.Diff_Timeout = 1.0;\n  // Cost of an empty edit operation in terms of edit characters.\n  this.Diff_EditCost = 4;\n  // At what point is no match declared (0.0 = perfection, 1.0 = very loose).\n  this.Match_Threshold = 0.5;\n  // How far to search for a match (0 = exact location, 1000+ = broad match).\n  // A match this many characters away from the expected location will add\n  // 1.0 to the score (0.0 is a perfect match).\n  this.Match_Distance = 1000;\n  // When deleting a large block of text (over ~64 characters), how close do\n  // the contents have to be to match the expected contents. (0.0 = perfection,\n  // 1.0 = very loose).  Note that Match_Threshold controls how closely the\n  // end points of a delete need to match.\n  this.Patch_DeleteThreshold = 0.5;\n  // Chunk size for context length.\n  this.Patch_Margin = 4;\n\n  // The number of bits in an int.\n  this.Match_MaxBits = 32;\n};\n\n//  DIFF FUNCTIONS\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n/**\n * Class representing one diff tuple.\n * ~Attempts to look like a two-element array (which is what this used to be).~\n * Constructor returns an actual two-element array, to allow destructing @JackuB\n * See https://github.com/JackuB/diff-match-patch/issues/14 for details\n * @param {number} op Operation, one of: DIFF_DELETE, DIFF_INSERT, DIFF_EQUAL.\n * @param {string} text Text to be deleted, inserted, or retained.\n * @constructor\n */\ndiff_match_patch.Diff = function (op, text) {\n  return [op, text];\n};\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {boolean=} opt_checklines Optional speedup flag. If present and false,\n *     then don't run a line-level diff first to identify the changed areas.\n *     Defaults to true, which does a faster, slightly less optimal diff.\n * @param {number=} opt_deadline Optional time when the diff should be complete\n *     by.  Used internally for recursive calls.  Users should set DiffTimeout\n *     instead.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_main = function (text1, text2, opt_checklines, opt_deadline) {\n  // Set a deadline by which time the diff must be complete.\n  if (typeof opt_deadline == 'undefined') {\n    if (this.Diff_Timeout <= 0) {\n      opt_deadline = Number.MAX_VALUE;\n    } else {\n      opt_deadline = new Date().getTime() + this.Diff_Timeout * 1000;\n    }\n  }\n  var deadline = opt_deadline;\n\n  // Check for null inputs.\n  if (text1 == null || text2 == null) {\n    throw new Error('Null input. (diff_main)');\n  }\n\n  // Check for equality (speedup).\n  if (text1 == text2) {\n    if (text1) {\n      return [new diff_match_patch.Diff(DIFF_EQUAL, text1)];\n    }\n    return [];\n  }\n  if (typeof opt_checklines == 'undefined') {\n    opt_checklines = true;\n  }\n  var checklines = opt_checklines;\n\n  // Trim off common prefix (speedup).\n  var commonlength = this.diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = this.diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = this.diff_compute_(text1, text2, checklines, deadline);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, commonprefix));\n  }\n  if (commonsuffix) {\n    diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, commonsuffix));\n  }\n  this.diff_cleanupMerge(diffs);\n  return diffs;\n};\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {boolean} checklines Speedup flag.  If false, then don't run a\n *     line-level diff first to identify the changed areas.\n *     If true, then run a faster, slightly less optimal diff.\n * @param {number} deadline Time when the diff should be complete by.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\ndiff_match_patch.prototype.diff_compute_ = function (text1, text2, checklines, deadline) {\n  var diffs;\n  if (!text1) {\n    // Just add some text (speedup).\n    return [new diff_match_patch.Diff(DIFF_INSERT, text2)];\n  }\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [new diff_match_patch.Diff(DIFF_DELETE, text1)];\n  }\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i != -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [new diff_match_patch.Diff(DIFF_INSERT, longtext.substring(0, i)), new diff_match_patch.Diff(DIFF_EQUAL, shorttext), new diff_match_patch.Diff(DIFF_INSERT, longtext.substring(i + shorttext.length))];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n  if (shorttext.length == 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [new diff_match_patch.Diff(DIFF_DELETE, text1), new diff_match_patch.Diff(DIFF_INSERT, text2)];\n  }\n\n  // Check to see if the problem can be split in two.\n  var hm = this.diff_halfMatch_(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = this.diff_main(text1_a, text2_a, checklines, deadline);\n    var diffs_b = this.diff_main(text1_b, text2_b, checklines, deadline);\n    // Merge the results.\n    return diffs_a.concat([new diff_match_patch.Diff(DIFF_EQUAL, mid_common)], diffs_b);\n  }\n  if (checklines && text1.length > 100 && text2.length > 100) {\n    return this.diff_lineMode_(text1, text2, deadline);\n  }\n  return this.diff_bisect_(text1, text2, deadline);\n};\n\n/**\n * Do a quick line-level diff on both strings, then rediff the parts for\n * greater accuracy.\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} deadline Time when the diff should be complete by.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\ndiff_match_patch.prototype.diff_lineMode_ = function (text1, text2, deadline) {\n  // Scan the text on a line-by-line basis first.\n  var a = this.diff_linesToChars_(text1, text2);\n  text1 = a.chars1;\n  text2 = a.chars2;\n  var linearray = a.lineArray;\n  var diffs = this.diff_main(text1, text2, false, deadline);\n\n  // Convert the diff back to original text.\n  this.diff_charsToLines_(diffs, linearray);\n  // Eliminate freak matches (e.g. blank lines)\n  this.diff_cleanupSemantic(diffs);\n\n  // Rediff any replacement blocks, this time character-by-character.\n  // Add a dummy entry at the end.\n  diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, ''));\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        break;\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete >= 1 && count_insert >= 1) {\n          // Delete the offending records and add the merged ones.\n          diffs.splice(pointer - count_delete - count_insert, count_delete + count_insert);\n          pointer = pointer - count_delete - count_insert;\n          var subDiff = this.diff_main(text_delete, text_insert, false, deadline);\n          for (var j = subDiff.length - 1; j >= 0; j--) {\n            diffs.splice(pointer, 0, subDiff[j]);\n          }\n          pointer = pointer + subDiff.length;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n    pointer++;\n  }\n  diffs.pop(); // Remove the dummy entry at the end.\n\n  return diffs;\n};\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} deadline Time at which to bail if not yet complete.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\ndiff_match_patch.prototype.diff_bisect_ = function (text1, text2, deadline) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length);\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = delta % 2 != 0;\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n  for (var d = 0; d < max_d; d++) {\n    // Bail out if deadline is reached.\n    if (new Date().getTime() > deadline) {\n      break;\n    }\n\n    // Walk the front path one step.\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n      if (k1 == -d || k1 != d && v1[k1_offset - 1] < v1[k1_offset + 1]) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n      var y1 = x1 - k1;\n      while (x1 < text1_length && y1 < text2_length && text1.charAt(x1) == text2.charAt(y1)) {\n        x1++;\n        y1++;\n      }\n      v1[k1_offset] = x1;\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] != -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n          if (x1 >= x2) {\n            // Overlap detected.\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n      if (k2 == -d || k2 != d && v2[k2_offset - 1] < v2[k2_offset + 1]) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n      var y2 = x2 - k2;\n      while (x2 < text1_length && y2 < text2_length && text1.charAt(text1_length - x2 - 1) == text2.charAt(text2_length - y2 - 1)) {\n        x2++;\n        y2++;\n      }\n      v2[k2_offset] = x2;\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] != -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset;\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1_length - x2;\n          if (x1 >= x2) {\n            // Overlap detected.\n            return this.diff_bisectSplit_(text1, text2, x1, y1, deadline);\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [new diff_match_patch.Diff(DIFF_DELETE, text1), new diff_match_patch.Diff(DIFF_INSERT, text2)];\n};\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @param {number} deadline Time at which to bail if not yet complete.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @private\n */\ndiff_match_patch.prototype.diff_bisectSplit_ = function (text1, text2, x, y, deadline) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y);\n\n  // Compute both diffs serially.\n  var diffs = this.diff_main(text1a, text2a, false, deadline);\n  var diffsb = this.diff_main(text1b, text2b, false, deadline);\n  return diffs.concat(diffsb);\n};\n\n/**\n * Split two texts into an array of strings.  Reduce the texts to a string of\n * hashes where each Unicode character represents one line.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {{chars1: string, chars2: string, lineArray: !Array.<string>}}\n *     An object containing the encoded text1, the encoded text2 and\n *     the array of unique strings.\n *     The zeroth element of the array of unique strings is intentionally blank.\n * @private\n */\ndiff_match_patch.prototype.diff_linesToChars_ = function (text1, text2) {\n  var lineArray = []; // e.g. lineArray[4] == 'Hello\\n'\n  var lineHash = {}; // e.g. lineHash['Hello\\n'] == 4\n\n  // '\\x00' is a valid character, but various debuggers don't like it.\n  // So we'll insert a junk entry to avoid generating a null character.\n  lineArray[0] = '';\n\n  /**\n   * Split a text into an array of strings.  Reduce the texts to a string of\n   * hashes where each Unicode character represents one line.\n   * Modifies linearray and linehash through being a closure.\n   * @param {string} text String to encode.\n   * @return {string} Encoded string.\n   * @private\n   */\n  function diff_linesToCharsMunge_(text) {\n    var chars = '';\n    // Walk the text, pulling out a substring for each line.\n    // text.split('\\n') would would temporarily double our memory footprint.\n    // Modifying text would create many large strings to garbage collect.\n    var lineStart = 0;\n    var lineEnd = -1;\n    // Keeping our own length variable is faster than looking it up.\n    var lineArrayLength = lineArray.length;\n    while (lineEnd < text.length - 1) {\n      lineEnd = text.indexOf('\\n', lineStart);\n      if (lineEnd == -1) {\n        lineEnd = text.length - 1;\n      }\n      var line = text.substring(lineStart, lineEnd + 1);\n      if (lineHash.hasOwnProperty ? lineHash.hasOwnProperty(line) : lineHash[line] !== undefined) {\n        chars += String.fromCharCode(lineHash[line]);\n      } else {\n        if (lineArrayLength == maxLines) {\n          // Bail out at 65535 because\n          // String.fromCharCode(65536) == String.fromCharCode(0)\n          line = text.substring(lineStart);\n          lineEnd = text.length;\n        }\n        chars += String.fromCharCode(lineArrayLength);\n        lineHash[line] = lineArrayLength;\n        lineArray[lineArrayLength++] = line;\n      }\n      lineStart = lineEnd + 1;\n    }\n    return chars;\n  }\n  // Allocate 2/3rds of the space for text1, the rest for text2.\n  var maxLines = 40000;\n  var chars1 = diff_linesToCharsMunge_(text1);\n  maxLines = 65535;\n  var chars2 = diff_linesToCharsMunge_(text2);\n  return {\n    chars1: chars1,\n    chars2: chars2,\n    lineArray: lineArray\n  };\n};\n\n/**\n * Rehydrate the text in a diff from a string of line hashes to real lines of\n * text.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @param {!Array.<string>} lineArray Array of unique strings.\n * @private\n */\ndiff_match_patch.prototype.diff_charsToLines_ = function (diffs, lineArray) {\n  for (var i = 0; i < diffs.length; i++) {\n    var chars = diffs[i][1];\n    var text = [];\n    for (var j = 0; j < chars.length; j++) {\n      text[j] = lineArray[chars.charCodeAt(j)];\n    }\n    diffs[i][1] = text.join('');\n  }\n};\n\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\ndiff_match_patch.prototype.diff_commonPrefix = function (text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) != text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: https://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(pointerstart, pointermid) == text2.substring(pointerstart, pointermid)) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\ndiff_match_patch.prototype.diff_commonSuffix = function (text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(text1.length - 1) != text2.charAt(text2.length - 1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: https://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(text1.length - pointermid, text1.length - pointerend) == text2.substring(text2.length - pointermid, text2.length - pointerend)) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n/**\n * Determine if the suffix of one string is the prefix of another.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of the first\n *     string and the start of the second string.\n * @private\n */\ndiff_match_patch.prototype.diff_commonOverlap_ = function (text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  // Eliminate the null case.\n  if (text1_length == 0 || text2_length == 0) {\n    return 0;\n  }\n  // Truncate the longer string.\n  if (text1_length > text2_length) {\n    text1 = text1.substring(text1_length - text2_length);\n  } else if (text1_length < text2_length) {\n    text2 = text2.substring(0, text1_length);\n  }\n  var text_length = Math.min(text1_length, text2_length);\n  // Quick check for the worst case.\n  if (text1 == text2) {\n    return text_length;\n  }\n\n  // Start by looking for a single character match\n  // and increase length until no match is found.\n  // Performance analysis: https://neil.fraser.name/news/2010/11/04/\n  var best = 0;\n  var length = 1;\n  while (true) {\n    var pattern = text1.substring(text_length - length);\n    var found = text2.indexOf(pattern);\n    if (found == -1) {\n      return best;\n    }\n    length += found;\n    if (found == 0 || text1.substring(text_length - length) == text2.substring(0, length)) {\n      best = length;\n      length++;\n    }\n  }\n};\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n * @private\n */\ndiff_match_patch.prototype.diff_halfMatch_ = function (text1, text2) {\n  if (this.Diff_Timeout <= 0) {\n    // Don't risk returning a non-optimal diff if we have unlimited time.\n    return null;\n  }\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null; // Pointless.\n  }\n  var dmp = this; // 'this' becomes 'window' in a closure.\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = '';\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) != -1) {\n      var prefixLength = dmp.diff_commonPrefix(longtext.substring(i), shorttext.substring(j));\n      var suffixLength = dmp.diff_commonSuffix(longtext.substring(0, i), shorttext.substring(0, j));\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common = shorttext.substring(j - suffixLength, j) + shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length * 2 >= longtext.length) {\n      return [best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b, best_common];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI_(longtext, shorttext, Math.ceil(longtext.length / 4));\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI_(longtext, shorttext, Math.ceil(longtext.length / 2));\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n};\n\n/**\n * Reduce the number of edits by eliminating semantically trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_cleanupSemantic = function (diffs) {\n  var changes = false;\n  var equalities = []; // Stack of indices where equalities are found.\n  var equalitiesLength = 0; // Keeping our own length var is faster in JS.\n  /** @type {?string} */\n  var lastEquality = null;\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n  var pointer = 0; // Index of current position.\n  // Number of characters that changed prior to the equality.\n  var length_insertions1 = 0;\n  var length_deletions1 = 0;\n  // Number of characters that changed after the equality.\n  var length_insertions2 = 0;\n  var length_deletions2 = 0;\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {\n      // Equality found.\n      equalities[equalitiesLength++] = pointer;\n      length_insertions1 = length_insertions2;\n      length_deletions1 = length_deletions2;\n      length_insertions2 = 0;\n      length_deletions2 = 0;\n      lastEquality = diffs[pointer][1];\n    } else {\n      // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_INSERT) {\n        length_insertions2 += diffs[pointer][1].length;\n      } else {\n        length_deletions2 += diffs[pointer][1].length;\n      }\n      // Eliminate an equality that is smaller or equal to the edits on both\n      // sides of it.\n      if (lastEquality && lastEquality.length <= Math.max(length_insertions1, length_deletions1) && lastEquality.length <= Math.max(length_insertions2, length_deletions2)) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, new diff_match_patch.Diff(DIFF_DELETE, lastEquality));\n        // Change second copy to insert.\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        // Throw away the equality we just deleted.\n        equalitiesLength--;\n        // Throw away the previous equality (it needs to be reevaluated).\n        equalitiesLength--;\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n        length_insertions1 = 0; // Reset the counters.\n        length_deletions1 = 0;\n        length_insertions2 = 0;\n        length_deletions2 = 0;\n        lastEquality = null;\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n\n  // Normalize the diff.\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n  this.diff_cleanupSemanticLossless(diffs);\n\n  // Find any overlaps between deletions and insertions.\n  // e.g: <del>abcxxx</del><ins>xxxdef</ins>\n  //   -> <del>abc</del>xxx<ins>def</ins>\n  // e.g: <del>xxxabc</del><ins>defxxx</ins>\n  //   -> <ins>def</ins>xxx<del>abc</del>\n  // Only extract an overlap if it is as big as the edit ahead or behind it.\n  pointer = 1;\n  while (pointer < diffs.length) {\n    if (diffs[pointer - 1][0] == DIFF_DELETE && diffs[pointer][0] == DIFF_INSERT) {\n      var deletion = diffs[pointer - 1][1];\n      var insertion = diffs[pointer][1];\n      var overlap_length1 = this.diff_commonOverlap_(deletion, insertion);\n      var overlap_length2 = this.diff_commonOverlap_(insertion, deletion);\n      if (overlap_length1 >= overlap_length2) {\n        if (overlap_length1 >= deletion.length / 2 || overlap_length1 >= insertion.length / 2) {\n          // Overlap found.  Insert an equality and trim the surrounding edits.\n          diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_EQUAL, insertion.substring(0, overlap_length1)));\n          diffs[pointer - 1][1] = deletion.substring(0, deletion.length - overlap_length1);\n          diffs[pointer + 1][1] = insertion.substring(overlap_length1);\n          pointer++;\n        }\n      } else {\n        if (overlap_length2 >= deletion.length / 2 || overlap_length2 >= insertion.length / 2) {\n          // Reverse overlap found.\n          // Insert an equality and swap and trim the surrounding edits.\n          diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_EQUAL, deletion.substring(0, overlap_length2)));\n          diffs[pointer - 1][0] = DIFF_INSERT;\n          diffs[pointer - 1][1] = insertion.substring(0, insertion.length - overlap_length2);\n          diffs[pointer + 1][0] = DIFF_DELETE;\n          diffs[pointer + 1][1] = deletion.substring(overlap_length2);\n          pointer++;\n        }\n      }\n      pointer++;\n    }\n    pointer++;\n  }\n};\n\n/**\n * Look for single edits surrounded on both sides by equalities\n * which can be shifted sideways to align the edit to a word boundary.\n * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_cleanupSemanticLossless = function (diffs) {\n  /**\n   * Given two strings, compute a score representing whether the internal\n   * boundary falls on logical boundaries.\n   * Scores range from 6 (best) to 0 (worst).\n   * Closure, but does not reference any external variables.\n   * @param {string} one First string.\n   * @param {string} two Second string.\n   * @return {number} The score.\n   * @private\n   */\n  function diff_cleanupSemanticScore_(one, two) {\n    if (!one || !two) {\n      // Edges are the best.\n      return 6;\n    }\n\n    // Each port of this function behaves slightly differently due to\n    // subtle differences in each language's definition of things like\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\n    // the choice has been made to use each language's native features\n    // rather than force total conformity.\n    var char1 = one.charAt(one.length - 1);\n    var char2 = two.charAt(0);\n    var nonAlphaNumeric1 = char1.match(diff_match_patch.nonAlphaNumericRegex_);\n    var nonAlphaNumeric2 = char2.match(diff_match_patch.nonAlphaNumericRegex_);\n    var whitespace1 = nonAlphaNumeric1 && char1.match(diff_match_patch.whitespaceRegex_);\n    var whitespace2 = nonAlphaNumeric2 && char2.match(diff_match_patch.whitespaceRegex_);\n    var lineBreak1 = whitespace1 && char1.match(diff_match_patch.linebreakRegex_);\n    var lineBreak2 = whitespace2 && char2.match(diff_match_patch.linebreakRegex_);\n    var blankLine1 = lineBreak1 && one.match(diff_match_patch.blanklineEndRegex_);\n    var blankLine2 = lineBreak2 && two.match(diff_match_patch.blanklineStartRegex_);\n    if (blankLine1 || blankLine2) {\n      // Five points for blank lines.\n      return 5;\n    } else if (lineBreak1 || lineBreak2) {\n      // Four points for line breaks.\n      return 4;\n    } else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\n      // Three points for end of sentences.\n      return 3;\n    } else if (whitespace1 || whitespace2) {\n      // Two points for whitespace.\n      return 2;\n    } else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\n      // One point for non-alphanumeric.\n      return 1;\n    }\n    return 0;\n  }\n  var pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL && diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      var equality1 = diffs[pointer - 1][1];\n      var edit = diffs[pointer][1];\n      var equality2 = diffs[pointer + 1][1];\n\n      // First, shift the edit as far left as possible.\n      var commonOffset = this.diff_commonSuffix(equality1, edit);\n      if (commonOffset) {\n        var commonString = edit.substring(edit.length - commonOffset);\n        equality1 = equality1.substring(0, equality1.length - commonOffset);\n        edit = commonString + edit.substring(0, edit.length - commonOffset);\n        equality2 = commonString + equality2;\n      }\n\n      // Second, step character by character right, looking for the best fit.\n      var bestEquality1 = equality1;\n      var bestEdit = edit;\n      var bestEquality2 = equality2;\n      var bestScore = diff_cleanupSemanticScore_(equality1, edit) + diff_cleanupSemanticScore_(edit, equality2);\n      while (edit.charAt(0) === equality2.charAt(0)) {\n        equality1 += edit.charAt(0);\n        edit = edit.substring(1) + equality2.charAt(0);\n        equality2 = equality2.substring(1);\n        var score = diff_cleanupSemanticScore_(equality1, edit) + diff_cleanupSemanticScore_(edit, equality2);\n        // The >= encourages trailing rather than leading whitespace on edits.\n        if (score >= bestScore) {\n          bestScore = score;\n          bestEquality1 = equality1;\n          bestEdit = edit;\n          bestEquality2 = equality2;\n        }\n      }\n      if (diffs[pointer - 1][1] != bestEquality1) {\n        // We have an improvement, save it back to the diff.\n        if (bestEquality1) {\n          diffs[pointer - 1][1] = bestEquality1;\n        } else {\n          diffs.splice(pointer - 1, 1);\n          pointer--;\n        }\n        diffs[pointer][1] = bestEdit;\n        if (bestEquality2) {\n          diffs[pointer + 1][1] = bestEquality2;\n        } else {\n          diffs.splice(pointer + 1, 1);\n          pointer--;\n        }\n      }\n    }\n    pointer++;\n  }\n};\n\n// Define some regex patterns for matching boundaries.\ndiff_match_patch.nonAlphaNumericRegex_ = /[^a-zA-Z0-9]/;\ndiff_match_patch.whitespaceRegex_ = /\\s/;\ndiff_match_patch.linebreakRegex_ = /[\\r\\n]/;\ndiff_match_patch.blanklineEndRegex_ = /\\n\\r?\\n$/;\ndiff_match_patch.blanklineStartRegex_ = /^\\r?\\n\\r?\\n/;\n\n/**\n * Reduce the number of edits by eliminating operationally trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_cleanupEfficiency = function (diffs) {\n  var changes = false;\n  var equalities = []; // Stack of indices where equalities are found.\n  var equalitiesLength = 0; // Keeping our own length var is faster in JS.\n  /** @type {?string} */\n  var lastEquality = null;\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n  var pointer = 0; // Index of current position.\n  // Is there an insertion operation before the last equality.\n  var pre_ins = false;\n  // Is there a deletion operation before the last equality.\n  var pre_del = false;\n  // Is there an insertion operation after the last equality.\n  var post_ins = false;\n  // Is there a deletion operation after the last equality.\n  var post_del = false;\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {\n      // Equality found.\n      if (diffs[pointer][1].length < this.Diff_EditCost && (post_ins || post_del)) {\n        // Candidate found.\n        equalities[equalitiesLength++] = pointer;\n        pre_ins = post_ins;\n        pre_del = post_del;\n        lastEquality = diffs[pointer][1];\n      } else {\n        // Not a candidate, and can never become one.\n        equalitiesLength = 0;\n        lastEquality = null;\n      }\n      post_ins = post_del = false;\n    } else {\n      // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_DELETE) {\n        post_del = true;\n      } else {\n        post_ins = true;\n      }\n      /*\n       * Five types to be split:\n       * <ins>A</ins><del>B</del>XY<ins>C</ins><del>D</del>\n       * <ins>A</ins>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<ins>C</ins>\n       * <ins>A</del>X<ins>C</ins><del>D</del>\n       * <ins>A</ins><del>B</del>X<del>C</del>\n       */\n      if (lastEquality && (pre_ins && pre_del && post_ins && post_del || lastEquality.length < this.Diff_EditCost / 2 && pre_ins + pre_del + post_ins + post_del == 3)) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, new diff_match_patch.Diff(DIFF_DELETE, lastEquality));\n        // Change second copy to insert.\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        equalitiesLength--; // Throw away the equality we just deleted;\n        lastEquality = null;\n        if (pre_ins && pre_del) {\n          // No changes made which could affect previous entry, keep going.\n          post_ins = post_del = true;\n          equalitiesLength = 0;\n        } else {\n          equalitiesLength--; // Throw away the previous equality.\n          pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n          post_ins = post_del = false;\n        }\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n};\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\ndiff_match_patch.prototype.diff_cleanupMerge = function (diffs) {\n  // Add a dummy entry at the end.\n  diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, ''));\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  var commonlength;\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete + count_insert > 1) {\n          if (count_delete !== 0 && count_insert !== 0) {\n            // Factor out any common prefixies.\n            commonlength = this.diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if (pointer - count_delete - count_insert > 0 && diffs[pointer - count_delete - count_insert - 1][0] == DIFF_EQUAL) {\n                diffs[pointer - count_delete - count_insert - 1][1] += text_insert.substring(0, commonlength);\n              } else {\n                diffs.splice(0, 0, new diff_match_patch.Diff(DIFF_EQUAL, text_insert.substring(0, commonlength)));\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixies.\n            commonlength = this.diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] = text_insert.substring(text_insert.length - commonlength) + diffs[pointer][1];\n              text_insert = text_insert.substring(0, text_insert.length - commonlength);\n              text_delete = text_delete.substring(0, text_delete.length - commonlength);\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          pointer -= count_delete + count_insert;\n          diffs.splice(pointer, count_delete + count_insert);\n          if (text_delete.length) {\n            diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_DELETE, text_delete));\n            pointer++;\n          }\n          if (text_insert.length) {\n            diffs.splice(pointer, 0, new diff_match_patch.Diff(DIFF_INSERT, text_insert));\n            pointer++;\n          }\n          pointer++;\n        } else if (pointer !== 0 && diffs[pointer - 1][0] == DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === '') {\n    diffs.pop(); // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL && diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      if (diffs[pointer][1].substring(diffs[pointer][1].length - diffs[pointer - 1][1].length) == diffs[pointer - 1][1]) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] = diffs[pointer - 1][1] + diffs[pointer][1].substring(0, diffs[pointer][1].length - diffs[pointer - 1][1].length);\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) == diffs[pointer + 1][1]) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] = diffs[pointer][1].substring(diffs[pointer + 1][1].length) + diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    this.diff_cleanupMerge(diffs);\n  }\n};\n\n/**\n * loc is a location in text1, compute and return the equivalent location in\n * text2.\n * e.g. 'The cat' vs 'The big cat', 1->1, 5->8\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @param {number} loc Location within text1.\n * @return {number} Location within text2.\n */\ndiff_match_patch.prototype.diff_xIndex = function (diffs, loc) {\n  var chars1 = 0;\n  var chars2 = 0;\n  var last_chars1 = 0;\n  var last_chars2 = 0;\n  var x;\n  for (x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) {\n      // Equality or deletion.\n      chars1 += diffs[x][1].length;\n    }\n    if (diffs[x][0] !== DIFF_DELETE) {\n      // Equality or insertion.\n      chars2 += diffs[x][1].length;\n    }\n    if (chars1 > loc) {\n      // Overshot the location.\n      break;\n    }\n    last_chars1 = chars1;\n    last_chars2 = chars2;\n  }\n  // Was the location was deleted?\n  if (diffs.length != x && diffs[x][0] === DIFF_DELETE) {\n    return last_chars2;\n  }\n  // Add the remaining character length.\n  return last_chars2 + (loc - last_chars1);\n};\n\n/**\n * Convert a diff array into a pretty HTML report.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} HTML representation.\n */\ndiff_match_patch.prototype.diff_prettyHtml = function (diffs) {\n  var html = [];\n  var pattern_amp = /&/g;\n  var pattern_lt = /</g;\n  var pattern_gt = />/g;\n  var pattern_para = /\\n/g;\n  for (var x = 0; x < diffs.length; x++) {\n    var op = diffs[x][0]; // Operation (insert, delete, equal)\n    var data = diffs[x][1]; // Text of change.\n    var text = data.replace(pattern_amp, '&amp;').replace(pattern_lt, '&lt;').replace(pattern_gt, '&gt;').replace(pattern_para, '&para;<br>');\n    switch (op) {\n      case DIFF_INSERT:\n        html[x] = '<ins style=\"background:#e6ffe6;\">' + text + '</ins>';\n        break;\n      case DIFF_DELETE:\n        html[x] = '<del style=\"background:#ffe6e6;\">' + text + '</del>';\n        break;\n      case DIFF_EQUAL:\n        html[x] = '<span>' + text + '</span>';\n        break;\n    }\n  }\n  return html.join('');\n};\n\n/**\n * Compute and return the source text (all equalities and deletions).\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Source text.\n */\ndiff_match_patch.prototype.diff_text1 = function (diffs) {\n  var text = [];\n  for (var x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_INSERT) {\n      text[x] = diffs[x][1];\n    }\n  }\n  return text.join('');\n};\n\n/**\n * Compute and return the destination text (all equalities and insertions).\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Destination text.\n */\ndiff_match_patch.prototype.diff_text2 = function (diffs) {\n  var text = [];\n  for (var x = 0; x < diffs.length; x++) {\n    if (diffs[x][0] !== DIFF_DELETE) {\n      text[x] = diffs[x][1];\n    }\n  }\n  return text.join('');\n};\n\n/**\n * Compute the Levenshtein distance; the number of inserted, deleted or\n * substituted characters.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {number} Number of changes.\n */\ndiff_match_patch.prototype.diff_levenshtein = function (diffs) {\n  var levenshtein = 0;\n  var insertions = 0;\n  var deletions = 0;\n  for (var x = 0; x < diffs.length; x++) {\n    var op = diffs[x][0];\n    var data = diffs[x][1];\n    switch (op) {\n      case DIFF_INSERT:\n        insertions += data.length;\n        break;\n      case DIFF_DELETE:\n        deletions += data.length;\n        break;\n      case DIFF_EQUAL:\n        // A deletion and an insertion is one substitution.\n        levenshtein += Math.max(insertions, deletions);\n        insertions = 0;\n        deletions = 0;\n        break;\n    }\n  }\n  levenshtein += Math.max(insertions, deletions);\n  return levenshtein;\n};\n\n/**\n * Crush the diff into an encoded string which describes the operations\n * required to transform text1 into text2.\n * E.g. =3\\t-2\\t+ing  -> Keep 3 chars, delete 2 chars, insert 'ing'.\n * Operations are tab-separated.  Inserted text is escaped using %xx notation.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n * @return {string} Delta text.\n */\ndiff_match_patch.prototype.diff_toDelta = function (diffs) {\n  var text = [];\n  for (var x = 0; x < diffs.length; x++) {\n    switch (diffs[x][0]) {\n      case DIFF_INSERT:\n        text[x] = '+' + encodeURI(diffs[x][1]);\n        break;\n      case DIFF_DELETE:\n        text[x] = '-' + diffs[x][1].length;\n        break;\n      case DIFF_EQUAL:\n        text[x] = '=' + diffs[x][1].length;\n        break;\n    }\n  }\n  return text.join('\\t').replace(/%20/g, ' ');\n};\n\n/**\n * Given the original text1, and an encoded string which describes the\n * operations required to transform text1 into text2, compute the full diff.\n * @param {string} text1 Source string for the diff.\n * @param {string} delta Delta text.\n * @return {!Array.<!diff_match_patch.Diff>} Array of diff tuples.\n * @throws {!Error} If invalid input.\n */\ndiff_match_patch.prototype.diff_fromDelta = function (text1, delta) {\n  var diffs = [];\n  var diffsLength = 0; // Keeping our own length var is faster in JS.\n  var pointer = 0; // Cursor in text1\n  var tokens = delta.split(/\\t/g);\n  for (var x = 0; x < tokens.length; x++) {\n    // Each token begins with a one character parameter which specifies the\n    // operation of this token (delete, insert, equality).\n    var param = tokens[x].substring(1);\n    switch (tokens[x].charAt(0)) {\n      case '+':\n        try {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_INSERT, decodeURI(param));\n        } catch (ex) {\n          // Malformed URI sequence.\n          throw new Error('Illegal escape in diff_fromDelta: ' + param);\n        }\n        break;\n      case '-':\n      // Fall through.\n      case '=':\n        var n = parseInt(param, 10);\n        if (isNaN(n) || n < 0) {\n          throw new Error('Invalid number in diff_fromDelta: ' + param);\n        }\n        var text = text1.substring(pointer, pointer += n);\n        if (tokens[x].charAt(0) == '=') {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_EQUAL, text);\n        } else {\n          diffs[diffsLength++] = new diff_match_patch.Diff(DIFF_DELETE, text);\n        }\n        break;\n      default:\n        // Blank tokens are ok (from a trailing \\t).\n        // Anything else is an error.\n        if (tokens[x]) {\n          throw new Error('Invalid diff operation in diff_fromDelta: ' + tokens[x]);\n        }\n    }\n  }\n  if (pointer != text1.length) {\n    throw new Error('Delta length (' + pointer + ') does not equal source text length (' + text1.length + ').');\n  }\n  return diffs;\n};\n\n//  MATCH FUNCTIONS\n\n/**\n * Locate the best instance of 'pattern' in 'text' near 'loc'.\n * @param {string} text The text to search.\n * @param {string} pattern The pattern to search for.\n * @param {number} loc The location to search around.\n * @return {number} Best match index or -1.\n */\ndiff_match_patch.prototype.match_main = function (text, pattern, loc) {\n  // Check for null inputs.\n  if (text == null || pattern == null || loc == null) {\n    throw new Error('Null input. (match_main)');\n  }\n  loc = Math.max(0, Math.min(loc, text.length));\n  if (text == pattern) {\n    // Shortcut (potentially not guaranteed by the algorithm)\n    return 0;\n  } else if (!text.length) {\n    // Nothing to match.\n    return -1;\n  } else if (text.substring(loc, loc + pattern.length) == pattern) {\n    // Perfect match at the perfect spot!  (Includes case of null pattern)\n    return loc;\n  } else {\n    // Do a fuzzy compare.\n    return this.match_bitap_(text, pattern, loc);\n  }\n};\n\n/**\n * Locate the best instance of 'pattern' in 'text' near 'loc' using the\n * Bitap algorithm.\n * @param {string} text The text to search.\n * @param {string} pattern The pattern to search for.\n * @param {number} loc The location to search around.\n * @return {number} Best match index or -1.\n * @private\n */\ndiff_match_patch.prototype.match_bitap_ = function (text, pattern, loc) {\n  if (pattern.length > this.Match_MaxBits) {\n    throw new Error('Pattern too long for this browser.');\n  }\n\n  // Initialise the alphabet.\n  var s = this.match_alphabet_(pattern);\n  var dmp = this; // 'this' becomes 'window' in a closure.\n\n  /**\n   * Compute and return the score for a match with e errors and x location.\n   * Accesses loc and pattern through being a closure.\n   * @param {number} e Number of errors in match.\n   * @param {number} x Location of match.\n   * @return {number} Overall score for match (0.0 = good, 1.0 = bad).\n   * @private\n   */\n  function match_bitapScore_(e, x) {\n    var accuracy = e / pattern.length;\n    var proximity = Math.abs(loc - x);\n    if (!dmp.Match_Distance) {\n      // Dodge divide by zero error.\n      return proximity ? 1.0 : accuracy;\n    }\n    return accuracy + proximity / dmp.Match_Distance;\n  }\n\n  // Highest score beyond which we give up.\n  var score_threshold = this.Match_Threshold;\n  // Is there a nearby exact match? (speedup)\n  var best_loc = text.indexOf(pattern, loc);\n  if (best_loc != -1) {\n    score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold);\n    // What about in the other direction? (speedup)\n    best_loc = text.lastIndexOf(pattern, loc + pattern.length);\n    if (best_loc != -1) {\n      score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold);\n    }\n  }\n\n  // Initialise the bit arrays.\n  var matchmask = 1 << pattern.length - 1;\n  best_loc = -1;\n  var bin_min, bin_mid;\n  var bin_max = pattern.length + text.length;\n  var last_rd;\n  for (var d = 0; d < pattern.length; d++) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from 'loc' we can stray at this\n    // error level.\n    bin_min = 0;\n    bin_mid = bin_max;\n    while (bin_min < bin_mid) {\n      if (match_bitapScore_(d, loc + bin_mid) <= score_threshold) {\n        bin_min = bin_mid;\n      } else {\n        bin_max = bin_mid;\n      }\n      bin_mid = Math.floor((bin_max - bin_min) / 2 + bin_min);\n    }\n    // Use the result from this iteration as the maximum for the next.\n    bin_max = bin_mid;\n    var start = Math.max(1, loc - bin_mid + 1);\n    var finish = Math.min(loc + bin_mid, text.length) + pattern.length;\n    var rd = Array(finish + 2);\n    rd[finish + 1] = (1 << d) - 1;\n    for (var j = finish; j >= start; j--) {\n      // The alphabet (s) is a sparse hash, so the following line generates\n      // warnings.\n      var charMatch = s[text.charAt(j - 1)];\n      if (d === 0) {\n        // First pass: exact match.\n        rd[j] = (rd[j + 1] << 1 | 1) & charMatch;\n      } else {\n        // Subsequent passes: fuzzy match.\n        rd[j] = (rd[j + 1] << 1 | 1) & charMatch | ((last_rd[j + 1] | last_rd[j]) << 1 | 1) | last_rd[j + 1];\n      }\n      if (rd[j] & matchmask) {\n        var score = match_bitapScore_(d, j - 1);\n        // This match will almost certainly be better than any existing match.\n        // But check anyway.\n        if (score <= score_threshold) {\n          // Told you so.\n          score_threshold = score;\n          best_loc = j - 1;\n          if (best_loc > loc) {\n            // When passing loc, don't exceed our current distance from loc.\n            start = Math.max(1, 2 * loc - best_loc);\n          } else {\n            // Already passed loc, downhill from here on in.\n            break;\n          }\n        }\n      }\n    }\n    // No hope for a (better) match at greater error levels.\n    if (match_bitapScore_(d + 1, loc) > score_threshold) {\n      break;\n    }\n    last_rd = rd;\n  }\n  return best_loc;\n};\n\n/**\n * Initialise the alphabet for the Bitap algorithm.\n * @param {string} pattern The text to encode.\n * @return {!Object} Hash of character locations.\n * @private\n */\ndiff_match_patch.prototype.match_alphabet_ = function (pattern) {\n  var s = {};\n  for (var i = 0; i < pattern.length; i++) {\n    s[pattern.charAt(i)] = 0;\n  }\n  for (var i = 0; i < pattern.length; i++) {\n    s[pattern.charAt(i)] |= 1 << pattern.length - i - 1;\n  }\n  return s;\n};\n\n//  PATCH FUNCTIONS\n\n/**\n * Increase the context until it is unique,\n * but don't let the pattern expand beyond Match_MaxBits.\n * @param {!diff_match_patch.patch_obj} patch The patch to grow.\n * @param {string} text Source text.\n * @private\n */\ndiff_match_patch.prototype.patch_addContext_ = function (patch, text) {\n  if (text.length == 0) {\n    return;\n  }\n  if (patch.start2 === null) {\n    throw Error('patch not initialized');\n  }\n  var pattern = text.substring(patch.start2, patch.start2 + patch.length1);\n  var padding = 0;\n\n  // Look for the first and last matches of pattern in text.  If two different\n  // matches are found, increase the pattern length.\n  while (text.indexOf(pattern) != text.lastIndexOf(pattern) && pattern.length < this.Match_MaxBits - this.Patch_Margin - this.Patch_Margin) {\n    padding += this.Patch_Margin;\n    pattern = text.substring(patch.start2 - padding, patch.start2 + patch.length1 + padding);\n  }\n  // Add one chunk for good luck.\n  padding += this.Patch_Margin;\n\n  // Add the prefix.\n  var prefix = text.substring(patch.start2 - padding, patch.start2);\n  if (prefix) {\n    patch.diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, prefix));\n  }\n  // Add the suffix.\n  var suffix = text.substring(patch.start2 + patch.length1, patch.start2 + patch.length1 + padding);\n  if (suffix) {\n    patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, suffix));\n  }\n\n  // Roll back the start points.\n  patch.start1 -= prefix.length;\n  patch.start2 -= prefix.length;\n  // Extend the lengths.\n  patch.length1 += prefix.length + suffix.length;\n  patch.length2 += prefix.length + suffix.length;\n};\n\n/**\n * Compute a list of patches to turn text1 into text2.\n * Use diffs if provided, otherwise compute it ourselves.\n * There are four ways to call this function, depending on what data is\n * available to the caller:\n * Method 1:\n * a = text1, b = text2\n * Method 2:\n * a = diffs\n * Method 3 (optimal):\n * a = text1, b = diffs\n * Method 4 (deprecated, use method 3):\n * a = text1, b = text2, c = diffs\n *\n * @param {string|!Array.<!diff_match_patch.Diff>} a text1 (methods 1,3,4) or\n * Array of diff tuples for text1 to text2 (method 2).\n * @param {string|!Array.<!diff_match_patch.Diff>=} opt_b text2 (methods 1,4) or\n * Array of diff tuples for text1 to text2 (method 3) or undefined (method 2).\n * @param {string|!Array.<!diff_match_patch.Diff>=} opt_c Array of diff tuples\n * for text1 to text2 (method 4) or undefined (methods 1,2,3).\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n */\ndiff_match_patch.prototype.patch_make = function (a, opt_b, opt_c) {\n  var text1, diffs;\n  if (typeof a == 'string' && typeof opt_b == 'string' && typeof opt_c == 'undefined') {\n    // Method 1: text1, text2\n    // Compute diffs from text1 and text2.\n    text1 = /** @type {string} */a;\n    diffs = this.diff_main(text1, /** @type {string} */opt_b, true);\n    if (diffs.length > 2) {\n      this.diff_cleanupSemantic(diffs);\n      this.diff_cleanupEfficiency(diffs);\n    }\n  } else if (a && typeof a == 'object' && typeof opt_b == 'undefined' && typeof opt_c == 'undefined') {\n    // Method 2: diffs\n    // Compute text1 from diffs.\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */a;\n    text1 = this.diff_text1(diffs);\n  } else if (typeof a == 'string' && opt_b && typeof opt_b == 'object' && typeof opt_c == 'undefined') {\n    // Method 3: text1, diffs\n    text1 = /** @type {string} */a;\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */opt_b;\n  } else if (typeof a == 'string' && typeof opt_b == 'string' && opt_c && typeof opt_c == 'object') {\n    // Method 4: text1, text2, diffs\n    // text2 is not used.\n    text1 = /** @type {string} */a;\n    diffs = /** @type {!Array.<!diff_match_patch.Diff>} */opt_c;\n  } else {\n    throw new Error('Unknown call format to patch_make.');\n  }\n  if (diffs.length === 0) {\n    return []; // Get rid of the null case.\n  }\n  var patches = [];\n  var patch = new diff_match_patch.patch_obj();\n  var patchDiffLength = 0; // Keeping our own length var is faster in JS.\n  var char_count1 = 0; // Number of characters into the text1 string.\n  var char_count2 = 0; // Number of characters into the text2 string.\n  // Start with text1 (prepatch_text) and apply the diffs until we arrive at\n  // text2 (postpatch_text).  We recreate the patches one by one to determine\n  // context info.\n  var prepatch_text = text1;\n  var postpatch_text = text1;\n  for (var x = 0; x < diffs.length; x++) {\n    var diff_type = diffs[x][0];\n    var diff_text = diffs[x][1];\n    if (!patchDiffLength && diff_type !== DIFF_EQUAL) {\n      // A new patch starts here.\n      patch.start1 = char_count1;\n      patch.start2 = char_count2;\n    }\n    switch (diff_type) {\n      case DIFF_INSERT:\n        patch.diffs[patchDiffLength++] = diffs[x];\n        patch.length2 += diff_text.length;\n        postpatch_text = postpatch_text.substring(0, char_count2) + diff_text + postpatch_text.substring(char_count2);\n        break;\n      case DIFF_DELETE:\n        patch.length1 += diff_text.length;\n        patch.diffs[patchDiffLength++] = diffs[x];\n        postpatch_text = postpatch_text.substring(0, char_count2) + postpatch_text.substring(char_count2 + diff_text.length);\n        break;\n      case DIFF_EQUAL:\n        if (diff_text.length <= 2 * this.Patch_Margin && patchDiffLength && diffs.length != x + 1) {\n          // Small equality inside a patch.\n          patch.diffs[patchDiffLength++] = diffs[x];\n          patch.length1 += diff_text.length;\n          patch.length2 += diff_text.length;\n        } else if (diff_text.length >= 2 * this.Patch_Margin) {\n          // Time for a new patch.\n          if (patchDiffLength) {\n            this.patch_addContext_(patch, prepatch_text);\n            patches.push(patch);\n            patch = new diff_match_patch.patch_obj();\n            patchDiffLength = 0;\n            // Unlike Unidiff, our patch lists have a rolling context.\n            // https://github.com/google/diff-match-patch/wiki/Unidiff\n            // Update prepatch text & pos to reflect the application of the\n            // just completed patch.\n            prepatch_text = postpatch_text;\n            char_count1 = char_count2;\n          }\n        }\n        break;\n    }\n\n    // Update the current character count.\n    if (diff_type !== DIFF_INSERT) {\n      char_count1 += diff_text.length;\n    }\n    if (diff_type !== DIFF_DELETE) {\n      char_count2 += diff_text.length;\n    }\n  }\n  // Pick up the leftover patch if not empty.\n  if (patchDiffLength) {\n    this.patch_addContext_(patch, prepatch_text);\n    patches.push(patch);\n  }\n  return patches;\n};\n\n/**\n * Given an array of patches, return another array that is identical.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n */\ndiff_match_patch.prototype.patch_deepCopy = function (patches) {\n  // Making deep copies is hard in JavaScript.\n  var patchesCopy = [];\n  for (var x = 0; x < patches.length; x++) {\n    var patch = patches[x];\n    var patchCopy = new diff_match_patch.patch_obj();\n    patchCopy.diffs = [];\n    for (var y = 0; y < patch.diffs.length; y++) {\n      patchCopy.diffs[y] = new diff_match_patch.Diff(patch.diffs[y][0], patch.diffs[y][1]);\n    }\n    patchCopy.start1 = patch.start1;\n    patchCopy.start2 = patch.start2;\n    patchCopy.length1 = patch.length1;\n    patchCopy.length2 = patch.length2;\n    patchesCopy[x] = patchCopy;\n  }\n  return patchesCopy;\n};\n\n/**\n * Merge a set of patches onto the text.  Return a patched text, as well\n * as a list of true/false values indicating which patches were applied.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @param {string} text Old text.\n * @return {!Array.<string|!Array.<boolean>>} Two element Array, containing the\n *      new text and an array of boolean values.\n */\ndiff_match_patch.prototype.patch_apply = function (patches, text) {\n  if (patches.length == 0) {\n    return [text, []];\n  }\n\n  // Deep copy the patches so that no changes are made to originals.\n  patches = this.patch_deepCopy(patches);\n  var nullPadding = this.patch_addPadding(patches);\n  text = nullPadding + text + nullPadding;\n  this.patch_splitMax(patches);\n  // delta keeps track of the offset between the expected and actual location\n  // of the previous patch.  If there are patches expected at positions 10 and\n  // 20, but the first patch was found at 12, delta is 2 and the second patch\n  // has an effective expected position of 22.\n  var delta = 0;\n  var results = [];\n  for (var x = 0; x < patches.length; x++) {\n    var expected_loc = patches[x].start2 + delta;\n    var text1 = this.diff_text1(patches[x].diffs);\n    var start_loc;\n    var end_loc = -1;\n    if (text1.length > this.Match_MaxBits) {\n      // patch_splitMax will only provide an oversized pattern in the case of\n      // a monster delete.\n      start_loc = this.match_main(text, text1.substring(0, this.Match_MaxBits), expected_loc);\n      if (start_loc != -1) {\n        end_loc = this.match_main(text, text1.substring(text1.length - this.Match_MaxBits), expected_loc + text1.length - this.Match_MaxBits);\n        if (end_loc == -1 || start_loc >= end_loc) {\n          // Can't find valid trailing context.  Drop this patch.\n          start_loc = -1;\n        }\n      }\n    } else {\n      start_loc = this.match_main(text, text1, expected_loc);\n    }\n    if (start_loc == -1) {\n      // No match found.  :(\n      results[x] = false;\n      // Subtract the delta for this failed patch from subsequent patches.\n      delta -= patches[x].length2 - patches[x].length1;\n    } else {\n      // Found a match.  :)\n      results[x] = true;\n      delta = start_loc - expected_loc;\n      var text2;\n      if (end_loc == -1) {\n        text2 = text.substring(start_loc, start_loc + text1.length);\n      } else {\n        text2 = text.substring(start_loc, end_loc + this.Match_MaxBits);\n      }\n      if (text1 == text2) {\n        // Perfect match, just shove the replacement text in.\n        text = text.substring(0, start_loc) + this.diff_text2(patches[x].diffs) + text.substring(start_loc + text1.length);\n      } else {\n        // Imperfect match.  Run a diff to get a framework of equivalent\n        // indices.\n        var diffs = this.diff_main(text1, text2, false);\n        if (text1.length > this.Match_MaxBits && this.diff_levenshtein(diffs) / text1.length > this.Patch_DeleteThreshold) {\n          // The end points match, but the content is unacceptably bad.\n          results[x] = false;\n        } else {\n          this.diff_cleanupSemanticLossless(diffs);\n          var index1 = 0;\n          var index2;\n          for (var y = 0; y < patches[x].diffs.length; y++) {\n            var mod = patches[x].diffs[y];\n            if (mod[0] !== DIFF_EQUAL) {\n              index2 = this.diff_xIndex(diffs, index1);\n            }\n            if (mod[0] === DIFF_INSERT) {\n              // Insertion\n              text = text.substring(0, start_loc + index2) + mod[1] + text.substring(start_loc + index2);\n            } else if (mod[0] === DIFF_DELETE) {\n              // Deletion\n              text = text.substring(0, start_loc + index2) + text.substring(start_loc + this.diff_xIndex(diffs, index1 + mod[1].length));\n            }\n            if (mod[0] !== DIFF_DELETE) {\n              index1 += mod[1].length;\n            }\n          }\n        }\n      }\n    }\n  }\n  // Strip the padding off.\n  text = text.substring(nullPadding.length, text.length - nullPadding.length);\n  return [text, results];\n};\n\n/**\n * Add some padding on text start and end so that edges can match something.\n * Intended to be called only from within patch_apply.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {string} The padding string added to each side.\n */\ndiff_match_patch.prototype.patch_addPadding = function (patches) {\n  var paddingLength = this.Patch_Margin;\n  var nullPadding = '';\n  for (var x = 1; x <= paddingLength; x++) {\n    nullPadding += String.fromCharCode(x);\n  }\n\n  // Bump all the patches forward.\n  for (var x = 0; x < patches.length; x++) {\n    patches[x].start1 += paddingLength;\n    patches[x].start2 += paddingLength;\n  }\n\n  // Add some padding on start of first diff.\n  var patch = patches[0];\n  var diffs = patch.diffs;\n  if (diffs.length == 0 || diffs[0][0] != DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL, nullPadding));\n    patch.start1 -= paddingLength; // Should be 0.\n    patch.start2 -= paddingLength; // Should be 0.\n    patch.length1 += paddingLength;\n    patch.length2 += paddingLength;\n  } else if (paddingLength > diffs[0][1].length) {\n    // Grow first equality.\n    var extraLength = paddingLength - diffs[0][1].length;\n    diffs[0][1] = nullPadding.substring(diffs[0][1].length) + diffs[0][1];\n    patch.start1 -= extraLength;\n    patch.start2 -= extraLength;\n    patch.length1 += extraLength;\n    patch.length2 += extraLength;\n  }\n\n  // Add some padding on end of last diff.\n  patch = patches[patches.length - 1];\n  diffs = patch.diffs;\n  if (diffs.length == 0 || diffs[diffs.length - 1][0] != DIFF_EQUAL) {\n    // Add nullPadding equality.\n    diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, nullPadding));\n    patch.length1 += paddingLength;\n    patch.length2 += paddingLength;\n  } else if (paddingLength > diffs[diffs.length - 1][1].length) {\n    // Grow last equality.\n    var extraLength = paddingLength - diffs[diffs.length - 1][1].length;\n    diffs[diffs.length - 1][1] += nullPadding.substring(0, extraLength);\n    patch.length1 += extraLength;\n    patch.length2 += extraLength;\n  }\n  return nullPadding;\n};\n\n/**\n * Look through the patches and break up any which are longer than the maximum\n * limit of the match algorithm.\n * Intended to be called only from within patch_apply.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n */\ndiff_match_patch.prototype.patch_splitMax = function (patches) {\n  var patch_size = this.Match_MaxBits;\n  for (var x = 0; x < patches.length; x++) {\n    if (patches[x].length1 <= patch_size) {\n      continue;\n    }\n    var bigpatch = patches[x];\n    // Remove the big old patch.\n    patches.splice(x--, 1);\n    var start1 = bigpatch.start1;\n    var start2 = bigpatch.start2;\n    var precontext = '';\n    while (bigpatch.diffs.length !== 0) {\n      // Create one of several smaller patches.\n      var patch = new diff_match_patch.patch_obj();\n      var empty = true;\n      patch.start1 = start1 - precontext.length;\n      patch.start2 = start2 - precontext.length;\n      if (precontext !== '') {\n        patch.length1 = patch.length2 = precontext.length;\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, precontext));\n      }\n      while (bigpatch.diffs.length !== 0 && patch.length1 < patch_size - this.Patch_Margin) {\n        var diff_type = bigpatch.diffs[0][0];\n        var diff_text = bigpatch.diffs[0][1];\n        if (diff_type === DIFF_INSERT) {\n          // Insertions are harmless.\n          patch.length2 += diff_text.length;\n          start2 += diff_text.length;\n          patch.diffs.push(bigpatch.diffs.shift());\n          empty = false;\n        } else if (diff_type === DIFF_DELETE && patch.diffs.length == 1 && patch.diffs[0][0] == DIFF_EQUAL && diff_text.length > 2 * patch_size) {\n          // This is a large deletion.  Let it pass in one chunk.\n          patch.length1 += diff_text.length;\n          start1 += diff_text.length;\n          empty = false;\n          patch.diffs.push(new diff_match_patch.Diff(diff_type, diff_text));\n          bigpatch.diffs.shift();\n        } else {\n          // Deletion or equality.  Only take as much as we can stomach.\n          diff_text = diff_text.substring(0, patch_size - patch.length1 - this.Patch_Margin);\n          patch.length1 += diff_text.length;\n          start1 += diff_text.length;\n          if (diff_type === DIFF_EQUAL) {\n            patch.length2 += diff_text.length;\n            start2 += diff_text.length;\n          } else {\n            empty = false;\n          }\n          patch.diffs.push(new diff_match_patch.Diff(diff_type, diff_text));\n          if (diff_text == bigpatch.diffs[0][1]) {\n            bigpatch.diffs.shift();\n          } else {\n            bigpatch.diffs[0][1] = bigpatch.diffs[0][1].substring(diff_text.length);\n          }\n        }\n      }\n      // Compute the head context for the next patch.\n      precontext = this.diff_text2(patch.diffs);\n      precontext = precontext.substring(precontext.length - this.Patch_Margin);\n      // Append the end context for this patch.\n      var postcontext = this.diff_text1(bigpatch.diffs).substring(0, this.Patch_Margin);\n      if (postcontext !== '') {\n        patch.length1 += postcontext.length;\n        patch.length2 += postcontext.length;\n        if (patch.diffs.length !== 0 && patch.diffs[patch.diffs.length - 1][0] === DIFF_EQUAL) {\n          patch.diffs[patch.diffs.length - 1][1] += postcontext;\n        } else {\n          patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, postcontext));\n        }\n      }\n      if (!empty) {\n        patches.splice(++x, 0, patch);\n      }\n    }\n  }\n};\n\n/**\n * Take a list of patches and return a textual representation.\n * @param {!Array.<!diff_match_patch.patch_obj>} patches Array of Patch objects.\n * @return {string} Text representation of patches.\n */\ndiff_match_patch.prototype.patch_toText = function (patches) {\n  var text = [];\n  for (var x = 0; x < patches.length; x++) {\n    text[x] = patches[x];\n  }\n  return text.join('');\n};\n\n/**\n * Parse a textual representation of patches and return a list of Patch objects.\n * @param {string} textline Text representation of patches.\n * @return {!Array.<!diff_match_patch.patch_obj>} Array of Patch objects.\n * @throws {!Error} If invalid input.\n */\ndiff_match_patch.prototype.patch_fromText = function (textline) {\n  var patches = [];\n  if (!textline) {\n    return patches;\n  }\n  var text = textline.split('\\n');\n  var textPointer = 0;\n  var patchHeader = /^@@ -(\\d+),?(\\d*) \\+(\\d+),?(\\d*) @@$/;\n  while (textPointer < text.length) {\n    var m = text[textPointer].match(patchHeader);\n    if (!m) {\n      throw new Error('Invalid patch string: ' + text[textPointer]);\n    }\n    var patch = new diff_match_patch.patch_obj();\n    patches.push(patch);\n    patch.start1 = parseInt(m[1], 10);\n    if (m[2] === '') {\n      patch.start1--;\n      patch.length1 = 1;\n    } else if (m[2] == '0') {\n      patch.length1 = 0;\n    } else {\n      patch.start1--;\n      patch.length1 = parseInt(m[2], 10);\n    }\n    patch.start2 = parseInt(m[3], 10);\n    if (m[4] === '') {\n      patch.start2--;\n      patch.length2 = 1;\n    } else if (m[4] == '0') {\n      patch.length2 = 0;\n    } else {\n      patch.start2--;\n      patch.length2 = parseInt(m[4], 10);\n    }\n    textPointer++;\n    while (textPointer < text.length) {\n      var sign = text[textPointer].charAt(0);\n      try {\n        var line = decodeURI(text[textPointer].substring(1));\n      } catch (ex) {\n        // Malformed URI sequence.\n        throw new Error('Illegal escape in patch_fromText: ' + line);\n      }\n      if (sign == '-') {\n        // Deletion.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_DELETE, line));\n      } else if (sign == '+') {\n        // Insertion.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_INSERT, line));\n      } else if (sign == ' ') {\n        // Minor equality.\n        patch.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL, line));\n      } else if (sign == '@') {\n        // Start of next patch.\n        break;\n      } else if (sign === '') {\n        // Blank line?  Whatever.\n      } else {\n        // WTF?\n        throw new Error('Invalid patch mode \"' + sign + '\" in: ' + line);\n      }\n      textPointer++;\n    }\n  }\n  return patches;\n};\n\n/**\n * Class representing one patch operation.\n * @constructor\n */\ndiff_match_patch.patch_obj = function () {\n  /** @type {!Array.<!diff_match_patch.Diff>} */\n  this.diffs = [];\n  /** @type {?number} */\n  this.start1 = null;\n  /** @type {?number} */\n  this.start2 = null;\n  /** @type {number} */\n  this.length1 = 0;\n  /** @type {number} */\n  this.length2 = 0;\n};\n\n/**\n * Emulate GNU diff's format.\n * Header: @@ -382,8 +481,9 @@\n * Indices are printed as 1-based, not 0-based.\n * @return {string} The GNU diff string.\n */\ndiff_match_patch.patch_obj.prototype.toString = function () {\n  var coords1, coords2;\n  if (this.length1 === 0) {\n    coords1 = this.start1 + ',0';\n  } else if (this.length1 == 1) {\n    coords1 = this.start1 + 1;\n  } else {\n    coords1 = this.start1 + 1 + ',' + this.length1;\n  }\n  if (this.length2 === 0) {\n    coords2 = this.start2 + ',0';\n  } else if (this.length2 == 1) {\n    coords2 = this.start2 + 1;\n  } else {\n    coords2 = this.start2 + 1 + ',' + this.length2;\n  }\n  var text = ['@@ -' + coords1 + ' +' + coords2 + ' @@\\n'];\n  var op;\n  // Escape the body of the patch with %xx notation.\n  for (var x = 0; x < this.diffs.length; x++) {\n    switch (this.diffs[x][0]) {\n      case DIFF_INSERT:\n        op = '+';\n        break;\n      case DIFF_DELETE:\n        op = '-';\n        break;\n      case DIFF_EQUAL:\n        op = ' ';\n        break;\n    }\n    text[x + 1] = op + encodeURI(this.diffs[x][1]) + '\\n';\n  }\n  return text.join('').replace(/%20/g, ' ');\n};\n\n// The following export code was added by @ForbesLindesay\nmodule.exports = diff_match_patch;\nmodule.exports.diff_match_patch = diff_match_patch;\nmodule.exports.DIFF_DELETE = DIFF_DELETE;\nmodule.exports.DIFF_INSERT = DIFF_INSERT;\nmodule.exports.DIFF_EQUAL = DIFF_EQUAL;\n\n/***/ }),\n\n/***/ 664:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": () => (/* binding */ method)\n});\n\n// EXTERNAL MODULE: ./src/ts/markdown/abcRender.ts\nvar abcRender = __webpack_require__(386);\n// EXTERNAL MODULE: ./src/ts/markdown/adapterRender.ts\nvar adapterRender = __webpack_require__(781);\n// EXTERNAL MODULE: ./src/ts/markdown/chartRender.ts\nvar chartRender = __webpack_require__(379);\n// EXTERNAL MODULE: ./src/ts/markdown/codeRender.ts\nvar codeRender = __webpack_require__(895);\n// EXTERNAL MODULE: ./src/ts/markdown/flowchartRender.ts\nvar flowchartRender = __webpack_require__(169);\n// EXTERNAL MODULE: ./src/ts/markdown/graphvizRender.ts\nvar graphvizRender = __webpack_require__(572);\n// EXTERNAL MODULE: ./src/ts/markdown/highlightRender.ts\nvar highlightRender = __webpack_require__(702);\n;// CONCATENATED MODULE: ./src/ts/markdown/lazyLoadImageRender.ts\nvar lazyLoadImageRender = function (element) {\n    if (element === void 0) { element = document; }\n    var loadImg = function (it) {\n        var testImage = document.createElement(\"img\");\n        testImage.src = it.getAttribute(\"data-src\");\n        testImage.addEventListener(\"load\", function () {\n            if (!it.getAttribute(\"style\") && !it.getAttribute(\"class\") &&\n                !it.getAttribute(\"width\") && !it.getAttribute(\"height\")) {\n                if (testImage.naturalHeight > testImage.naturalWidth &&\n                    testImage.naturalWidth / testImage.naturalHeight <\n                        document.querySelector(\".vditor-reset\").clientWidth / (window.innerHeight - 40) &&\n                    testImage.naturalHeight > (window.innerHeight - 40)) {\n                    it.style.height = (window.innerHeight - 40) + \"px\";\n                }\n            }\n            it.src = testImage.src;\n        });\n        it.removeAttribute(\"data-src\");\n    };\n    if (!(\"IntersectionObserver\" in window)) {\n        element.querySelectorAll(\"img\").forEach(function (imgElement) {\n            if (imgElement.getAttribute(\"data-src\")) {\n                loadImg(imgElement);\n            }\n        });\n        return false;\n    }\n    if (window.vditorImageIntersectionObserver) {\n        window.vditorImageIntersectionObserver.disconnect();\n        element.querySelectorAll(\"img\").forEach(function (imgElement) {\n            window.vditorImageIntersectionObserver.observe(imgElement);\n        });\n    }\n    else {\n        window.vditorImageIntersectionObserver = new IntersectionObserver(function (entries) {\n            entries.forEach(function (entrie) {\n                if ((typeof entrie.isIntersecting === \"undefined\"\n                    ? entrie.intersectionRatio !== 0\n                    : entrie.isIntersecting)\n                    && entrie.target.getAttribute(\"data-src\")) {\n                    loadImg(entrie.target);\n                }\n            });\n        });\n        element.querySelectorAll(\"img\").forEach(function (imgElement) {\n            window.vditorImageIntersectionObserver.observe(imgElement);\n        });\n    }\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/mathRender.ts\nvar mathRender = __webpack_require__(982);\n// EXTERNAL MODULE: ./src/ts/markdown/mediaRender.ts\nvar mediaRender = __webpack_require__(431);\n// EXTERNAL MODULE: ./src/ts/markdown/mermaidRender.ts\nvar mermaidRender = __webpack_require__(570);\n// EXTERNAL MODULE: ./src/ts/markdown/markmapRender.ts\nvar markmapRender = __webpack_require__(593);\n// EXTERNAL MODULE: ./src/ts/markdown/mindmapRender.ts\nvar mindmapRender = __webpack_require__(558);\n// EXTERNAL MODULE: ./src/ts/markdown/outlineRender.ts\nvar outlineRender = __webpack_require__(182);\n// EXTERNAL MODULE: ./src/ts/markdown/plantumlRender.ts\nvar plantumlRender = __webpack_require__(931);\n// EXTERNAL MODULE: ./src/ts/constants.ts\nvar constants = __webpack_require__(793);\n// EXTERNAL MODULE: ./src/ts/ui/setContentTheme.ts\nvar setContentTheme = __webpack_require__(652);\n// EXTERNAL MODULE: ./src/ts/util/addScript.ts\nvar addScript = __webpack_require__(998);\n// EXTERNAL MODULE: ./src/ts/util/hasClosest.ts\nvar hasClosest = __webpack_require__(118);\n// EXTERNAL MODULE: ./src/ts/util/merge.ts\nvar merge = __webpack_require__(2);\n;// CONCATENATED MODULE: ./src/ts/markdown/anchorRender.ts\nvar anchorRender = function (type) {\n    document.querySelectorAll(\".vditor-anchor\").forEach(function (anchor) {\n        if (type === 1) {\n            anchor.classList.add(\"vditor-anchor--left\");\n        }\n        anchor.onclick = function () {\n            var id = anchor.getAttribute(\"href\").substr(1);\n            var top = document.getElementById(\"vditorAnchor-\" + id).offsetTop;\n            document.querySelector(\"html\").scrollTop = top;\n        };\n    });\n    window.onhashchange = function () {\n        var element = document.getElementById(\"vditorAnchor-\" + decodeURIComponent(window.location.hash.substr(1)));\n        if (element) {\n            document.querySelector(\"html\").scrollTop = element.offsetTop;\n        }\n    };\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/setLute.ts\nvar setLute = __webpack_require__(65);\n// EXTERNAL MODULE: ./src/ts/util/selection.ts\nvar selection = __webpack_require__(307);\n;// CONCATENATED MODULE: ./src/ts/markdown/speechRender.ts\n\nvar speechRender = function (element, lang) {\n    if (lang === void 0) { lang = \"zh_CN\"; }\n    if (typeof speechSynthesis === \"undefined\" || typeof SpeechSynthesisUtterance === \"undefined\") {\n        return;\n    }\n    var getVoice = function () {\n        var voices = speechSynthesis.getVoices();\n        var currentVoice;\n        var defaultVoice;\n        voices.forEach(function (item) {\n            if (item.lang === lang.replace(\"_\", \"-\")) {\n                currentVoice = item;\n            }\n            if (item.default) {\n                defaultVoice = item;\n            }\n        });\n        if (!currentVoice) {\n            currentVoice = defaultVoice;\n        }\n        return currentVoice;\n    };\n    var playSVG = '<svg><use xlink:href=\"#vditor-icon-play\"></use></svg>';\n    var pauseSVG = '<svg><use xlink:href=\"#vditor-icon-pause\"></use></svg>';\n    if (!document.getElementById(\"vditorIconScript\")) {\n        playSVG = '<svg viewBox=\"0 0 32 32\"><path d=\"M3.436 0l25.128 16-25.128 16v-32z\"></path></svg>';\n        pauseSVG = '<svg viewBox=\"0 0 32 32\"><path d=\"M20.617 0h9.128v32h-9.128v-32zM2.255 32v-32h9.128v32h-9.128z\"></path></svg>';\n    }\n    var speechDom = document.querySelector(\".vditor-speech\");\n    if (!speechDom) {\n        speechDom = document.createElement(\"button\");\n        speechDom.className = \"vditor-speech\";\n        element.insertAdjacentElement(\"beforeend\", speechDom);\n        if (speechSynthesis.onvoiceschanged !== undefined) {\n            speechSynthesis.onvoiceschanged = getVoice;\n        }\n    }\n    var voice = getVoice();\n    var utterThis = new SpeechSynthesisUtterance();\n    utterThis.voice = voice;\n    utterThis.onend = utterThis.onerror = function () {\n        speechDom.style.display = \"none\";\n        speechSynthesis.cancel();\n        speechDom.classList.remove(\"vditor-speech--current\");\n        speechDom.innerHTML = playSVG;\n    };\n    element.addEventListener(window.ontouchstart !== undefined ? \"touchend\" : \"click\", function (event) {\n        var target = event.target;\n        if (target.classList.contains(\"vditor-speech\") || target.parentElement.classList.contains(\"vditor-speech\")) {\n            if (!speechDom.classList.contains(\"vditor-speech--current\")) {\n                utterThis.text = speechDom.getAttribute(\"data-text\");\n                speechSynthesis.speak(utterThis);\n                speechDom.classList.add(\"vditor-speech--current\");\n                speechDom.innerHTML = pauseSVG;\n            }\n            else {\n                if (speechSynthesis.speaking) {\n                    if (speechSynthesis.paused) {\n                        speechSynthesis.resume();\n                        speechDom.innerHTML = pauseSVG;\n                    }\n                    else {\n                        speechSynthesis.pause();\n                        speechDom.innerHTML = playSVG;\n                    }\n                }\n            }\n            (0,selection/* setSelectionFocus */.Hc)(window.vditorSpeechRange);\n            element.focus();\n            return;\n        }\n        speechDom.style.display = \"none\";\n        speechSynthesis.cancel();\n        speechDom.classList.remove(\"vditor-speech--current\");\n        speechDom.innerHTML = playSVG;\n        if (getSelection().rangeCount === 0) {\n            return;\n        }\n        var range = getSelection().getRangeAt(0);\n        var text = range.toString().trim();\n        if (!text) {\n            return;\n        }\n        window.vditorSpeechRange = range.cloneRange();\n        var rect = range.getBoundingClientRect();\n        speechDom.innerHTML = playSVG;\n        speechDom.style.display = \"block\";\n        speechDom.style.top = (rect.top + rect.height + document.querySelector(\"html\").scrollTop - 20) + \"px\";\n        if (window.ontouchstart !== undefined) {\n            speechDom.style.left = (event.changedTouches[event.changedTouches.length - 1].pageX + 2) + \"px\";\n        }\n        else {\n            speechDom.style.left = (event.clientX + 2) + \"px\";\n        }\n        speechDom.setAttribute(\"data-text\", text);\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/markdown/previewRender.ts\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar mergeOptions = function (options) {\n    var _a;\n    var defaultOption = {\n        anchor: 0,\n        cdn: constants/* Constants.CDN */.g.CDN,\n        customEmoji: {},\n        emojiPath: \"\".concat(constants/* Constants.CDN */.g.CDN, \"/dist/images/emoji\"),\n        hljs: constants/* Constants.HLJS_OPTIONS */.g.HLJS_OPTIONS,\n        icon: \"ant\",\n        lang: \"zh_CN\",\n        markdown: constants/* Constants.MARKDOWN_OPTIONS */.g.MARKDOWN_OPTIONS,\n        math: constants/* Constants.MATH_OPTIONS */.g.MATH_OPTIONS,\n        mode: \"light\",\n        speech: {\n            enable: false,\n        },\n        render: {\n            media: {\n                enable: true,\n            }\n        },\n        theme: constants/* Constants.THEME_OPTIONS */.g.THEME_OPTIONS,\n    };\n    if (options.cdn) {\n        if (!((_a = options.theme) === null || _a === void 0 ? void 0 : _a.path)) {\n            defaultOption.theme.path = \"\".concat(options.cdn, \"/dist/css/content-theme\");\n        }\n        if (!options.emojiPath) {\n            defaultOption.emojiPath = \"\".concat(options.cdn, \"/dist/images/emoji\");\n        }\n    }\n    return (0,merge/* merge */.T)(defaultOption, options);\n};\nvar md2html = function (mdText, options) {\n    var mergedOptions = mergeOptions(options);\n    return (0,addScript/* addScript */.G)(\"\".concat(mergedOptions.cdn, \"/dist/js/lute/lute.min.js\"), \"vditorLuteScript\").then(function () {\n        var lute = (0,setLute/* setLute */.X)({\n            autoSpace: mergedOptions.markdown.autoSpace,\n            gfmAutoLink: mergedOptions.markdown.gfmAutoLink,\n            codeBlockPreview: mergedOptions.markdown.codeBlockPreview,\n            emojiSite: mergedOptions.emojiPath,\n            emojis: mergedOptions.customEmoji,\n            fixTermTypo: mergedOptions.markdown.fixTermTypo,\n            footnotes: mergedOptions.markdown.footnotes,\n            headingAnchor: mergedOptions.anchor !== 0,\n            inlineMathDigit: mergedOptions.math.inlineDigit,\n            lazyLoadImage: mergedOptions.lazyLoadImage,\n            linkBase: mergedOptions.markdown.linkBase,\n            linkPrefix: mergedOptions.markdown.linkPrefix,\n            listStyle: mergedOptions.markdown.listStyle,\n            mark: mergedOptions.markdown.mark,\n            mathBlockPreview: mergedOptions.markdown.mathBlockPreview,\n            paragraphBeginningSpace: mergedOptions.markdown.paragraphBeginningSpace,\n            sanitize: mergedOptions.markdown.sanitize,\n            toc: mergedOptions.markdown.toc,\n        });\n        if (options === null || options === void 0 ? void 0 : options.renderers) {\n            lute.SetJSRenderers({\n                renderers: {\n                    Md2HTML: options.renderers,\n                },\n            });\n        }\n        lute.SetHeadingID(true);\n        return lute.Md2HTML(mdText);\n    });\n};\nvar previewRender = function (previewElement, markdown, options) { return __awaiter(void 0, void 0, void 0, function () {\n    var mergedOptions, html, i18nScriptPrefix, i18nScriptID_1;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                mergedOptions = mergeOptions(options);\n                return [4 /*yield*/, md2html(markdown, mergedOptions)];\n            case 1:\n                html = _a.sent();\n                if (mergedOptions.transform) {\n                    html = mergedOptions.transform(html);\n                }\n                previewElement.innerHTML = html;\n                previewElement.classList.add(\"vditor-reset\");\n                if (!!mergedOptions.i18n) return [3 /*break*/, 5];\n                if (!![\"en_US\", \"fr_FR\", \"pt_BR\", \"ja_JP\", \"ko_KR\", \"ru_RU\", \"sv_SE\", \"zh_CN\", \"zh_TW\"].includes(mergedOptions.lang)) return [3 /*break*/, 2];\n                throw new Error(\"options.lang error, see https://ld246.com/article/1549638745630#options\");\n            case 2:\n                i18nScriptPrefix = \"vditorI18nScript\";\n                i18nScriptID_1 = i18nScriptPrefix + mergedOptions.lang;\n                document.querySelectorAll(\"head script[id^=\\\"\".concat(i18nScriptPrefix, \"\\\"]\")).forEach(function (el) {\n                    if (el.id !== i18nScriptID_1) {\n                        document.head.removeChild(el);\n                    }\n                });\n                return [4 /*yield*/, (0,addScript/* addScript */.G)(\"\".concat(mergedOptions.cdn, \"/dist/js/i18n/\").concat(mergedOptions.lang, \".js\"), i18nScriptID_1)];\n            case 3:\n                _a.sent();\n                _a.label = 4;\n            case 4: return [3 /*break*/, 6];\n            case 5:\n                window.VditorI18n = mergedOptions.i18n;\n                _a.label = 6;\n            case 6:\n                if (!mergedOptions.icon) return [3 /*break*/, 8];\n                return [4 /*yield*/, (0,addScript/* addScript */.G)(\"\".concat(mergedOptions.cdn, \"/dist/js/icons/\").concat(mergedOptions.icon, \".js\"), \"vditorIconScript\")];\n            case 7:\n                _a.sent();\n                _a.label = 8;\n            case 8:\n                (0,setContentTheme/* setContentTheme */.Z)(mergedOptions.theme.current, mergedOptions.theme.path);\n                if (mergedOptions.anchor === 1) {\n                    previewElement.classList.add(\"vditor-reset--anchor\");\n                }\n                (0,codeRender/* codeRender */.O)(previewElement, mergedOptions.hljs);\n                (0,highlightRender/* highlightRender */.s)(mergedOptions.hljs, previewElement, mergedOptions.cdn);\n                (0,mathRender/* mathRender */.H)(previewElement, {\n                    cdn: mergedOptions.cdn,\n                    math: mergedOptions.math,\n                });\n                (0,mermaidRender/* mermaidRender */.i)(previewElement, mergedOptions.cdn, mergedOptions.mode);\n                (0,markmapRender/* markmapRender */.K)(previewElement, mergedOptions.cdn, mergedOptions.mode);\n                (0,flowchartRender/* flowchartRender */.P)(previewElement, mergedOptions.cdn);\n                (0,graphvizRender/* graphvizRender */.v)(previewElement, mergedOptions.cdn);\n                (0,chartRender/* chartRender */.p)(previewElement, mergedOptions.cdn, mergedOptions.mode);\n                (0,mindmapRender/* mindmapRender */.P)(previewElement, mergedOptions.cdn, mergedOptions.mode);\n                (0,plantumlRender/* plantumlRender */.B)(previewElement, mergedOptions.cdn);\n                (0,abcRender/* abcRender */.Q)(previewElement, mergedOptions.cdn);\n                if (mergedOptions.render.media.enable) {\n                    (0,mediaRender/* mediaRender */.Y)(previewElement);\n                }\n                if (mergedOptions.speech.enable) {\n                    speechRender(previewElement);\n                }\n                if (mergedOptions.anchor !== 0) {\n                    anchorRender(mergedOptions.anchor);\n                }\n                if (mergedOptions.after) {\n                    mergedOptions.after();\n                }\n                if (mergedOptions.lazyLoadImage) {\n                    lazyLoadImageRender(previewElement);\n                }\n                previewElement.addEventListener(\"click\", function (event) {\n                    var spanElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"SPAN\");\n                    if (spanElement && (0,hasClosest/* hasClosestByClassName */.fb)(spanElement, \"vditor-toc\")) {\n                        var headingElement = previewElement.querySelector(\"#\" + spanElement.getAttribute(\"data-target-id\"));\n                        if (headingElement) {\n                            window.scrollTo(window.scrollX, headingElement.offsetTop);\n                        }\n                        return;\n                    }\n                });\n                return [2 /*return*/];\n        }\n    });\n}); };\n\n// EXTERNAL MODULE: ./src/ts/preview/image.ts\nvar preview_image = __webpack_require__(971);\n// EXTERNAL MODULE: ./src/ts/ui/setCodeTheme.ts\nvar setCodeTheme = __webpack_require__(34);\n;// CONCATENATED MODULE: ./src/method.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Vditor = /** @class */ (function () {\n    function Vditor() {\n    }\n    /** 点击图片放大 */\n    Vditor.adapterRender = adapterRender;\n    /** 点击图片放大 */\n    Vditor.previewImage = preview_image/* previewImage */.E;\n    /** 为 element 中的代码块添加复制按钮 */\n    Vditor.codeRender = codeRender/* codeRender */.O;\n    /** 对 graphviz 进行渲染 */\n    Vditor.graphvizRender = graphvizRender/* graphvizRender */.v;\n    /** 为 element 中的代码块进行高亮渲染 */\n    Vditor.highlightRender = highlightRender/* highlightRender */.s;\n    /** 对数学公式进行渲染 */\n    Vditor.mathRender = mathRender/* mathRender */.H;\n    /** 流程图/时序图/甘特图渲染 */\n    Vditor.mermaidRender = mermaidRender/* mermaidRender */.i;\n    /** 支持markdown的思维导图 */\n    Vditor.markmapRender = markmapRender/* markmapRender */.K;\n    /** flowchart.js 渲染 */\n    Vditor.flowchartRender = flowchartRender/* flowchartRender */.P;\n    /** 图表渲染 */\n    Vditor.chartRender = chartRender/* chartRender */.p;\n    /** 五线谱渲染 */\n    Vditor.abcRender = abcRender/* abcRender */.Q;\n    /** 脑图渲染 */\n    Vditor.mindmapRender = mindmapRender/* mindmapRender */.P;\n    /** plantuml渲染 */\n    Vditor.plantumlRender = plantumlRender/* plantumlRender */.B;\n    /** 大纲渲染 */\n    Vditor.outlineRender = outlineRender/* outlineRender */.k;\n    /** 为[特定链接](https://github.com/Vanessa219/vditor/issues/7)分别渲染为视频、音频、嵌入的 iframe */\n    Vditor.mediaRender = mediaRender/* mediaRender */.Y;\n    /** 对选中的文字进行阅读 */\n    Vditor.speechRender = speechRender;\n    /** 对图片进行懒加载 */\n    Vditor.lazyLoadImageRender = lazyLoadImageRender;\n    /** Markdown 文本转换为 HTML，该方法需使用[异步编程](https://ld246.com/article/1546828434083?r=Vaness) */\n    Vditor.md2html = md2html;\n    /** 页面 Markdown 文章渲染 */\n    Vditor.preview = previewRender;\n    /** 设置代码主题 */\n    Vditor.setCodeTheme = setCodeTheme/* setCodeTheme */.Y;\n    /** 设置内容主题 */\n    Vditor.setContentTheme = setContentTheme/* setContentTheme */.Z;\n    return Vditor;\n}());\n/* harmony default export */ const method = (Vditor);\n\n\n/***/ }),\n\n/***/ 793:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"H\": () => (/* binding */ _VDITOR_VERSION),\n/* harmony export */   \"g\": () => (/* binding */ Constants)\n/* harmony export */ });\nvar _VDITOR_VERSION = \"3.10.5\";\n\nvar Constants = /** @class */ (function () {\n    function Constants() {\n    }\n    Constants.ZWSP = \"\\u200b\";\n    Constants.DROP_EDITOR = \"application/editor\";\n    Constants.MOBILE_WIDTH = 520;\n    Constants.CLASS_MENU_DISABLED = \"vditor-menu--disabled\";\n    Constants.EDIT_TOOLBARS = [\"emoji\", \"headings\", \"bold\", \"italic\", \"strike\", \"link\", \"list\",\n        \"ordered-list\", \"outdent\", \"indent\", \"check\", \"line\", \"quote\", \"code\", \"inline-code\", \"insert-after\",\n        \"insert-before\", \"upload\", \"record\", \"table\"];\n    Constants.CODE_THEME = [\"abap\", \"algol\", \"algol_nu\", \"arduino\", \"autumn\", \"borland\", \"bw\",\n        \"colorful\", \"dracula\", \"emacs\", \"friendly\", \"fruity\", \"github\", \"igor\", \"lovelace\", \"manni\", \"monokai\",\n        \"monokailight\", \"murphy\", \"native\", \"paraiso-dark\", \"paraiso-light\", \"pastie\", \"perldoc\", \"pygments\",\n        \"rainbow_dash\", \"rrt\", \"solarized-dark\", \"solarized-dark256\", \"solarized-light\", \"swapoff\", \"tango\", \"trac\",\n        \"vim\", \"vs\", \"xcode\", \"ant-design\"];\n    Constants.CODE_LANGUAGES = [\"mermaid\", \"echarts\", \"mindmap\", \"plantuml\", \"abc\", \"graphviz\", \"flowchart\", \"apache\",\n        \"js\", \"ts\", \"html\", \"markmap\",\n        // common\n        \"properties\", \"apache\", \"bash\", \"c\", \"csharp\", \"cpp\", \"css\", \"coffeescript\", \"diff\", \"go\", \"xml\", \"http\",\n        \"json\", \"java\", \"javascript\", \"kotlin\", \"less\", \"lua\", \"makefile\", \"markdown\", \"nginx\", \"objectivec\", \"php\",\n        \"php-template\", \"perl\", \"plaintext\", \"python\", \"python-repl\", \"r\", \"ruby\", \"rust\", \"scss\", \"sql\", \"shell\",\n        \"swift\", \"ini\", \"typescript\", \"vbnet\", \"yaml\",\n        \"ada\", \"clojure\", \"dart\", \"erb\", \"fortran\", \"gradle\", \"haskell\", \"julia\", \"julia-repl\", \"lisp\", \"matlab\",\n        \"pgsql\", \"powershell\", \"sql_more\", \"stata\", \"cmake\", \"mathematica\",\n        // ext\n        \"solidity\", \"yul\"\n    ];\n    Constants.CDN = \"https://unpkg.com/vditor@\".concat(\"3.10.5\");\n    Constants.MARKDOWN_OPTIONS = {\n        autoSpace: false,\n        gfmAutoLink: true,\n        codeBlockPreview: true,\n        fixTermTypo: false,\n        footnotes: true,\n        linkBase: \"\",\n        linkPrefix: \"\",\n        listStyle: false,\n        mark: false,\n        mathBlockPreview: true,\n        paragraphBeginningSpace: false,\n        sanitize: true,\n        toc: false,\n    };\n    Constants.HLJS_OPTIONS = {\n        enable: true,\n        lineNumber: false,\n        defaultLang: \"\",\n        style: \"github\",\n    };\n    Constants.MATH_OPTIONS = {\n        engine: \"KaTeX\",\n        inlineDigit: false,\n        macros: {},\n    };\n    Constants.THEME_OPTIONS = {\n        current: \"light\",\n        list: {\n            \"ant-design\": \"Ant Design\",\n            \"dark\": \"Dark\",\n            \"light\": \"Light\",\n            \"wechat\": \"WeChat\",\n        },\n        path: \"\".concat(Constants.CDN, \"/dist/css/content-theme\"),\n    };\n    return Constants;\n}());\n\n\n\n/***/ }),\n\n/***/ 386:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Q\": () => (/* binding */ abcRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(793);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(998);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(781);\n\n\n\nvar abcRender = function (element, cdn) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var abcElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.abcRenderAdapter.getElements(element);\n    if (abcElements.length > 0) {\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(\"\".concat(cdn, \"/dist/js/abcjs/abcjs_basic.min.js\"), \"vditorAbcjsScript\").then(function () {\n            abcElements.forEach(function (item) {\n                if (item.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    item.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                if (item.getAttribute(\"data-processed\") === \"true\") {\n                    return;\n                }\n                ABCJS.renderAbc(item, _adapterRender__WEBPACK_IMPORTED_MODULE_1__.abcRenderAdapter.getCode(item).trim());\n                item.style.overflowX = \"auto\";\n                item.setAttribute(\"data-processed\", \"true\");\n            });\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 781:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"abcRenderAdapter\": () => (/* binding */ abcRenderAdapter),\n/* harmony export */   \"chartRenderAdapter\": () => (/* binding */ chartRenderAdapter),\n/* harmony export */   \"flowchartRenderAdapter\": () => (/* binding */ flowchartRenderAdapter),\n/* harmony export */   \"graphvizRenderAdapter\": () => (/* binding */ graphvizRenderAdapter),\n/* harmony export */   \"markmapRenderAdapter\": () => (/* binding */ markmapRenderAdapter),\n/* harmony export */   \"mathRenderAdapter\": () => (/* binding */ mathRenderAdapter),\n/* harmony export */   \"mermaidRenderAdapter\": () => (/* binding */ mermaidRenderAdapter),\n/* harmony export */   \"mindmapRenderAdapter\": () => (/* binding */ mindmapRenderAdapter),\n/* harmony export */   \"plantumlRenderAdapter\": () => (/* binding */ plantumlRenderAdapter)\n/* harmony export */ });\nvar mathRenderAdapter = {\n    getCode: function (mathElement) { return mathElement.textContent; },\n    getElements: function (element) { return element.querySelectorAll(\".language-math\"); },\n};\nvar mermaidRenderAdapter = {\n    /** 不仅要返回code，并且需要将 code 设置为 el 的 innerHTML */\n    getCode: function (el) { return el.textContent; },\n    getElements: function (element) { return element.querySelectorAll(\".language-mermaid\"); },\n};\nvar markmapRenderAdapter = {\n    getCode: function (el) { return el.textContent; },\n    getElements: function (element) { return element.querySelectorAll(\".language-markmap\"); },\n};\nvar mindmapRenderAdapter = {\n    getCode: function (el) { return el.getAttribute(\"data-code\"); },\n    getElements: function (el) { return el.querySelectorAll(\".language-mindmap\"); },\n};\nvar chartRenderAdapter = {\n    getCode: function (el) { return el.innerText; },\n    getElements: function (el) { return el.querySelectorAll(\".language-echarts\"); },\n};\nvar abcRenderAdapter = {\n    getCode: function (el) { return el.textContent; },\n    getElements: function (el) { return el.querySelectorAll(\".language-abc\"); },\n};\nvar graphvizRenderAdapter = {\n    getCode: function (el) { return el.textContent; },\n    getElements: function (el) { return el.querySelectorAll(\".language-graphviz\"); },\n};\nvar flowchartRenderAdapter = {\n    getCode: function (el) { return el.textContent; },\n    getElements: function (el) { return el.querySelectorAll(\".language-flowchart\"); },\n};\nvar plantumlRenderAdapter = {\n    getCode: function (el) { return el.textContent; },\n    getElements: function (el) { return el.querySelectorAll(\".language-plantuml\"); },\n};\n\n\n/***/ }),\n\n/***/ 379:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"p\": () => (/* binding */ chartRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(793);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(998);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(781);\n\n\n\nvar chartRender = function (element, cdn, theme) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var echartsElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.chartRenderAdapter.getElements(element);\n    if (echartsElements.length > 0) {\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(\"\".concat(cdn, \"/dist/js/echarts/echarts.min.js\"), \"vditorEchartsScript\").then(function () {\n            echartsElements.forEach(function (e) {\n                if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                var text = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.chartRenderAdapter.getCode(e).trim();\n                if (!text) {\n                    return;\n                }\n                try {\n                    if (e.getAttribute(\"data-processed\") === \"true\") {\n                        return;\n                    }\n                    var option = JSON.parse(text);\n                    echarts.init(e, theme === \"dark\" ? \"dark\" : undefined).setOption(option);\n                    e.setAttribute(\"data-processed\", \"true\");\n                }\n                catch (error) {\n                    e.className = \"vditor-reset--error\";\n                    e.innerHTML = \"echarts render error: <br>\".concat(error);\n                }\n            });\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 895:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"O\": () => (/* binding */ codeRender)\n/* harmony export */ });\n/* harmony import */ var _util_code160to32__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(528);\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(793);\n\n\nvar codeRender = function (element, option) {\n    Array.from(element.querySelectorAll(\"pre > code\")).filter(function (e, index) {\n        if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n            e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n            return false;\n        }\n        if (e.classList.contains(\"language-mermaid\") || e.classList.contains(\"language-flowchart\") ||\n            e.classList.contains(\"language-echarts\") || e.classList.contains(\"language-mindmap\") ||\n            e.classList.contains(\"language-plantuml\") || e.classList.contains(\"language-markmap\") ||\n            e.classList.contains(\"language-abc\") || e.classList.contains(\"language-graphviz\") ||\n            e.classList.contains(\"language-math\")) {\n            return false;\n        }\n        if (e.style.maxHeight.indexOf(\"px\") > -1) {\n            return false;\n        }\n        // 避免预览区在渲染后由于代码块过多产生性能问题 https://github.com/b3log/vditor/issues/67\n        if (element.classList.contains(\"vditor-preview\") && index > 5) {\n            return false;\n        }\n        return true;\n    }).forEach(function (e) {\n        var _a, _b, _c;\n        var codeText = e.innerText;\n        if (e.classList.contains(\"highlight-chroma\")) {\n            var codeElement = e.cloneNode(true);\n            codeElement.querySelectorAll(\".highlight-ln\").forEach(function (item) {\n                item.remove();\n            });\n            codeText = codeElement.innerText;\n        }\n        else if (codeText.endsWith(\"\\n\")) {\n            codeText = codeText.substr(0, codeText.length - 1);\n        }\n        var iconHTML = '<svg><use xlink:href=\"#vditor-icon-copy\"></use></svg>';\n        if (!document.getElementById(\"vditorIconScript\")) {\n            iconHTML = '<svg viewBox=\"0 0 32 32\"><path d=\"M22.545-0h-17.455c-1.6 0-2.909 1.309-2.909 2.909v20.364h2.909v-20.364h17.455v-2.909zM26.909 5.818h-16c-1.6 0-2.909 1.309-2.909 2.909v20.364c0 1.6 1.309 2.909 2.909 2.909h16c1.6 0 2.909-1.309 2.909-2.909v-20.364c0-1.6-1.309-2.909-2.909-2.909zM26.909 29.091h-16v-20.364h16v20.364z\"></path></svg>';\n        }\n        var divElement = document.createElement(\"div\");\n        divElement.className = \"vditor-copy\";\n        divElement.innerHTML = \"<span aria-label=\\\"\".concat(((_a = window.VditorI18n) === null || _a === void 0 ? void 0 : _a.copy) || \"复制\", \"\\\"\\nonmouseover=\\\"this.setAttribute('aria-label', '\").concat(((_b = window.VditorI18n) === null || _b === void 0 ? void 0 : _b.copy) || \"复制\", \"')\\\"\\nclass=\\\"vditor-tooltipped vditor-tooltipped__w\\\"\\nonclick=\\\"this.previousElementSibling.select();document.execCommand('copy');this.setAttribute('aria-label', '\").concat(((_c = window.VditorI18n) === null || _c === void 0 ? void 0 : _c.copied) || \"已复制\", \"');this.previousElementSibling.blur()\\\">\").concat(iconHTML, \"</span>\");\n        var textarea = document.createElement(\"textarea\");\n        textarea.value = (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_1__/* .code160to32 */ .X)(codeText);\n        divElement.insertAdjacentElement(\"afterbegin\", textarea);\n        if (option && option.renderMenu) {\n            option.renderMenu(e, divElement);\n        }\n        e.before(divElement);\n        e.style.maxHeight = (window.outerHeight - 40) + \"px\";\n        // https://github.com/Vanessa219/vditor/issues/1356\n        e.insertAdjacentHTML(\"afterend\", \"<span style=\\\"position: absolute\\\">\".concat(_constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.ZWSP */ .g.ZWSP, \"</span>\"));\n    });\n};\n\n\n/***/ }),\n\n/***/ 169:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"P\": () => (/* binding */ flowchartRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(793);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(998);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(781);\n\n\n\nvar flowchartRender = function (element, cdn) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var flowchartElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.flowchartRenderAdapter.getElements(element);\n    if (flowchartElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(\"\".concat(cdn, \"/dist/js/flowchart.js/flowchart.min.js\"), \"vditorFlowchartScript\").then(function () {\n        flowchartElements.forEach(function (item) {\n            if (item.getAttribute(\"data-processed\") === \"true\") {\n                return;\n            }\n            var flowchartObj = flowchart.parse(_adapterRender__WEBPACK_IMPORTED_MODULE_1__.flowchartRenderAdapter.getCode(item));\n            item.innerHTML = \"\";\n            flowchartObj.drawSVG(item);\n            item.setAttribute(\"data-processed\", \"true\");\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 572:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"v\": () => (/* binding */ graphvizRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(793);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(998);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(781);\n\n\n\nvar graphvizRender = function (element, cdn) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var graphvizElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.graphvizRenderAdapter.getElements(element);\n    if (graphvizElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(\"\".concat(cdn, \"/dist/js/graphviz/viz.js\"), \"vditorGraphVizScript\").then(function () {\n        graphvizElements.forEach(function (e) {\n            var code = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.graphvizRenderAdapter.getCode(e);\n            if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                return;\n            }\n            if (e.getAttribute(\"data-processed\") === \"true\" || code.trim() === \"\") {\n                return;\n            }\n            try {\n                var blob = new Blob([\"importScripts('\".concat(document.getElementById(\"vditorGraphVizScript\").src.replace(\"viz.js\", \"full.render.js\"), \"');\")], { type: \"application/javascript\" });\n                var url = window.URL || window.webkitURL;\n                var blobUrl = url.createObjectURL(blob);\n                var worker = new Worker(blobUrl);\n                new Viz({ worker: worker })\n                    .renderSVGElement(code).then(function (result) {\n                    e.innerHTML = result.outerHTML;\n                }).catch(function (error) {\n                    e.innerHTML = \"graphviz render error: <br>\".concat(error);\n                    e.className = \"vditor-reset--error\";\n                });\n            }\n            catch (e) {\n                console.error(\"graphviz error\", e);\n            }\n            e.setAttribute(\"data-processed\", \"true\");\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 702:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"s\": () => (/* binding */ highlightRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(793);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(998);\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(296);\n\n\n\nvar highlightRender = function (hljsOption, element, cdn) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var style = hljsOption.style;\n    if (!_constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CODE_THEME.includes */ .g.CODE_THEME.includes(style)) {\n        style = \"github\";\n    }\n    var vditorHljsStyle = document.getElementById(\"vditorHljsStyle\");\n    var href = \"\".concat(cdn, \"/dist/js/highlight.js/styles/\").concat(style, \".css\");\n    if (vditorHljsStyle && vditorHljsStyle.getAttribute('href') !== href) {\n        vditorHljsStyle.remove();\n    }\n    (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_1__/* .addStyle */ .c)(\"\".concat(cdn, \"/dist/js/highlight.js/styles/\").concat(style, \".css\"), \"vditorHljsStyle\");\n    if (hljsOption.enable === false) {\n        return;\n    }\n    var codes = element.querySelectorAll(\"pre > code\");\n    if (codes.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(\"\".concat(cdn, \"/dist/js/highlight.js/highlight.pack.js\"), \"vditorHljsScript\").then(function () {\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(\"\".concat(cdn, \"/dist/js/highlight.js/solidity.min.js\"), \"vditorHljsSolidityScript\").then(function () {\n            (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(\"\".concat(cdn, \"/dist/js/highlight.js/yul.min.js\"), \"vditorHljsYulScript\").then(function () {\n                element.querySelectorAll(\"pre > code\").forEach(function (block) {\n                    // ir & wysiwyg 区域不渲染\n                    if (block.parentElement.classList.contains(\"vditor-ir__marker--pre\") ||\n                        block.parentElement.classList.contains(\"vditor-wysiwyg__pre\")) {\n                        return;\n                    }\n                    if (block.classList.contains(\"language-mermaid\") || block.classList.contains(\"language-flowchart\") ||\n                        block.classList.contains(\"language-echarts\") || block.classList.contains(\"language-mindmap\") ||\n                        block.classList.contains(\"language-plantuml\") ||\n                        block.classList.contains(\"language-abc\") || block.classList.contains(\"language-graphviz\") ||\n                        block.classList.contains(\"language-math\")) {\n                        return;\n                    }\n                    if (hljsOption.defaultLang !== \"\" && block.className.indexOf(\"language-\") === -1) {\n                        block.classList.add(\"language-\" + hljsOption.defaultLang);\n                    }\n                    hljs.highlightElement(block);\n                    if (!hljsOption.lineNumber) {\n                        return;\n                    }\n                    block.classList.add(\"vditor-linenumber\");\n                    var linenNumberTemp = block.querySelector(\".vditor-linenumber__temp\");\n                    if (!linenNumberTemp) {\n                        linenNumberTemp = document.createElement(\"div\");\n                        linenNumberTemp.className = \"vditor-linenumber__temp\";\n                        block.insertAdjacentElement(\"beforeend\", linenNumberTemp);\n                    }\n                    var whiteSpace = getComputedStyle(block).whiteSpace;\n                    var isSoftWrap = false;\n                    if (whiteSpace === \"pre-wrap\" || whiteSpace === \"pre-line\") {\n                        isSoftWrap = true;\n                    }\n                    var lineNumberHTML = \"\";\n                    var lineList = block.textContent.split(/\\r\\n|\\r|\\n/g);\n                    lineList.pop();\n                    lineList.map(function (line) {\n                        var lineHeight = \"\";\n                        if (isSoftWrap) {\n                            linenNumberTemp.textContent = line || \"\\n\";\n                            lineHeight = \" style=\\\"height:\".concat(linenNumberTemp.getBoundingClientRect().height, \"px\\\"\");\n                        }\n                        lineNumberHTML += \"<span\".concat(lineHeight, \"></span>\");\n                    });\n                    linenNumberTemp.style.display = \"none\";\n                    lineNumberHTML = \"<span class=\\\"vditor-linenumber__rows\\\">\".concat(lineNumberHTML, \"</span>\");\n                    block.insertAdjacentHTML(\"beforeend\", lineNumberHTML);\n                });\n            });\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 593:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"K\": () => (/* binding */ markmapRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(793);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(998);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(781);\n\n\n\nvar enabled = {};\nvar transform = function (transformer, content) {\n    var result = transformer.transform(content);\n    var keys = Object.keys(result.features).filter(function (key) { return !enabled[key]; });\n    keys.forEach(function (key) {\n        enabled[key] = true;\n    });\n    var _a = transformer.getAssets(keys), styles = _a.styles, scripts = _a.scripts;\n    var markmap = window.markmap;\n    if (styles)\n        markmap.loadCSS(styles);\n    if (scripts)\n        markmap.loadJS(scripts);\n    return result;\n};\nvar init = function (el, code) {\n    var _a = window.markmap, Transformer = _a.Transformer, Markmap = _a.Markmap, deriveOptions = _a.deriveOptions, globalCSS = _a.globalCSS;\n    var transformer = new Transformer();\n    el.innerHTML = '<svg style=\"width:100%\"></svg>';\n    var svg = el.firstChild;\n    var mm = Markmap.create(svg, null);\n    var _b = transform(transformer, code), root = _b.root, frontmatter = _b.frontmatter;\n    var markmapOptions = frontmatter === null || frontmatter === void 0 ? void 0 : frontmatter.markmap;\n    var frontmatterOptions = deriveOptions(markmapOptions);\n    mm.setData(root, frontmatterOptions);\n    mm.fit();\n};\nvar markmapRender = function (element, cdn, theme) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var markmapElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.markmapRenderAdapter.getElements(element);\n    if (markmapElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(\"\".concat(cdn, \"/dist/js/markmap/markmap.min.js\"), \"vditorMermaidScript\").then(function () {\n        markmapElements.forEach(function (item) {\n            var code = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.markmapRenderAdapter.getCode(item);\n            if (item.getAttribute(\"data-processed\") === \"true\" || code.trim() === \"\") {\n                return;\n            }\n            var render = document.createElement(\"div\");\n            render.className = \"language-markmap\";\n            item.parentNode.appendChild(render);\n            init(render, code);\n            if (item.parentNode.childNodes[0].nodeName == \"CODE\") {\n                item.parentNode.removeChild(item.parentNode.childNodes[0]);\n            }\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 982:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"H\": () => (/* binding */ mathRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(793);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(998);\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(296);\n/* harmony import */ var _util_code160to32__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(528);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(781);\n\n\n\n\n\nvar mathRender = function (element, options) {\n    var mathElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mathRenderAdapter.getElements(element);\n    if (mathElements.length === 0) {\n        return;\n    }\n    var defaultOptions = {\n        cdn: _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN,\n        math: {\n            engine: \"KaTeX\",\n            inlineDigit: false,\n            macros: {},\n        },\n    };\n    if (options && options.math) {\n        options.math =\n            Object.assign({}, defaultOptions.math, options.math);\n    }\n    options = Object.assign({}, defaultOptions, options);\n    if (options.math.engine === \"KaTeX\") {\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_2__/* .addStyle */ .c)(\"\".concat(options.cdn, \"/dist/js/katex/katex.min.css?v=0.16.9\"), \"vditorKatexStyle\");\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_3__/* .addScript */ .G)(\"\".concat(options.cdn, \"/dist/js/katex/katex.min.js?v=0.16.9\"), \"vditorKatexScript\").then(function () {\n            (0,_util_addScript__WEBPACK_IMPORTED_MODULE_3__/* .addScript */ .G)(\"\".concat(options.cdn, \"/dist/js/katex/mhchem.min.js?v=0.16.9\"), \"vditorKatexChemScript\").then(function () {\n                mathElements.forEach(function (mathElement) {\n                    if (mathElement.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                        mathElement.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                        return;\n                    }\n                    if (mathElement.getAttribute(\"data-math\")) {\n                        return;\n                    }\n                    var math = (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_4__/* .code160to32 */ .X)(_adapterRender__WEBPACK_IMPORTED_MODULE_1__.mathRenderAdapter.getCode(mathElement));\n                    mathElement.setAttribute(\"data-math\", math);\n                    try {\n                        mathElement.innerHTML = katex.renderToString(math, {\n                            displayMode: mathElement.tagName === \"DIV\",\n                            output: \"html\",\n                            macros: options.math.macros,\n                        });\n                    }\n                    catch (e) {\n                        mathElement.innerHTML = e.message;\n                        mathElement.className = \"language-math vditor-reset--error\";\n                    }\n                    mathElement.addEventListener(\"copy\", function (event) {\n                        event.stopPropagation();\n                        event.preventDefault();\n                        var vditorMathElement = event.currentTarget.closest(\".language-math\");\n                        event.clipboardData.setData(\"text/html\", vditorMathElement.innerHTML);\n                        event.clipboardData.setData(\"text/plain\", vditorMathElement.getAttribute(\"data-math\"));\n                    });\n                });\n            });\n        });\n    }\n    else if (options.math.engine === \"MathJax\") {\n        var chainAsync_1 = function (fns) {\n            if (fns.length === 0) {\n                return;\n            }\n            var curr = 0;\n            var last = fns[fns.length - 1];\n            var next = function () {\n                var fn = fns[curr++];\n                fn === last ? fn() : fn(next);\n            };\n            next();\n        };\n        if (!window.MathJax) {\n            window.MathJax = {\n                loader: {\n                    paths: { mathjax: \"\".concat(options.cdn, \"/dist/js/mathjax\") },\n                },\n                startup: {\n                    typeset: false,\n                },\n                tex: {\n                    macros: options.math.macros,\n                },\n            };\n            // https://github.com/Vanessa219/vditor/issues/1453\n            Object.assign(window.MathJax, options.math.mathJaxOptions);\n        }\n        // 循环加载会抛异常\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_3__/* .addScriptSync */ .J)(\"\".concat(options.cdn, \"/dist/js/mathjax/tex-svg-full.js\"), \"protyleMathJaxScript\");\n        var renderMath_1 = function (mathElement, next) {\n            var math = (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_4__/* .code160to32 */ .X)(mathElement.textContent).trim();\n            var mathOptions = window.MathJax.getMetricsFor(mathElement);\n            mathOptions.display = mathElement.tagName === \"DIV\";\n            window.MathJax.tex2svgPromise(math, mathOptions).then(function (node) {\n                mathElement.innerHTML = \"\";\n                mathElement.setAttribute(\"data-math\", math);\n                mathElement.append(node);\n                window.MathJax.startup.document.clear();\n                window.MathJax.startup.document.updateDocument();\n                var errorTextElement = node.querySelector('[data-mml-node=\"merror\"]');\n                if (errorTextElement && errorTextElement.textContent.trim() !== \"\") {\n                    mathElement.innerHTML = errorTextElement.textContent.trim();\n                    mathElement.className = \"vditor-reset--error\";\n                }\n                if (next) {\n                    next();\n                }\n            });\n        };\n        window.MathJax.startup.promise.then(function () {\n            var chains = [];\n            var _loop_1 = function (i) {\n                var mathElement = mathElements[i];\n                if (!mathElement.parentElement.classList.contains(\"vditor-wysiwyg__pre\") &&\n                    !mathElement.parentElement.classList.contains(\"vditor-ir__marker--pre\") &&\n                    !mathElement.getAttribute(\"data-math\") && (0,_util_code160to32__WEBPACK_IMPORTED_MODULE_4__/* .code160to32 */ .X)(mathElement.textContent).trim()) {\n                    chains.push(function (next) {\n                        if (i === mathElements.length - 1) {\n                            renderMath_1(mathElement);\n                        }\n                        else {\n                            renderMath_1(mathElement, next);\n                        }\n                    });\n                }\n            };\n            for (var i = 0; i < mathElements.length; i++) {\n                _loop_1(i);\n            }\n            chainAsync_1(chains);\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 431:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Y\": () => (/* binding */ mediaRender)\n/* harmony export */ });\n/* harmony import */ var _util_function__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(446);\n\nvar videoRender = function (element, url) {\n    element.insertAdjacentHTML(\"afterend\", \"<video controls=\\\"controls\\\" src=\\\"\".concat(url, \"\\\"></video>\"));\n    element.remove();\n};\nvar audioRender = function (element, url) {\n    element.insertAdjacentHTML(\"afterend\", \"<audio controls=\\\"controls\\\" src=\\\"\".concat(url, \"\\\"></audio>\"));\n    element.remove();\n};\nvar iframeRender = function (element, url) {\n    var youtubeMatch = url.match(/\\/\\/(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))([\\w|-]{11})(?:(?:[\\?&]t=)(\\S+))?/);\n    var youkuMatch = url.match(/\\/\\/v\\.youku\\.com\\/v_show\\/id_(\\w+)=*\\.html/);\n    var qqMatch = url.match(/\\/\\/v\\.qq\\.com\\/x\\/cover\\/.*\\/([^\\/]+)\\.html\\??.*/);\n    var coubMatch = url.match(/(?:www\\.|\\/\\/)coub\\.com\\/view\\/(\\w+)/);\n    var facebookMatch = url.match(/(?:www\\.|\\/\\/)facebook\\.com\\/([^\\/]+)\\/videos\\/([0-9]+)/);\n    var dailymotionMatch = url.match(/.+dailymotion.com\\/(video|hub)\\/(\\w+)\\?/);\n    var bilibiliMatch = url.match(/(?:www\\.|\\/\\/)bilibili\\.com\\/video\\/(\\w+)/);\n    var tedMatch = url.match(/(?:www\\.|\\/\\/)ted\\.com\\/talks\\/(\\w+)/);\n    if (youtubeMatch && youtubeMatch[1].length === 11) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"//www.youtube.com/embed/\".concat(youtubeMatch[1] +\n            (youtubeMatch[2] ? \"?start=\" + youtubeMatch[2] : \"\"), \"\\\"></iframe>\"));\n        element.remove();\n    }\n    else if (youkuMatch && youkuMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"//player.youku.com/embed/\".concat(youkuMatch[1], \"\\\"></iframe>\"));\n        element.remove();\n    }\n    else if (qqMatch && qqMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"https://v.qq.com/txp/iframe/player.html?vid=\".concat(qqMatch[1], \"\\\"></iframe>\"));\n        element.remove();\n    }\n    else if (coubMatch && coubMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"//coub.com/embed/\".concat(coubMatch[1], \"?muted=false&autostart=false&originalSize=true&startWithHD=true\\\"></iframe>\"));\n        element.remove();\n    }\n    else if (facebookMatch && facebookMatch[0]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"https://www.facebook.com/plugins/video.php?href=\".concat(encodeURIComponent(facebookMatch[0]), \"\\\"></iframe>\"));\n        element.remove();\n    }\n    else if (dailymotionMatch && dailymotionMatch[2]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\"\\n src=\\\"https://www.dailymotion.com/embed/video/\".concat(dailymotionMatch[2], \"\\\"></iframe>\"));\n        element.remove();\n    }\n    else if (url.indexOf(\"bilibili.com\") > -1 && (url.indexOf(\"bvid=\") > -1 || (bilibiliMatch && bilibiliMatch[1]))) {\n        var params_1 = {\n            bvid: (0,_util_function__WEBPACK_IMPORTED_MODULE_0__/* .getSearch */ .o)(\"bvid\", url) || (bilibiliMatch && bilibiliMatch[1]),\n            page: \"1\",\n            high_quality: \"1\",\n            as_wide: \"1\",\n            allowfullscreen: \"true\",\n            autoplay: \"0\"\n        };\n        new URL(url.startsWith(\"http\") ? url : \"https:\" + url).search.split(\"&\").forEach(function (item, index) {\n            if (!item) {\n                return;\n            }\n            if (index === 0) {\n                item = item.substr(1);\n            }\n            var keyValue = item.split(\"=\");\n            params_1[keyValue[0]] = keyValue[1];\n        });\n        var src_1 = \"https://player.bilibili.com/player.html?\";\n        var keys_1 = Object.keys(params_1);\n        keys_1.forEach(function (key, index) {\n            src_1 += \"\".concat(key, \"=\").concat(params_1[key]);\n            if (index < keys_1.length - 1) {\n                src_1 += \"&\";\n            }\n        });\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"\".concat(src_1, \"\\\"></iframe>\"));\n        element.remove();\n    }\n    else if (tedMatch && tedMatch[1]) {\n        element.insertAdjacentHTML(\"afterend\", \"<iframe class=\\\"iframe__video\\\" src=\\\"//embed.ted.com/talks/\".concat(tedMatch[1], \"\\\"></iframe>\"));\n        element.remove();\n    }\n};\nvar mediaRender = function (element) {\n    if (!element) {\n        return;\n    }\n    element.querySelectorAll(\"a\").forEach(function (aElement) {\n        var url = aElement.getAttribute(\"href\");\n        if (!url) {\n            return;\n        }\n        if (url.match(/^.+.(mp4|m4v|ogg|ogv|webm)$/)) {\n            videoRender(aElement, url);\n        }\n        else if (url.match(/^.+.(mp3|wav|flac)$/)) {\n            audioRender(aElement, url);\n        }\n        else {\n            iframeRender(aElement, url);\n        }\n    });\n};\n\n\n/***/ }),\n\n/***/ 570:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"i\": () => (/* binding */ mermaidRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(793);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(998);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(781);\n/* harmony import */ var _util_function__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(446);\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\nvar mermaidRender = function (element, cdn, theme) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var mermaidElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mermaidRenderAdapter.getElements(element);\n    if (mermaidElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(\"\".concat(cdn, \"/dist/js/mermaid/mermaid.min.js\"), \"vditorMermaidScript\").then(function () {\n        var config = {\n            securityLevel: \"loose\",\n            altFontFamily: \"sans-serif\",\n            fontFamily: \"sans-serif\",\n            startOnLoad: false,\n            flowchart: {\n                htmlLabels: true,\n                useMaxWidth: !0\n            },\n            sequence: {\n                useMaxWidth: true,\n                diagramMarginX: 8,\n                diagramMarginY: 8,\n                boxMargin: 8,\n                showSequenceNumbers: true // Mermaid 时序图增加序号 https://github.com/siyuan-note/siyuan/pull/6992 https://mermaid.js.org/syntax/sequenceDiagram.html#sequencenumbers\n            },\n            gantt: {\n                leftPadding: 75,\n                rightPadding: 20\n            }\n        };\n        if (theme === \"dark\") {\n            config.theme = \"dark\";\n        }\n        mermaid.initialize(config);\n        mermaidElements.forEach(function (item) { return __awaiter(void 0, void 0, void 0, function () {\n            var code, id, mermaidData, e_1, errorElement;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        code = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mermaidRenderAdapter.getCode(item);\n                        if (item.getAttribute(\"data-processed\") === \"true\" || code.trim() === \"\") {\n                            return [2 /*return*/];\n                        }\n                        id = \"mermaid\" + (0,_util_function__WEBPACK_IMPORTED_MODULE_3__/* .genUUID */ .W)();\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, mermaid.render(id, item.textContent)];\n                    case 2:\n                        mermaidData = _a.sent();\n                        item.innerHTML = mermaidData.svg;\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_1 = _a.sent();\n                        errorElement = document.querySelector(\"#\" + id);\n                        item.innerHTML = \"\".concat(errorElement.outerHTML, \"<br>\\n<div style=\\\"text-align: left\\\"><small>\").concat(e_1.message.replace(/\\n/, \"<br>\"), \"</small></div>\");\n                        errorElement.parentElement.remove();\n                        return [3 /*break*/, 4];\n                    case 4:\n                        item.setAttribute(\"data-processed\", \"true\");\n                        return [2 /*return*/];\n                }\n            });\n        }); });\n    });\n};\n\n\n/***/ }),\n\n/***/ 558:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"P\": () => (/* binding */ mindmapRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(793);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(998);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(781);\n\n\n\nvar mindmapRender = function (element, cdn, theme) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var mindmapElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mindmapRenderAdapter.getElements(element);\n    if (mindmapElements.length > 0) {\n        (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(\"\".concat(cdn, \"/dist/js/echarts/echarts.min.js\"), \"vditorEchartsScript\").then(function () {\n            mindmapElements.forEach(function (e) {\n                if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                    e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                    return;\n                }\n                var text = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.mindmapRenderAdapter.getCode(e);\n                if (!text) {\n                    return;\n                }\n                try {\n                    if (e.getAttribute(\"data-processed\") === \"true\") {\n                        return;\n                    }\n                    echarts.init(e, theme === \"dark\" ? \"dark\" : undefined).setOption({\n                        series: [\n                            {\n                                data: [JSON.parse(decodeURIComponent(text))],\n                                initialTreeDepth: -1,\n                                itemStyle: {\n                                    borderWidth: 0,\n                                    color: \"#4285f4\",\n                                },\n                                label: {\n                                    backgroundColor: \"#f6f8fa\",\n                                    borderColor: \"#d1d5da\",\n                                    borderRadius: 5,\n                                    borderWidth: 0.5,\n                                    color: \"#586069\",\n                                    lineHeight: 20,\n                                    offset: [-5, 0],\n                                    padding: [0, 5],\n                                    position: \"insideRight\",\n                                },\n                                lineStyle: {\n                                    color: \"#d1d5da\",\n                                    width: 1,\n                                },\n                                roam: true,\n                                symbol: function (value, params) {\n                                    var _a;\n                                    if ((_a = params === null || params === void 0 ? void 0 : params.data) === null || _a === void 0 ? void 0 : _a.children) {\n                                        return \"circle\";\n                                    }\n                                    else {\n                                        return \"path://\";\n                                    }\n                                },\n                                type: \"tree\",\n                            },\n                        ],\n                        tooltip: {\n                            trigger: \"item\",\n                            triggerOn: \"mousemove\",\n                        },\n                    });\n                    e.setAttribute(\"data-processed\", \"true\");\n                }\n                catch (error) {\n                    e.className = \"vditor-reset--error\";\n                    e.innerHTML = \"mindmap render error: <br>\".concat(error);\n                }\n            });\n        });\n    }\n};\n\n\n/***/ }),\n\n/***/ 182:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"k\": () => (/* binding */ outlineRender)\n/* harmony export */ });\n/* harmony import */ var _util_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(946);\n/* harmony import */ var _mathRender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(982);\n\n\nvar outlineRender = function (contentElement, targetElement, vditor) {\n    var tocHTML = \"\";\n    var ids = [];\n    Array.from(contentElement.children).forEach(function (item, index) {\n        if ((0,_util_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_1__/* .hasClosestByHeadings */ .W)(item)) {\n            if (vditor) {\n                var lastIndex = item.id.lastIndexOf(\"_\");\n                item.id = item.id.substring(0, lastIndex === -1 ? undefined : lastIndex) + \"_\" + index;\n            }\n            ids.push(item.id);\n            tocHTML += item.outerHTML.replace(\"<wbr>\", \"\");\n        }\n    });\n    if (tocHTML === \"\") {\n        targetElement.innerHTML = \"\";\n        return \"\";\n    }\n    var tempElement = document.createElement(\"div\");\n    if (vditor) {\n        vditor.lute.SetToC(true);\n        if (vditor.currentMode === \"wysiwyg\" && !vditor.preview.element.contains(contentElement)) {\n            tempElement.innerHTML = vditor.lute.SpinVditorDOM(\"<p>[ToC]</p>\" + tocHTML);\n        }\n        else if (vditor.currentMode === \"ir\" && !vditor.preview.element.contains(contentElement)) {\n            tempElement.innerHTML = vditor.lute.SpinVditorIRDOM(\"<p>[ToC]</p>\" + tocHTML);\n        }\n        else {\n            tempElement.innerHTML = vditor.lute.HTML2VditorDOM(\"<p>[ToC]</p>\" + tocHTML);\n        }\n        vditor.lute.SetToC(vditor.options.preview.markdown.toc);\n    }\n    else {\n        targetElement.classList.add(\"vditor-outline\");\n        var lute = Lute.New();\n        lute.SetToC(true);\n        tempElement.innerHTML = lute.HTML2VditorDOM(\"<p>[ToC]</p>\" + tocHTML);\n    }\n    var headingsElement = tempElement.firstElementChild.querySelectorAll(\"li > span[data-target-id]\");\n    headingsElement.forEach(function (item, index) {\n        if (item.nextElementSibling && item.nextElementSibling.tagName === \"UL\") {\n            var iconHTML = \"<svg class='vditor-outline__action'><use xlink:href='#vditor-icon-down'></use></svg>\";\n            if (!document.getElementById(\"vditorIconScript\")) {\n                iconHTML = '<svg class=\"vditor-outline__action\" viewBox=\"0 0 32 32\"><path d=\"M3.76 6.12l12.24 12.213 12.24-12.213 3.76 3.76-16 16-16-16 3.76-3.76z\"></path></svg>';\n            }\n            item.innerHTML = \"\".concat(iconHTML, \"<span>\").concat(item.innerHTML, \"</span>\");\n        }\n        else {\n            item.innerHTML = \"<svg></svg><span>\".concat(item.innerHTML, \"</span>\");\n        }\n        item.setAttribute(\"data-target-id\", ids[index]);\n    });\n    tocHTML = tempElement.firstElementChild.innerHTML;\n    if (headingsElement.length === 0) {\n        targetElement.innerHTML = \"\";\n        return tocHTML;\n    }\n    targetElement.innerHTML = tocHTML;\n    if (vditor) {\n        (0,_mathRender__WEBPACK_IMPORTED_MODULE_0__/* .mathRender */ .H)(targetElement, {\n            cdn: vditor.options.cdn,\n            math: vditor.options.preview.math,\n        });\n    }\n    targetElement.firstElementChild.addEventListener(\"click\", function (event) {\n        var target = event.target;\n        while (target && !target.isEqualNode(targetElement)) {\n            if (target.classList.contains(\"vditor-outline__action\")) {\n                if (target.classList.contains(\"vditor-outline__action--close\")) {\n                    target.classList.remove(\"vditor-outline__action--close\");\n                    target.parentElement.nextElementSibling.setAttribute(\"style\", \"display:block\");\n                }\n                else {\n                    target.classList.add(\"vditor-outline__action--close\");\n                    target.parentElement.nextElementSibling.setAttribute(\"style\", \"display:none\");\n                }\n                event.preventDefault();\n                event.stopPropagation();\n                break;\n            }\n            else if (target.getAttribute(\"data-target-id\")) {\n                event.preventDefault();\n                event.stopPropagation();\n                var idElement = document.getElementById(target.getAttribute(\"data-target-id\"));\n                if (!idElement) {\n                    return;\n                }\n                if (vditor) {\n                    if (vditor.options.height === \"auto\") {\n                        var windowScrollY = idElement.offsetTop + vditor.element.offsetTop;\n                        if (!vditor.options.toolbarConfig.pin) {\n                            windowScrollY += vditor.toolbar.element.offsetHeight;\n                        }\n                        window.scrollTo(window.scrollX, windowScrollY);\n                    }\n                    else {\n                        if (vditor.element.offsetTop < window.scrollY) {\n                            window.scrollTo(window.scrollX, vditor.element.offsetTop);\n                        }\n                        if (vditor.preview.element.contains(contentElement)) {\n                            contentElement.parentElement.scrollTop = idElement.offsetTop;\n                        }\n                        else {\n                            contentElement.scrollTop = idElement.offsetTop;\n                        }\n                    }\n                }\n                else {\n                    window.scrollTo(window.scrollX, idElement.offsetTop);\n                }\n                break;\n            }\n            target = target.parentElement;\n        }\n    });\n    return tocHTML;\n};\n\n\n/***/ }),\n\n/***/ 931:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"B\": () => (/* binding */ plantumlRender)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(793);\n/* harmony import */ var _util_addScript__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(998);\n/* harmony import */ var _adapterRender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(781);\n\n\n\nvar plantumlRender = function (element, cdn) {\n    if (element === void 0) { element = document; }\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    var plantumlElements = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.plantumlRenderAdapter.getElements(element);\n    if (plantumlElements.length === 0) {\n        return;\n    }\n    (0,_util_addScript__WEBPACK_IMPORTED_MODULE_2__/* .addScript */ .G)(\"\".concat(cdn, \"/dist/js/plantuml/plantuml-encoder.min.js\"), \"vditorPlantumlScript\").then(function () {\n        plantumlElements.forEach(function (e) {\n            if (e.parentElement.classList.contains(\"vditor-wysiwyg__pre\") ||\n                e.parentElement.classList.contains(\"vditor-ir__marker--pre\")) {\n                return;\n            }\n            var text = _adapterRender__WEBPACK_IMPORTED_MODULE_1__.plantumlRenderAdapter.getCode(e).trim();\n            if (!text) {\n                return;\n            }\n            try {\n                e.innerHTML = \"<object type=\\\"image/svg+xml\\\" data=\\\"https://www.plantuml.com/plantuml/svg/~1\".concat(plantumlEncoder.encode(text), \"\\\"/>\");\n            }\n            catch (error) {\n                e.className = \"vditor-reset--error\";\n                e.innerHTML = \"plantuml render error: <br>\".concat(error);\n            }\n        });\n    });\n};\n\n\n/***/ }),\n\n/***/ 65:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"X\": () => (/* binding */ setLute)\n/* harmony export */ });\nvar setLute = function (options) {\n    var lute = Lute.New();\n    lute.PutEmojis(options.emojis);\n    lute.SetEmojiSite(options.emojiSite);\n    lute.SetHeadingAnchor(options.headingAnchor);\n    lute.SetInlineMathAllowDigitAfterOpenMarker(options.inlineMathDigit);\n    lute.SetAutoSpace(options.autoSpace);\n    lute.SetToC(options.toc);\n    lute.SetFootnotes(options.footnotes);\n    lute.SetFixTermTypo(options.fixTermTypo);\n    lute.SetVditorCodeBlockPreview(options.codeBlockPreview);\n    lute.SetVditorMathBlockPreview(options.mathBlockPreview);\n    lute.SetSanitize(options.sanitize);\n    lute.SetChineseParagraphBeginningSpace(options.paragraphBeginningSpace);\n    lute.SetRenderListStyle(options.listStyle);\n    lute.SetLinkBase(options.linkBase);\n    lute.SetLinkPrefix(options.linkPrefix);\n    lute.SetMark(options.mark);\n    lute.SetGFMAutoLink(options.gfmAutoLink);\n    if (options.lazyLoadImage) {\n        lute.SetImageLazyLoading(options.lazyLoadImage);\n    }\n    return lute;\n};\n\n\n/***/ }),\n\n/***/ 971:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"E\": () => (/* binding */ previewImage)\n/* harmony export */ });\nvar previewImage = function (oldImgElement, lang, theme) {\n    if (lang === void 0) { lang = \"zh_CN\"; }\n    if (theme === void 0) { theme = \"classic\"; }\n    var oldImgRect = oldImgElement.getBoundingClientRect();\n    var height = 36;\n    document.body.insertAdjacentHTML(\"beforeend\", \"<div class=\\\"vditor vditor-img\".concat(theme === \"dark\" ? \" vditor--dark\" : \"\", \"\\\">\\n    <div class=\\\"vditor-img__bar\\\">\\n      <span class=\\\"vditor-img__btn\\\" data-deg=\\\"0\\\">\\n        <svg><use xlink:href=\\\"#vditor-icon-redo\\\"></use></svg>\\n        \").concat(window.VditorI18n.spin, \"\\n      </span>\\n      <span class=\\\"vditor-img__btn\\\"  onclick=\\\"this.parentElement.parentElement.outerHTML = '';document.body.style.overflow = ''\\\">\\n        X &nbsp;\").concat(window.VditorI18n.close, \"\\n      </span>\\n    </div>\\n    <div class=\\\"vditor-img__img\\\" onclick=\\\"this.parentElement.outerHTML = '';document.body.style.overflow = ''\\\">\\n      <img style=\\\"width: \").concat(oldImgElement.width, \"px;height:\").concat(oldImgElement.height, \"px;transform: translate3d(\").concat(oldImgRect.left, \"px, \").concat(oldImgRect.top - height, \"px, 0)\\\" src=\\\"\").concat(oldImgElement.getAttribute(\"src\"), \"\\\">\\n    </div>\\n</div>\"));\n    document.body.style.overflow = \"hidden\";\n    // 图片从原始位置移动到预览正中间的动画效果\n    var imgElement = document.querySelector(\".vditor-img img\");\n    var translate3d = \"translate3d(\".concat(Math.max(0, window.innerWidth - oldImgElement.naturalWidth) / 2, \"px, \").concat(Math.max(0, window.innerHeight - height - oldImgElement.naturalHeight) / 2, \"px, 0)\");\n    setTimeout(function () {\n        imgElement.setAttribute(\"style\", \"transition: transform .3s ease-in-out;transform: \".concat(translate3d));\n        setTimeout(function () {\n            imgElement.parentElement.scrollTo((imgElement.parentElement.scrollWidth - imgElement.parentElement.clientWidth) / 2, (imgElement.parentElement.scrollHeight - imgElement.parentElement.clientHeight) / 2);\n        }, 400);\n    });\n    // 旋转\n    var btnElement = document.querySelector(\".vditor-img__btn\");\n    btnElement.addEventListener(\"click\", function () {\n        var deg = parseInt(btnElement.getAttribute(\"data-deg\"), 10) + 90;\n        if ((deg / 90) % 2 === 1 && oldImgElement.naturalWidth > imgElement.parentElement.clientHeight) {\n            imgElement.style.transform = \"translate3d(\".concat(Math.max(0, window.innerWidth - oldImgElement.naturalWidth) / 2, \"px, \").concat(oldImgElement.naturalWidth / 2 - oldImgElement.naturalHeight / 2, \"px, 0) rotateZ(\").concat(deg, \"deg)\");\n        }\n        else {\n            imgElement.style.transform = \"\".concat(translate3d, \" rotateZ(\").concat(deg, \"deg)\");\n        }\n        btnElement.setAttribute(\"data-deg\", deg.toString());\n        setTimeout(function () {\n            imgElement.parentElement.scrollTo((imgElement.parentElement.scrollWidth - imgElement.parentElement.clientWidth) / 2, (imgElement.parentElement.scrollHeight - imgElement.parentElement.clientHeight) / 2);\n        }, 400);\n    });\n};\n\n\n/***/ }),\n\n/***/ 34:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Y\": () => (/* binding */ setCodeTheme)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(793);\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(296);\n\n\nvar setCodeTheme = function (codeTheme, cdn) {\n    if (cdn === void 0) { cdn = _constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CDN */ .g.CDN; }\n    if (!_constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.CODE_THEME.includes */ .g.CODE_THEME.includes(codeTheme)) {\n        codeTheme = \"github\";\n    }\n    var vditorHljsStyle = document.getElementById(\"vditorHljsStyle\");\n    var href = \"\".concat(cdn, \"/dist/js/highlight.js/styles/\").concat(codeTheme, \".css\");\n    if (!vditorHljsStyle) {\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_1__/* .addStyle */ .c)(href, \"vditorHljsStyle\");\n    }\n    else if (vditorHljsStyle.getAttribute('href') !== href) {\n        vditorHljsStyle.remove();\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_1__/* .addStyle */ .c)(href, \"vditorHljsStyle\");\n    }\n};\n\n\n/***/ }),\n\n/***/ 652:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Z\": () => (/* binding */ setContentTheme)\n/* harmony export */ });\n/* harmony import */ var _util_addStyle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(296);\n\nvar setContentTheme = function (contentTheme, path) {\n    if (!contentTheme || !path) {\n        return;\n    }\n    var vditorContentTheme = document.getElementById(\"vditorContentTheme\");\n    var cssPath = \"\".concat(path, \"/\").concat(contentTheme, \".css\");\n    if (!vditorContentTheme) {\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_0__/* .addStyle */ .c)(cssPath, \"vditorContentTheme\");\n    }\n    else if (vditorContentTheme.getAttribute(\"href\") !== cssPath) {\n        vditorContentTheme.remove();\n        (0,_util_addStyle__WEBPACK_IMPORTED_MODULE_0__/* .addStyle */ .c)(cssPath, \"vditorContentTheme\");\n    }\n};\n\n\n/***/ }),\n\n/***/ 998:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"G\": () => (/* binding */ addScript),\n/* harmony export */   \"J\": () => (/* binding */ addScriptSync)\n/* harmony export */ });\nvar addScriptSync = function (path, id) {\n    if (document.getElementById(id)) {\n        return false;\n    }\n    var xhrObj = new XMLHttpRequest();\n    xhrObj.open(\"GET\", path, false);\n    xhrObj.setRequestHeader(\"Accept\", \"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01\");\n    xhrObj.send(\"\");\n    var scriptElement = document.createElement(\"script\");\n    scriptElement.type = \"text/javascript\";\n    scriptElement.text = xhrObj.responseText;\n    scriptElement.id = id;\n    document.head.appendChild(scriptElement);\n};\nvar addScript = function (path, id) {\n    return new Promise(function (resolve, reject) {\n        if (document.getElementById(id)) {\n            // 脚本加载后再次调用直接返回\n            resolve(true);\n            return false;\n        }\n        var scriptElement = document.createElement(\"script\");\n        scriptElement.src = path;\n        scriptElement.async = true;\n        // 循环调用时 Chrome 不会重复请求 js\n        document.head.appendChild(scriptElement);\n        scriptElement.onerror = function (event) {\n            reject(event);\n        };\n        scriptElement.onload = function () {\n            if (document.getElementById(id)) {\n                // 循环调用需清除 DOM 中的 script 标签\n                scriptElement.remove();\n                resolve(true);\n                return false;\n            }\n            scriptElement.id = id;\n            resolve(true);\n        };\n    });\n};\n\n\n/***/ }),\n\n/***/ 296:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"c\": () => (/* binding */ addStyle)\n/* harmony export */ });\nvar addStyle = function (url, id) {\n    if (!document.getElementById(id)) {\n        var styleElement = document.createElement(\"link\");\n        styleElement.id = id;\n        styleElement.rel = \"stylesheet\";\n        styleElement.type = \"text/css\";\n        styleElement.href = url;\n        document.getElementsByTagName(\"head\")[0].appendChild(styleElement);\n    }\n};\n\n\n/***/ }),\n\n/***/ 528:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"X\": () => (/* binding */ code160to32)\n/* harmony export */ });\nvar code160to32 = function (text) {\n    // 非打断空格转换为空格\n    return text.replace(/\\u00a0/g, \" \");\n};\n\n\n/***/ }),\n\n/***/ 796:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"G6\": () => (/* binding */ isSafari),\n/* harmony export */   \"Le\": () => (/* binding */ getEventName),\n/* harmony export */   \"i7\": () => (/* binding */ isChrome),\n/* harmony export */   \"ns\": () => (/* binding */ updateHotkeyTip),\n/* harmony export */   \"pK\": () => (/* binding */ accessLocalStorage),\n/* harmony export */   \"vU\": () => (/* binding */ isFirefox),\n/* harmony export */   \"yl\": () => (/* binding */ isCtrl)\n/* harmony export */ });\nvar isSafari = function () {\n    return navigator.userAgent.indexOf(\"Safari\") > -1 && navigator.userAgent.indexOf(\"Chrome\") === -1;\n};\nvar isFirefox = function () {\n    return navigator.userAgent.toLowerCase().indexOf(\"firefox\") > -1;\n};\nvar accessLocalStorage = function () {\n    try {\n        return typeof localStorage !== \"undefined\";\n    }\n    catch (e) {\n        return false;\n    }\n};\n// 用户 iPhone 点击延迟/需要双击的处理\nvar getEventName = function () {\n    if (navigator.userAgent.indexOf(\"iPhone\") > -1) {\n        return \"touchstart\";\n    }\n    else {\n        return \"click\";\n    }\n};\n// 区别 mac 上的 ctrl 和 meta\nvar isCtrl = function (event) {\n    if (navigator.platform.toUpperCase().indexOf(\"MAC\") >= 0) {\n        // mac\n        if (event.metaKey && !event.ctrlKey) {\n            return true;\n        }\n        return false;\n    }\n    else {\n        if (!event.metaKey && event.ctrlKey) {\n            return true;\n        }\n        return false;\n    }\n};\n// Mac，Windows 快捷键展示\nvar updateHotkeyTip = function (hotkey) {\n    if (/Mac/.test(navigator.platform) || navigator.platform === \"iPhone\") {\n        if (hotkey.indexOf(\"⇧\") > -1 && isFirefox()) {\n            // Mac Firefox 按下 shift 后，key 同 windows 系统\n            hotkey = hotkey.replace(\";\", \":\").replace(\"=\", \"+\").replace(\"-\", \"_\");\n        }\n    }\n    else {\n        if (hotkey.startsWith(\"⌘\")) {\n            hotkey = hotkey.replace(\"⌘\", \"⌘+\");\n        }\n        else if (hotkey.startsWith(\"⌥\") && hotkey.substr(1, 1) !== \"⌘\") {\n            hotkey = hotkey.replace(\"⌥\", \"⌥+\");\n        }\n        else {\n            hotkey = hotkey.replace(\"⇧⌘\", \"⌘+⇧+\").replace(\"⌥⌘\", \"⌥+⌘+\");\n        }\n        hotkey = hotkey.replace(\"⌘\", \"Ctrl\").replace(\"⇧\", \"Shift\")\n            .replace(\"⌥\", \"Alt\");\n        if (hotkey.indexOf(\"Shift\") > -1) {\n            hotkey = hotkey.replace(\";\", \":\").replace(\"=\", \"+\").replace(\"-\", \"_\");\n        }\n    }\n    return hotkey;\n};\nvar isChrome = function () {\n    return /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n};\n\n\n/***/ }),\n\n/***/ 446:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"W\": () => (/* binding */ genUUID),\n/* harmony export */   \"o\": () => (/* binding */ getSearch)\n/* harmony export */ });\nvar genUUID = function () { return ([1e7].toString() + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, function (c) {\n    return (parseInt(c, 10) ^ (window.crypto.getRandomValues(new Uint32Array(1))[0] & (15 >> (parseInt(c, 10) / 4)))).toString(16);\n}); };\nvar getSearch = function (key, link) {\n    if (link === void 0) { link = window.location.search; }\n    var params = link.substring(link.indexOf(\"?\"));\n    var hashIndex = params.indexOf(\"#\");\n    // REF https://developer.mozilla.org/zh-CN/docs/Web/API/URLSearchParams\n    var urlSearchParams = new URLSearchParams(params.substring(0, hashIndex >= 0 ? hashIndex : undefined));\n    return urlSearchParams.get(key);\n};\n\n\n/***/ }),\n\n/***/ 118:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DX\": () => (/* binding */ getLastNode),\n/* harmony export */   \"E2\": () => (/* binding */ hasTopClosestByTag),\n/* harmony export */   \"F9\": () => (/* binding */ hasClosestBlock),\n/* harmony export */   \"JQ\": () => (/* binding */ hasTopClosestByClassName),\n/* harmony export */   \"O9\": () => (/* binding */ getTopList),\n/* harmony export */   \"a1\": () => (/* binding */ hasClosestByAttribute),\n/* harmony export */   \"fb\": () => (/* binding */ hasClosestByClassName),\n/* harmony export */   \"lG\": () => (/* binding */ hasClosestByMatchTag)\n/* harmony export */ });\n/* unused harmony export hasTopClosestByAttribute */\n/* harmony import */ var _hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(946);\n\nvar hasTopClosestByClassName = function (element, className) {\n    var closest = hasClosestByClassName(element, className);\n    var parentClosest = false;\n    var findTop = false;\n    while (closest && !closest.classList.contains(\"vditor-reset\") && !findTop) {\n        parentClosest = hasClosestByClassName(closest.parentElement, className);\n        if (parentClosest) {\n            closest = parentClosest;\n        }\n        else {\n            findTop = true;\n        }\n    }\n    return closest || false;\n};\nvar hasTopClosestByAttribute = function (element, attr, value) {\n    var closest = hasClosestByAttribute(element, attr, value);\n    var parentClosest = false;\n    var findTop = false;\n    while (closest && !closest.classList.contains(\"vditor-reset\") && !findTop) {\n        parentClosest = hasClosestByAttribute(closest.parentElement, attr, value);\n        if (parentClosest) {\n            closest = parentClosest;\n        }\n        else {\n            findTop = true;\n        }\n    }\n    return closest || false;\n};\nvar hasTopClosestByTag = function (element, nodeName) {\n    var closest = (0,_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__/* .hasClosestByTag */ .S)(element, nodeName);\n    var parentClosest = false;\n    var findTop = false;\n    while (closest && !closest.classList.contains(\"vditor-reset\") && !findTop) {\n        parentClosest = (0,_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__/* .hasClosestByTag */ .S)(closest.parentElement, nodeName);\n        if (parentClosest) {\n            closest = parentClosest;\n        }\n        else {\n            findTop = true;\n        }\n    }\n    return closest || false;\n};\nvar getTopList = function (element) {\n    var topUlElement = hasTopClosestByTag(element, \"UL\");\n    var topOlElement = hasTopClosestByTag(element, \"OL\");\n    var topListElement = topUlElement;\n    if (topOlElement && (!topUlElement || (topUlElement && topOlElement.contains(topUlElement)))) {\n        topListElement = topOlElement;\n    }\n    return topListElement;\n};\nvar hasClosestByAttribute = function (element, attr, value) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.getAttribute(attr) === value) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestBlock = function (element) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    var blockElement = hasClosestByAttribute(element, \"data-block\", \"0\");\n    if (blockElement) {\n        return blockElement;\n    }\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.tagName === \"H1\" ||\n            e.tagName === \"H2\" ||\n            e.tagName === \"H3\" ||\n            e.tagName === \"H4\" ||\n            e.tagName === \"H5\" ||\n            e.tagName === \"H6\" ||\n            e.tagName === \"P\" ||\n            e.tagName === \"BLOCKQUOTE\" ||\n            e.tagName === \"OL\" ||\n            e.tagName === \"UL\") {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestByMatchTag = function (element, nodeName) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.nodeName === nodeName) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestByClassName = function (element, className) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.classList.contains(className)) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar getLastNode = function (node) {\n    while (node && node.lastChild) {\n        node = node.lastChild;\n    }\n    return node;\n};\n\n\n/***/ }),\n\n/***/ 946:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"S\": () => (/* binding */ hasClosestByTag),\n/* harmony export */   \"W\": () => (/* binding */ hasClosestByHeadings)\n/* harmony export */ });\n// NOTE: 减少 method.ts 打包，故从 hasClosest.ts 中拆分\nvar hasClosestByTag = function (element, nodeName) {\n    if (!element) {\n        return false;\n    }\n    if (element.nodeType === 3) {\n        element = element.parentElement;\n    }\n    var e = element;\n    var isClosest = false;\n    while (e && !isClosest && !e.classList.contains(\"vditor-reset\")) {\n        if (e.nodeName.indexOf(nodeName) === 0) {\n            isClosest = true;\n        }\n        else {\n            e = e.parentElement;\n        }\n    }\n    return isClosest && e;\n};\nvar hasClosestByHeadings = function (element) {\n    var headingElement = hasClosestByTag(element, \"H\");\n    if (headingElement && headingElement.tagName.length === 2 && headingElement.tagName !== \"HR\") {\n        return headingElement;\n    }\n    return false;\n};\n\n\n/***/ }),\n\n/***/ 2:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"T\": () => (/* binding */ merge)\n/* harmony export */ });\nvar merge = function () {\n    var options = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        options[_i] = arguments[_i];\n    }\n    var target = {};\n    var merger = function (obj) {\n        for (var prop in obj) {\n            if (obj.hasOwnProperty(prop)) {\n                if (Object.prototype.toString.call(obj[prop]) === \"[object Object]\") {\n                    target[prop] = merge(target[prop], obj[prop]);\n                }\n                else {\n                    target[prop] = obj[prop];\n                }\n            }\n        }\n    };\n    for (var i = 0; i < options.length; i++) {\n        merger(options[i]);\n    }\n    return target;\n};\n\n\n/***/ }),\n\n/***/ 307:\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"$j\": () => (/* binding */ setSelectionByPosition),\n/* harmony export */   \"Gb\": () => (/* binding */ selectIsEditor),\n/* harmony export */   \"Hc\": () => (/* binding */ setSelectionFocus),\n/* harmony export */   \"Ny\": () => (/* binding */ getCursorPosition),\n/* harmony export */   \"ib\": () => (/* binding */ setRangeByWbr),\n/* harmony export */   \"im\": () => (/* binding */ getSelectPosition),\n/* harmony export */   \"oC\": () => (/* binding */ insertHTML),\n/* harmony export */   \"zh\": () => (/* binding */ getEditorRange)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(793);\n/* harmony import */ var _compatibility__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(796);\n/* harmony import */ var _hasClosest__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(118);\n\n\n\nvar getEditorRange = function (vditor) {\n    var range;\n    var element = vditor[vditor.currentMode].element;\n    if (getSelection().rangeCount > 0) {\n        range = getSelection().getRangeAt(0);\n        if (element.isEqualNode(range.startContainer) || element.contains(range.startContainer)) {\n            return range;\n        }\n    }\n    if (vditor[vditor.currentMode].range) {\n        return vditor[vditor.currentMode].range;\n    }\n    element.focus();\n    range = element.ownerDocument.createRange();\n    range.setStart(element, 0);\n    range.collapse(true);\n    return range;\n};\nvar getCursorPosition = function (editor) {\n    var range = window.getSelection().getRangeAt(0);\n    if (!editor.contains(range.startContainer) && !(0,_hasClosest__WEBPACK_IMPORTED_MODULE_1__/* .hasClosestByClassName */ .fb)(range.startContainer, \"vditor-panel--none\")) {\n        return {\n            left: 0,\n            top: 0,\n        };\n    }\n    var parentRect = editor.parentElement.getBoundingClientRect();\n    var cursorRect;\n    if (range.getClientRects().length === 0) {\n        if (range.startContainer.nodeType === 3) {\n            // 空行时，会出现没有 br 的情况，需要根据父元素 <p> 获取位置信息\n            var parent_1 = range.startContainer.parentElement;\n            if (parent_1 && parent_1.getClientRects().length > 0) {\n                cursorRect = parent_1.getClientRects()[0];\n            }\n            else {\n                return {\n                    left: 0,\n                    top: 0,\n                };\n            }\n        }\n        else {\n            var children = range.startContainer.children;\n            if (children[range.startOffset] &&\n                children[range.startOffset].getClientRects().length > 0) {\n                // markdown 模式回车\n                cursorRect = children[range.startOffset].getClientRects()[0];\n            }\n            else if (range.startContainer.childNodes.length > 0) {\n                // in table or code block\n                var cloneRange = range.cloneRange();\n                range.selectNode(range.startContainer.childNodes[Math.max(0, range.startOffset - 1)]);\n                cursorRect = range.getClientRects()[0];\n                range.setEnd(cloneRange.endContainer, cloneRange.endOffset);\n                range.setStart(cloneRange.startContainer, cloneRange.startOffset);\n            }\n            else {\n                cursorRect = range.startContainer.getClientRects()[0];\n            }\n            if (!cursorRect) {\n                var parentElement = range.startContainer.childNodes[range.startOffset];\n                while (!parentElement.getClientRects ||\n                    (parentElement.getClientRects && parentElement.getClientRects().length === 0)) {\n                    parentElement = parentElement.parentElement;\n                }\n                cursorRect = parentElement.getClientRects()[0];\n            }\n        }\n    }\n    else {\n        cursorRect = range.getClientRects()[0];\n    }\n    return {\n        left: cursorRect.left - parentRect.left,\n        top: cursorRect.top - parentRect.top,\n    };\n};\nvar selectIsEditor = function (editor, range) {\n    if (!range) {\n        if (getSelection().rangeCount === 0) {\n            return false;\n        }\n        else {\n            range = getSelection().getRangeAt(0);\n        }\n    }\n    var container = range.commonAncestorContainer;\n    return editor.isEqualNode(container) || editor.contains(container);\n};\nvar setSelectionFocus = function (range) {\n    var selection = window.getSelection();\n    selection.removeAllRanges();\n    selection.addRange(range);\n};\nvar getSelectPosition = function (selectElement, editorElement, range) {\n    var position = {\n        end: 0,\n        start: 0,\n    };\n    if (!range) {\n        if (getSelection().rangeCount === 0) {\n            return position;\n        }\n        range = window.getSelection().getRangeAt(0);\n    }\n    if (selectIsEditor(editorElement, range)) {\n        var preSelectionRange = range.cloneRange();\n        if (selectElement.childNodes[0] && selectElement.childNodes[0].childNodes[0]) {\n            preSelectionRange.setStart(selectElement.childNodes[0].childNodes[0], 0);\n        }\n        else {\n            preSelectionRange.selectNodeContents(selectElement);\n        }\n        preSelectionRange.setEnd(range.startContainer, range.startOffset);\n        position.start = preSelectionRange.toString().length;\n        position.end = position.start + range.toString().length;\n    }\n    return position;\n};\nvar setSelectionByPosition = function (start, end, editor) {\n    var charIndex = 0;\n    var line = 0;\n    var pNode = editor.childNodes[line];\n    var foundStart = false;\n    var stop = false;\n    start = Math.max(0, start);\n    end = Math.max(0, end);\n    var range = editor.ownerDocument.createRange();\n    range.setStart(pNode || editor, 0);\n    range.collapse(true);\n    while (!stop && pNode) {\n        var nextCharIndex = charIndex + pNode.textContent.length;\n        if (!foundStart && start >= charIndex && start <= nextCharIndex) {\n            if (start === 0) {\n                range.setStart(pNode, 0);\n            }\n            else {\n                if (pNode.childNodes[0].nodeType === 3) {\n                    range.setStart(pNode.childNodes[0], start - charIndex);\n                }\n                else if (pNode.nextSibling) {\n                    range.setStartBefore(pNode.nextSibling);\n                }\n                else {\n                    range.setStartAfter(pNode);\n                }\n            }\n            foundStart = true;\n            if (start === end) {\n                stop = true;\n                break;\n            }\n        }\n        if (foundStart && end >= charIndex && end <= nextCharIndex) {\n            if (end === 0) {\n                range.setEnd(pNode, 0);\n            }\n            else {\n                if (pNode.childNodes[0].nodeType === 3) {\n                    range.setEnd(pNode.childNodes[0], end - charIndex);\n                }\n                else if (pNode.nextSibling) {\n                    range.setEndBefore(pNode.nextSibling);\n                }\n                else {\n                    range.setEndAfter(pNode);\n                }\n            }\n            stop = true;\n        }\n        charIndex = nextCharIndex;\n        pNode = editor.childNodes[++line];\n    }\n    if (!stop && editor.childNodes[line - 1]) {\n        range.setStartBefore(editor.childNodes[line - 1]);\n    }\n    setSelectionFocus(range);\n    return range;\n};\nvar setRangeByWbr = function (element, range) {\n    var wbrElement = element.querySelector(\"wbr\");\n    if (!wbrElement) {\n        return;\n    }\n    if (!wbrElement.previousElementSibling) {\n        if (wbrElement.previousSibling) {\n            // text<wbr>\n            range.setStart(wbrElement.previousSibling, wbrElement.previousSibling.textContent.length);\n        }\n        else if (wbrElement.nextSibling) {\n            if (wbrElement.nextSibling.nodeType === 3) {\n                // <wbr>text\n                range.setStart(wbrElement.nextSibling, 0);\n            }\n            else {\n                // <wbr><br> https://github.com/Vanessa219/vditor/issues/400\n                range.setStartBefore(wbrElement.nextSibling);\n            }\n        }\n        else {\n            // 内容为空\n            range.setStart(wbrElement.parentElement, 0);\n        }\n    }\n    else {\n        if (wbrElement.previousElementSibling.isSameNode(wbrElement.previousSibling)) {\n            if (wbrElement.previousElementSibling.lastChild) {\n                // <em>text</em><wbr>\n                range.setStartBefore(wbrElement);\n                range.collapse(true);\n                setSelectionFocus(range);\n                // fix Chrome set range bug: **c**\n                if ((0,_compatibility__WEBPACK_IMPORTED_MODULE_2__/* .isChrome */ .i7)() && (wbrElement.previousElementSibling.tagName === \"EM\" ||\n                    wbrElement.previousElementSibling.tagName === \"STRONG\" ||\n                    wbrElement.previousElementSibling.tagName === \"S\")) {\n                    range.insertNode(document.createTextNode(_constants__WEBPACK_IMPORTED_MODULE_0__/* .Constants.ZWSP */ .g.ZWSP));\n                    range.collapse(false);\n                }\n                wbrElement.remove();\n                return;\n            }\n            else {\n                // <br><wbr>\n                range.setStartAfter(wbrElement.previousElementSibling);\n            }\n        }\n        else {\n            // <em>text</em>text<wbr>\n            range.setStart(wbrElement.previousSibling, wbrElement.previousSibling.textContent.length);\n        }\n    }\n    range.collapse(true);\n    wbrElement.remove();\n    setSelectionFocus(range);\n};\nvar insertHTML = function (html, vditor) {\n    // 使用 lute 方法会添加 p 元素，只有一个 p 元素的时候进行删除\n    var tempElement = document.createElement(\"div\");\n    tempElement.innerHTML = html;\n    var tempBlockElement = tempElement.querySelectorAll(\"p\");\n    if (tempBlockElement.length === 1 && !tempBlockElement[0].previousSibling && !tempBlockElement[0].nextSibling &&\n        vditor[vditor.currentMode].element.children.length > 0 && tempElement.firstElementChild.tagName === \"P\") {\n        html = tempBlockElement[0].innerHTML.trim();\n    }\n    var pasteElement = document.createElement(\"div\");\n    pasteElement.innerHTML = html;\n    var range = getEditorRange(vditor);\n    if (range.toString() !== \"\") {\n        vditor[vditor.currentMode].preventInput = true;\n        document.execCommand(\"delete\", false, \"\");\n    }\n    if (pasteElement.firstElementChild &&\n        pasteElement.firstElementChild.getAttribute(\"data-block\") === \"0\") {\n        // 粘贴内容为块元素时，应在下一段落中插入\n        pasteElement.lastElementChild.insertAdjacentHTML(\"beforeend\", \"<wbr>\");\n        var blockElement = (0,_hasClosest__WEBPACK_IMPORTED_MODULE_1__/* .hasClosestBlock */ .F9)(range.startContainer);\n        if (!blockElement) {\n            vditor[vditor.currentMode].element.insertAdjacentHTML(\"beforeend\", pasteElement.innerHTML);\n        }\n        else {\n            blockElement.insertAdjacentHTML(\"afterend\", pasteElement.innerHTML);\n        }\n        setRangeByWbr(vditor[vditor.currentMode].element, range);\n    }\n    else {\n        var pasteTemplate = document.createElement(\"template\");\n        pasteTemplate.innerHTML = html;\n        range.insertNode(pasteTemplate.content.cloneNode(true));\n        range.collapse(false);\n        setSelectionFocus(range);\n    }\n};\n\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t(() => {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__webpack_require__.d = (exports, definition) => {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t(() => {\n/******/ \t\t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/make namespace object */\n/******/ \t(() => {\n/******/ \t\t// define __esModule on exports\n/******/ \t\t__webpack_require__.r = (exports) => {\n/******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t\t}\n/******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/************************************************************************/\nvar __webpack_exports__ = {};\n// This entry need to be wrapped in an IIFE because it need to be in strict mode.\n(() => {\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": () => (/* binding */ src)\n});\n\n// EXTERNAL MODULE: ./src/method.ts + 4 modules\nvar method = __webpack_require__(664);\n// EXTERNAL MODULE: ./src/ts/constants.ts\nvar constants = __webpack_require__(793);\n// EXTERNAL MODULE: ./src/ts/util/code160to32.ts\nvar code160to32 = __webpack_require__(528);\n;// CONCATENATED MODULE: ./src/ts/markdown/getMarkdown.ts\n\nvar getMarkdown = function (vditor) {\n    if (vditor.currentMode === \"sv\") {\n        return (0,code160to32/* code160to32 */.X)(\"\".concat(vditor.sv.element.textContent, \"\\n\").replace(/\\n\\n$/, \"\\n\"));\n    }\n    else if (vditor.currentMode === \"wysiwyg\") {\n        return vditor.lute.VditorDOM2Md(vditor.wysiwyg.element.innerHTML);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        return vditor.lute.VditorIRDOM2Md(vditor.ir.element.innerHTML);\n    }\n    return \"\";\n};\n\n// EXTERNAL MODULE: ./src/ts/util/addScript.ts\nvar addScript = __webpack_require__(998);\n;// CONCATENATED MODULE: ./src/ts/devtools/index.ts\n\n\nvar DevTools = /** @class */ (function () {\n    function DevTools() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-devtools\";\n        this.element.innerHTML = '<div class=\"vditor-reset--error\"></div><div style=\"height: 100%;\"></div>';\n    }\n    DevTools.prototype.renderEchart = function (vditor) {\n        var _this = this;\n        if (vditor.devtools.element.style.display !== \"block\") {\n            return;\n        }\n        (0,addScript/* addScript */.G)(\"\".concat(vditor.options.cdn, \"/dist/js/echarts/echarts.min.js\"), \"vditorEchartsScript\").then(function () {\n            if (!_this.ASTChart) {\n                _this.ASTChart = echarts.init(vditor.devtools.element.lastElementChild);\n            }\n            try {\n                _this.element.lastElementChild.style.display = \"block\";\n                _this.element.firstElementChild.innerHTML = \"\";\n                _this.ASTChart.setOption({\n                    series: [\n                        {\n                            data: JSON.parse(vditor.lute.RenderEChartsJSON(getMarkdown(vditor))),\n                            initialTreeDepth: -1,\n                            label: {\n                                align: \"left\",\n                                backgroundColor: \"rgba(68, 77, 86, .68)\",\n                                borderRadius: 3,\n                                color: \"#d1d5da\",\n                                fontSize: 12,\n                                lineHeight: 12,\n                                offset: [9, 12],\n                                padding: [2, 4, 2, 4],\n                                position: \"top\",\n                                verticalAlign: \"middle\",\n                            },\n                            lineStyle: {\n                                color: \"#4285f4\",\n                                type: \"curve\",\n                                width: 1,\n                            },\n                            orient: \"vertical\",\n                            roam: true,\n                            type: \"tree\",\n                        },\n                    ],\n                    toolbox: {\n                        bottom: 25,\n                        emphasis: {\n                            iconStyle: {\n                                color: \"#4285f4\",\n                            },\n                        },\n                        feature: {\n                            restore: {\n                                show: true,\n                            },\n                            saveAsImage: {\n                                show: true,\n                            },\n                        },\n                        right: 15,\n                        show: true,\n                    },\n                });\n                _this.ASTChart.resize();\n            }\n            catch (e) {\n                _this.element.lastElementChild.style.display = \"none\";\n                _this.element.firstElementChild.innerHTML = e;\n            }\n        });\n    };\n    return DevTools;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/util/compatibility.ts\nvar compatibility = __webpack_require__(796);\n;// CONCATENATED MODULE: ./src/ts/toolbar/setToolbar.ts\n\n\nvar removeCurrentToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && itemElement.classList.contains(\"vditor-menu--current\")) {\n            itemElement.classList.remove(\"vditor-menu--current\");\n        }\n    });\n};\nvar setCurrentToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && !itemElement.classList.contains(\"vditor-menu--current\")) {\n            itemElement.classList.add(\"vditor-menu--current\");\n        }\n    });\n};\nvar enableToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && itemElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n            itemElement.classList.remove(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED);\n        }\n    });\n};\nvar disableToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        var itemElement = toolbar[name].children[0];\n        if (itemElement && !itemElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n            itemElement.classList.add(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED);\n        }\n    });\n};\nvar hideToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        if (toolbar[name]) {\n            toolbar[name].style.display = \"none\";\n        }\n    });\n};\nvar showToolbar = function (toolbar, names) {\n    names.forEach(function (name) {\n        if (!toolbar[name]) {\n            return;\n        }\n        if (toolbar[name]) {\n            toolbar[name].style.display = \"block\";\n        }\n    });\n};\n// \"subToolbar\", \"hint\", \"popover\"\nvar hidePanel = function (vditor, panels, exceptElement) {\n    if (panels.includes(\"subToolbar\")) {\n        vditor.toolbar.element.querySelectorAll(\".vditor-hint\").forEach(function (item) {\n            if (exceptElement && item.isEqualNode(exceptElement)) {\n                return;\n            }\n            item.style.display = \"none\";\n        });\n        if (vditor.toolbar.elements.emoji) {\n            vditor.toolbar.elements.emoji.lastElementChild.style.display = \"none\";\n        }\n    }\n    if (panels.includes(\"hint\")) {\n        vditor.hint.element.style.display = \"none\";\n    }\n    if (vditor.wysiwyg.popover && panels.includes(\"popover\")) {\n        vditor.wysiwyg.popover.style.display = \"none\";\n    }\n};\nvar toggleSubMenu = function (vditor, panelElement, actionBtn, level) {\n    actionBtn.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (actionBtn.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n            return;\n        }\n        vditor.toolbar.element.querySelectorAll(\".vditor-hint--current\").forEach(function (item) {\n            item.classList.remove(\"vditor-hint--current\");\n        });\n        if (panelElement.style.display === \"block\") {\n            panelElement.style.display = \"none\";\n        }\n        else {\n            hidePanel(vditor, [\"subToolbar\", \"hint\", \"popover\"], actionBtn.parentElement.parentElement);\n            if (!actionBtn.classList.contains(\"vditor-tooltipped\")) {\n                actionBtn.classList.add(\"vditor-hint--current\");\n            }\n            panelElement.style.display = \"block\";\n            if (vditor.toolbar.element.getBoundingClientRect().right - actionBtn.getBoundingClientRect().right < 250) {\n                panelElement.classList.add(\"vditor-panel--left\");\n            }\n            else {\n                panelElement.classList.remove(\"vditor-panel--left\");\n            }\n        }\n    });\n};\n\n// EXTERNAL MODULE: ./src/ts/util/hasClosest.ts\nvar hasClosest = __webpack_require__(118);\n// EXTERNAL MODULE: ./src/ts/util/hasClosestByHeadings.ts\nvar hasClosestByHeadings = __webpack_require__(946);\n;// CONCATENATED MODULE: ./src/ts/util/log.ts\nvar log = function (method, content, type, print) {\n    if (print) {\n        // @ts-ignore\n        console.log(\"\".concat(method, \" - \").concat(type, \": \").concat(content));\n    }\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/abcRender.ts\nvar abcRender = __webpack_require__(386);\n// EXTERNAL MODULE: ./src/ts/markdown/chartRender.ts\nvar chartRender = __webpack_require__(379);\n// EXTERNAL MODULE: ./src/ts/markdown/codeRender.ts\nvar codeRender = __webpack_require__(895);\n// EXTERNAL MODULE: ./src/ts/markdown/flowchartRender.ts\nvar flowchartRender = __webpack_require__(169);\n// EXTERNAL MODULE: ./src/ts/markdown/graphvizRender.ts\nvar graphvizRender = __webpack_require__(572);\n// EXTERNAL MODULE: ./src/ts/markdown/highlightRender.ts\nvar highlightRender = __webpack_require__(702);\n// EXTERNAL MODULE: ./src/ts/markdown/mathRender.ts\nvar mathRender = __webpack_require__(982);\n// EXTERNAL MODULE: ./src/ts/markdown/mermaidRender.ts\nvar mermaidRender = __webpack_require__(570);\n// EXTERNAL MODULE: ./src/ts/markdown/markmapRender.ts\nvar markmapRender = __webpack_require__(593);\n// EXTERNAL MODULE: ./src/ts/markdown/mindmapRender.ts\nvar mindmapRender = __webpack_require__(558);\n// EXTERNAL MODULE: ./src/ts/markdown/plantumlRender.ts\nvar plantumlRender = __webpack_require__(931);\n;// CONCATENATED MODULE: ./src/ts/util/processCode.ts\n\n\n\n\n\n\n\n\n\n\n\nvar processPasteCode = function (html, text, type) {\n    if (type === void 0) { type = \"sv\"; }\n    var tempElement = document.createElement(\"div\");\n    tempElement.innerHTML = html;\n    var isCode = false;\n    if (tempElement.childElementCount === 1 &&\n        tempElement.lastElementChild.style.fontFamily.indexOf(\"monospace\") > -1) {\n        // VS Code\n        isCode = true;\n    }\n    var pres = tempElement.querySelectorAll(\"pre\");\n    if (tempElement.childElementCount === 1 && pres.length === 1\n        && pres[0].className !== \"vditor-wysiwyg\"\n        && pres[0].className !== \"vditor-sv\") {\n        // IDE\n        isCode = true;\n    }\n    if (html.indexOf('\\n<p class=\"p1\">') === 0) {\n        // Xcode\n        isCode = true;\n    }\n    if (tempElement.childElementCount === 1 && tempElement.firstElementChild.tagName === \"TABLE\" &&\n        tempElement.querySelector(\".line-number\") && tempElement.querySelector(\".line-content\")) {\n        // 网页源码\n        isCode = true;\n    }\n    if (isCode) {\n        var code = text || html;\n        if (/\\n/.test(code) || pres.length === 1) {\n            if (type === \"wysiwyg\") {\n                return \"<div class=\\\"vditor-wysiwyg__block\\\" data-block=\\\"0\\\" data-type=\\\"code-block\\\"><pre><code>\".concat(code.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\"), \"<wbr></code></pre></div>\");\n            }\n            return \"\\n```\\n\" + code.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\") + \"\\n```\";\n        }\n        else {\n            if (type === \"wysiwyg\") {\n                return \"<code>\".concat(code.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\"), \"</code><wbr>\");\n            }\n            return \"`\".concat(code, \"`\");\n        }\n    }\n    return false;\n};\nvar processCodeRender = function (previewPanel, vditor) {\n    if (!previewPanel) {\n        return;\n    }\n    if (previewPanel.parentElement.getAttribute(\"data-type\") === \"html-block\") {\n        previewPanel.setAttribute(\"data-render\", \"1\");\n        return;\n    }\n    var language = previewPanel.firstElementChild.className.replace(\"language-\", \"\");\n    if (language === \"abc\") {\n        (0,abcRender/* abcRender */.Q)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"mermaid\") {\n        (0,mermaidRender/* mermaidRender */.i)(previewPanel, vditor.options.cdn, vditor.options.theme);\n    }\n    else if (language === \"markmap\") {\n        (0,markmapRender/* markmapRender */.K)(previewPanel, vditor.options.cdn, vditor.options.theme);\n    }\n    else if (language === \"flowchart\") {\n        (0,flowchartRender/* flowchartRender */.P)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"echarts\") {\n        (0,chartRender/* chartRender */.p)(previewPanel, vditor.options.cdn, vditor.options.theme);\n    }\n    else if (language === \"mindmap\") {\n        (0,mindmapRender/* mindmapRender */.P)(previewPanel, vditor.options.cdn, vditor.options.theme);\n    }\n    else if (language === \"plantuml\") {\n        (0,plantumlRender/* plantumlRender */.B)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"graphviz\") {\n        (0,graphvizRender/* graphvizRender */.v)(previewPanel, vditor.options.cdn);\n    }\n    else if (language === \"math\") {\n        (0,mathRender/* mathRender */.H)(previewPanel, { cdn: vditor.options.cdn, math: vditor.options.preview.math });\n    }\n    else {\n        var cRender = vditor.options.customRenders.find(function (item) {\n            if (item.language === language) {\n                item.render(previewPanel, vditor);\n                return true;\n            }\n        });\n        if (!cRender) {\n            (0,highlightRender/* highlightRender */.s)(Object.assign({}, vditor.options.preview.hljs), previewPanel, vditor.options.cdn);\n            (0,codeRender/* codeRender */.O)(previewPanel, vditor.options.preview.hljs);\n        }\n    }\n    previewPanel.setAttribute(\"data-render\", \"1\");\n};\n\n// EXTERNAL MODULE: ./src/ts/util/selection.ts\nvar selection = __webpack_require__(307);\n;// CONCATENATED MODULE: ./src/ts/util/toc.ts\n\n\n\n\nvar renderToc = function (vditor) {\n    if (vditor.currentMode === \"sv\") {\n        return;\n    }\n    var editorElement = vditor[vditor.currentMode].element;\n    var tocHTML = vditor.outline.render(vditor);\n    if (tocHTML === \"\") {\n        tocHTML = \"[ToC]\";\n    }\n    editorElement.querySelectorAll('[data-type=\"toc-block\"]').forEach(function (item) {\n        item.innerHTML = tocHTML;\n        (0,mathRender/* mathRender */.H)(item, {\n            cdn: vditor.options.cdn,\n            math: vditor.options.preview.math,\n        });\n    });\n};\nvar clickToc = function (event, vditor) {\n    var spanElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"SPAN\");\n    if (spanElement && (0,hasClosest/* hasClosestByClassName */.fb)(spanElement, \"vditor-toc\")) {\n        var headingElement = vditor[vditor.currentMode].element.querySelector(\"#\" + spanElement.getAttribute(\"data-target-id\"));\n        if (headingElement) {\n            if (vditor.options.height === \"auto\") {\n                var windowScrollY = headingElement.offsetTop + vditor.element.offsetTop;\n                if (!vditor.options.toolbarConfig.pin) {\n                    windowScrollY += vditor.toolbar.element.offsetHeight;\n                }\n                window.scrollTo(window.scrollX, windowScrollY);\n            }\n            else {\n                if (vditor.element.offsetTop < window.scrollY) {\n                    window.scrollTo(window.scrollX, vditor.element.offsetTop);\n                }\n                vditor[vditor.currentMode].element.scrollTop = headingElement.offsetTop;\n            }\n        }\n        return;\n    }\n};\nvar keydownToc = function (blockElement, vditor, event, range) {\n    // toc 前无元素，插入空块\n    if (blockElement.previousElementSibling &&\n        blockElement.previousElementSibling.classList.contains(\"vditor-toc\")) {\n        if (event.key === \"Backspace\" &&\n            (0,selection/* getSelectPosition */.im)(blockElement, vditor[vditor.currentMode].element, range).start === 0) {\n            blockElement.previousElementSibling.remove();\n            execAfterRender(vditor);\n            return true;\n        }\n        if (insertBeforeBlock(vditor, event, range, blockElement, blockElement.previousElementSibling)) {\n            return true;\n        }\n    }\n    // toc 后无元素，插入空块\n    if (blockElement.nextElementSibling &&\n        blockElement.nextElementSibling.classList.contains(\"vditor-toc\")) {\n        if (event.key === \"Delete\" &&\n            (0,selection/* getSelectPosition */.im)(blockElement, vditor[vditor.currentMode].element, range).start\n                >= blockElement.textContent.trimRight().length) {\n            blockElement.nextElementSibling.remove();\n            execAfterRender(vditor);\n            return true;\n        }\n        if (insertAfterBlock(vditor, event, range, blockElement, blockElement.nextElementSibling)) {\n            return true;\n        }\n    }\n    // toc 删除\n    if (event.key === \"Backspace\" || event.key === \"Delete\") {\n        var tocElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-toc\");\n        if (tocElement) {\n            tocElement.remove();\n            execAfterRender(vditor);\n            return true;\n        }\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/input.ts\n\n\n\n\n\n\n\n\n\n\nvar input = function (vditor, range, ignoreSpace, event) {\n    if (ignoreSpace === void 0) { ignoreSpace = false; }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    // 前后可以输入空格\n    if (blockElement && !ignoreSpace && blockElement.getAttribute(\"data-type\") !== \"code-block\") {\n        if ((isHrMD(blockElement.innerHTML) && blockElement.previousElementSibling) ||\n            isHeadingMD(blockElement.innerHTML)) {\n            return;\n        }\n        // 前后空格处理\n        var startOffset = (0,selection/* getSelectPosition */.im)(blockElement, vditor.ir.element, range).start;\n        // 开始可以输入空格\n        var startSpace = true;\n        for (var i = startOffset - 1; \n        // 软换行后有空格\n        i > blockElement.textContent.substr(0, startOffset).lastIndexOf(\"\\n\"); i--) {\n            if (blockElement.textContent.charAt(i) !== \" \" &&\n                // 多个 tab 前删除不形成代码块 https://github.com/Vanessa219/vditor/issues/162 1\n                blockElement.textContent.charAt(i) !== \"\\t\") {\n                startSpace = false;\n                break;\n            }\n        }\n        if (startOffset === 0) {\n            startSpace = false;\n        }\n        // 结尾可以输入空格\n        var endSpace = true;\n        for (var i = startOffset - 1; i < blockElement.textContent.length; i++) {\n            if (blockElement.textContent.charAt(i) !== \" \" && blockElement.textContent.charAt(i) !== \"\\n\") {\n                endSpace = false;\n                break;\n            }\n        }\n        if (startSpace) {\n            if (typeof vditor.options.input === \"function\") {\n                vditor.options.input(getMarkdown(vditor));\n            }\n            return;\n        }\n        if (endSpace) {\n            var markerElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__marker\");\n            if (markerElement) {\n                // inline marker space https://github.com/Vanessa219/vditor/issues/239\n            }\n            else {\n                var previousNode = range.startContainer.previousSibling;\n                if (previousNode && previousNode.nodeType !== 3 && previousNode.classList.contains(\"vditor-ir__node--expand\")) {\n                    // FireFox https://github.com/Vanessa219/vditor/issues/239\n                    previousNode.classList.remove(\"vditor-ir__node--expand\");\n                }\n                if (typeof vditor.options.input === \"function\") {\n                    vditor.options.input(getMarkdown(vditor));\n                }\n                return;\n            }\n        }\n    }\n    vditor.ir.element.querySelectorAll(\".vditor-ir__node--expand\").forEach(function (item) {\n        item.classList.remove(\"vditor-ir__node--expand\");\n    });\n    if (!blockElement) {\n        // 使用顶级块元素，应使用 innerHTML\n        blockElement = vditor.ir.element;\n    }\n    // document.exeComment insertHTML 会插入 wbr\n    if (!blockElement.querySelector(\"wbr\")) {\n        var previewRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__preview\");\n        if (previewRenderElement) {\n            previewRenderElement.previousElementSibling.insertAdjacentHTML(\"beforeend\", \"<wbr>\");\n        }\n        else {\n            range.insertNode(document.createElement(\"wbr\"));\n        }\n    }\n    // 清除浏览器自带的样式\n    blockElement.querySelectorAll(\"[style]\").forEach(function (item) {\n        item.removeAttribute(\"style\");\n    });\n    if (blockElement.getAttribute(\"data-type\") === \"link-ref-defs-block\") {\n        // 修改链接引用\n        blockElement = vditor.ir.element;\n    }\n    var isIRElement = blockElement.isEqualNode(vditor.ir.element);\n    var footnoteElement = (0,hasClosest/* hasClosestByAttribute */.a1)(blockElement, \"data-type\", \"footnotes-block\");\n    var html = \"\";\n    if (!isIRElement) {\n        var blockquoteElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"BLOCKQUOTE\");\n        // 列表需要到最顶层\n        var topListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n        if (topListElement) {\n            blockElement = topListElement;\n        }\n        // 应到引用层，否则 > --- 会解析为 front-matter；列表中有 blockquote 则解析 blockquote；blockquote 中有列表则解析列表\n        if (blockquoteElement && (!topListElement || (topListElement && !blockquoteElement.contains(topListElement)))) {\n            blockElement = blockquoteElement;\n        }\n        // 修改脚注\n        if (footnoteElement) {\n            blockElement = footnoteElement;\n        }\n        html = blockElement.outerHTML;\n        if (blockElement.tagName === \"UL\" || blockElement.tagName === \"OL\") {\n            // 如果为列表的话，需要把上下的列表都重绘\n            var listPrevElement = blockElement.previousElementSibling;\n            var listNextElement = blockElement.nextElementSibling;\n            if (listPrevElement && (listPrevElement.tagName === \"UL\" || listPrevElement.tagName === \"OL\")) {\n                html = listPrevElement.outerHTML + html;\n                listPrevElement.remove();\n            }\n            if (listNextElement && (listNextElement.tagName === \"UL\" || listNextElement.tagName === \"OL\")) {\n                html = html + listNextElement.outerHTML;\n                listNextElement.remove();\n            }\n            // firefox 列表回车不会产生新的 list item https://github.com/Vanessa219/vditor/issues/194\n            html = html.replace(\"<div><wbr><br></div>\", \"<li><p><wbr><br></p></li>\");\n        }\n        else if (blockElement.previousElementSibling &&\n            blockElement.previousElementSibling.textContent.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") !== \"\" &&\n            event && event.inputType === \"insertParagraph\") {\n            // 换行时需要处理上一段落\n            html = blockElement.previousElementSibling.outerHTML + html;\n            blockElement.previousElementSibling.remove();\n        }\n        if (!blockElement.innerText.startsWith(\"```\")) {\n            // 添加链接引用\n            vditor.ir.element.querySelectorAll(\"[data-type='link-ref-defs-block']\").forEach(function (item) {\n                if (item && !blockElement.isEqualNode(item)) {\n                    html += item.outerHTML;\n                    item.remove();\n                }\n            });\n            // 添加脚注\n            vditor.ir.element.querySelectorAll(\"[data-type='footnotes-block']\").forEach(function (item) {\n                if (item && !blockElement.isEqualNode(item)) {\n                    html += item.outerHTML;\n                    item.remove();\n                }\n            });\n        }\n    }\n    else {\n        html = blockElement.innerHTML;\n    }\n    log(\"SpinVditorIRDOM\", html, \"argument\", vditor.options.debugger);\n    html = vditor.lute.SpinVditorIRDOM(html);\n    log(\"SpinVditorIRDOM\", html, \"result\", vditor.options.debugger);\n    if (isIRElement) {\n        blockElement.innerHTML = html;\n    }\n    else {\n        blockElement.outerHTML = html;\n        // 更新正文中的 tip\n        if (footnoteElement) {\n            var footnoteItemElement = (0,hasClosest/* hasClosestByAttribute */.a1)(vditor.ir.element.querySelector(\"wbr\"), \"data-type\", \"footnotes-def\");\n            if (footnoteItemElement) {\n                var footnoteItemText = footnoteItemElement.textContent;\n                var marker = footnoteItemText.substring(1, footnoteItemText.indexOf(\"]:\"));\n                var footnoteRefElement = vditor.ir.element.querySelector(\"sup[data-type=\\\"footnotes-ref\\\"][data-footnotes-label=\\\"\".concat(marker, \"\\\"]\"));\n                if (footnoteRefElement) {\n                    footnoteRefElement.setAttribute(\"aria-label\", footnoteItemText.substr(marker.length + 3).trim().substr(0, 24));\n                }\n            }\n        }\n    }\n    //  linkref 合并及添加\n    var firstLinkRefDefElement;\n    var allLinkRefDefsElement = vditor.ir.element.querySelectorAll(\"[data-type='link-ref-defs-block']\");\n    allLinkRefDefsElement.forEach(function (item, index) {\n        if (index === 0) {\n            firstLinkRefDefElement = item;\n        }\n        else {\n            firstLinkRefDefElement.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n            item.remove();\n        }\n    });\n    if (allLinkRefDefsElement.length > 0) {\n        vditor.ir.element.insertAdjacentElement(\"beforeend\", allLinkRefDefsElement[0]);\n    }\n    // 脚注合并后添加的末尾\n    var firstFootnoteElement;\n    var allFootnoteElement = vditor.ir.element.querySelectorAll(\"[data-type='footnotes-block']\");\n    allFootnoteElement.forEach(function (item, index) {\n        if (index === 0) {\n            firstFootnoteElement = item;\n        }\n        else {\n            firstFootnoteElement.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n            item.remove();\n        }\n    });\n    if (allFootnoteElement.length > 0) {\n        vditor.ir.element.insertAdjacentElement(\"beforeend\", allFootnoteElement[0]);\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n    vditor.ir.element.querySelectorAll(\".vditor-ir__preview[data-render='2']\").forEach(function (item) {\n        processCodeRender(item, vditor);\n    });\n    renderToc(vditor);\n    process_processAfterRender(vditor, {\n        enableAddUndoStack: true,\n        enableHint: true,\n        enableInput: true,\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/hotKey.ts\n\n// 是否匹配 ⇧⌘[] / ⌘[] / ⌥[] / ⌥⌘[] / ⇧Tab / []\nvar matchHotKey = function (hotKey, event) {\n    if (hotKey === \"\") {\n        return false;\n    }\n    // []\n    if (hotKey.indexOf(\"⇧\") === -1 && hotKey.indexOf(\"⌘\") === -1 && hotKey.indexOf(\"⌥\") === -1) {\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey && event.code === hotKey) {\n            return true;\n        }\n        return false;\n    }\n    // 是否匹配 ⇧Tab\n    if (hotKey === \"⇧Tab\") {\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.shiftKey && event.code === \"Tab\") {\n            return true;\n        }\n        return false;\n    }\n    var hotKeys = hotKey.split(\"\");\n    if (hotKey.startsWith(\"⌥\")) {\n        // 是否匹配 ⌥[] / ⌥⌘[]\n        var keyCode = hotKeys.length === 3 ? hotKeys[2] : hotKeys[1];\n        if ((hotKeys.length === 3 ? (0,compatibility/* isCtrl */.yl)(event) : !(0,compatibility/* isCtrl */.yl)(event)) && event.altKey && !event.shiftKey &&\n            event.code === (/^[0-9]$/.test(keyCode) ? \"Digit\" : \"Key\") + keyCode) {\n            return true;\n        }\n        return false;\n    }\n    // 是否匹配 ⇧⌘[] / ⌘[]\n    if (hotKey === \"⌘Enter\") {\n        hotKeys = [\"⌘\", \"Enter\"];\n    }\n    var hasShift = hotKeys.length > 2 && (hotKeys[0] === \"⇧\");\n    var key = (hasShift ? hotKeys[2] : hotKeys[1]);\n    if (hasShift && ((0,compatibility/* isFirefox */.vU)() || !/Mac/.test(navigator.platform))) {\n        if (key === \"-\") {\n            key = \"_\";\n        }\n        else if (key === \"=\") {\n            key = \"+\";\n        }\n    }\n    if ((0,compatibility/* isCtrl */.yl)(event) && event.key.toLowerCase() === key.toLowerCase() && !event.altKey\n        && ((!hasShift && !event.shiftKey) || (hasShift && event.shiftKey))) {\n        return true;\n    }\n    return false;\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/expandMarker.ts\n\n\nvar nextIsNode = function (range) {\n    var startContainer = range.startContainer;\n    if (startContainer.nodeType === 3 && startContainer.nodeValue.length !== range.startOffset) {\n        return false;\n    }\n    var nextNode = startContainer.nextSibling;\n    while (nextNode && nextNode.textContent === \"\") {\n        nextNode = nextNode.nextSibling;\n    }\n    if (!nextNode) {\n        // *em*|**string**\n        var markerElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-ir__marker\");\n        if (markerElement && !markerElement.nextSibling) {\n            var parentNextNode = startContainer.parentElement.parentElement.nextSibling;\n            if (parentNextNode && parentNextNode.nodeType !== 3 &&\n                parentNextNode.classList.contains(\"vditor-ir__node\")) {\n                return parentNextNode;\n            }\n        }\n        return false;\n    }\n    else if (nextNode && nextNode.nodeType !== 3 && nextNode.classList.contains(\"vditor-ir__node\") &&\n        !nextNode.getAttribute(\"data-block\")) {\n        // test|*em*\n        return nextNode;\n    }\n    return false;\n};\nvar previousIsNode = function (range) {\n    var startContainer = range.startContainer;\n    var previousNode = startContainer.previousSibling;\n    if (startContainer.nodeType === 3 && range.startOffset === 0 && previousNode && previousNode.nodeType !== 3 &&\n        // *em*|text\n        previousNode.classList.contains(\"vditor-ir__node\") && !previousNode.getAttribute(\"data-block\")) {\n        return previousNode;\n    }\n    return false;\n};\nvar expandMarker = function (range, vditor) {\n    vditor.ir.element.querySelectorAll(\".vditor-ir__node--expand\").forEach(function (item) {\n        item.classList.remove(\"vditor-ir__node--expand\");\n    });\n    var nodeElement = (0,hasClosest/* hasTopClosestByClassName */.JQ)(range.startContainer, \"vditor-ir__node\");\n    var nodeElementEnd = !range.collapsed && (0,hasClosest/* hasTopClosestByClassName */.JQ)(range.endContainer, \"vditor-ir__node\");\n    // 选中文本为同一个 nodeElement 内时，需要展开\n    if (!range.collapsed && (!nodeElement || nodeElement !== nodeElementEnd)) {\n        return;\n    }\n    if (nodeElement) {\n        nodeElement.classList.add(\"vditor-ir__node--expand\");\n        nodeElement.classList.remove(\"vditor-ir__node--hidden\");\n        // https://github.com/Vanessa219/vditor/issues/615 safari中光标位置跳动\n        (0,selection/* setSelectionFocus */.Hc)(range);\n    }\n    var nextNode = nextIsNode(range);\n    if (nextNode) {\n        nextNode.classList.add(\"vditor-ir__node--expand\");\n        nextNode.classList.remove(\"vditor-ir__node--hidden\");\n        return;\n    }\n    var previousNode = previousIsNode(range);\n    if (previousNode) {\n        previousNode.classList.add(\"vditor-ir__node--expand\");\n        previousNode.classList.remove(\"vditor-ir__node--hidden\");\n        return;\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/processKeydown.ts\n\n\n\n\n\n\n\n\n\n\n\nvar processKeydown = function (vditor, event) {\n    vditor.ir.composingLock = event.isComposing;\n    if (event.isComposing) {\n        return false;\n    }\n    // 添加第一次记录 undo 的光标\n    if (event.key.indexOf(\"Arrow\") === -1 && event.key !== \"Meta\" && event.key !== \"Control\" && event.key !== \"Alt\" &&\n        event.key !== \"Shift\" && event.key !== \"CapsLock\" && event.key !== \"Escape\" && !/^F\\d{1,2}$/.test(event.key)) {\n        vditor.undo.recordFirstPosition(vditor, event);\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var startContainer = range.startContainer;\n    if (!fixGSKeyBackspace(event, vditor, startContainer)) {\n        return false;\n    }\n    fixCJKPosition(range, vditor, event);\n    fixHR(range);\n    // 仅处理以下快捷键操作\n    if (event.key !== \"Enter\" && event.key !== \"Tab\" && event.key !== \"Backspace\" && event.key.indexOf(\"Arrow\") === -1\n        && !(0,compatibility/* isCtrl */.yl)(event) && event.key !== \"Escape\" && event.key !== \"Delete\") {\n        return false;\n    }\n    // 斜体、粗体、内联代码块中换行\n    var newlineElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-newline\", \"1\");\n    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey && event.key === \"Enter\" && newlineElement\n        && range.startOffset < newlineElement.textContent.length) {\n        var beforeMarkerElement = newlineElement.previousElementSibling;\n        if (beforeMarkerElement) {\n            range.insertNode(document.createTextNode(beforeMarkerElement.textContent));\n            range.collapse(false);\n        }\n        var afterMarkerElement = newlineElement.nextSibling;\n        if (afterMarkerElement) {\n            range.insertNode(document.createTextNode(afterMarkerElement.textContent));\n            range.collapse(true);\n        }\n    }\n    var pElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"P\");\n    // md 处理\n    if (fixMarkdown(event, vditor, pElement, range)) {\n        return true;\n    }\n    // li\n    if (fixList(range, vditor, pElement, event)) {\n        return true;\n    }\n    // blockquote\n    if (fixBlockquote(vditor, range, event, pElement)) {\n        return true;\n    }\n    // 代码块\n    var preRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-ir__marker--pre\");\n    if (preRenderElement && preRenderElement.tagName === \"PRE\") {\n        var codeRenderElement = preRenderElement.firstChild;\n        if (fixCodeBlock(vditor, event, preRenderElement, range)) {\n            return true;\n        }\n        // 数学公式上无元素，按上或左将添加新块\n        if ((codeRenderElement.getAttribute(\"data-type\") === \"math-block\"\n            || codeRenderElement.getAttribute(\"data-type\") === \"html-block\") &&\n            insertBeforeBlock(vditor, event, range, codeRenderElement, preRenderElement.parentElement)) {\n            return true;\n        }\n        // 代码块下无元素或者为代码块/table 元素，添加空块\n        if (insertAfterBlock(vditor, event, range, codeRenderElement, preRenderElement.parentElement)) {\n            return true;\n        }\n    }\n    // 代码块语言\n    var preBeforeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-info\");\n    if (preBeforeElement) {\n        if (event.key === \"Enter\" || event.key === \"Tab\") {\n            range.selectNodeContents(preBeforeElement.nextElementSibling.firstChild);\n            range.collapse(true);\n            event.preventDefault();\n            hidePanel(vditor, [\"hint\"]);\n            return true;\n        }\n        if (event.key === \"Backspace\") {\n            var start = (0,selection/* getSelectPosition */.im)(preBeforeElement, vditor.ir.element).start;\n            if (start === 1) { // 删除零宽空格\n                range.setStart(startContainer, 0);\n            }\n            if (start === 2) { // 删除时清空自动补全语言\n                vditor.hint.recentLanguage = \"\";\n            }\n        }\n        if (insertBeforeBlock(vditor, event, range, preBeforeElement, preBeforeElement.parentElement)) {\n            // 上无元素，按上或左将添加新块\n            hidePanel(vditor, [\"hint\"]);\n            return true;\n        }\n    }\n    // table\n    var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n        (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n    if (event.key.indexOf(\"Arrow\") > -1 && cellElement) {\n        var tableElement = isFirstCell(cellElement);\n        if (tableElement && insertBeforeBlock(vditor, event, range, cellElement, tableElement)) {\n            return true;\n        }\n        var table2Element = isLastCell(cellElement);\n        if (table2Element && insertAfterBlock(vditor, event, range, cellElement, table2Element)) {\n            return true;\n        }\n    }\n    if (fixTable(vditor, event, range)) {\n        return true;\n    }\n    // task list\n    if (fixTask(vditor, range, event)) {\n        return true;\n    }\n    // tab\n    if (fixTab(vditor, range, event)) {\n        return true;\n    }\n    var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(startContainer);\n    if (headingElement) {\n        // enter++: 标题变大\n        if (matchHotKey(\"⌘=\", event)) {\n            var headingMarkerElement = headingElement.querySelector(\".vditor-ir__marker--heading\");\n            if (headingMarkerElement && headingMarkerElement.textContent.trim().length > 1) {\n                process_processHeading(vditor, headingMarkerElement.textContent.substr(1));\n            }\n            event.preventDefault();\n            return true;\n        }\n        // enter++: 标题变小\n        if (matchHotKey(\"⌘-\", event)) {\n            var headingMarkerElement = headingElement.querySelector(\".vditor-ir__marker--heading\");\n            if (headingMarkerElement && headingMarkerElement.textContent.trim().length < 6) {\n                process_processHeading(vditor, headingMarkerElement.textContent.trim() + \"# \");\n            }\n            event.preventDefault();\n            return true;\n        }\n    }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && range.toString() === \"\") {\n        if (fixDelete(vditor, range, event, pElement)) {\n            return true;\n        }\n        if (blockElement && blockElement.previousElementSibling\n            && blockElement.tagName !== \"UL\" && blockElement.tagName !== \"OL\"\n            && (blockElement.previousElementSibling.getAttribute(\"data-type\") === \"code-block\" ||\n                blockElement.previousElementSibling.getAttribute(\"data-type\") === \"math-block\")) {\n            var rangeStart = (0,selection/* getSelectPosition */.im)(blockElement, vditor.ir.element, range).start;\n            if (rangeStart === 0 || (rangeStart === 1 && blockElement.innerText.startsWith(constants/* Constants.ZWSP */.g.ZWSP))) {\n                // 当前块删除后光标落于代码渲染块上，当前块会被删除，因此需要阻止事件，不能和 keyup 中的代码块处理合并\n                range.selectNodeContents(blockElement.previousElementSibling.querySelector(\".vditor-ir__marker--pre code\"));\n                range.collapse(false);\n                expandMarker(range, vditor);\n                if (blockElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                    // 当前块为空且不是最后一个时，需要删除\n                    blockElement.remove();\n                    process_processAfterRender(vditor);\n                }\n                event.preventDefault();\n                return true;\n            }\n        }\n        // 光标位于标题前，marker 后\n        if (headingElement) {\n            var headingLength = headingElement.firstElementChild.textContent.length;\n            if ((0,selection/* getSelectPosition */.im)(headingElement, vditor.ir.element).start === headingLength) {\n                range.setStart(headingElement.firstElementChild.firstChild, headingLength - 1);\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n        }\n    }\n    if ((event.key === \"ArrowUp\" || event.key === \"ArrowDown\") && blockElement) {\n        // https://github.com/Vanessa219/vditor/issues/358\n        blockElement.querySelectorAll(\".vditor-ir__node\").forEach(function (item) {\n            if (!item.contains(startContainer)) {\n                item.classList.add(\"vditor-ir__node--hidden\");\n            }\n        });\n        if (fixFirefoxArrowUpTable(event, blockElement, range)) {\n            return true;\n        }\n    }\n    fixCursorDownInlineMath(range, event.key);\n    if (blockElement && keydownToc(blockElement, vditor, event, range)) {\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\n\n// EXTERNAL MODULE: ./src/ts/preview/image.ts\nvar preview_image = __webpack_require__(971);\n;// CONCATENATED MODULE: ./src/ts/sv/combineFootnote.ts\n/**\n * 合并脚注\n * @param elements vditor.sv.element\n * @param afterCombine 每个脚注块合并完成后的回调, param: root为合并后的脚注块\n */\nvar combineFootnote = function (elements, afterCombine) {\n    elements.querySelectorAll(\"[data-type=footnotes-link]\").forEach(function (el) {\n        var root = el.parentElement;\n        var footnote = root.nextSibling;\n        // 寻找所有该脚注的块\n        while (footnote) {\n            if (footnote.textContent.startsWith(\"    \")) {\n                // 解析到四个空格，加入到root并继续解析\n                var thisNode = footnote;\n                thisNode.childNodes.forEach(function (node) {\n                    root.append(node.cloneNode(true));\n                });\n                footnote = footnote.nextSibling;\n                thisNode.remove();\n            }\n            else {\n                // 非空格停止解析\n                break;\n            }\n        }\n        afterCombine && afterCombine(root);\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/sv/inputEvent.ts\n\n\n\n\n\nvar inputEvent = function (vditor, event) {\n    var _a;\n    var range = getSelection().getRangeAt(0).cloneRange();\n    var startContainer = range.startContainer;\n    if (range.startContainer.nodeType !== 3 && range.startContainer.tagName === \"DIV\") {\n        startContainer = range.startContainer.childNodes[range.startOffset - 1];\n    }\n    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-block\", \"0\");\n    // 不调用 lute 解析\n    if (blockElement && event && (event.inputType === \"deleteContentBackward\" || event.data === \" \")) {\n        // 开始可以输入空格\n        var startOffset = (0,selection/* getSelectPosition */.im)(blockElement, vditor.sv.element, range).start;\n        var startSpace = true;\n        for (var i = startOffset - 1; \n        // 软换行后有空格\n        i > blockElement.textContent.substr(0, startOffset).lastIndexOf(\"\\n\"); i--) {\n            if (blockElement.textContent.charAt(i) !== \" \" &&\n                // 多个 tab 前删除不形成代码块 https://github.com/Vanessa219/vditor/issues/162 1\n                blockElement.textContent.charAt(i) !== \"\\t\") {\n                startSpace = false;\n                break;\n            }\n        }\n        if (startOffset === 0) {\n            startSpace = false;\n        }\n        if (startSpace) {\n            processAfterRender(vditor);\n            return;\n        }\n        if (event.inputType === \"deleteContentBackward\") {\n            // https://github.com/Vanessa219/vditor/issues/584 代码块 marker 删除\n            var codeBlockMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-open-marker\") ||\n                (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-close-marker\");\n            if (codeBlockMarkerElement) {\n                if (codeBlockMarkerElement.getAttribute(\"data-type\") === \"code-block-close-marker\") {\n                    var openMarkerElement = getSideByType(startContainer, \"code-block-open-marker\");\n                    if (openMarkerElement) {\n                        openMarkerElement.textContent = codeBlockMarkerElement.textContent;\n                        processAfterRender(vditor);\n                        return;\n                    }\n                }\n                if (codeBlockMarkerElement.getAttribute(\"data-type\") === \"code-block-open-marker\") {\n                    var openMarkerElement = getSideByType(startContainer, \"code-block-close-marker\", false);\n                    if (openMarkerElement) {\n                        openMarkerElement.textContent = codeBlockMarkerElement.textContent;\n                        processAfterRender(vditor);\n                        return;\n                    }\n                }\n            }\n            // https://github.com/Vanessa219/vditor/issues/877 数学公式输入删除生成节点\n            var mathBlockMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"math-block-open-marker\");\n            if (mathBlockMarkerElement) {\n                var mathBlockCloseElement = mathBlockMarkerElement.nextElementSibling.nextElementSibling;\n                if (mathBlockCloseElement && mathBlockCloseElement.getAttribute(\"data-type\") === \"math-block-close-marker\") {\n                    mathBlockCloseElement.remove();\n                    processAfterRender(vditor);\n                }\n                return;\n            }\n            blockElement.querySelectorAll('[data-type=\"code-block-open-marker\"]').forEach(function (item) {\n                if (item.textContent.length === 1) {\n                    item.remove();\n                }\n            });\n            blockElement.querySelectorAll('[data-type=\"code-block-close-marker\"]').forEach(function (item) {\n                if (item.textContent.length === 1) {\n                    item.remove();\n                }\n            });\n            // 标题删除\n            var headingElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"heading-marker\");\n            if (headingElement && headingElement.textContent.indexOf(\"#\") === -1) {\n                processAfterRender(vditor);\n                return;\n            }\n        }\n        // 删除或空格不解析，否则会 format 回去\n        if ((event.data === \" \" || event.inputType === \"deleteContentBackward\") &&\n            ((0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"padding\") // 场景：b 前进行删除 [> 1. a\\n>   b]\n                || (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"li-marker\") // 场景：删除最后一个字符 [* 1\\n* ]\n                || (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"task-marker\") // 场景：删除最后一个字符 [* [ ] ]\n                || (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"blockquote-marker\") // 场景：删除最后一个字符 [> ]\n            )) {\n            processAfterRender(vditor);\n            return;\n        }\n    }\n    if (blockElement && blockElement.textContent.trimRight() === \"$$\") {\n        // 内联数学公式\n        processAfterRender(vditor);\n        return;\n    }\n    if (!blockElement) {\n        blockElement = vditor.sv.element;\n    }\n    if (((_a = blockElement.firstElementChild) === null || _a === void 0 ? void 0 : _a.getAttribute(\"data-type\")) === \"link-ref-defs-block\") {\n        // 修改链接引用\n        blockElement = vditor.sv.element;\n    }\n    if ((0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"footnotes-link\")) {\n        // 修改脚注角标\n        blockElement = vditor.sv.element;\n    }\n    // 添加光标位置\n    if (blockElement.textContent.indexOf(Lute.Caret) === -1) {\n        // 点击工具栏会插入 Caret\n        range.insertNode(document.createTextNode(Lute.Caret));\n    }\n    // 清除浏览器自带的样式\n    blockElement.querySelectorAll(\"[style]\").forEach(function (item) {\n        item.removeAttribute(\"style\");\n    });\n    blockElement.querySelectorAll(\"font\").forEach(function (item) {\n        item.outerHTML = item.innerHTML;\n    });\n    var html = blockElement.textContent;\n    var isSVElement = blockElement.isEqualNode(vditor.sv.element);\n    if (isSVElement) {\n        html = blockElement.textContent;\n    }\n    else {\n        // 添加前一个块元素\n        if (blockElement.previousElementSibling) {\n            html = blockElement.previousElementSibling.textContent + html;\n            blockElement.previousElementSibling.remove();\n        }\n        if (blockElement.previousElementSibling && html.indexOf(\"---\\n\") === 0) {\n            // 确认 yaml-front 是否为首行\n            html = blockElement.previousElementSibling.textContent + html;\n            blockElement.previousElementSibling.remove();\n        }\n        // 添加链接引用\n        var footnotes_1 = \"\";\n        vditor.sv.element.querySelectorAll(\"[data-type='link-ref-defs-block']\").forEach(function (item, index) {\n            if (item && !blockElement.isEqualNode(item.parentElement)) {\n                footnotes_1 += item.parentElement.textContent + \"\\n\";\n                item.parentElement.remove();\n            }\n        });\n        // 添加脚注到文章头，便于lute处理\n        vditor.sv.element.querySelectorAll(\"[data-type='footnotes-link']\").forEach(function (item, index) {\n            if (item && !blockElement.isEqualNode(item.parentElement)) {\n                footnotes_1 += item.parentElement.textContent + \"\\n\";\n                item.parentElement.remove();\n            }\n        });\n        html = footnotes_1 + html;\n    }\n    html = processSpinVditorSVDOM(html, vditor);\n    if (isSVElement) {\n        blockElement.innerHTML = html;\n    }\n    else {\n        blockElement.outerHTML = html;\n    }\n    vditor.sv.element.querySelectorAll(\"[data-type='link-ref-defs-block']\").forEach(function (item) {\n        vditor.sv.element.insertAdjacentElement(\"beforeend\", item.parentElement);\n    });\n    // 合并脚注\n    combineFootnote(vditor.sv.element, function (root) {\n        vditor.sv.element.insertAdjacentElement(\"beforeend\", root);\n    });\n    (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    scrollCenter(vditor);\n    processAfterRender(vditor, {\n        enableAddUndoStack: true,\n        enableHint: true,\n        enableInput: true,\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/sv/processKeydown.ts\n\n\n\n\n\n\n\nvar processKeydown_processKeydown = function (vditor, event) {\n    var _a, _b, _c, _d, _e;\n    vditor.sv.composingLock = event.isComposing;\n    if (event.isComposing) {\n        return false;\n    }\n    if (event.key.indexOf(\"Arrow\") === -1 && event.key !== \"Meta\" && event.key !== \"Control\" && event.key !== \"Alt\" &&\n        event.key !== \"Shift\" && event.key !== \"CapsLock\" && event.key !== \"Escape\" && !/^F\\d{1,2}$/.test(event.key)) {\n        vditor.undo.recordFirstPosition(vditor, event);\n    }\n    // 仅处理以下快捷键操作\n    if (event.key !== \"Enter\" && event.key !== \"Tab\" && event.key !== \"Backspace\" && event.key.indexOf(\"Arrow\") === -1\n        && !(0,compatibility/* isCtrl */.yl)(event) && event.key !== \"Escape\") {\n        return false;\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var startContainer = range.startContainer;\n    if (range.startContainer.nodeType !== 3 && range.startContainer.tagName === \"DIV\") {\n        startContainer = range.startContainer.childNodes[range.startOffset - 1];\n    }\n    var textElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"text\");\n    // blockquote\n    var blockquoteMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"blockquote-marker\");\n    if (!blockquoteMarkerElement && range.startOffset === 0 && textElement && textElement.previousElementSibling &&\n        textElement.previousElementSibling.getAttribute(\"data-type\") === \"blockquote-marker\") {\n        blockquoteMarkerElement = textElement.previousElementSibling;\n    }\n    // 回车逐个删除 blockquote marker 标记\n    if (blockquoteMarkerElement) {\n        if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey &&\n            blockquoteMarkerElement.nextElementSibling.textContent.trim() === \"\" &&\n            (0,selection/* getSelectPosition */.im)(blockquoteMarkerElement, vditor.sv.element, range).start ===\n                blockquoteMarkerElement.textContent.length) {\n            if (((_a = blockquoteMarkerElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.getAttribute(\"data-type\")) === \"padding\") {\n                // 列表中存在多行 BQ 时，标记回车需跳出列表\n                blockquoteMarkerElement.previousElementSibling.setAttribute(\"data-action\", \"enter-remove\");\n            }\n            blockquoteMarkerElement.remove();\n            processAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // list item\n    var listMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"li-marker\");\n    var taskMarkerElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"task-marker\");\n    var listLastMarkerElement = listMarkerElement;\n    if (!listLastMarkerElement) {\n        if (taskMarkerElement && taskMarkerElement.nextElementSibling.getAttribute(\"data-type\") !== \"task-marker\") {\n            listLastMarkerElement = taskMarkerElement;\n        }\n    }\n    if (!listLastMarkerElement && range.startOffset === 0 && textElement && textElement.previousElementSibling &&\n        (textElement.previousElementSibling.getAttribute(\"data-type\") === \"li-marker\" ||\n            textElement.previousElementSibling.getAttribute(\"data-type\") === \"task-marker\")) {\n        listLastMarkerElement = textElement.previousElementSibling;\n    }\n    if (listLastMarkerElement) {\n        var startIndex = (0,selection/* getSelectPosition */.im)(listLastMarkerElement, vditor.sv.element, range).start;\n        var isTask = listLastMarkerElement.getAttribute(\"data-type\") === \"task-marker\";\n        var listFirstMarkerElement = listLastMarkerElement;\n        if (isTask) {\n            listFirstMarkerElement = listLastMarkerElement.previousElementSibling.previousElementSibling\n                .previousElementSibling;\n        }\n        if (startIndex === listLastMarkerElement.textContent.length) {\n            // 回车清空列表标记符\n            if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey &&\n                listLastMarkerElement.nextElementSibling.textContent.trim() === \"\") {\n                if (((_b = listFirstMarkerElement.previousElementSibling) === null || _b === void 0 ? void 0 : _b.getAttribute(\"data-type\")) === \"padding\") {\n                    listFirstMarkerElement.previousElementSibling.remove();\n                    inputEvent(vditor);\n                }\n                else {\n                    if (isTask) {\n                        listFirstMarkerElement.remove();\n                        listLastMarkerElement.previousElementSibling.previousElementSibling.remove();\n                        listLastMarkerElement.previousElementSibling.remove();\n                    }\n                    listLastMarkerElement.nextElementSibling.remove();\n                    listLastMarkerElement.remove();\n                    processAfterRender(vditor);\n                }\n                event.preventDefault();\n                return true;\n            }\n            // 第一个 marker 后 tab 进行缩进\n            if (event.key === \"Tab\") {\n                if (event.shiftKey) {\n                    if (listFirstMarkerElement.previousElementSibling.getAttribute(\"data-type\") === \"padding\") {\n                        listFirstMarkerElement.previousElementSibling.remove();\n                    }\n                }\n                else {\n                    listFirstMarkerElement.insertAdjacentHTML(\"beforebegin\", \"<span data-type=\\\"padding\\\">\".concat(listFirstMarkerElement.textContent.replace(/\\S/g, \" \"), \"</span>\"));\n                }\n                if (/^\\d/.test(listFirstMarkerElement.textContent)) {\n                    listFirstMarkerElement.textContent = listFirstMarkerElement.textContent.replace(/^\\d{1,}/, \"1\");\n                    range.selectNodeContents(listLastMarkerElement.firstChild);\n                    range.collapse(false);\n                }\n                inputEvent(vditor);\n                event.preventDefault();\n                return true;\n            }\n        }\n    }\n    // tab\n    if (fixTab(vditor, range, event)) {\n        return true;\n    }\n    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-block\", \"0\");\n    var spanElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(startContainer, \"SPAN\");\n    // 回车\n    if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey && blockElement) {\n        var isFirst = false;\n        var newLineMatch = blockElement.textContent.match(/^\\n+/);\n        if ((0,selection/* getSelectPosition */.im)(blockElement, vditor.sv.element).start <= (newLineMatch ? newLineMatch[0].length : 0)) {\n            // 允许段落开始换行\n            isFirst = true;\n        }\n        var newLineText = \"\\n\";\n        if (spanElement) {\n            if (((_c = spanElement.previousElementSibling) === null || _c === void 0 ? void 0 : _c.getAttribute(\"data-action\")) === \"enter-remove\") {\n                // https://github.com/Vanessa219/vditor/issues/596\n                spanElement.previousElementSibling.remove();\n                processAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                newLineText += processPreviousMarkers(spanElement);\n            }\n        }\n        range.insertNode(document.createTextNode(newLineText));\n        range.collapse(false);\n        if (blockElement && blockElement.textContent.trim() !== \"\" && !isFirst) {\n            inputEvent(vditor);\n        }\n        else {\n            processAfterRender(vditor);\n        }\n        event.preventDefault();\n        return true;\n    }\n    // 删除后光标前有 newline 的处理\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey) {\n        if (spanElement && ((_d = spanElement.previousElementSibling) === null || _d === void 0 ? void 0 : _d.getAttribute(\"data-type\")) === \"newline\" &&\n            (0,selection/* getSelectPosition */.im)(spanElement, vditor.sv.element, range).start === 1 &&\n            // 飘号的处理需在 inputEvent 中，否则上下飘号对不齐\n            spanElement.getAttribute(\"data-type\").indexOf(\"code-block-\") === -1) {\n            // 光标在每一行的第一个字符后\n            range.setStart(spanElement, 0);\n            range.extractContents();\n            if (spanElement.textContent.trim() !== \"\") {\n                inputEvent(vditor);\n            }\n            else {\n                processAfterRender(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        // 每一段第一个字符前\n        if (blockElement && (0,selection/* getSelectPosition */.im)(blockElement, vditor.sv.element, range).start === 0 &&\n            blockElement.previousElementSibling) {\n            range.extractContents();\n            var previousLastElement = blockElement.previousElementSibling.lastElementChild;\n            if (previousLastElement.getAttribute(\"data-type\") === \"newline\") {\n                previousLastElement.remove();\n                previousLastElement = blockElement.previousElementSibling.lastElementChild;\n            }\n            // 场景：末尾无法删除 [```\\ntext\\n```\\n\\n]\n            if (previousLastElement.getAttribute(\"data-type\") !== \"newline\") {\n                previousLastElement.insertAdjacentHTML(\"afterend\", blockElement.innerHTML);\n                blockElement.remove();\n            }\n            if (blockElement.textContent.trim() !== \"\" && !((_e = blockElement.previousElementSibling) === null || _e === void 0 ? void 0 : _e.querySelector('[data-type=\"code-block-open-marker\"]'))) {\n                inputEvent(vditor);\n            }\n            else {\n                if (previousLastElement.getAttribute(\"data-type\") !== \"newline\") {\n                    // https://github.com/Vanessa219/vditor/issues/597\n                    range.selectNodeContents(previousLastElement.lastChild);\n                    range.collapse(false);\n                }\n                processAfterRender(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n    }\n    return false;\n};\n\n// EXTERNAL MODULE: ./src/ts/ui/setContentTheme.ts\nvar setContentTheme = __webpack_require__(652);\n;// CONCATENATED MODULE: ./src/ts/ui/setTheme.ts\nvar setTheme = function (vditor) {\n    if (vditor.options.theme === \"dark\") {\n        vditor.element.classList.add(\"vditor--dark\");\n    }\n    else {\n        vditor.element.classList.remove(\"vditor--dark\");\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/ui/initUI.ts\n\n\n\n\n\n\nvar initUI = function (vditor) {\n    vditor.element.innerHTML = \"\";\n    vditor.element.classList.add(\"vditor\");\n    // 支持 RTL\n    if (vditor.options.rtl) {\n        vditor.element.setAttribute(\"dir\", \"rtl\");\n    }\n    setTheme(vditor);\n    (0,setContentTheme/* setContentTheme */.Z)(vditor.options.preview.theme.current, vditor.options.preview.theme.path);\n    if (typeof vditor.options.height === \"number\") {\n        vditor.element.style.height = vditor.options.height + \"px\";\n    }\n    else {\n        vditor.element.style.height = vditor.options.height;\n    }\n    if (typeof vditor.options.minHeight === \"number\") {\n        vditor.element.style.minHeight = vditor.options.minHeight + \"px\";\n    }\n    if (typeof vditor.options.width === \"number\") {\n        vditor.element.style.width = vditor.options.width + \"px\";\n    }\n    else {\n        vditor.element.style.width = vditor.options.width;\n    }\n    vditor.element.appendChild(vditor.toolbar.element);\n    var contentElement = document.createElement(\"div\");\n    contentElement.className = \"vditor-content\";\n    if (vditor.options.outline.position === \"left\") {\n        contentElement.appendChild(vditor.outline.element);\n    }\n    contentElement.appendChild(vditor.wysiwyg.element.parentElement);\n    contentElement.appendChild(vditor.sv.element);\n    contentElement.appendChild(vditor.ir.element.parentElement);\n    contentElement.appendChild(vditor.preview.element);\n    if (vditor.toolbar.elements.devtools) {\n        contentElement.appendChild(vditor.devtools.element);\n    }\n    if (vditor.options.outline.position === \"right\") {\n        vditor.outline.element.classList.add(\"vditor-outline--right\");\n        contentElement.appendChild(vditor.outline.element);\n    }\n    if (vditor.upload) {\n        contentElement.appendChild(vditor.upload.element);\n    }\n    if (vditor.options.resize.enable) {\n        contentElement.appendChild(vditor.resize.element);\n    }\n    contentElement.appendChild(vditor.hint.element);\n    contentElement.appendChild(vditor.tip.element);\n    vditor.element.appendChild(contentElement);\n    contentElement.addEventListener(\"click\", function () {\n        hidePanel(vditor, [\"subToolbar\"]);\n    });\n    if (vditor.toolbar.elements.export) {\n        // for export pdf\n        vditor.element.insertAdjacentHTML(\"beforeend\", '<iframe id=\"vditorExportIframe\" style=\"width: 100%;height: 0;border: 0\"></iframe>');\n    }\n    setEditMode(vditor, vditor.options.mode, afterRender(vditor));\n    document.execCommand(\"DefaultParagraphSeparator\", false, \"p\");\n    if (navigator.userAgent.indexOf(\"iPhone\") > -1 && typeof window.visualViewport !== \"undefined\") {\n        // https://github.com/Vanessa219/vditor/issues/379\n        var pendingUpdate_1 = false;\n        var viewportHandler = function (event) {\n            if (pendingUpdate_1) {\n                return;\n            }\n            pendingUpdate_1 = true;\n            requestAnimationFrame(function () {\n                pendingUpdate_1 = false;\n                var layoutViewport = vditor.toolbar.element;\n                layoutViewport.style.transform = \"none\";\n                if (layoutViewport.getBoundingClientRect().top < 0) {\n                    layoutViewport.style.transform = \"translate(0, \".concat(-layoutViewport.getBoundingClientRect().top, \"px)\");\n                }\n            });\n        };\n        window.visualViewport.addEventListener(\"scroll\", viewportHandler);\n        window.visualViewport.addEventListener(\"resize\", viewportHandler);\n    }\n};\nvar setPadding = function (vditor) {\n    var minPadding = window.innerWidth <= constants/* Constants.MOBILE_WIDTH */.g.MOBILE_WIDTH ? 10 : 35;\n    if (vditor.wysiwyg.element.parentElement.style.display !== \"none\") {\n        var padding = (vditor.wysiwyg.element.parentElement.clientWidth\n            - vditor.options.preview.maxWidth) / 2;\n        vditor.wysiwyg.element.style.padding = \"10px \".concat(Math.max(minPadding, padding), \"px\");\n    }\n    if (vditor.ir.element.parentElement.style.display !== \"none\") {\n        var padding = (vditor.ir.element.parentElement.clientWidth\n            - vditor.options.preview.maxWidth) / 2;\n        vditor.ir.element.style.padding = \"10px \".concat(Math.max(minPadding, padding), \"px\");\n    }\n    if (vditor.preview.element.style.display !== \"block\") {\n        vditor.toolbar.element.style.paddingLeft = Math.max(5, parseInt(vditor[vditor.currentMode].element.style.paddingLeft || \"0\", 10) +\n            (vditor.options.outline.position === \"left\" ? vditor.outline.element.offsetWidth : 0)) + \"px\";\n    }\n    else {\n        vditor.toolbar.element.style.paddingLeft = (5 +\n            (vditor.options.outline.position === \"left\" ? vditor.outline.element.offsetWidth : 0)) + \"px\";\n    }\n};\nvar setTypewriterPosition = function (vditor) {\n    if (!vditor.options.typewriterMode) {\n        return;\n    }\n    var height = window.innerHeight;\n    if (typeof vditor.options.height === \"number\") {\n        height = vditor.options.height;\n        if (typeof vditor.options.minHeight === \"number\") {\n            height = Math.max(height, vditor.options.minHeight);\n        }\n        height = Math.min(window.innerHeight, height);\n    }\n    else {\n        height = vditor.element.clientHeight;\n    }\n    if (vditor.element.classList.contains(\"vditor--fullscreen\")) {\n        height = window.innerHeight;\n    }\n    // 由于 Firefox padding-bottom bug，只能使用 :after\n    vditor[vditor.currentMode].element.style.setProperty(\"--editor-bottom\", ((height - vditor.toolbar.element.offsetHeight) / 2) + \"px\");\n};\nvar resizeCb;\nfunction UIUnbindListener() {\n    window.removeEventListener(\"resize\", resizeCb);\n}\nvar afterRender = function (vditor) {\n    setTypewriterPosition(vditor);\n    UIUnbindListener();\n    window.addEventListener(\"resize\", resizeCb = function () {\n        setPadding(vditor);\n        setTypewriterPosition(vditor);\n    });\n    // set default value\n    var initValue = (0,compatibility/* accessLocalStorage */.pK)() && localStorage.getItem(vditor.options.cache.id);\n    if (!vditor.options.cache.enable || !initValue) {\n        if (vditor.options.value) {\n            initValue = vditor.options.value;\n        }\n        else if (vditor.originalInnerHTML) {\n            initValue = vditor.lute.HTML2Md(vditor.originalInnerHTML);\n        }\n        else if (!vditor.options.cache.enable) {\n            initValue = \"\";\n        }\n    }\n    return initValue || \"\";\n};\n\n;// CONCATENATED MODULE: ./src/ts/ir/highlightToolbarIR.ts\n\n\n\n\n\nvar highlightToolbarIR = function (vditor) {\n    clearTimeout(vditor[vditor.currentMode].hlToolbarTimeoutId);\n    vditor[vditor.currentMode].hlToolbarTimeoutId = window.setTimeout(function () {\n        if (vditor[vditor.currentMode].element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        if (!(0,selection/* selectIsEditor */.Gb)(vditor[vditor.currentMode].element)) {\n            return;\n        }\n        removeCurrentToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        enableToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        var range = (0,selection/* getEditorRange */.zh)(vditor);\n        var typeElement = range.startContainer;\n        if (range.startContainer.nodeType === 3) {\n            typeElement = range.startContainer.parentElement;\n        }\n        if (typeElement.classList.contains(\"vditor-reset\")) {\n            typeElement = typeElement.childNodes[range.startOffset];\n        }\n        var headingElement = vditor.currentMode === \"sv\" ?\n            (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"heading\") : (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(typeElement);\n        if (headingElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"headings\"]);\n        }\n        var quoteElement = vditor.currentMode === \"sv\" ? (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"blockquote\") :\n            (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"BLOCKQUOTE\");\n        if (quoteElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"quote\"]);\n        }\n        var strongElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"strong\");\n        if (strongElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"bold\"]);\n        }\n        var emElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"em\");\n        if (emElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"italic\"]);\n        }\n        var sElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"s\");\n        if (sElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"strike\"]);\n        }\n        var aElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"a\");\n        if (aElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"link\"]);\n        }\n        var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"LI\");\n        if (liElement) {\n            if (liElement.classList.contains(\"vditor-task\")) {\n                setCurrentToolbar(vditor.toolbar.elements, [\"check\"]);\n            }\n            else if (liElement.parentElement.tagName === \"OL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"ordered-list\"]);\n            }\n            else if (liElement.parentElement.tagName === \"UL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"list\"]);\n            }\n            enableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        var codeBlockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"code-block\");\n        if (codeBlockElement) {\n            disableToolbar(vditor.toolbar.elements, [\"headings\", \"bold\", \"italic\", \"strike\", \"line\", \"quote\",\n                \"list\", \"ordered-list\", \"check\", \"code\", \"inline-code\", \"upload\", \"link\", \"table\", \"record\"]);\n            setCurrentToolbar(vditor.toolbar.elements, [\"code\"]);\n        }\n        var codeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"code\");\n        if (codeElement) {\n            disableToolbar(vditor.toolbar.elements, [\"headings\", \"bold\", \"italic\", \"strike\", \"line\", \"quote\",\n                \"list\", \"ordered-list\", \"check\", \"code\", \"upload\", \"link\", \"table\", \"record\"]);\n            setCurrentToolbar(vditor.toolbar.elements, [\"inline-code\"]);\n        }\n        var tableElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"table\");\n        if (tableElement) {\n            disableToolbar(vditor.toolbar.elements, [\"headings\", \"list\", \"ordered-list\", \"check\", \"line\",\n                \"quote\", \"code\", \"table\"]);\n        }\n    }, 200);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/afterRenderEvent.ts\n\n\nvar afterRenderEvent = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (options.enableHint) {\n        vditor.hint.render(vditor);\n    }\n    clearTimeout(vditor.wysiwyg.afterRenderTimeoutId);\n    vditor.wysiwyg.afterRenderTimeoutId = window.setTimeout(function () {\n        if (vditor.wysiwyg.composingLock) {\n            return;\n        }\n        var text = getMarkdown(vditor);\n        if (typeof vditor.options.input === \"function\" && options.enableInput) {\n            vditor.options.input(text);\n        }\n        if (vditor.options.counter.enable) {\n            vditor.counter.render(vditor, text);\n        }\n        if (vditor.options.cache.enable && (0,compatibility/* accessLocalStorage */.pK)()) {\n            localStorage.setItem(vditor.options.cache.id, text);\n            if (vditor.options.cache.after) {\n                vditor.options.cache.after(text);\n            }\n        }\n        if (vditor.devtools) {\n            vditor.devtools.renderEchart(vditor);\n        }\n        if (options.enableAddUndoStack) {\n            vditor.undo.addToUndoStack(vditor);\n        }\n    }, vditor.options.undoDelay);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/inlineTag.ts\n\n\nvar previoueIsEmptyA = function (node) {\n    var previousNode = node.previousSibling;\n    while (previousNode) {\n        if (previousNode.nodeType !== 3 && previousNode.tagName === \"A\" && !previousNode.previousSibling\n            && previousNode.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && previousNode.nextSibling) {\n            return previousNode;\n        }\n        previousNode = previousNode.previousSibling;\n    }\n    return false;\n};\nvar nextIsCode = function (range) {\n    var nextNode = range.startContainer.nextSibling;\n    while (nextNode && nextNode.textContent === \"\") {\n        nextNode = nextNode.nextSibling;\n    }\n    if (nextNode && nextNode.nodeType !== 3 && (nextNode.tagName === \"CODE\" ||\n        nextNode.getAttribute(\"data-type\") === \"math-inline\" ||\n        nextNode.getAttribute(\"data-type\") === \"html-entity\" ||\n        nextNode.getAttribute(\"data-type\") === \"html-inline\")) {\n        return true;\n    }\n    return false;\n};\nvar getNextHTML = function (node) {\n    var html = \"\";\n    var nextNode = node.nextSibling;\n    while (nextNode) {\n        if (nextNode.nodeType === 3) {\n            html += nextNode.textContent;\n        }\n        else {\n            html += nextNode.outerHTML;\n        }\n        nextNode = nextNode.nextSibling;\n    }\n    return html;\n};\nvar getPreviousHTML = function (node) {\n    var html = \"\";\n    var previousNode = node.previousSibling;\n    while (previousNode) {\n        if (previousNode.nodeType === 3) {\n            html = previousNode.textContent + html;\n        }\n        else {\n            html = previousNode.outerHTML + html;\n        }\n        previousNode = previousNode.previousSibling;\n    }\n    return html;\n};\nvar getRenderElementNextNode = function (blockCodeElement) {\n    var nextNode = blockCodeElement;\n    while (nextNode && !nextNode.nextSibling) {\n        nextNode = nextNode.parentElement;\n    }\n    return nextNode.nextSibling;\n};\nvar splitElement = function (range) {\n    var previousHTML = getPreviousHTML(range.startContainer);\n    var nextHTML = getNextHTML(range.startContainer);\n    var text = range.startContainer.textContent;\n    var offset = range.startOffset;\n    var beforeHTML = \"\";\n    var afterHTML = \"\";\n    if (text.substr(0, offset) !== \"\" && text.substr(0, offset) !== constants/* Constants.ZWSP */.g.ZWSP || previousHTML) {\n        beforeHTML = \"\".concat(previousHTML).concat(text.substr(0, offset));\n    }\n    if (text.substr(offset) !== \"\" && text.substr(offset) !== constants/* Constants.ZWSP */.g.ZWSP || nextHTML) {\n        afterHTML = \"\".concat(text.substr(offset)).concat(nextHTML);\n    }\n    return {\n        afterHTML: afterHTML,\n        beforeHTML: beforeHTML,\n    };\n};\nvar modifyPre = function (vditor, range) {\n    // 没有被块元素包裹\n    Array.from(vditor.wysiwyg.element.childNodes).find(function (node) {\n        if (node.nodeType === 3) {\n            var pElement = document.createElement(\"p\");\n            pElement.setAttribute(\"data-block\", \"0\");\n            pElement.textContent = node.textContent;\n            // 为空按下 tab 且 tab = '    ' 时，range.startContainer 不为 node\n            var cloneRangeOffset = range.startContainer.nodeType === 3 ? range.startOffset : node.textContent.length;\n            node.parentNode.insertBefore(pElement, node);\n            node.remove();\n            range.setStart(pElement.firstChild, Math.min(pElement.firstChild.textContent.length, cloneRangeOffset));\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            return true;\n        }\n        else if (!node.getAttribute(\"data-block\")) {\n            if (node.tagName === \"P\") {\n                node.remove();\n            }\n            else {\n                if (node.tagName === \"DIV\") {\n                    range.insertNode(document.createElement(\"wbr\"));\n                    // firefox 列表换行产生 div\n                    node.outerHTML = \"<p data-block=\\\"0\\\">\".concat(node.innerHTML, \"</p>\");\n                }\n                else {\n                    if (node.tagName === \"BR\") {\n                        // firefox 空换行产生 BR\n                        node.outerHTML = \"<p data-block=\\\"0\\\">\".concat(node.outerHTML, \"<wbr></p>\");\n                    }\n                    else {\n                        range.insertNode(document.createElement(\"wbr\"));\n                        node.outerHTML = \"<p data-block=\\\"0\\\">\".concat(node.outerHTML, \"</p>\");\n                    }\n                }\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n                range = getSelection().getRangeAt(0);\n            }\n            return true;\n        }\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/setHeading.ts\n\n\n\nvar setHeading = function (vditor, tagName) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (!blockElement) {\n        blockElement = range.startContainer.childNodes[range.startOffset];\n    }\n    if (!blockElement && vditor.wysiwyg.element.children.length === 0) {\n        blockElement = vditor.wysiwyg.element;\n    }\n    if (blockElement && !blockElement.classList.contains(\"vditor-wysiwyg__block\")) {\n        range.insertNode(document.createElement(\"wbr\"));\n        // Firefox 需要 trim https://github.com/Vanessa219/vditor/issues/207\n        if (blockElement.innerHTML.trim() === \"<wbr>\") {\n            // Firefox 光标对不齐 https://github.com/Vanessa219/vditor/issues/199 1\n            blockElement.innerHTML = \"<wbr><br>\";\n        }\n        if (blockElement.tagName === \"BLOCKQUOTE\" || blockElement.classList.contains(\"vditor-reset\")) {\n            blockElement.innerHTML = \"<\".concat(tagName, \" data-block=\\\"0\\\">\").concat(blockElement.innerHTML.trim(), \"</\").concat(tagName, \">\");\n        }\n        else {\n            blockElement.outerHTML = \"<\".concat(tagName, \" data-block=\\\"0\\\">\").concat(blockElement.innerHTML.trim(), \"</\").concat(tagName, \">\");\n        }\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        renderToc(vditor);\n    }\n};\nvar removeHeading = function (vditor) {\n    var range = getSelection().getRangeAt(0);\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (!blockElement) {\n        blockElement = range.startContainer.childNodes[range.startOffset];\n    }\n    if (blockElement) {\n        range.insertNode(document.createElement(\"wbr\"));\n        blockElement.outerHTML = \"<p data-block=\\\"0\\\">\".concat(blockElement.innerHTML, \"</p>\");\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n    }\n    vditor.wysiwyg.popover.style.display = \"none\";\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/showCode.ts\n\n\nvar showCode = function (previewElement, vditor, first) {\n    if (first === void 0) { first = true; }\n    var previousElement = previewElement.previousElementSibling;\n    var range = previousElement.ownerDocument.createRange();\n    if (previousElement.tagName === \"CODE\") {\n        previousElement.style.display = \"inline-block\";\n        if (first) {\n            range.setStart(previousElement.firstChild, 1);\n        }\n        else {\n            range.selectNodeContents(previousElement);\n        }\n    }\n    else {\n        previousElement.style.display = \"block\";\n        if (!previousElement.firstChild.firstChild) {\n            previousElement.firstChild.appendChild(document.createTextNode(\"\"));\n        }\n        range.selectNodeContents(previousElement.firstChild);\n    }\n    if (first) {\n        range.collapse(true);\n    }\n    else {\n        range.collapse(false);\n    }\n    (0,selection/* setSelectionFocus */.Hc)(range);\n    if (previewElement.firstElementChild.classList.contains(\"language-mindmap\")) {\n        return;\n    }\n    scrollCenter(vditor);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/processKeydown.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar wysiwyg_processKeydown_processKeydown = function (vditor, event) {\n    // Chrome firefox 触发 compositionend 机制不一致 https://github.com/Vanessa219/vditor/issues/188\n    vditor.wysiwyg.composingLock = event.isComposing;\n    if (event.isComposing) {\n        return false;\n    }\n    // 添加第一次记录 undo 的光标\n    if (event.key.indexOf(\"Arrow\") === -1 && event.key !== \"Meta\" && event.key !== \"Control\" && event.key !== \"Alt\" &&\n        event.key !== \"Shift\" && event.key !== \"CapsLock\" && event.key !== \"Escape\" && !/^F\\d{1,2}$/.test(event.key)) {\n        vditor.undo.recordFirstPosition(vditor, event);\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var startContainer = range.startContainer;\n    if (!fixGSKeyBackspace(event, vditor, startContainer)) {\n        return false;\n    }\n    fixCJKPosition(range, vditor, event);\n    fixHR(range);\n    // 仅处理以下快捷键操作\n    if (event.key !== \"Enter\" && event.key !== \"Tab\" && event.key !== \"Backspace\" && event.key.indexOf(\"Arrow\") === -1\n        && !(0,compatibility/* isCtrl */.yl)(event) && event.key !== \"Escape\" && event.key !== \"Delete\") {\n        return false;\n    }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n    var pElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"P\");\n    // md 处理\n    if (fixMarkdown(event, vditor, pElement, range)) {\n        return true;\n    }\n    // li\n    if (fixList(range, vditor, pElement, event)) {\n        return true;\n    }\n    // table\n    if (fixTable(vditor, event, range)) {\n        return true;\n    }\n    // code render\n    var codeRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-wysiwyg__block\");\n    if (codeRenderElement) {\n        // esc: 退出编辑，仅展示渲染\n        if (event.key === \"Escape\" && codeRenderElement.children.length === 2) {\n            vditor.wysiwyg.popover.style.display = \"none\";\n            codeRenderElement.firstElementChild.style.display = \"none\";\n            vditor.wysiwyg.element.blur();\n            event.preventDefault();\n            return true;\n        }\n        // alt+enter: 代码块切换到语言 https://github.com/Vanessa219/vditor/issues/54\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && event.altKey && event.key === \"Enter\" &&\n            codeRenderElement.getAttribute(\"data-type\") === \"code-block\") {\n            var inputElemment = vditor.wysiwyg.popover.querySelector(\".vditor-input\");\n            inputElemment.focus();\n            inputElemment.select();\n            event.preventDefault();\n            return true;\n        }\n        if (codeRenderElement.getAttribute(\"data-block\") === \"0\") {\n            if (fixCodeBlock(vditor, event, codeRenderElement.firstElementChild, range)) {\n                return true;\n            }\n            if (insertAfterBlock(vditor, event, range, codeRenderElement.firstElementChild, codeRenderElement)) {\n                return true;\n            }\n            if (codeRenderElement.getAttribute(\"data-type\") !== \"yaml-front-matter\" &&\n                insertBeforeBlock(vditor, event, range, codeRenderElement.firstElementChild, codeRenderElement)) {\n                return true;\n            }\n        }\n    }\n    // blockquote\n    if (fixBlockquote(vditor, range, event, pElement)) {\n        return true;\n    }\n    // 顶层 blockquote\n    var topBQElement = (0,hasClosest/* hasTopClosestByTag */.E2)(startContainer, \"BLOCKQUOTE\");\n    if (topBQElement) {\n        if (!event.shiftKey && event.altKey && event.key === \"Enter\") {\n            if (!(0,compatibility/* isCtrl */.yl)(event)) {\n                // alt+enter: 跳出多层 blockquote 嵌套之后 https://github.com/Vanessa219/vditor/issues/51\n                range.setStartAfter(topBQElement);\n            }\n            else {\n                // ctrl+alt+enter: 跳出多层 blockquote 嵌套之前\n                range.setStartBefore(topBQElement);\n            }\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            var node = document.createElement(\"p\");\n            node.setAttribute(\"data-block\", \"0\");\n            node.innerHTML = \"\\n\";\n            range.insertNode(node);\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            afterRenderEvent(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // h1-h6\n    var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(startContainer);\n    if (headingElement) {\n        if (headingElement.tagName === \"H6\" && startContainer.textContent.length === range.startOffset &&\n            !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Enter\") {\n            // enter: H6 回车解析问题 https://github.com/Vanessa219/vditor/issues/48\n            var pTempElement = document.createElement(\"p\");\n            pTempElement.textContent = \"\\n\";\n            pTempElement.setAttribute(\"data-block\", \"0\");\n            startContainer.parentElement.insertAdjacentElement(\"afterend\", pTempElement);\n            range.setStart(pTempElement, 0);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            afterRenderEvent(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // enter++: 标题变大\n        if (matchHotKey(\"⌘=\", event)) {\n            var index = parseInt(headingElement.tagName.substr(1), 10) - 1;\n            if (index > 0) {\n                setHeading(vditor, \"h\".concat(index));\n                afterRenderEvent(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        // enter++: 标题变小\n        if (matchHotKey(\"⌘-\", event)) {\n            var index = parseInt(headingElement.tagName.substr(1), 10) + 1;\n            if (index < 7) {\n                setHeading(vditor, \"h\".concat(index));\n                afterRenderEvent(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey\n            && headingElement.textContent.length === 1) {\n            // 删除后变为空\n            removeHeading(vditor);\n        }\n    }\n    // task list\n    if (fixTask(vditor, range, event)) {\n        return true;\n    }\n    // alt+enter\n    if (event.altKey && event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey) {\n        // 切换到链接、链接引用、脚注引用弹出的输入框中\n        var aElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"A\");\n        var linRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"link-ref\");\n        var footnoteRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"footnotes-ref\");\n        if (aElement || linRefElement || footnoteRefElement ||\n            (headingElement && headingElement.tagName.length === 2)) {\n            var inputElement = vditor.wysiwyg.popover.querySelector(\"input\");\n            inputElement.focus();\n            inputElement.select();\n        }\n    }\n    // 删除有子工具栏的块\n    if (removeBlockElement(vditor, event)) {\n        return true;\n    }\n    // 对有子工具栏的块上移\n    if (matchHotKey(\"⇧⌘U\", event)) {\n        var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"up\"]');\n        if (itemElement) {\n            itemElement.click();\n            event.preventDefault();\n            return true;\n        }\n    }\n    // 对有子工具栏的块下移\n    if (matchHotKey(\"⇧⌘D\", event)) {\n        var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"down\"]');\n        if (itemElement) {\n            itemElement.click();\n            event.preventDefault();\n            return true;\n        }\n    }\n    if (fixTab(vditor, range, event)) {\n        return true;\n    }\n    // shift+enter：软换行，但 table/hr/heading 处理、cell 内换行、block render 换行处理单独写在上面，li & p 使用浏览器默认\n    if (!(0,compatibility/* isCtrl */.yl)(event) && event.shiftKey && !event.altKey && event.key === \"Enter\" &&\n        startContainer.parentElement.tagName !== \"LI\" && startContainer.parentElement.tagName !== \"P\") {\n        if ([\"STRONG\", \"STRIKE\", \"S\", \"I\", \"EM\", \"B\"].includes(startContainer.parentElement.tagName)) {\n            // 行内元素软换行需继续 https://github.com/Vanessa219/vditor/issues/170\n            range.insertNode(document.createTextNode(\"\\n\" + constants/* Constants.ZWSP */.g.ZWSP));\n        }\n        else {\n            range.insertNode(document.createTextNode(\"\\n\"));\n        }\n        range.collapse(false);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        afterRenderEvent(vditor);\n        scrollCenter(vditor);\n        event.preventDefault();\n        return true;\n    }\n    // 删除\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && range.toString() === \"\") {\n        if (fixDelete(vditor, range, event, pElement)) {\n            return true;\n        }\n        if (blockElement) {\n            if (blockElement.previousElementSibling\n                && blockElement.previousElementSibling.classList.contains(\"vditor-wysiwyg__block\")\n                && blockElement.previousElementSibling.getAttribute(\"data-block\") === \"0\"\n                // https://github.com/Vanessa219/vditor/issues/946\n                && blockElement.tagName !== \"UL\" && blockElement.tagName !== \"OL\") {\n                var rangeStart = (0,selection/* getSelectPosition */.im)(blockElement, vditor.wysiwyg.element, range).start;\n                if ((rangeStart === 0 && range.startOffset === 0) || // https://github.com/Vanessa219/vditor/issues/894\n                    (rangeStart === 1 && blockElement.innerText.startsWith(constants/* Constants.ZWSP */.g.ZWSP))) {\n                    // 当前块删除后光标落于代码渲染块上，当前块会被删除，因此需要阻止事件，不能和 keyup 中的代码块处理合并\n                    showCode(blockElement.previousElementSibling.lastElementChild, vditor, false);\n                    if (blockElement.innerHTML.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                        // 当前块为空且不是最后一个时，需要删除\n                        blockElement.remove();\n                        afterRenderEvent(vditor);\n                    }\n                    event.preventDefault();\n                    return true;\n                }\n            }\n            var rangeStartOffset = range.startOffset;\n            if (range.toString() === \"\" && startContainer.nodeType === 3 &&\n                startContainer.textContent.charAt(rangeStartOffset - 2) === \"\\n\" &&\n                startContainer.textContent.charAt(rangeStartOffset - 1) !== constants/* Constants.ZWSP */.g.ZWSP\n                && [\"STRONG\", \"STRIKE\", \"S\", \"I\", \"EM\", \"B\"].includes(startContainer.parentElement.tagName)) {\n                // 保持行内元素软换行需继续的一致性\n                startContainer.textContent = startContainer.textContent.substring(0, rangeStartOffset - 1) +\n                    constants/* Constants.ZWSP */.g.ZWSP;\n                range.setStart(startContainer, rangeStartOffset);\n                range.collapse(true);\n                afterRenderEvent(vditor);\n                event.preventDefault();\n                return true;\n            }\n            // inline code、math、html 行前零宽字符后进行删除\n            if (startContainer.textContent === constants/* Constants.ZWSP */.g.ZWSP && range.startOffset === 1\n                && !startContainer.previousSibling && nextIsCode(range)) {\n                startContainer.textContent = \"\";\n                // 不能返回，其前面为代码渲染块时需进行以下处理：修正光标位于 inline math/html 前，按下删除按钮 code 中内容会被删除\n            }\n            // 修正光标位于 inline math/html, html-entity 前，按下删除按钮 code 中内容会被删除, 不能返回，还需要进行后续处理\n            blockElement.querySelectorAll(\"span.vditor-wysiwyg__block[data-type='math-inline']\").forEach(function (item) {\n                item.firstElementChild.style.display = \"inline\";\n                item.lastElementChild.style.display = \"none\";\n            });\n            blockElement.querySelectorAll(\"span.vditor-wysiwyg__block[data-type='html-entity']\").forEach(function (item) {\n                item.firstElementChild.style.display = \"inline\";\n                item.lastElementChild.style.display = \"none\";\n            });\n        }\n    }\n    if ((0,compatibility/* isFirefox */.vU)() && range.startOffset === 1 && startContainer.textContent.indexOf(constants/* Constants.ZWSP */.g.ZWSP) > -1 &&\n        startContainer.previousSibling && startContainer.previousSibling.nodeType !== 3 &&\n        startContainer.previousSibling.tagName === \"CODE\" &&\n        (event.key === \"Backspace\" || event.key === \"ArrowLeft\")) {\n        // https://github.com/Vanessa219/vditor/issues/410\n        range.selectNodeContents(startContainer.previousSibling);\n        range.collapse(false);\n        event.preventDefault();\n        return true;\n    }\n    if (fixFirefoxArrowUpTable(event, blockElement, range)) {\n        event.preventDefault();\n        return true;\n    }\n    fixCursorDownInlineMath(range, event.key);\n    if (event.key === \"ArrowDown\") {\n        // 光标位于内联数学公式前，按下键无作用\n        var nextElement = startContainer.nextSibling;\n        if (nextElement && nextElement.nodeType !== 3 && nextElement.getAttribute(\"data-type\") === \"math-inline\") {\n            range.setStartAfter(nextElement);\n        }\n    }\n    if (blockElement && keydownToc(blockElement, vditor, event, range)) {\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar removeBlockElement = function (vditor, event) {\n    // 删除有子工具栏的块\n    if (matchHotKey(\"⇧⌘X\", event)) {\n        var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"remove\"]');\n        if (itemElement) {\n            itemElement.click();\n        }\n        event.preventDefault();\n        return true;\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/highlightToolbarWYSIWYG.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar highlightToolbarWYSIWYG = function (vditor) {\n    clearTimeout(vditor.wysiwyg.hlToolbarTimeoutId);\n    vditor.wysiwyg.hlToolbarTimeoutId = window.setTimeout(function () {\n        if (vditor.wysiwyg.element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        if (!(0,selection/* selectIsEditor */.Gb)(vditor.wysiwyg.element)) {\n            return;\n        }\n        removeCurrentToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        enableToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n        var range = getSelection().getRangeAt(0);\n        var typeElement = range.startContainer;\n        if (range.startContainer.nodeType === 3) {\n            typeElement = range.startContainer.parentElement;\n        }\n        else {\n            typeElement = typeElement.childNodes[range.startOffset >= typeElement.childNodes.length\n                ? typeElement.childNodes.length - 1\n                : range.startOffset];\n        }\n        var footnotesElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"footnotes-block\");\n        if (footnotesElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genClose(footnotesElement, vditor);\n            setPopoverPosition(vditor, footnotesElement);\n            return;\n        }\n        // 工具栏高亮和禁用\n        var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"LI\");\n        if (liElement) {\n            if (liElement.classList.contains(\"vditor-task\")) {\n                setCurrentToolbar(vditor.toolbar.elements, [\"check\"]);\n            }\n            else if (liElement.parentElement.tagName === \"OL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"ordered-list\"]);\n            }\n            else if (liElement.parentElement.tagName === \"UL\") {\n                setCurrentToolbar(vditor.toolbar.elements, [\"list\"]);\n            }\n            enableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"BLOCKQUOTE\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"quote\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"B\") ||\n            (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"STRONG\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"bold\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"I\") ||\n            (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"EM\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"italic\"]);\n        }\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"STRIKE\") ||\n            (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"S\")) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"strike\"]);\n        }\n        // comments\n        vditor.wysiwyg.element\n            .querySelectorAll(\".vditor-comment--focus\")\n            .forEach(function (item) {\n            item.classList.remove(\"vditor-comment--focus\");\n        });\n        var commentElement = (0,hasClosest/* hasClosestByClassName */.fb)(typeElement, \"vditor-comment\");\n        if (commentElement) {\n            var ids_1 = commentElement.getAttribute(\"data-cmtids\").split(\" \");\n            if (ids_1.length > 1 && commentElement.nextSibling.isSameNode(commentElement.nextElementSibling)) {\n                var nextIds_1 = commentElement.nextElementSibling\n                    .getAttribute(\"data-cmtids\")\n                    .split(\" \");\n                ids_1.find(function (id) {\n                    if (nextIds_1.includes(id)) {\n                        ids_1 = [id];\n                        return true;\n                    }\n                });\n            }\n            vditor.wysiwyg.element\n                .querySelectorAll(\".vditor-comment\")\n                .forEach(function (item) {\n                if (item.getAttribute(\"data-cmtids\").indexOf(ids_1[0]) > -1) {\n                    item.classList.add(\"vditor-comment--focus\");\n                }\n            });\n        }\n        var aElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"A\");\n        if (aElement) {\n            setCurrentToolbar(vditor.toolbar.elements, [\"link\"]);\n        }\n        var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"TABLE\");\n        var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(typeElement);\n        if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"CODE\")) {\n            if ((0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"PRE\")) {\n                disableToolbar(vditor.toolbar.elements, [\n                    \"headings\",\n                    \"bold\",\n                    \"italic\",\n                    \"strike\",\n                    \"line\",\n                    \"quote\",\n                    \"list\",\n                    \"ordered-list\",\n                    \"check\",\n                    \"code\",\n                    \"inline-code\",\n                    \"upload\",\n                    \"link\",\n                    \"table\",\n                    \"record\",\n                ]);\n                setCurrentToolbar(vditor.toolbar.elements, [\"code\"]);\n            }\n            else {\n                disableToolbar(vditor.toolbar.elements, [\n                    \"headings\",\n                    \"bold\",\n                    \"italic\",\n                    \"strike\",\n                    \"line\",\n                    \"quote\",\n                    \"list\",\n                    \"ordered-list\",\n                    \"check\",\n                    \"code\",\n                    \"upload\",\n                    \"link\",\n                    \"table\",\n                    \"record\",\n                ]);\n                setCurrentToolbar(vditor.toolbar.elements, [\"inline-code\"]);\n            }\n        }\n        else if (headingElement) {\n            disableToolbar(vditor.toolbar.elements, [\"bold\"]);\n            setCurrentToolbar(vditor.toolbar.elements, [\"headings\"]);\n        }\n        else if (tableElement) {\n            disableToolbar(vditor.toolbar.elements, [\"table\"]);\n        }\n        // toc popover\n        var tocElement = (0,hasClosest/* hasClosestByClassName */.fb)(typeElement, \"vditor-toc\");\n        if (tocElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genClose(tocElement, vditor);\n            setPopoverPosition(vditor, tocElement);\n            return;\n        }\n        // quote popover\n        var blockquoteElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(typeElement, \"BLOCKQUOTE\");\n        if (blockquoteElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genUp(range, blockquoteElement, vditor);\n            genDown(range, blockquoteElement, vditor);\n            genClose(blockquoteElement, vditor);\n            setPopoverPosition(vditor, blockquoteElement);\n        }\n        // list item popover\n        if (liElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genUp(range, liElement, vditor);\n            genDown(range, liElement, vditor);\n            genClose(liElement, vditor);\n            setPopoverPosition(vditor, liElement);\n        }\n        // table popover\n        if (tableElement) {\n            var lang = vditor.options.lang;\n            var options = vditor.options;\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            var updateTable_1 = function () {\n                var oldRow = tableElement.rows.length;\n                var oldColumn = tableElement.rows[0].cells.length;\n                var row = parseInt(input_1.value, 10) || oldRow;\n                var column = parseInt(input2_1.value, 10) || oldColumn;\n                if (row === oldRow && oldColumn === column) {\n                    return;\n                }\n                if (oldColumn !== column) {\n                    var columnDiff = column - oldColumn;\n                    for (var i = 0; i < tableElement.rows.length; i++) {\n                        if (columnDiff > 0) {\n                            for (var j = 0; j < columnDiff; j++) {\n                                if (i === 0) {\n                                    tableElement.rows[i].lastElementChild.insertAdjacentHTML(\"afterend\", \"<th> </th>\");\n                                }\n                                else {\n                                    tableElement.rows[i].lastElementChild.insertAdjacentHTML(\"afterend\", \"<td> </td>\");\n                                }\n                            }\n                        }\n                        else {\n                            for (var k = oldColumn - 1; k >= column; k--) {\n                                tableElement.rows[i].cells[k].remove();\n                            }\n                        }\n                    }\n                }\n                if (oldRow !== row) {\n                    var rowDiff = row - oldRow;\n                    if (rowDiff > 0) {\n                        var rowHTML = \"<tr>\";\n                        for (var m = 0; m < column; m++) {\n                            rowHTML += \"<td> </td>\";\n                        }\n                        for (var l = 0; l < rowDiff; l++) {\n                            if (tableElement.querySelector(\"tbody\")) {\n                                tableElement\n                                    .querySelector(\"tbody\")\n                                    .insertAdjacentHTML(\"beforeend\", rowHTML);\n                            }\n                            else {\n                                tableElement\n                                    .querySelector(\"thead\")\n                                    .insertAdjacentHTML(\"afterend\", rowHTML + \"</tr>\");\n                            }\n                        }\n                    }\n                    else {\n                        for (var m = oldRow - 1; m >= row; m--) {\n                            tableElement.rows[m].remove();\n                            if (tableElement.rows.length === 1) {\n                                tableElement.querySelector(\"tbody\").remove();\n                            }\n                        }\n                    }\n                }\n                if (typeof vditor.options.input === \"function\") {\n                    vditor.options.input(getMarkdown(vditor));\n                }\n            };\n            var setAlign_1 = function (type) {\n                setTableAlign(tableElement, type);\n                if (type === \"right\") {\n                    left_1.classList.remove(\"vditor-icon--current\");\n                    center_1.classList.remove(\"vditor-icon--current\");\n                    right_1.classList.add(\"vditor-icon--current\");\n                }\n                else if (type === \"center\") {\n                    left_1.classList.remove(\"vditor-icon--current\");\n                    right_1.classList.remove(\"vditor-icon--current\");\n                    center_1.classList.add(\"vditor-icon--current\");\n                }\n                else {\n                    center_1.classList.remove(\"vditor-icon--current\");\n                    right_1.classList.remove(\"vditor-icon--current\");\n                    left_1.classList.add(\"vditor-icon--current\");\n                }\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                afterRenderEvent(vditor);\n            };\n            var td = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"TD\");\n            var th = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"TH\");\n            var alignType = \"left\";\n            if (td) {\n                alignType = td.getAttribute(\"align\") || \"left\";\n            }\n            else if (th) {\n                alignType = th.getAttribute(\"align\") || \"center\";\n            }\n            var left_1 = document.createElement(\"button\");\n            left_1.setAttribute(\"type\", \"button\");\n            left_1.setAttribute(\"aria-label\", window.VditorI18n.alignLeft + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘L\") + \">\");\n            left_1.setAttribute(\"data-type\", \"left\");\n            left_1.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-align-left\"></use></svg>';\n            left_1.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\" +\n                    (alignType === \"left\" ? \" vditor-icon--current\" : \"\");\n            left_1.onclick = function () {\n                setAlign_1(\"left\");\n            };\n            var center_1 = document.createElement(\"button\");\n            center_1.setAttribute(\"type\", \"button\");\n            center_1.setAttribute(\"aria-label\", window.VditorI18n.alignCenter + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘C\") + \">\");\n            center_1.setAttribute(\"data-type\", \"center\");\n            center_1.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-align-center\"></use></svg>';\n            center_1.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\" +\n                    (alignType === \"center\" ? \" vditor-icon--current\" : \"\");\n            center_1.onclick = function () {\n                setAlign_1(\"center\");\n            };\n            var right_1 = document.createElement(\"button\");\n            right_1.setAttribute(\"type\", \"button\");\n            right_1.setAttribute(\"aria-label\", window.VditorI18n.alignRight + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘R\") + \">\");\n            right_1.setAttribute(\"data-type\", \"right\");\n            right_1.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-align-right\"></use></svg>';\n            right_1.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\" +\n                    (alignType === \"right\" ? \" vditor-icon--current\" : \"\");\n            right_1.onclick = function () {\n                setAlign_1(\"right\");\n            };\n            var insertRowElement = document.createElement(\"button\");\n            insertRowElement.setAttribute(\"type\", \"button\");\n            insertRowElement.setAttribute(\"aria-label\", window.VditorI18n.insertRowBelow + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌘=\") + \">\");\n            insertRowElement.setAttribute(\"data-type\", \"insertRow\");\n            insertRowElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-insert-row\"></use></svg>';\n            insertRowElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertRowElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertRow(vditor, range, cellElement);\n                }\n            };\n            var insertRowBElement = document.createElement(\"button\");\n            insertRowBElement.setAttribute(\"type\", \"button\");\n            insertRowBElement.setAttribute(\"aria-label\", window.VditorI18n.insertRowAbove + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘F\") + \">\");\n            insertRowBElement.setAttribute(\"data-type\", \"insertRow\");\n            insertRowBElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-insert-rowb\"></use></svg>';\n            insertRowBElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertRowBElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertRowAbove(vditor, range, cellElement);\n                }\n            };\n            var insertColumnElement = document.createElement(\"button\");\n            insertColumnElement.setAttribute(\"type\", \"button\");\n            insertColumnElement.setAttribute(\"aria-label\", window.VditorI18n.insertColumnRight + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘=\") + \">\");\n            insertColumnElement.setAttribute(\"data-type\", \"insertColumn\");\n            insertColumnElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-insert-column\"></use></svg>';\n            insertColumnElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertColumnElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertColumn(vditor, tableElement, cellElement);\n                }\n            };\n            var insertColumnBElement = document.createElement(\"button\");\n            insertColumnBElement.setAttribute(\"type\", \"button\");\n            insertColumnBElement.setAttribute(\"aria-label\", window.VditorI18n.insertColumnLeft + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘G\") + \">\");\n            insertColumnBElement.setAttribute(\"data-type\", \"insertColumn\");\n            insertColumnBElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-insert-columnb\"></use></svg>';\n            insertColumnBElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            insertColumnBElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    insertColumn(vditor, tableElement, cellElement, \"beforebegin\");\n                }\n            };\n            var deleteRowElement = document.createElement(\"button\");\n            deleteRowElement.setAttribute(\"type\", \"button\");\n            deleteRowElement.setAttribute(\"aria-label\", window.VditorI18n[\"delete-row\"] + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌘-\") + \">\");\n            deleteRowElement.setAttribute(\"data-type\", \"deleteRow\");\n            deleteRowElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-delete-row\"></use></svg>';\n            deleteRowElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            deleteRowElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    deleteRow(vditor, range, cellElement);\n                }\n            };\n            var deleteColumnElement = document.createElement(\"button\");\n            deleteColumnElement.setAttribute(\"type\", \"button\");\n            deleteColumnElement.setAttribute(\"aria-label\", window.VditorI18n[\"delete-column\"] + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘-\") + \">\");\n            deleteColumnElement.setAttribute(\"data-type\", \"deleteColumn\");\n            deleteColumnElement.innerHTML =\n                '<svg><use xlink:href=\"#vditor-icon-delete-column\"></use></svg>';\n            deleteColumnElement.className =\n                \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n            deleteColumnElement.onclick = function () {\n                var startContainer = getSelection().getRangeAt(0)\n                    .startContainer;\n                var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n                if (cellElement) {\n                    deleteColumn(vditor, range, tableElement, cellElement);\n                }\n            };\n            var inputWrap = document.createElement(\"span\");\n            inputWrap.setAttribute(\"aria-label\", window.VditorI18n.row);\n            inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input_1 = document.createElement(\"input\");\n            inputWrap.appendChild(input_1);\n            input_1.type = \"number\";\n            input_1.min = \"1\";\n            input_1.className = \"vditor-input\";\n            input_1.style.width = \"42px\";\n            input_1.style.textAlign = \"center\";\n            input_1.setAttribute(\"placeholder\", window.VditorI18n.row);\n            input_1.value = tableElement.rows.length.toString();\n            input_1.oninput = function () {\n                updateTable_1();\n            };\n            input_1.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (event.key === \"Tab\") {\n                    input2_1.focus();\n                    input2_1.select();\n                    event.preventDefault();\n                    return;\n                }\n                if (removeBlockElement(vditor, event)) {\n                    return;\n                }\n                if (focusToElement(event, range)) {\n                    return;\n                }\n            };\n            var input2Wrap = document.createElement(\"span\");\n            input2Wrap.setAttribute(\"aria-label\", window.VditorI18n.column);\n            input2Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input2_1 = document.createElement(\"input\");\n            input2Wrap.appendChild(input2_1);\n            input2_1.type = \"number\";\n            input2_1.min = \"1\";\n            input2_1.className = \"vditor-input\";\n            input2_1.style.width = \"42px\";\n            input2_1.style.textAlign = \"center\";\n            input2_1.setAttribute(\"placeholder\", window.VditorI18n.column);\n            input2_1.value = tableElement.rows[0].cells.length.toString();\n            input2_1.oninput = function () {\n                updateTable_1();\n            };\n            input2_1.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (event.key === \"Tab\") {\n                    input_1.focus();\n                    input_1.select();\n                    event.preventDefault();\n                    return;\n                }\n                if (removeBlockElement(vditor, event)) {\n                    return;\n                }\n                if (focusToElement(event, range)) {\n                    return;\n                }\n            };\n            genUp(range, tableElement, vditor);\n            genDown(range, tableElement, vditor);\n            genClose(tableElement, vditor);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", left_1);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", center_1);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", right_1);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertRowBElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertRowElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertColumnBElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", insertColumnElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", deleteRowElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", deleteColumnElement);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n            vditor.wysiwyg.popover.insertAdjacentHTML(\"beforeend\", \" x \");\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input2Wrap);\n            setPopoverPosition(vditor, tableElement);\n        }\n        // link ref popover\n        var linkRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"link-ref\");\n        if (linkRefElement) {\n            genLinkRefPopover(vditor, linkRefElement, range);\n        }\n        // footnote popover\n        var footnotesRefElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-type\", \"footnotes-ref\");\n        if (footnotesRefElement) {\n            var lang = vditor.options.lang;\n            var options = vditor.options;\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            var inputWrap = document.createElement(\"span\");\n            inputWrap.setAttribute(\"aria-label\", window.VditorI18n.footnoteRef + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n            inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input_2 = document.createElement(\"input\");\n            inputWrap.appendChild(input_2);\n            input_2.className = \"vditor-input\";\n            input_2.setAttribute(\"placeholder\", window.VditorI18n.footnoteRef + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n            input_2.style.width = \"120px\";\n            input_2.value = footnotesRefElement.getAttribute(\"data-footnotes-label\");\n            input_2.oninput = function () {\n                if (input_2.value.trim() !== \"\") {\n                    footnotesRefElement.setAttribute(\"data-footnotes-label\", input_2.value);\n                }\n                if (typeof vditor.options.input === \"function\") {\n                    vditor.options.input(getMarkdown(vditor));\n                }\n            };\n            input_2.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (removeBlockElement(vditor, event)) {\n                    return;\n                }\n                if (focusToElement(event, range)) {\n                    return;\n                }\n            };\n            genClose(footnotesRefElement, vditor);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n            setPopoverPosition(vditor, footnotesRefElement);\n        }\n        // block popover: math-inline, math-block, html-block, html-inline, code-block, html-entity\n        var blockRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(typeElement, \"vditor-wysiwyg__block\");\n        var isBlock = blockRenderElement ? blockRenderElement.getAttribute(\"data-type\").indexOf(\"block\") > -1 : false;\n        vditor.wysiwyg.element\n            .querySelectorAll(\".vditor-wysiwyg__preview\")\n            .forEach(function (itemElement) {\n            if (!blockRenderElement || (blockRenderElement && isBlock && !blockRenderElement.contains(itemElement))) {\n                var previousElement = itemElement.previousElementSibling;\n                previousElement.style.display = \"none\";\n            }\n        });\n        if (blockRenderElement && isBlock) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            genUp(range, blockRenderElement, vditor);\n            genDown(range, blockRenderElement, vditor);\n            genClose(blockRenderElement, vditor);\n            if (blockRenderElement.getAttribute(\"data-type\") === \"code-block\") {\n                var languageWrap = document.createElement(\"span\");\n                languageWrap.setAttribute(\"aria-label\", window.VditorI18n.language + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n                languageWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n                var language_1 = document.createElement(\"input\");\n                languageWrap.appendChild(language_1);\n                var codeElement_1 = blockRenderElement.firstElementChild.firstElementChild;\n                language_1.className = \"vditor-input\";\n                language_1.setAttribute(\"placeholder\", window.VditorI18n.language + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n                language_1.value =\n                    codeElement_1.className.indexOf(\"language-\") > -1\n                        ? codeElement_1.className.split(\"-\")[1].split(\" \")[0]\n                        : \"\";\n                language_1.oninput = function (e) {\n                    if (language_1.value.trim() !== \"\") {\n                        codeElement_1.className = \"language-\".concat(language_1.value);\n                    }\n                    else {\n                        codeElement_1.className = \"\";\n                        vditor.hint.recentLanguage = \"\";\n                    }\n                    if (blockRenderElement.lastElementChild.classList.contains(\"vditor-wysiwyg__preview\")) {\n                        blockRenderElement.lastElementChild.innerHTML =\n                            blockRenderElement.firstElementChild.innerHTML;\n                        processCodeRender(blockRenderElement.lastElementChild, vditor);\n                    }\n                    afterRenderEvent(vditor);\n                    // 当鼠标点选语言时，触发自定义input事件\n                    if (e.detail === 1) {\n                        // 选择语言后，输入焦点切换到代码输入框\n                        range.setStart(codeElement_1.firstChild, 0);\n                        range.collapse(true);\n                        (0,selection/* setSelectionFocus */.Hc)(range);\n                    }\n                };\n                language_1.onkeydown = function (event) {\n                    if (event.isComposing) {\n                        return;\n                    }\n                    if (removeBlockElement(vditor, event)) {\n                        return;\n                    }\n                    if (event.key === \"Escape\" &&\n                        vditor.hint.element.style.display === \"block\") {\n                        vditor.hint.element.style.display = \"none\";\n                        event.preventDefault();\n                        return;\n                    }\n                    vditor.hint.select(event, vditor);\n                    focusToElement(event, range);\n                };\n                language_1.onkeyup = function (event) {\n                    if (event.isComposing ||\n                        event.key === \"Enter\" ||\n                        event.key === \"ArrowUp\" ||\n                        event.key === \"Escape\" ||\n                        event.key === \"ArrowDown\") {\n                        return;\n                    }\n                    var matchLangData = [];\n                    var key = language_1.value.substring(0, language_1.selectionStart);\n                    (vditor.options.preview.hljs.langs || constants/* Constants.CODE_LANGUAGES */.g.CODE_LANGUAGES).forEach(function (keyName) {\n                        if (keyName.indexOf(key.toLowerCase()) > -1) {\n                            matchLangData.push({\n                                html: keyName,\n                                value: keyName,\n                            });\n                        }\n                    });\n                    vditor.hint.genHTML(matchLangData, key, vditor);\n                    event.preventDefault();\n                };\n                vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", languageWrap);\n            }\n            setPopoverPosition(vditor, blockRenderElement);\n        }\n        else {\n            blockRenderElement = undefined;\n        }\n        if (headingElement) {\n            vditor.wysiwyg.popover.innerHTML = \"\";\n            var inputWrap = document.createElement(\"span\");\n            inputWrap.setAttribute(\"aria-label\", \"ID\" + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n            inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n            var input_3 = document.createElement(\"input\");\n            inputWrap.appendChild(input_3);\n            input_3.className = \"vditor-input\";\n            input_3.setAttribute(\"placeholder\", \"ID\" + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⌥Enter\") + \">\");\n            input_3.style.width = \"120px\";\n            input_3.value = headingElement.getAttribute(\"data-id\") || \"\";\n            input_3.oninput = function () {\n                headingElement.setAttribute(\"data-id\", input_3.value);\n                if (typeof vditor.options.input === \"function\") {\n                    vditor.options.input(getMarkdown(vditor));\n                }\n            };\n            input_3.onkeydown = function (event) {\n                if (event.isComposing) {\n                    return;\n                }\n                if (removeBlockElement(vditor, event)) {\n                    return;\n                }\n                if (focusToElement(event, range)) {\n                    return;\n                }\n            };\n            genUp(range, headingElement, vditor);\n            genDown(range, headingElement, vditor);\n            genClose(headingElement, vditor);\n            vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n            setPopoverPosition(vditor, headingElement);\n        }\n        // a popover\n        if (aElement) {\n            genAPopover(vditor, aElement, range);\n        }\n        if (!blockquoteElement &&\n            !liElement &&\n            !tableElement &&\n            !blockRenderElement &&\n            !aElement &&\n            !linkRefElement &&\n            !footnotesRefElement &&\n            !headingElement &&\n            !tocElement) {\n            var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(typeElement, \"data-block\", \"0\");\n            if (blockElement &&\n                blockElement.parentElement.isEqualNode(vditor.wysiwyg.element)) {\n                vditor.wysiwyg.popover.innerHTML = \"\";\n                genUp(range, blockElement, vditor);\n                genDown(range, blockElement, vditor);\n                genClose(blockElement, vditor);\n                setPopoverPosition(vditor, blockElement);\n            }\n            else {\n                vditor.wysiwyg.popover.style.display = \"none\";\n            }\n        }\n        // 反斜杠特殊处理\n        vditor.wysiwyg.element\n            .querySelectorAll('span[data-type=\"backslash\"] > span')\n            .forEach(function (item) {\n            item.style.display = \"none\";\n        });\n        var backslashElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"backslash\");\n        if (backslashElement) {\n            backslashElement.querySelector(\"span\").style.display = \"inline\";\n        }\n    }, 200);\n};\nvar setPopoverPosition = function (vditor, element) {\n    var targetElement = element;\n    var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(element, \"TABLE\");\n    if (tableElement) {\n        targetElement = tableElement;\n    }\n    vditor.wysiwyg.popover.style.left = \"0\";\n    vditor.wysiwyg.popover.style.display = \"block\";\n    vditor.wysiwyg.popover.style.top =\n        Math.max(-8, targetElement.offsetTop - 21 - vditor.wysiwyg.element.scrollTop) + \"px\";\n    vditor.wysiwyg.popover.style.left =\n        Math.min(targetElement.offsetLeft, vditor.wysiwyg.element.clientWidth - vditor.wysiwyg.popover.clientWidth) + \"px\";\n    vditor.wysiwyg.popover.setAttribute(\"data-top\", (targetElement.offsetTop - 21).toString());\n};\nvar genLinkRefPopover = function (vditor, linkRefElement, range) {\n    if (range === void 0) { range = getSelection().getRangeAt(0); }\n    vditor.wysiwyg.popover.innerHTML = \"\";\n    var updateLinkRef = function () {\n        if (input.value.trim() !== \"\") {\n            if (linkRefElement.tagName === \"IMG\") {\n                linkRefElement.setAttribute(\"alt\", input.value);\n            }\n            else {\n                linkRefElement.textContent = input.value;\n            }\n        }\n        // data-link-label\n        if (input1.value.trim() !== \"\") {\n            linkRefElement.setAttribute(\"data-link-label\", input1.value);\n        }\n        if (typeof vditor.options.input === \"function\") {\n            vditor.options.input(getMarkdown(vditor));\n        }\n    };\n    var inputWrap = document.createElement(\"span\");\n    inputWrap.setAttribute(\"aria-label\", window.VditorI18n.textIsNotEmpty);\n    inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input = document.createElement(\"input\");\n    inputWrap.appendChild(input);\n    input.className = \"vditor-input\";\n    input.setAttribute(\"placeholder\", window.VditorI18n.textIsNotEmpty);\n    input.style.width = \"120px\";\n    input.value =\n        linkRefElement.getAttribute(\"alt\") || linkRefElement.textContent;\n    input.oninput = function () {\n        updateLinkRef();\n    };\n    input.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        if (focusToElement(event, range)) {\n            return;\n        }\n        linkHotkey(vditor, linkRefElement, event, input1);\n    };\n    var input1Wrap = document.createElement(\"span\");\n    input1Wrap.setAttribute(\"aria-label\", window.VditorI18n.linkRef);\n    input1Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input1 = document.createElement(\"input\");\n    input1Wrap.appendChild(input1);\n    input1.className = \"vditor-input\";\n    input1.setAttribute(\"placeholder\", window.VditorI18n.linkRef);\n    input1.value = linkRefElement.getAttribute(\"data-link-label\");\n    input1.oninput = function () {\n        updateLinkRef();\n    };\n    input1.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        if (focusToElement(event, range)) {\n            return;\n        }\n        linkHotkey(vditor, linkRefElement, event, input);\n    };\n    genClose(linkRefElement, vditor);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input1Wrap);\n    setPopoverPosition(vditor, linkRefElement);\n};\nvar genUp = function (range, element, vditor) {\n    var previousElement = element.previousElementSibling;\n    if (!previousElement ||\n        (!element.parentElement.isEqualNode(vditor.wysiwyg.element) &&\n            element.tagName !== \"LI\")) {\n        return;\n    }\n    var upElement = document.createElement(\"button\");\n    upElement.setAttribute(\"type\", \"button\");\n    upElement.setAttribute(\"data-type\", \"up\");\n    upElement.setAttribute(\"aria-label\", window.VditorI18n.up + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘U\") + \">\");\n    upElement.innerHTML = '<svg><use xlink:href=\"#vditor-icon-up\"></use></svg>';\n    upElement.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n    upElement.onclick = function () {\n        range.insertNode(document.createElement(\"wbr\"));\n        previousElement.insertAdjacentElement(\"beforebegin\", element);\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        afterRenderEvent(vditor);\n        highlightToolbarWYSIWYG(vditor);\n        scrollCenter(vditor);\n    };\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", upElement);\n};\nvar genDown = function (range, element, vditor) {\n    var nextElement = element.nextElementSibling;\n    if (!nextElement ||\n        (!element.parentElement.isEqualNode(vditor.wysiwyg.element) &&\n            element.tagName !== \"LI\")) {\n        return;\n    }\n    var downElement = document.createElement(\"button\");\n    downElement.setAttribute(\"type\", \"button\");\n    downElement.setAttribute(\"data-type\", \"down\");\n    downElement.setAttribute(\"aria-label\", window.VditorI18n.down + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘D\") + \">\");\n    downElement.innerHTML =\n        '<svg><use xlink:href=\"#vditor-icon-down\"></use></svg>';\n    downElement.className =\n        \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n    downElement.onclick = function () {\n        range.insertNode(document.createElement(\"wbr\"));\n        nextElement.insertAdjacentElement(\"afterend\", element);\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        afterRenderEvent(vditor);\n        highlightToolbarWYSIWYG(vditor);\n        scrollCenter(vditor);\n    };\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", downElement);\n};\nvar genClose = function (element, vditor) {\n    var close = document.createElement(\"button\");\n    close.setAttribute(\"type\", \"button\");\n    close.setAttribute(\"data-type\", \"remove\");\n    close.setAttribute(\"aria-label\", window.VditorI18n.remove + \"<\" + (0,compatibility/* updateHotkeyTip */.ns)(\"⇧⌘X\") + \">\");\n    close.innerHTML =\n        '<svg><use xlink:href=\"#vditor-icon-trashcan\"></use></svg>';\n    close.className = \"vditor-icon vditor-tooltipped vditor-tooltipped__n\";\n    close.onclick = function () {\n        var range = (0,selection/* getEditorRange */.zh)(vditor);\n        range.setStartAfter(element);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        element.remove();\n        afterRenderEvent(vditor);\n        highlightToolbarWYSIWYG(vditor);\n        if ([\"H1\", \"H2\", \"H3\", \"H4\", \"H5\", \"H6\"].includes(element.tagName)) {\n            renderToc(vditor);\n        }\n    };\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", close);\n};\nvar linkHotkey = function (vditor, element, event, nextInputElement) {\n    if (event.isComposing) {\n        return;\n    }\n    if (event.key === \"Tab\") {\n        nextInputElement.focus();\n        nextInputElement.select();\n        event.preventDefault();\n        return;\n    }\n    if (!(0,compatibility/* isCtrl */.yl)(event) &&\n        !event.shiftKey &&\n        event.altKey &&\n        event.key === \"Enter\") {\n        var range = (0,selection/* getEditorRange */.zh)(vditor);\n        // firefox 不会打断 link https://github.com/Vanessa219/vditor/issues/193\n        element.insertAdjacentHTML(\"afterend\", constants/* Constants.ZWSP */.g.ZWSP);\n        range.setStartAfter(element.nextSibling);\n        range.collapse(true);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        event.preventDefault();\n    }\n};\nvar genAPopover = function (vditor, aElement, range) {\n    vditor.wysiwyg.popover.innerHTML = \"\";\n    var updateA = function () {\n        if (input.value.trim() !== \"\") {\n            aElement.innerHTML = input.value;\n        }\n        aElement.setAttribute(\"href\", input1.value);\n        aElement.setAttribute(\"title\", input2.value);\n        afterRenderEvent(vditor);\n    };\n    aElement.querySelectorAll(\"[data-marker]\").forEach(function (item) {\n        item.removeAttribute(\"data-marker\");\n    });\n    var inputWrap = document.createElement(\"span\");\n    inputWrap.setAttribute(\"aria-label\", window.VditorI18n.textIsNotEmpty);\n    inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input = document.createElement(\"input\");\n    inputWrap.appendChild(input);\n    input.className = \"vditor-input\";\n    input.setAttribute(\"placeholder\", window.VditorI18n.textIsNotEmpty);\n    input.style.width = \"120px\";\n    input.value = aElement.innerHTML || \"\";\n    input.oninput = function () {\n        updateA();\n    };\n    input.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        if (focusToElement(event, range)) {\n            return;\n        }\n        linkHotkey(vditor, aElement, event, input1);\n    };\n    var input1Wrap = document.createElement(\"span\");\n    input1Wrap.setAttribute(\"aria-label\", window.VditorI18n.link);\n    input1Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input1 = document.createElement(\"input\");\n    input1Wrap.appendChild(input1);\n    input1.className = \"vditor-input\";\n    input1.setAttribute(\"placeholder\", window.VditorI18n.link);\n    input1.value = aElement.getAttribute(\"href\") || \"\";\n    input1.oninput = function () {\n        updateA();\n    };\n    input1.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        if (focusToElement(event, range)) {\n            return;\n        }\n        linkHotkey(vditor, aElement, event, input2);\n    };\n    var input2Wrap = document.createElement(\"span\");\n    input2Wrap.setAttribute(\"aria-label\", window.VditorI18n.tooltipText);\n    input2Wrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var input2 = document.createElement(\"input\");\n    input2Wrap.appendChild(input2);\n    input2.className = \"vditor-input\";\n    input2.setAttribute(\"placeholder\", window.VditorI18n.tooltipText);\n    input2.style.width = \"60px\";\n    input2.value = aElement.getAttribute(\"title\") || \"\";\n    input2.oninput = function () {\n        updateA();\n    };\n    input2.onkeydown = function (event) {\n        if (removeBlockElement(vditor, event)) {\n            return;\n        }\n        if (focusToElement(event, range)) {\n            return;\n        }\n        linkHotkey(vditor, aElement, event, input);\n    };\n    genClose(aElement, vditor);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input1Wrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", input2Wrap);\n    setPopoverPosition(vditor, aElement);\n};\nvar genImagePopover = function (event, vditor) {\n    var imgElement = event.target;\n    vditor.wysiwyg.popover.innerHTML = \"\";\n    var updateImg = function () {\n        imgElement.setAttribute(\"src\", inputElement.value);\n        imgElement.setAttribute(\"alt\", alt.value);\n        imgElement.setAttribute(\"title\", title.value);\n        if (typeof vditor.options.input === \"function\") {\n            vditor.options.input(getMarkdown(vditor));\n        }\n    };\n    var inputWrap = document.createElement(\"span\");\n    inputWrap.setAttribute(\"aria-label\", window.VditorI18n.imageURL);\n    inputWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var inputElement = document.createElement(\"input\");\n    inputWrap.appendChild(inputElement);\n    inputElement.className = \"vditor-input\";\n    inputElement.setAttribute(\"placeholder\", window.VditorI18n.imageURL);\n    inputElement.value = imgElement.getAttribute(\"src\") || \"\";\n    inputElement.oninput = function () {\n        updateImg();\n    };\n    inputElement.onkeydown = function (elementEvent) {\n        removeBlockElement(vditor, elementEvent);\n    };\n    var altWrap = document.createElement(\"span\");\n    altWrap.setAttribute(\"aria-label\", window.VditorI18n.alternateText);\n    altWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var alt = document.createElement(\"input\");\n    altWrap.appendChild(alt);\n    alt.className = \"vditor-input\";\n    alt.setAttribute(\"placeholder\", window.VditorI18n.alternateText);\n    alt.style.width = \"52px\";\n    alt.value = imgElement.getAttribute(\"alt\") || \"\";\n    alt.oninput = function () {\n        updateImg();\n    };\n    alt.onkeydown = function (elementEvent) {\n        removeBlockElement(vditor, elementEvent);\n    };\n    var titleWrap = document.createElement(\"span\");\n    titleWrap.setAttribute(\"aria-label\", window.VditorI18n.title);\n    titleWrap.className = \"vditor-tooltipped vditor-tooltipped__n\";\n    var title = document.createElement(\"input\");\n    titleWrap.appendChild(title);\n    title.className = \"vditor-input\";\n    title.setAttribute(\"placeholder\", window.VditorI18n.title);\n    title.value = imgElement.getAttribute(\"title\") || \"\";\n    title.oninput = function () {\n        updateImg();\n    };\n    title.onkeydown = function (elementEvent) {\n        removeBlockElement(vditor, elementEvent);\n    };\n    genClose(imgElement, vditor);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", inputWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", altWrap);\n    vditor.wysiwyg.popover.insertAdjacentElement(\"beforeend\", titleWrap);\n    setPopoverPosition(vditor, imgElement);\n};\nvar focusToElement = function (event, range) {\n    if ((!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && event.key === \"Enter\") || event.key === \"Escape\") {\n        if (range) {\n            (0,selection/* setSelectionFocus */.Hc)(range);\n        }\n        event.preventDefault();\n        event.stopPropagation();\n        return true;\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/highlightToolbar.ts\n\n\nvar highlightToolbar = function (vditor) {\n    if (vditor.currentMode === \"wysiwyg\") {\n        highlightToolbarWYSIWYG(vditor);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        highlightToolbarIR(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/renderDomByMd.ts\n\n\nvar renderDomByMd = function (vditor, md, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    var editorElement = vditor.wysiwyg.element;\n    editorElement.innerHTML = vditor.lute.Md2VditorDOM(md);\n    editorElement.querySelectorAll(\".vditor-wysiwyg__preview[data-render='2']\").forEach(function (item) {\n        processCodeRender(item, vditor);\n        item.previousElementSibling.setAttribute(\"style\", \"display:none\");\n    });\n    afterRenderEvent(vditor, options);\n};\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/toolbarEvent.ts\n\n\n\n\n\n\n\n\n\nvar cancelBES = function (range, vditor, commandName) {\n    var element = range.startContainer.parentElement;\n    var jump = false;\n    var lastTagName = \"\";\n    var lastEndTagName = \"\";\n    var splitHTML = splitElement(range);\n    var lastBeforeHTML = splitHTML.beforeHTML;\n    var lastAfterHTML = splitHTML.afterHTML;\n    while (element && !jump) {\n        var tagName = element.tagName;\n        if (tagName === \"STRIKE\") {\n            tagName = \"S\";\n        }\n        if (tagName === \"I\") {\n            tagName = \"EM\";\n        }\n        if (tagName === \"B\") {\n            tagName = \"STRONG\";\n        }\n        if (tagName === \"S\" || tagName === \"STRONG\" || tagName === \"EM\") {\n            var insertHTML = \"\";\n            var previousHTML = \"\";\n            var nextHTML = \"\";\n            if (element.parentElement.getAttribute(\"data-block\") !== \"0\") {\n                previousHTML = getPreviousHTML(element);\n                nextHTML = getNextHTML(element);\n            }\n            if (lastBeforeHTML || previousHTML) {\n                insertHTML = \"\".concat(previousHTML, \"<\").concat(tagName, \">\").concat(lastBeforeHTML, \"</\").concat(tagName, \">\");\n                lastBeforeHTML = insertHTML;\n            }\n            if ((commandName === \"bold\" && tagName === \"STRONG\") ||\n                (commandName === \"italic\" && tagName === \"EM\") ||\n                (commandName === \"strikeThrough\" && tagName === \"S\")) {\n                // 取消\n                insertHTML += \"\".concat(lastTagName).concat(constants/* Constants.ZWSP */.g.ZWSP, \"<wbr>\").concat(lastEndTagName);\n                jump = true;\n            }\n            if (lastAfterHTML || nextHTML) {\n                lastAfterHTML = \"<\".concat(tagName, \">\").concat(lastAfterHTML, \"</\").concat(tagName, \">\").concat(nextHTML);\n                insertHTML += lastAfterHTML;\n            }\n            if (element.parentElement.getAttribute(\"data-block\") !== \"0\") {\n                element = element.parentElement;\n                element.innerHTML = insertHTML;\n            }\n            else {\n                element.outerHTML = insertHTML;\n                element = element.parentElement;\n            }\n            lastTagName = \"<\".concat(tagName, \">\") + lastTagName;\n            lastEndTagName = \"</\".concat(tagName, \">\") + lastEndTagName;\n        }\n        else {\n            jump = true;\n        }\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n};\nvar toolbarEvent = function (vditor, actionBtn, event) {\n    if (vditor.wysiwyg.composingLock // Mac Chrome 中韩文结束会出发此事件，导致重复末尾字符 https://github.com/Vanessa219/vditor/issues/188\n        && event instanceof CustomEvent // 点击按钮应忽略输入法 https://github.com/Vanessa219/vditor/issues/473\n    ) {\n        return;\n    }\n    var useHighlight = true;\n    var useRender = true;\n    if (vditor.wysiwyg.element.querySelector(\"wbr\")) {\n        vditor.wysiwyg.element.querySelector(\"wbr\").remove();\n    }\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var commandName = actionBtn.getAttribute(\"data-type\");\n    // 移除\n    if (actionBtn.classList.contains(\"vditor-menu--current\")) {\n        if (commandName === \"strike\") {\n            commandName = \"strikeThrough\";\n        }\n        if (commandName === \"quote\") {\n            var quoteElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"BLOCKQUOTE\");\n            if (!quoteElement) {\n                quoteElement = range.startContainer.childNodes[range.startOffset];\n            }\n            if (quoteElement) {\n                useHighlight = false;\n                actionBtn.classList.remove(\"vditor-menu--current\");\n                range.insertNode(document.createElement(\"wbr\"));\n                quoteElement.outerHTML = quoteElement.innerHTML.trim() === \"\" ?\n                    \"<p data-block=\\\"0\\\">\".concat(quoteElement.innerHTML, \"</p>\") : quoteElement.innerHTML;\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else if (commandName === \"inline-code\") {\n            var inlineCodeElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"CODE\");\n            if (!inlineCodeElement) {\n                inlineCodeElement = range.startContainer.childNodes[range.startOffset];\n            }\n            if (inlineCodeElement) {\n                inlineCodeElement.outerHTML = inlineCodeElement.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") + \"<wbr>\";\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else if (commandName === \"link\") {\n            if (!range.collapsed) {\n                document.execCommand(\"unlink\", false, \"\");\n            }\n            else {\n                range.selectNode(range.startContainer.parentElement);\n                document.execCommand(\"unlink\", false, \"\");\n            }\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName);\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            useHighlight = false;\n            actionBtn.classList.remove(\"vditor-menu--current\");\n        }\n        else {\n            // bold, italic, strike\n            useHighlight = false;\n            actionBtn.classList.remove(\"vditor-menu--current\");\n            if (range.toString() === \"\") {\n                cancelBES(range, vditor, commandName);\n            }\n            else {\n                document.execCommand(commandName, false, \"\");\n            }\n        }\n    }\n    else {\n        // 添加\n        if (vditor.wysiwyg.element.childNodes.length === 0) {\n            vditor.wysiwyg.element.innerHTML = '<p data-block=\"0\"><wbr></p>';\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        }\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n        if (commandName === \"quote\") {\n            if (!blockElement) {\n                blockElement = range.startContainer.childNodes[range.startOffset];\n            }\n            if (blockElement) {\n                useHighlight = false;\n                actionBtn.classList.add(\"vditor-menu--current\");\n                range.insertNode(document.createElement(\"wbr\"));\n                var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n                // li 中软换行\n                if (liElement && blockElement.contains(liElement)) {\n                    liElement.innerHTML = \"<blockquote data-block=\\\"0\\\">\".concat(liElement.innerHTML, \"</blockquote>\");\n                }\n                else {\n                    blockElement.outerHTML = \"<blockquote data-block=\\\"0\\\">\".concat(blockElement.outerHTML, \"</blockquote>\");\n                }\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName, false);\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            useHighlight = false;\n            removeCurrentToolbar(vditor.toolbar.elements, [\"check\", \"list\", \"ordered-list\"]);\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"inline-code\") {\n            if (range.toString() === \"\") {\n                var node = document.createElement(\"code\");\n                node.textContent = constants/* Constants.ZWSP */.g.ZWSP;\n                range.insertNode(node);\n                range.setStart(node.firstChild, 1);\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else if (range.startContainer.nodeType === 3) {\n                var node = document.createElement(\"code\");\n                range.surroundContents(node);\n                range.insertNode(node);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"code\") {\n            var node = document.createElement(\"div\");\n            node.className = \"vditor-wysiwyg__block\";\n            node.setAttribute(\"data-type\", \"code-block\");\n            node.setAttribute(\"data-block\", \"0\");\n            node.setAttribute(\"data-marker\", \"```\");\n            if (range.toString() === \"\") {\n                node.innerHTML = \"<pre><code><wbr>\\n</code></pre>\";\n            }\n            else {\n                node.innerHTML = \"<pre><code>\".concat(range.toString(), \"<wbr></code></pre>\");\n                range.deleteContents();\n            }\n            range.insertNode(node);\n            if (blockElement) {\n                blockElement.outerHTML = vditor.lute.SpinVditorDOM(blockElement.outerHTML);\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            vditor.wysiwyg.element.querySelectorAll(\".vditor-wysiwyg__preview[data-render='2']\").forEach(function (item) {\n                processCodeRender(item, vditor);\n            });\n            actionBtn.classList.add(\"vditor-menu--disabled\");\n        }\n        else if (commandName === \"link\") {\n            if (range.toString() === \"\") {\n                var aElement = document.createElement(\"a\");\n                aElement.innerText = constants/* Constants.ZWSP */.g.ZWSP;\n                range.insertNode(aElement);\n                range.setStart(aElement.firstChild, 1);\n                range.collapse(true);\n                genAPopover(vditor, aElement, range);\n                var textInputElement = vditor.wysiwyg.popover.querySelector(\"input\");\n                textInputElement.value = \"\";\n                textInputElement.focus();\n                useRender = false;\n            }\n            else {\n                var node = document.createElement(\"a\");\n                node.setAttribute(\"href\", \"\");\n                node.innerHTML = range.toString();\n                range.surroundContents(node);\n                range.insertNode(node);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                genAPopover(vditor, node, range);\n                var textInputElements = vditor.wysiwyg.popover.querySelectorAll(\"input\");\n                textInputElements[0].value = node.innerText;\n                textInputElements[1].focus();\n            }\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"table\") {\n            var tableHTML_1 = \"<table data-block=\\\"0\\\"><thead><tr><th>col1<wbr></th><th>col2</th><th>col3</th></tr></thead><tbody><tr><td> </td><td> </td><td> </td></tr><tr><td> </td><td> </td><td> </td></tr></tbody></table>\";\n            if (range.toString().trim() === \"\") {\n                if (blockElement && blockElement.innerHTML.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                    blockElement.outerHTML = tableHTML_1;\n                }\n                else {\n                    document.execCommand(\"insertHTML\", false, tableHTML_1);\n                }\n                range.selectNode(vditor.wysiwyg.element.querySelector(\"wbr\").previousSibling);\n                vditor.wysiwyg.element.querySelector(\"wbr\").remove();\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else {\n                tableHTML_1 = \"<table data-block=\\\"0\\\"><thead><tr>\";\n                var tableText = range.toString().split(\"\\n\");\n                var delimiter_1 = tableText[0].split(\",\").length > tableText[0].split(\"\\t\").length ? \",\" : \"\\t\";\n                tableText.forEach(function (rows, index) {\n                    if (index === 0) {\n                        rows.split(delimiter_1).forEach(function (header, subIndex) {\n                            if (subIndex === 0) {\n                                tableHTML_1 += \"<th>\".concat(header, \"<wbr></th>\");\n                            }\n                            else {\n                                tableHTML_1 += \"<th>\".concat(header, \"</th>\");\n                            }\n                        });\n                        tableHTML_1 += \"</tr></thead>\";\n                    }\n                    else {\n                        if (index === 1) {\n                            tableHTML_1 += \"<tbody><tr>\";\n                        }\n                        else {\n                            tableHTML_1 += \"<tr>\";\n                        }\n                        rows.split(delimiter_1).forEach(function (cell) {\n                            tableHTML_1 += \"<td>\".concat(cell, \"</td>\");\n                        });\n                        tableHTML_1 += \"</tr>\";\n                    }\n                });\n                tableHTML_1 += \"</tbody></table>\";\n                document.execCommand(\"insertHTML\", false, tableHTML_1);\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--disabled\");\n        }\n        else if (commandName === \"line\") {\n            if (blockElement) {\n                var hrHTML = '<hr data-block=\"0\"><p data-block=\"0\"><wbr>\\n</p>';\n                if (blockElement.innerHTML.trim() === \"\") {\n                    blockElement.outerHTML = hrHTML;\n                }\n                else {\n                    blockElement.insertAdjacentHTML(\"afterend\", hrHTML);\n                }\n                (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            }\n        }\n        else {\n            // bold, italic, strike\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--current\");\n            if (commandName === \"strike\") {\n                commandName = \"strikeThrough\";\n            }\n            if (range.toString() === \"\" && (commandName === \"bold\" || commandName === \"italic\" || commandName === \"strikeThrough\")) {\n                var tagName = \"strong\";\n                if (commandName === \"italic\") {\n                    tagName = \"em\";\n                }\n                else if (commandName === \"strikeThrough\") {\n                    tagName = \"s\";\n                }\n                var node = document.createElement(tagName);\n                node.textContent = constants/* Constants.ZWSP */.g.ZWSP;\n                range.insertNode(node);\n                if (node.previousSibling && node.previousSibling.textContent === constants/* Constants.ZWSP */.g.ZWSP) {\n                    // 移除多层嵌套中的 zwsp\n                    node.previousSibling.textContent = \"\";\n                }\n                range.setStart(node.firstChild, 1);\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            else {\n                document.execCommand(commandName, false, \"\");\n            }\n        }\n    }\n    if (useHighlight) {\n        highlightToolbarWYSIWYG(vditor);\n    }\n    if (useRender) {\n        afterRenderEvent(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/MenuItem.ts\n\n\n\n\n\n\nvar MenuItem = /** @class */ (function () {\n    function MenuItem(vditor, menuItem) {\n        var _a;\n        var _this = this;\n        this.element = document.createElement(\"div\");\n        if (menuItem.className) {\n            (_a = this.element.classList).add.apply(_a, menuItem.className.split(\" \"));\n        }\n        var hotkey = menuItem.hotkey ? \" <\".concat((0,compatibility/* updateHotkeyTip */.ns)(menuItem.hotkey), \">\") : \"\";\n        if (menuItem.level === 2) {\n            hotkey = menuItem.hotkey ? \" &lt;\".concat((0,compatibility/* updateHotkeyTip */.ns)(menuItem.hotkey), \"&gt;\") : \"\";\n        }\n        var tip = menuItem.tip ? menuItem.tip + hotkey : \"\".concat(window.VditorI18n[menuItem.name]).concat(hotkey);\n        var tagName = menuItem.name === \"upload\" ? \"div\" : \"button\";\n        if (menuItem.level === 2) {\n            this.element.innerHTML = \"<\".concat(tagName, \" data-type=\\\"\").concat(menuItem.name, \"\\\">\").concat(tip, \"</\").concat(tagName, \">\");\n        }\n        else {\n            this.element.classList.add(\"vditor-toolbar__item\");\n            var iconElement = document.createElement(tagName);\n            iconElement.setAttribute(\"data-type\", menuItem.name);\n            iconElement.className = \"vditor-tooltipped vditor-tooltipped__\".concat(menuItem.tipPosition);\n            iconElement.setAttribute(\"aria-label\", tip);\n            iconElement.innerHTML = menuItem.icon;\n            this.element.appendChild(iconElement);\n        }\n        if (!menuItem.prefix) {\n            return;\n        }\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            if (vditor.currentMode === \"wysiwyg\") {\n                toolbarEvent(vditor, _this.element.children[0], event);\n            }\n            else if (vditor.currentMode === \"ir\") {\n                process_processToolbar(vditor, _this.element.children[0], menuItem.prefix || \"\", menuItem.suffix || \"\");\n            }\n            else {\n                processToolbar(vditor, _this.element.children[0], menuItem.prefix || \"\", menuItem.suffix || \"\");\n            }\n        });\n    }\n    return MenuItem;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/EditMode.ts\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar setEditMode = function (vditor, type, event) {\n    var markdownText;\n    if (typeof event !== \"string\") {\n        hidePanel(vditor, [\"subToolbar\", \"hint\"]);\n        event.preventDefault();\n        markdownText = getMarkdown(vditor);\n    }\n    else {\n        markdownText = event;\n    }\n    if (vditor.currentMode === type && typeof event !== \"string\") {\n        return;\n    }\n    if (vditor.devtools) {\n        vditor.devtools.renderEchart(vditor);\n    }\n    if (vditor.options.preview.mode === \"both\" && type === \"sv\") {\n        vditor.preview.element.style.display = \"block\";\n    }\n    else {\n        vditor.preview.element.style.display = \"none\";\n    }\n    enableToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n    removeCurrentToolbar(vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS */.g.EDIT_TOOLBARS);\n    disableToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\"]);\n    if (type === \"ir\") {\n        hideToolbar(vditor.toolbar.elements, [\"both\"]);\n        showToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\", \"outline\", \"insert-before\", \"insert-after\"]);\n        vditor.sv.element.style.display = \"none\";\n        vditor.wysiwyg.element.parentElement.style.display = \"none\";\n        vditor.ir.element.parentElement.style.display = \"block\";\n        vditor.lute.SetVditorIR(true);\n        vditor.lute.SetVditorWYSIWYG(false);\n        vditor.lute.SetVditorSV(false);\n        vditor.currentMode = \"ir\";\n        vditor.ir.element.innerHTML = vditor.lute.Md2VditorIRDOM(markdownText);\n        process_processAfterRender(vditor, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n        setPadding(vditor);\n        vditor.ir.element.querySelectorAll(\".vditor-ir__preview[data-render='2']\").forEach(function (item) {\n            processCodeRender(item, vditor);\n        });\n        vditor.ir.element.querySelectorAll(\".vditor-toc\").forEach(function (item) {\n            (0,mathRender/* mathRender */.H)(item, {\n                cdn: vditor.options.cdn,\n                math: vditor.options.preview.math,\n            });\n        });\n    }\n    else if (type === \"wysiwyg\") {\n        hideToolbar(vditor.toolbar.elements, [\"both\"]);\n        showToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\", \"outline\", \"insert-before\", \"insert-after\"]);\n        vditor.sv.element.style.display = \"none\";\n        vditor.wysiwyg.element.parentElement.style.display = \"block\";\n        vditor.ir.element.parentElement.style.display = \"none\";\n        vditor.lute.SetVditorIR(false);\n        vditor.lute.SetVditorWYSIWYG(true);\n        vditor.lute.SetVditorSV(false);\n        vditor.currentMode = \"wysiwyg\";\n        setPadding(vditor);\n        renderDomByMd(vditor, markdownText, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n        vditor.wysiwyg.element.querySelectorAll(\".vditor-toc\").forEach(function (item) {\n            (0,mathRender/* mathRender */.H)(item, {\n                cdn: vditor.options.cdn,\n                math: vditor.options.preview.math,\n            });\n        });\n        vditor.wysiwyg.popover.style.display = \"none\";\n    }\n    else if (type === \"sv\") {\n        showToolbar(vditor.toolbar.elements, [\"both\"]);\n        hideToolbar(vditor.toolbar.elements, [\"outdent\", \"indent\", \"outline\", \"insert-before\", \"insert-after\"]);\n        vditor.wysiwyg.element.parentElement.style.display = \"none\";\n        vditor.ir.element.parentElement.style.display = \"none\";\n        if (vditor.options.preview.mode === \"both\") {\n            vditor.sv.element.style.display = \"block\";\n        }\n        else if (vditor.options.preview.mode === \"editor\") {\n            vditor.sv.element.style.display = \"block\";\n        }\n        vditor.lute.SetVditorIR(false);\n        vditor.lute.SetVditorWYSIWYG(false);\n        vditor.lute.SetVditorSV(true);\n        vditor.currentMode = \"sv\";\n        var svHTML = processSpinVditorSVDOM(markdownText, vditor);\n        if (svHTML === \"<div data-block='0'></div>\") {\n            // https://github.com/Vanessa219/vditor/issues/654 SV 模式 Placeholder 显示问题\n            svHTML = \"\";\n        }\n        vditor.sv.element.innerHTML = svHTML;\n        combineFootnote(vditor.sv.element);\n        processAfterRender(vditor, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n        setPadding(vditor);\n    }\n    vditor.undo.resetIcon(vditor);\n    if (typeof event !== \"string\") {\n        // 初始化不 focus\n        vditor[vditor.currentMode].element.focus();\n        highlightToolbar(vditor);\n    }\n    renderToc(vditor);\n    setTypewriterPosition(vditor);\n    if (vditor.toolbar.elements[\"edit-mode\"]) {\n        vditor.toolbar.elements[\"edit-mode\"].querySelectorAll(\"button\").forEach(function (item) {\n            item.classList.remove(\"vditor-menu--current\");\n        });\n        vditor.toolbar.elements[\"edit-mode\"].querySelector(\"button[data-mode=\\\"\".concat(vditor.currentMode, \"\\\"]\")).classList.add(\"vditor-menu--current\");\n    }\n    vditor.outline.toggle(vditor, vditor.currentMode !== \"sv\" && vditor.options.outline.enable, typeof event !== \"string\");\n};\nvar EditMode = /** @class */ (function (_super) {\n    __extends(EditMode, _super);\n    function EditMode(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\".concat(menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        panelElement.innerHTML = \"<button data-mode=\\\"wysiwyg\\\">\".concat(window.VditorI18n.wysiwyg, \" &lt;\").concat((0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘7\"), \"></button>\\n<button data-mode=\\\"ir\\\">\").concat(window.VditorI18n.instantRendering, \" &lt;\").concat((0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘8\"), \"></button>\\n<button data-mode=\\\"sv\\\">\").concat(window.VditorI18n.splitView, \" &lt;\").concat((0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘9\"), \"></button>\");\n        _this.element.appendChild(panelElement);\n        _this._bindEvent(vditor, panelElement, menuItem);\n        return _this;\n    }\n    EditMode.prototype._bindEvent = function (vditor, panelElement, menuItem) {\n        var actionBtn = this.element.children[0];\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        panelElement.children.item(0).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            // wysiwyg\n            setEditMode(vditor, \"wysiwyg\", event);\n            event.preventDefault();\n            event.stopPropagation();\n        });\n        panelElement.children.item(1).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            // ir\n            setEditMode(vditor, \"ir\", event);\n            event.preventDefault();\n            event.stopPropagation();\n        });\n        panelElement.children.item(2).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            // markdown\n            setEditMode(vditor, \"sv\", event);\n            event.preventDefault();\n            event.stopPropagation();\n        });\n    };\n    return EditMode;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/util/getSelectText.ts\n\nvar getSelectText = function (editor, range) {\n    if ((0,selection/* selectIsEditor */.Gb)(editor, range)) {\n        return getSelection().toString();\n    }\n    return \"\";\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/editorCommonEvent.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar focusEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"focus\", function () {\n        if (vditor.options.focus) {\n            vditor.options.focus(getMarkdown(vditor));\n        }\n        hidePanel(vditor, [\"subToolbar\", \"hint\"]);\n    });\n};\nvar dblclickEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"dblclick\", function (event) {\n        if (event.target.tagName === \"IMG\") {\n            if (vditor.options.image.preview) {\n                vditor.options.image.preview(event.target);\n            }\n            else if (vditor.options.image.isPreview) {\n                (0,preview_image/* previewImage */.E)(event.target, vditor.options.lang, vditor.options.theme);\n            }\n        }\n    });\n};\nvar blurEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"blur\", function (event) {\n        if (vditor.currentMode === \"ir\") {\n            var expandElement = vditor.ir.element.querySelector(\".vditor-ir__node--expand\");\n            if (expandElement) {\n                expandElement.classList.remove(\"vditor-ir__node--expand\");\n            }\n        }\n        else if (vditor.currentMode === \"wysiwyg\" &&\n            !vditor.wysiwyg.selectPopover.contains(event.relatedTarget)) {\n            vditor.wysiwyg.hideComment();\n        }\n        vditor[vditor.currentMode].range = (0,selection/* getEditorRange */.zh)(vditor);\n        if (vditor.options.blur) {\n            vditor.options.blur(getMarkdown(vditor));\n        }\n    });\n};\nvar dropEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"dragstart\", function (event) {\n        // 选中编辑器中的文字进行拖拽\n        event.dataTransfer.setData(constants/* Constants.DROP_EDITOR */.g.DROP_EDITOR, constants/* Constants.DROP_EDITOR */.g.DROP_EDITOR);\n    });\n    editorElement.addEventListener(\"drop\", function (event) {\n        if (event.dataTransfer.getData(constants/* Constants.DROP_EDITOR */.g.DROP_EDITOR)) {\n            // 编辑器内选中文字拖拽\n            execAfterRender(vditor);\n        }\n        else if (event.dataTransfer.types.includes(\"Files\") || event.dataTransfer.types.includes(\"text/html\")) {\n            // 外部文件拖入编辑器中或者编辑器内选中文字拖拽\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    document.execCommand(\"insertHTML\", false, code);\n                },\n            });\n        }\n    });\n};\nvar copyEvent = function (vditor, editorElement, copy) {\n    editorElement.addEventListener(\"copy\", function (event) { return copy(event, vditor); });\n};\nvar cutEvent = function (vditor, editorElement, copy) {\n    editorElement.addEventListener(\"cut\", function (event) {\n        copy(event, vditor);\n        // 获取 comment\n        if (vditor.options.comment.enable && vditor.currentMode === \"wysiwyg\") {\n            vditor.wysiwyg.getComments(vditor);\n        }\n        document.execCommand(\"delete\");\n    });\n};\nvar scrollCenter = function (vditor) {\n    if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n        vditor.options.comment.adjustTop(vditor.wysiwyg.getComments(vditor, true));\n    }\n    if (!vditor.options.typewriterMode) {\n        return;\n    }\n    var editorElement = vditor[vditor.currentMode].element;\n    var cursorTop = (0,selection/* getCursorPosition */.Ny)(editorElement).top;\n    if (vditor.options.height === \"auto\" && !vditor.element.classList.contains(\"vditor--fullscreen\")) {\n        window.scrollTo(window.scrollX, cursorTop + vditor.element.offsetTop + vditor.toolbar.element.offsetHeight - window.innerHeight / 2 + 10);\n    }\n    if (vditor.options.height !== \"auto\" || vditor.element.classList.contains(\"vditor--fullscreen\")) {\n        editorElement.scrollTop = cursorTop + editorElement.scrollTop - editorElement.clientHeight / 2 + 10;\n    }\n};\nvar hotkeyEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"keydown\", function (event) {\n        if (!event.isComposing && vditor.options.keydown) {\n            vditor.options.keydown(event);\n        }\n        // hint: 上下选择\n        if ((vditor.options.hint.extend.length > 1 || vditor.toolbar.elements.emoji) &&\n            vditor.hint.select(event, vditor)) {\n            return;\n        }\n        // 重置 comment\n        if (vditor.options.comment.enable && vditor.currentMode === \"wysiwyg\" &&\n            (event.key === \"Backspace\" || matchHotKey(\"⌘X\", event))) {\n            vditor.wysiwyg.getComments(vditor);\n        }\n        if (vditor.currentMode === \"sv\") {\n            if (processKeydown_processKeydown(vditor, event)) {\n                return;\n            }\n        }\n        else if (vditor.currentMode === \"wysiwyg\") {\n            if (wysiwyg_processKeydown_processKeydown(vditor, event)) {\n                return;\n            }\n        }\n        else if (vditor.currentMode === \"ir\") {\n            if (processKeydown(vditor, event)) {\n                return;\n            }\n        }\n        if (vditor.options.ctrlEnter && matchHotKey(\"⌘Enter\", event)) {\n            vditor.options.ctrlEnter(getMarkdown(vditor));\n            event.preventDefault();\n            return;\n        }\n        // undo\n        if (matchHotKey(\"⌘Z\", event) && !vditor.toolbar.elements.undo) {\n            vditor.undo.undo(vditor);\n            event.preventDefault();\n            return;\n        }\n        // redo\n        if (matchHotKey(\"⌘Y\", event) && !vditor.toolbar.elements.redo) {\n            vditor.undo.redo(vditor);\n            event.preventDefault();\n            return;\n        }\n        // esc\n        if (event.key === \"Escape\") {\n            if (vditor.hint.element.style.display === \"block\") {\n                vditor.hint.element.style.display = \"none\";\n            }\n            else if (vditor.options.esc && !event.isComposing) {\n                vditor.options.esc(getMarkdown(vditor));\n            }\n            event.preventDefault();\n            return;\n        }\n        // h1 - h6 hotkey\n        if ((0,compatibility/* isCtrl */.yl)(event) && event.altKey && !event.shiftKey && /^Digit[1-6]$/.test(event.code)) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                var tagName = event.code.replace(\"Digit\", \"H\");\n                if ((0,hasClosest/* hasClosestByMatchTag */.lG)(getSelection().getRangeAt(0).startContainer, tagName)) {\n                    removeHeading(vditor);\n                }\n                else {\n                    setHeading(vditor, tagName);\n                }\n                afterRenderEvent(vditor);\n            }\n            else if (vditor.currentMode === \"sv\") {\n                processHeading(vditor, \"#\".repeat(parseInt(event.code.replace(\"Digit\", \"\"), 10)) + \" \");\n            }\n            else if (vditor.currentMode === \"ir\") {\n                process_processHeading(vditor, \"#\".repeat(parseInt(event.code.replace(\"Digit\", \"\"), 10)) + \" \");\n            }\n            event.preventDefault();\n            return true;\n        }\n        // toggle edit mode\n        if ((0,compatibility/* isCtrl */.yl)(event) && event.altKey && !event.shiftKey && /^Digit[7-9]$/.test(event.code)) {\n            if (event.code === \"Digit7\") {\n                setEditMode(vditor, \"wysiwyg\", event);\n            }\n            else if (event.code === \"Digit8\") {\n                setEditMode(vditor, \"ir\", event);\n            }\n            else if (event.code === \"Digit9\") {\n                setEditMode(vditor, \"sv\", event);\n            }\n            return true;\n        }\n        // toolbar action\n        vditor.options.toolbar.find(function (menuItem) {\n            if (!menuItem.hotkey || menuItem.toolbar) {\n                if (menuItem.toolbar) {\n                    var sub = menuItem.toolbar.find(function (subMenuItem) {\n                        if (!subMenuItem.hotkey) {\n                            return false;\n                        }\n                        if (matchHotKey(subMenuItem.hotkey, event)) {\n                            vditor.toolbar.elements[subMenuItem.name].children[0]\n                                .dispatchEvent(new CustomEvent((0,compatibility/* getEventName */.Le)()));\n                            event.preventDefault();\n                            return true;\n                        }\n                    });\n                    return sub ? true : false;\n                }\n                return false;\n            }\n            if (matchHotKey(menuItem.hotkey, event)) {\n                vditor.toolbar.elements[menuItem.name].children[0].dispatchEvent(new CustomEvent((0,compatibility/* getEventName */.Le)()));\n                event.preventDefault();\n                return true;\n            }\n        });\n    });\n};\nvar selectEvent = function (vditor, editorElement) {\n    editorElement.addEventListener(\"selectstart\", function (event) {\n        editorElement.onmouseup = function () {\n            setTimeout(function () {\n                var selectText = getSelectText(vditor[vditor.currentMode].element);\n                if (selectText.trim()) {\n                    if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n                        if (!(0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"footnotes-block\") &&\n                            !(0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"link-ref-defs-block\")) {\n                            vditor.wysiwyg.showComment();\n                        }\n                        else {\n                            vditor.wysiwyg.hideComment();\n                        }\n                    }\n                    if (vditor.options.select) {\n                        vditor.options.select(selectText);\n                    }\n                }\n                else {\n                    if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n                        vditor.wysiwyg.hideComment();\n                    }\n                }\n            });\n        };\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/sv/process.ts\n\n\n\n\n\n\n\n\n\nvar processPaste = function (vditor, text) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    range.extractContents();\n    range.insertNode(document.createTextNode(Lute.Caret));\n    range.insertNode(document.createTextNode(text));\n    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-block\", \"0\");\n    if (!blockElement) {\n        blockElement = vditor.sv.element;\n    }\n    var spinHTML = vditor.lute.SpinVditorSVDOM(blockElement.textContent);\n    spinHTML = \"<div data-block='0'>\" +\n        spinHTML.replace(/<span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span><span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span></g, '<span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span><span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span></div><div data-block=\"0\"><') +\n        \"</div>\";\n    if (blockElement.isEqualNode(vditor.sv.element)) {\n        blockElement.innerHTML = spinHTML;\n    }\n    else {\n        blockElement.outerHTML = spinHTML;\n    }\n    combineFootnote(vditor.sv.element);\n    (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    scrollCenter(vditor);\n};\nvar getSideByType = function (spanNode, type, isPrevious) {\n    if (isPrevious === void 0) { isPrevious = true; }\n    var sideElement = spanNode;\n    if (sideElement.nodeType === 3) {\n        sideElement = sideElement.parentElement;\n    }\n    while (sideElement) {\n        if (sideElement.getAttribute(\"data-type\") === type) {\n            return sideElement;\n        }\n        if (isPrevious) {\n            sideElement = sideElement.previousElementSibling;\n        }\n        else {\n            sideElement = sideElement.nextElementSibling;\n        }\n    }\n    return false;\n};\nvar processSpinVditorSVDOM = function (html, vditor) {\n    log(\"SpinVditorSVDOM\", html, \"argument\", vditor.options.debugger);\n    var spinHTML = vditor.lute.SpinVditorSVDOM(html);\n    html = \"<div data-block='0'>\" +\n        spinHTML.replace(/<span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span><span data-type=\"newline\"><br \\/><span style=\"display: none\">\\n<\\/span><\\/span></g, '<span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span><span data-type=\"newline\"><br /><span style=\"display: none\">\\n</span></span></div><div data-block=\"0\"><') +\n        \"</div>\";\n    log(\"SpinVditorSVDOM\", html, \"result\", vditor.options.debugger);\n    return html;\n};\nvar processPreviousMarkers = function (spanElement) {\n    var spanType = spanElement.getAttribute(\"data-type\");\n    var previousElement = spanElement.previousElementSibling;\n    // 有内容的子列表/标题，在其 marker 后换行\n    var markerText = (spanType && spanType !== \"text\" && spanType !== \"table\" && spanType !== \"heading-marker\" &&\n        spanType !== \"newline\" && spanType !== \"yaml-front-matter-open-marker\" && spanType !== \"yaml-front-matter-close-marker\"\n        && spanType !== \"code-block-info\" && spanType !== \"code-block-close-marker\" && spanType !== \"code-block-open-marker\") ?\n        spanElement.textContent : \"\";\n    var hasNL = false;\n    if (spanType === \"newline\") {\n        hasNL = true;\n    }\n    while (previousElement && !hasNL) {\n        var previousType = previousElement.getAttribute(\"data-type\");\n        if (previousType === \"li-marker\" || previousType === \"blockquote-marker\" || previousType === \"task-marker\" ||\n            previousType === \"padding\") {\n            var previousText = previousElement.textContent;\n            if (previousType === \"li-marker\" &&\n                (spanType === \"code-block-open-marker\" || spanType === \"code-block-info\")) {\n                // https://github.com/Vanessa219/vditor/issues/586\n                markerText = previousText.replace(/\\S/g, \" \") + markerText;\n            }\n            else if (spanType === \"code-block-close-marker\" &&\n                previousElement.nextElementSibling.isSameNode(spanElement)) {\n                // https://github.com/Vanessa219/vditor/issues/594\n                var openMarker = getSideByType(spanElement, \"code-block-open-marker\");\n                if (openMarker && openMarker.previousElementSibling) {\n                    previousElement = openMarker.previousElementSibling;\n                    markerText = previousText + markerText;\n                }\n            }\n            else {\n                markerText = previousText + markerText;\n            }\n        }\n        else if (previousType === \"newline\") {\n            hasNL = true;\n        }\n        previousElement = previousElement.previousElementSibling;\n    }\n    return markerText;\n};\nvar processAfterRender = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (options.enableHint) {\n        vditor.hint.render(vditor);\n    }\n    vditor.preview.render(vditor);\n    var text = getMarkdown(vditor);\n    if (typeof vditor.options.input === \"function\" && options.enableInput) {\n        vditor.options.input(text);\n    }\n    if (vditor.options.counter.enable) {\n        vditor.counter.render(vditor, text);\n    }\n    if (vditor.options.cache.enable && (0,compatibility/* accessLocalStorage */.pK)()) {\n        localStorage.setItem(vditor.options.cache.id, text);\n        if (vditor.options.cache.after) {\n            vditor.options.cache.after(text);\n        }\n    }\n    if (vditor.devtools) {\n        vditor.devtools.renderEchart(vditor);\n    }\n    clearTimeout(vditor.sv.processTimeoutId);\n    vditor.sv.processTimeoutId = window.setTimeout(function () {\n        if (options.enableAddUndoStack && !vditor.sv.composingLock) {\n            vditor.undo.addToUndoStack(vditor);\n        }\n    }, vditor.options.undoDelay);\n};\nvar processHeading = function (vditor, value) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var headingElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"SPAN\");\n    if (headingElement && headingElement.textContent.trim() !== \"\") {\n        value = \"\\n\" + value;\n    }\n    range.collapse(true);\n    document.execCommand(\"insertHTML\", false, value);\n};\nvar processToolbar = function (vditor, actionBtn, prefix, suffix) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var commandName = actionBtn.getAttribute(\"data-type\");\n    // 添加\n    if (vditor.sv.element.childNodes.length === 0) {\n        vditor.sv.element.innerHTML = \"<span data-type=\\\"p\\\" data-block=\\\"0\\\"><span data-type=\\\"text\\\"><wbr></span></span><span data-type=\\\"newline\\\"><br><span style=\\\"display: none\\\">\\n</span></span>\";\n        (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    }\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    var spanElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"SPAN\");\n    if (!blockElement) {\n        return;\n    }\n    if (commandName === \"link\") {\n        var html = void 0;\n        if (range.toString() === \"\") {\n            html = \"\".concat(prefix).concat(Lute.Caret).concat(suffix);\n        }\n        else {\n            html = \"\".concat(prefix).concat(range.toString()).concat(suffix.replace(\")\", Lute.Caret + \")\"));\n        }\n        document.execCommand(\"insertHTML\", false, html);\n        return;\n    }\n    else if (commandName === \"italic\" || commandName === \"bold\" || commandName === \"strike\" ||\n        commandName === \"inline-code\" || commandName === \"code\" || commandName === \"table\" || commandName === \"line\") {\n        var html = void 0;\n        // https://github.com/Vanessa219/vditor/issues/563 代码块不需要后面的 ```\n        if (range.toString() === \"\") {\n            html = \"\".concat(prefix).concat(Lute.Caret).concat(commandName === \"code\" ? \"\" : suffix);\n        }\n        else {\n            html = \"\".concat(prefix).concat(range.toString()).concat(Lute.Caret).concat(commandName === \"code\" ? \"\" : suffix);\n        }\n        if (commandName === \"table\" || (commandName === \"code\" && spanElement && spanElement.textContent !== \"\")) {\n            html = \"\\n\\n\" + html;\n        }\n        else if (commandName === \"line\") {\n            html = \"\\n\\n\".concat(prefix, \"\\n\").concat(Lute.Caret);\n        }\n        document.execCommand(\"insertHTML\", false, html);\n        return;\n    }\n    else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\" ||\n        commandName === \"quote\") {\n        if (spanElement) {\n            var marker = \"* \";\n            if (commandName === \"check\") {\n                marker = \"* [ ] \";\n            }\n            else if (commandName === \"ordered-list\") {\n                marker = \"1. \";\n            }\n            else if (commandName === \"quote\") {\n                marker = \"> \";\n            }\n            var newLine = getSideByType(spanElement, \"newline\");\n            if (newLine) {\n                newLine.insertAdjacentText(\"afterend\", marker);\n            }\n            else {\n                blockElement.insertAdjacentText(\"afterbegin\", marker);\n            }\n            inputEvent(vditor);\n            return;\n        }\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.sv.element, range);\n    processAfterRender(vditor);\n};\n\n;// CONCATENATED MODULE: ./src/ts/upload/getElement.ts\nvar getElement = function (vditor) {\n    switch (vditor.currentMode) {\n        case \"ir\":\n            return vditor.ir.element;\n        case \"wysiwyg\":\n            return vditor.wysiwyg.element;\n        case \"sv\":\n            return vditor.sv.element;\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/upload/setHeaders.ts\nvar setHeaders = function (vditor, xhr) {\n    if (vditor.options.upload.setHeaders) {\n        vditor.options.upload.headers = vditor.options.upload.setHeaders();\n    }\n    if (vditor.options.upload.headers) {\n        Object.keys(vditor.options.upload.headers).forEach(function (key) {\n            xhr.setRequestHeader(key, vditor.options.upload.headers[key]);\n        });\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/upload/index.ts\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\nvar Upload = /** @class */ (function () {\n    function Upload() {\n        this.isUploading = false;\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-upload\";\n    }\n    return Upload;\n}());\nvar validateFile = function (vditor, files) {\n    vditor.tip.hide();\n    var uploadFileList = [];\n    var errorTip = \"\";\n    var uploadingStr = \"\";\n    var lang = vditor.options.lang;\n    var options = vditor.options;\n    var _loop_1 = function (iMax, i) {\n        var file = files[i];\n        var validate = true;\n        if (!file.name) {\n            errorTip += \"<li>\".concat(window.VditorI18n.nameEmpty, \"</li>\");\n            validate = false;\n        }\n        if (file.size > vditor.options.upload.max) {\n            errorTip += \"<li>\".concat(file.name, \" \").concat(window.VditorI18n.over, \" \").concat(vditor.options.upload.max / 1024 / 1024, \"M</li>\");\n            validate = false;\n        }\n        var lastIndex = file.name.lastIndexOf(\".\");\n        var fileExt = file.name.substr(lastIndex);\n        var filename = vditor.options.upload.filename(file.name.substr(0, lastIndex)) + fileExt;\n        if (vditor.options.upload.accept) {\n            var isAccept = vditor.options.upload.accept.split(\",\").some(function (item) {\n                var type = item.trim();\n                if (type.indexOf(\".\") === 0) {\n                    if (fileExt.toLowerCase() === type.toLowerCase()) {\n                        return true;\n                    }\n                }\n                else {\n                    if (file.type.split(\"/\")[0] === type.split(\"/\")[0]) {\n                        return true;\n                    }\n                }\n                return false;\n            });\n            if (!isAccept) {\n                errorTip += \"<li>\".concat(file.name, \" \").concat(window.VditorI18n.fileTypeError, \"</li>\");\n                validate = false;\n            }\n        }\n        if (validate) {\n            uploadFileList.push(file);\n            uploadingStr += \"<li>\".concat(filename, \" \").concat(window.VditorI18n.uploading, \"</li>\");\n        }\n    };\n    for (var iMax = files.length, i = 0; i < iMax; i++) {\n        _loop_1(iMax, i);\n    }\n    vditor.tip.show(\"<ul>\".concat(errorTip).concat(uploadingStr, \"</ul>\"));\n    return uploadFileList;\n};\nvar genUploadedLabel = function (responseText, vditor) {\n    var editorElement = getElement(vditor);\n    editorElement.focus();\n    var response = JSON.parse(responseText);\n    var errorTip = \"\";\n    if (response.code === 1) {\n        errorTip = \"\".concat(response.msg);\n    }\n    if (response.data.errFiles && response.data.errFiles.length > 0) {\n        errorTip = \"<ul><li>\".concat(errorTip, \"</li>\");\n        response.data.errFiles.forEach(function (data) {\n            var lastIndex = data.lastIndexOf(\".\");\n            var filename = vditor.options.upload.filename(data.substr(0, lastIndex)) + data.substr(lastIndex);\n            errorTip += \"<li>\".concat(filename, \" \").concat(window.VditorI18n.uploadError, \"</li>\");\n        });\n        errorTip += \"</ul>\";\n    }\n    if (errorTip) {\n        vditor.tip.show(errorTip);\n    }\n    else {\n        vditor.tip.hide();\n    }\n    var succFileText = \"\";\n    Object.keys(response.data.succMap).forEach(function (key) {\n        var path = response.data.succMap[key];\n        var lastIndex = key.lastIndexOf(\".\");\n        var type = key.substr(lastIndex);\n        var filename = vditor.options.upload.filename(key.substr(0, lastIndex)) + type;\n        type = type.toLowerCase();\n        if (type.indexOf(\".wav\") === 0 || type.indexOf(\".mp3\") === 0 || type.indexOf(\".ogg\") === 0) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                succFileText += \"<div class=\\\"vditor-wysiwyg__block\\\" data-type=\\\"html-block\\\"\\n data-block=\\\"0\\\"><pre><code>&lt;audio controls=\\\"controls\\\" src=\\\"\".concat(path, \"\\\"&gt;&lt;/audio&gt;</code></pre><pre class=\\\"vditor-wysiwyg__preview\\\" data-render=\\\"1\\\"><audio controls=\\\"controls\\\" src=\\\"\").concat(path, \"\\\"></audio></pre></div>\\n\");\n            }\n            else if (vditor.currentMode === \"ir\") {\n                succFileText += \"<audio controls=\\\"controls\\\" src=\\\"\".concat(path, \"\\\"></audio>\\n\");\n            }\n            else {\n                succFileText += \"[\".concat(filename, \"](\").concat(path, \")\\n\");\n            }\n        }\n        else if (type.indexOf(\".apng\") === 0\n            || type.indexOf(\".bmp\") === 0\n            || type.indexOf(\".gif\") === 0\n            || type.indexOf(\".ico\") === 0 || type.indexOf(\".cur\") === 0\n            || type.indexOf(\".jpg\") === 0 || type.indexOf(\".jpeg\") === 0 || type.indexOf(\".jfif\") === 0 || type.indexOf(\".pjp\") === 0 || type.indexOf(\".pjpeg\") === 0\n            || type.indexOf(\".png\") === 0\n            || type.indexOf(\".svg\") === 0\n            || type.indexOf(\".webp\") === 0) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                succFileText += \"<img alt=\\\"\".concat(filename, \"\\\" src=\\\"\").concat(path, \"\\\">\\n\");\n            }\n            else {\n                succFileText += \"![\".concat(filename, \"](\").concat(path, \")\\n\");\n            }\n        }\n        else {\n            if (vditor.currentMode === \"wysiwyg\") {\n                succFileText += \"<a href=\\\"\".concat(path, \"\\\">\").concat(filename, \"</a>\\n\");\n            }\n            else {\n                succFileText += \"[\".concat(filename, \"](\").concat(path, \")\\n\");\n            }\n        }\n    });\n    (0,selection/* setSelectionFocus */.Hc)(vditor.upload.range);\n    document.execCommand(\"insertHTML\", false, succFileText);\n    vditor.upload.range = getSelection().getRangeAt(0).cloneRange();\n};\nvar uploadFiles = function (vditor, files, element) { return __awaiter(void 0, void 0, void 0, function () {\n    var fileList, filesMax, i, fileItem, isValidate, isValidate, editorElement, validateResult, formData, extraData, _i, _a, key, i, iMax, xhr;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                fileList = [];\n                filesMax = vditor.options.upload.multiple === true ? files.length : 1;\n                for (i = 0; i < filesMax; i++) {\n                    fileItem = files[i];\n                    if (fileItem instanceof DataTransferItem) {\n                        fileItem = fileItem.getAsFile();\n                    }\n                    fileList.push(fileItem);\n                }\n                if (!vditor.options.upload.handler) return [3 /*break*/, 2];\n                return [4 /*yield*/, vditor.options.upload.handler(fileList)];\n            case 1:\n                isValidate = _b.sent();\n                if (element) {\n                    element.value = \"\";\n                }\n                if (typeof isValidate === \"string\") {\n                    vditor.tip.show(isValidate);\n                    return [2 /*return*/];\n                }\n                return [2 /*return*/];\n            case 2:\n                if (!vditor.options.upload.url || !vditor.upload) {\n                    if (element) {\n                        element.value = \"\";\n                    }\n                    vditor.tip.show(\"please config: options.upload.url\");\n                    return [2 /*return*/];\n                }\n                if (!vditor.options.upload.file) return [3 /*break*/, 4];\n                return [4 /*yield*/, vditor.options.upload.file(fileList)];\n            case 3:\n                fileList = _b.sent();\n                _b.label = 4;\n            case 4:\n                if (vditor.options.upload.validate) {\n                    isValidate = vditor.options.upload.validate(fileList);\n                    if (typeof isValidate === \"string\") {\n                        vditor.tip.show(isValidate);\n                        return [2 /*return*/];\n                    }\n                }\n                editorElement = getElement(vditor);\n                vditor.upload.range = (0,selection/* getEditorRange */.zh)(vditor);\n                validateResult = validateFile(vditor, fileList);\n                if (validateResult.length === 0) {\n                    if (element) {\n                        element.value = \"\";\n                    }\n                    return [2 /*return*/];\n                }\n                formData = new FormData();\n                extraData = vditor.options.upload.extraData;\n                for (_i = 0, _a = Object.keys(extraData); _i < _a.length; _i++) {\n                    key = _a[_i];\n                    formData.append(key, extraData[key]);\n                }\n                for (i = 0, iMax = validateResult.length; i < iMax; i++) {\n                    formData.append(vditor.options.upload.fieldName, validateResult[i]);\n                }\n                xhr = new XMLHttpRequest();\n                xhr.open(\"POST\", vditor.options.upload.url);\n                if (vditor.options.upload.token) {\n                    xhr.setRequestHeader(\"X-Upload-Token\", vditor.options.upload.token);\n                }\n                if (vditor.options.upload.withCredentials) {\n                    xhr.withCredentials = true;\n                }\n                setHeaders(vditor, xhr);\n                vditor.upload.isUploading = true;\n                editorElement.setAttribute(\"contenteditable\", \"false\");\n                xhr.onreadystatechange = function () {\n                    if (xhr.readyState === XMLHttpRequest.DONE) {\n                        vditor.upload.isUploading = false;\n                        editorElement.setAttribute(\"contenteditable\", \"true\");\n                        if (xhr.status >= 200 && xhr.status < 300) {\n                            if (vditor.options.upload.success) {\n                                vditor.options.upload.success(editorElement, xhr.responseText);\n                            }\n                            else {\n                                var responseText = xhr.responseText;\n                                if (vditor.options.upload.format) {\n                                    responseText = vditor.options.upload.format(files, xhr.responseText);\n                                }\n                                genUploadedLabel(responseText, vditor);\n                            }\n                        }\n                        else {\n                            if (vditor.options.upload.error) {\n                                vditor.options.upload.error(xhr.responseText);\n                            }\n                            else {\n                                vditor.tip.show(xhr.responseText);\n                            }\n                        }\n                        if (element) {\n                            element.value = \"\";\n                        }\n                        vditor.upload.element.style.display = \"none\";\n                    }\n                };\n                xhr.upload.onprogress = function (event) {\n                    if (!event.lengthComputable) {\n                        return;\n                    }\n                    var progress = event.loaded / event.total * 100;\n                    vditor.upload.element.style.display = \"block\";\n                    var progressBar = vditor.upload.element;\n                    progressBar.style.width = progress + \"%\";\n                };\n                xhr.send(formData);\n                return [2 /*return*/];\n        }\n    });\n}); };\n\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/input.ts\n\n\n\n\n\n\n\n\nvar input_input = function (vditor, range, event) {\n    var _a;\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (!blockElement) {\n        // 使用顶级块元素，应使用 innerHTML\n        blockElement = vditor.wysiwyg.element;\n    }\n    if (event && event.inputType !== \"formatItalic\"\n        && event.inputType !== \"deleteByDrag\"\n        && event.inputType !== \"insertFromDrop\"\n        && event.inputType !== \"formatBold\"\n        && event.inputType !== \"formatRemove\"\n        && event.inputType !== \"formatStrikeThrough\"\n        && event.inputType !== \"insertUnorderedList\"\n        && event.inputType !== \"insertOrderedList\"\n        && event.inputType !== \"formatOutdent\"\n        && event.inputType !== \"formatIndent\"\n        && event.inputType !== \"\" // document.execCommand('unlink', false)\n        || !event) {\n        var previousAEmptyElement = previoueIsEmptyA(range.startContainer);\n        if (previousAEmptyElement) {\n            // 链接结尾回车不应该复制到下一行 https://github.com/Vanessa219/vditor/issues/163\n            previousAEmptyElement.remove();\n        }\n        // 保存光标\n        vditor.wysiwyg.element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n            wbr.remove();\n        });\n        range.insertNode(document.createElement(\"wbr\"));\n        // 在行首进行删除，后面的元素会带有样式，需清除\n        blockElement.querySelectorAll(\"[style]\").forEach(function (item) {\n            item.removeAttribute(\"style\");\n        });\n        // 移除空评论\n        blockElement.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n            if (item.textContent.trim() === \"\") {\n                item.classList.remove(\"vditor-comment\", \"vditor-comment--focus\");\n                item.removeAttribute(\"data-cmtids\");\n            }\n        });\n        //  在有评论的行首换行后，该行的前一段会带有评论标识\n        (_a = blockElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n            if (item.textContent.trim() === \"\") {\n                item.classList.remove(\"vditor-comment\", \"vditor-comment--focus\");\n                item.removeAttribute(\"data-cmtids\");\n            }\n        });\n        var html_1 = \"\";\n        if (blockElement.getAttribute(\"data-type\") === \"link-ref-defs-block\") {\n            // 修改链接引用\n            blockElement = vditor.wysiwyg.element;\n        }\n        var isWYSIWYGElement = blockElement.isEqualNode(vditor.wysiwyg.element);\n        var footnoteElement = (0,hasClosest/* hasClosestByAttribute */.a1)(blockElement, \"data-type\", \"footnotes-block\");\n        if (!isWYSIWYGElement) {\n            // 列表需要到最顶层\n            var topListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n            if (topListElement && !footnoteElement) {\n                var blockquoteElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(range.startContainer, \"BLOCKQUOTE\");\n                if (blockquoteElement) {\n                    // li 中有 blockquote 就只渲染 blockquote\n                    blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer) || blockElement;\n                }\n                else {\n                    blockElement = topListElement;\n                }\n            }\n            // 修改脚注\n            if (footnoteElement) {\n                blockElement = footnoteElement;\n            }\n            html_1 = blockElement.outerHTML;\n            if (blockElement.tagName === \"UL\" || blockElement.tagName === \"OL\") {\n                // 如果为列表的话，需要把上下的列表都重绘\n                var listPrevElement = blockElement.previousElementSibling;\n                var listNextElement = blockElement.nextElementSibling;\n                if (listPrevElement && (listPrevElement.tagName === \"UL\" || listPrevElement.tagName === \"OL\")) {\n                    html_1 = listPrevElement.outerHTML + html_1;\n                    listPrevElement.remove();\n                }\n                if (listNextElement && (listNextElement.tagName === \"UL\" || listNextElement.tagName === \"OL\")) {\n                    html_1 = html_1 + listNextElement.outerHTML;\n                    listNextElement.remove();\n                }\n                // firefox 列表回车不会产生新的 list item https://github.com/Vanessa219/vditor/issues/194\n                html_1 = html_1.replace(\"<div><wbr><br></div>\", \"<li><p><wbr><br></p></li>\");\n            }\n            if (!blockElement.innerText.startsWith(\"```\")) {\n                // 添加链接引用\n                vditor.wysiwyg.element.querySelectorAll(\"[data-type='link-ref-defs-block']\").forEach(function (item) {\n                    if (item && !blockElement.isEqualNode(item)) {\n                        html_1 += item.outerHTML;\n                        item.remove();\n                    }\n                });\n                // 添加脚注\n                vditor.wysiwyg.element.querySelectorAll(\"[data-type='footnotes-block']\").forEach(function (item) {\n                    if (item && !blockElement.isEqualNode(item)) {\n                        html_1 += item.outerHTML;\n                        item.remove();\n                    }\n                });\n            }\n        }\n        else {\n            html_1 = blockElement.innerHTML;\n        }\n        // 合并多个 em， strong，s。以防止多个相同元素在一起时不满足 commonmark 规范，出现标记符\n        html_1 = html_1.replace(/<\\/(strong|b)><strong data-marker=\"\\W{2}\">/g, \"\")\n            .replace(/<\\/(em|i)><em data-marker=\"\\W{1}\">/g, \"\")\n            .replace(/<\\/(s|strike)><s data-marker=\"~{1,2}\">/g, \"\");\n        if (html_1 === '<p data-block=\"0\">```<wbr></p>' && vditor.hint.recentLanguage) {\n            html_1 = '<p data-block=\"0\">```<wbr></p>'.replace(\"```\", \"```\" + vditor.hint.recentLanguage);\n        }\n        log(\"SpinVditorDOM\", html_1, \"argument\", vditor.options.debugger);\n        html_1 = vditor.lute.SpinVditorDOM(html_1);\n        log(\"SpinVditorDOM\", html_1, \"result\", vditor.options.debugger);\n        if (isWYSIWYGElement) {\n            blockElement.innerHTML = html_1;\n        }\n        else {\n            blockElement.outerHTML = html_1;\n            if (footnoteElement) {\n                // 更新正文中的 tip\n                var footnoteItemElement = (0,hasClosest/* hasTopClosestByTag */.E2)(vditor.wysiwyg.element.querySelector(\"wbr\"), \"LI\");\n                if (footnoteItemElement) {\n                    var footnoteRefElement = vditor.wysiwyg.element.querySelector(\"sup[data-type=\\\"footnotes-ref\\\"][data-footnotes-label=\\\"\".concat(footnoteItemElement.getAttribute(\"data-marker\"), \"\\\"]\"));\n                    if (footnoteRefElement) {\n                        footnoteRefElement.setAttribute(\"aria-label\", footnoteItemElement.textContent.trim().substr(0, 24));\n                    }\n                }\n            }\n        }\n        var firstLinkRefDefElement_1;\n        var allLinkRefDefsElement = vditor.wysiwyg.element.querySelectorAll(\"[data-type='link-ref-defs-block']\");\n        allLinkRefDefsElement.forEach(function (item, index) {\n            if (index === 0) {\n                firstLinkRefDefElement_1 = item;\n            }\n            else {\n                firstLinkRefDefElement_1.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n                item.remove();\n            }\n        });\n        if (allLinkRefDefsElement.length > 0) {\n            vditor.wysiwyg.element.insertAdjacentElement(\"beforeend\", allLinkRefDefsElement[0]);\n        }\n        // 脚注合并后添加的末尾\n        var firstFootnoteElement_1;\n        var allFootnoteElement = vditor.wysiwyg.element.querySelectorAll(\"[data-type='footnotes-block']\");\n        allFootnoteElement.forEach(function (item, index) {\n            if (index === 0) {\n                firstFootnoteElement_1 = item;\n            }\n            else {\n                firstFootnoteElement_1.insertAdjacentHTML(\"beforeend\", item.innerHTML);\n                item.remove();\n            }\n        });\n        if (allFootnoteElement.length > 0) {\n            vditor.wysiwyg.element.insertAdjacentElement(\"beforeend\", allFootnoteElement[0]);\n        }\n        // 设置光标\n        (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n        vditor.wysiwyg.element.querySelectorAll(\".vditor-wysiwyg__preview[data-render='2']\")\n            .forEach(function (item) {\n            processCodeRender(item, vditor);\n        });\n        if (event && (event.inputType === \"deleteContentBackward\" || event.inputType === \"deleteContentForward\") &&\n            vditor.options.comment.enable) {\n            vditor.wysiwyg.triggerRemoveComment(vditor);\n            vditor.options.comment.adjustTop(vditor.wysiwyg.getComments(vditor, true));\n        }\n    }\n    renderToc(vditor);\n    afterRenderEvent(vditor, {\n        enableAddUndoStack: true,\n        enableHint: true,\n        enableInput: true,\n    });\n};\n\n;// CONCATENATED MODULE: ./src/ts/util/fixBrowserBehavior.ts\nvar __makeTemplateObject = (undefined && undefined.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar fixBrowserBehavior_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar fixBrowserBehavior_generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// https://github.com/Vanessa219/vditor/issues/508 软键盘无法删除空块\nvar fixGSKeyBackspace = function (event, vditor, startContainer) {\n    if (event.keyCode === 229 && event.code === \"\" && event.key === \"Unidentified\" && vditor.currentMode !== \"sv\") {\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n        // 移动端的标点符号都显示为 299，因此需限定为空删除的条件\n        if (blockElement && blockElement.textContent.trim() === \"\") {\n            vditor[vditor.currentMode].composingLock = true;\n            return false;\n        }\n    }\n    return true;\n};\n// https://github.com/Vanessa219/vditor/issues/361 代码块后输入中文\nvar fixCJKPosition = function (range, vditor, event) {\n    if (event.key === \"Enter\" || event.key === \"Tab\" || event.key === \"Backspace\" || event.key.indexOf(\"Arrow\") > -1\n        || (0,compatibility/* isCtrl */.yl)(event) || event.key === \"Escape\" || event.shiftKey || event.altKey) {\n        return;\n    }\n    var pLiElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"P\") ||\n        (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n    if (pLiElement && (0,selection/* getSelectPosition */.im)(pLiElement, vditor[vditor.currentMode].element, range).start === 0) {\n        // https://github.com/Vanessa219/vditor/issues/1289 WKWebView切换输入法产生六分之一空格，造成光标错位\n        if (pLiElement.nodeValue) {\n            pLiElement.nodeValue = pLiElement.nodeValue.replace(/\\u2006/g, '');\n        }\n        var zwspNode = document.createTextNode(constants/* Constants.ZWSP */.g.ZWSP);\n        range.insertNode(zwspNode);\n        range.setStartAfter(zwspNode);\n    }\n};\n// https://github.com/Vanessa219/vditor/issues/381 光标在内联数学公式中无法向下移动\nvar fixCursorDownInlineMath = function (range, key) {\n    if (key === \"ArrowDown\" || key === \"ArrowUp\") {\n        var inlineElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"math-inline\") ||\n            (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"html-entity\") ||\n            (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"html-inline\");\n        if (inlineElement) {\n            if (key === \"ArrowDown\") {\n                range.setStartAfter(inlineElement.parentElement);\n            }\n            if (key === \"ArrowUp\") {\n                range.setStartBefore(inlineElement.parentElement);\n            }\n        }\n    }\n};\nvar insertEmptyBlock = function (vditor, position) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n    if (blockElement) {\n        blockElement.insertAdjacentHTML(position, \"<p data-block=\\\"0\\\">\".concat(constants/* Constants.ZWSP */.g.ZWSP, \"<wbr>\\n</p>\"));\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        highlightToolbar(vditor);\n        execAfterRender(vditor);\n    }\n};\nvar isFirstCell = function (cellElement) {\n    var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(cellElement, \"TABLE\");\n    if (tableElement && tableElement.rows[0].cells[0].isSameNode(cellElement)) {\n        return tableElement;\n    }\n    return false;\n};\nvar isLastCell = function (cellElement) {\n    var tableElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(cellElement, \"TABLE\");\n    if (tableElement && tableElement.lastElementChild.lastElementChild.lastElementChild.isSameNode(cellElement)) {\n        return tableElement;\n    }\n    return false;\n};\n// 光标设置到前一个表格中\nvar goPreviousCell = function (cellElement, range, isSelected) {\n    if (isSelected === void 0) { isSelected = true; }\n    var previousElement = cellElement.previousElementSibling;\n    if (!previousElement) {\n        if (cellElement.parentElement.previousElementSibling) {\n            previousElement = cellElement.parentElement.previousElementSibling.lastElementChild;\n        }\n        else if (cellElement.parentElement.parentElement.tagName === \"TBODY\" &&\n            cellElement.parentElement.parentElement.previousElementSibling) {\n            previousElement = cellElement.parentElement\n                .parentElement.previousElementSibling.lastElementChild.lastElementChild;\n        }\n        else {\n            previousElement = null;\n        }\n    }\n    if (previousElement) {\n        range.selectNodeContents(previousElement);\n        if (!isSelected) {\n            range.collapse(false);\n        }\n        (0,selection/* setSelectionFocus */.Hc)(range);\n    }\n    return previousElement;\n};\nvar insertAfterBlock = function (vditor, event, range, element, blockElement) {\n    var position = (0,selection/* getSelectPosition */.im)(element, vditor[vditor.currentMode].element, range);\n    if ((event.key === \"ArrowDown\" && element.textContent.trimRight().substr(position.start).indexOf(\"\\n\") === -1) ||\n        (event.key === \"ArrowRight\" && position.start >= element.textContent.trimRight().length)) {\n        var nextElement = blockElement.nextElementSibling;\n        if (!nextElement ||\n            (nextElement && (nextElement.tagName === \"TABLE\" || nextElement.getAttribute(\"data-type\")))) {\n            blockElement.insertAdjacentHTML(\"afterend\", \"<p data-block=\\\"0\\\">\".concat(constants/* Constants.ZWSP */.g.ZWSP, \"<wbr></p>\"));\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        }\n        else {\n            range.selectNodeContents(nextElement);\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n        }\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar insertBeforeBlock = function (vditor, event, range, element, blockElement) {\n    var position = (0,selection/* getSelectPosition */.im)(element, vditor[vditor.currentMode].element, range);\n    if ((event.key === \"ArrowUp\" && element.textContent.substr(0, position.start).indexOf(\"\\n\") === -1) ||\n        ((event.key === \"ArrowLeft\" || (event.key === \"Backspace\" && range.toString() === \"\")) &&\n            position.start === 0)) {\n        var previousElement = blockElement.previousElementSibling;\n        // table || code\n        if (!previousElement ||\n            (previousElement && (previousElement.tagName === \"TABLE\" || previousElement.getAttribute(\"data-type\")))) {\n            blockElement.insertAdjacentHTML(\"beforebegin\", \"<p data-block=\\\"0\\\">\".concat(constants/* Constants.ZWSP */.g.ZWSP, \"<wbr></p>\"));\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        }\n        else {\n            range.selectNodeContents(previousElement);\n            range.collapse(false);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n        }\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar listToggle = function (vditor, range, type, cancel) {\n    if (cancel === void 0) { cancel = true; }\n    var itemElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n    vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n        wbr.remove();\n    });\n    range.insertNode(document.createElement(\"wbr\"));\n    if (cancel && itemElement) {\n        // 取消\n        var pHTML = \"\";\n        for (var i = 0; i < itemElement.parentElement.childElementCount; i++) {\n            var inputElement = itemElement.parentElement.children[i].querySelector(\"input\");\n            if (inputElement) {\n                inputElement.remove();\n            }\n            pHTML += \"<p data-block=\\\"0\\\">\".concat(itemElement.parentElement.children[i].innerHTML.trimLeft(), \"</p>\");\n        }\n        itemElement.parentElement.insertAdjacentHTML(\"beforebegin\", pHTML);\n        itemElement.parentElement.remove();\n    }\n    else {\n        if (!itemElement) {\n            // 添加\n            var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-block\", \"0\");\n            if (!blockElement) {\n                vditor[vditor.currentMode].element.querySelector(\"wbr\").remove();\n                blockElement = vditor[vditor.currentMode].element.querySelector(\"p\");\n                blockElement.innerHTML = \"<wbr>\";\n            }\n            if (type === \"check\") {\n                blockElement.insertAdjacentHTML(\"beforebegin\", \"<ul data-block=\\\"0\\\"><li class=\\\"vditor-task\\\"><input type=\\\"checkbox\\\" /> \".concat(blockElement.innerHTML, \"</li></ul>\"));\n                blockElement.remove();\n            }\n            else if (type === \"list\") {\n                blockElement.insertAdjacentHTML(\"beforebegin\", \"<ul data-block=\\\"0\\\"><li>\".concat(blockElement.innerHTML, \"</li></ul>\"));\n                blockElement.remove();\n            }\n            else if (type === \"ordered-list\") {\n                blockElement.insertAdjacentHTML(\"beforebegin\", \"<ol data-block=\\\"0\\\"><li>\".concat(blockElement.innerHTML, \"</li></ol>\"));\n                blockElement.remove();\n            }\n        }\n        else {\n            // 切换\n            if (type === \"check\") {\n                itemElement.parentElement.querySelectorAll(\"li\").forEach(function (item) {\n                    item.insertAdjacentHTML(\"afterbegin\", \"<input type=\\\"checkbox\\\" />\".concat(item.textContent.indexOf(\" \") === 0 ? \"\" : \" \"));\n                    item.classList.add(\"vditor-task\");\n                });\n            }\n            else {\n                if (itemElement.querySelector(\"input\")) {\n                    itemElement.parentElement.querySelectorAll(\"li\").forEach(function (item) {\n                        item.querySelector(\"input\").remove();\n                        item.classList.remove(\"vditor-task\");\n                    });\n                }\n                var element = void 0;\n                if (type === \"list\") {\n                    element = document.createElement(\"ul\");\n                    element.setAttribute(\"data-marker\", \"*\");\n                }\n                else {\n                    element = document.createElement(\"ol\");\n                    element.setAttribute(\"data-marker\", \"1.\");\n                }\n                element.setAttribute(\"data-block\", \"0\");\n                element.setAttribute(\"data-tight\", itemElement.parentElement.getAttribute(\"data-tight\"));\n                element.innerHTML = itemElement.parentElement.innerHTML;\n                itemElement.parentElement.parentNode.replaceChild(element, itemElement.parentElement);\n            }\n        }\n    }\n};\nvar listIndent = function (vditor, liElement, range) {\n    var previousElement = liElement.previousElementSibling;\n    if (liElement && previousElement) {\n        var liElements_1 = [liElement];\n        Array.from(range.cloneContents().children).forEach(function (item, index) {\n            if (item.nodeType !== 3 && liElement && item.textContent.trim() !== \"\"\n                && liElement.getAttribute(\"data-node-id\") === item.getAttribute(\"data-node-id\")) {\n                if (index !== 0) {\n                    liElements_1.push(liElement);\n                }\n                liElement = liElement.nextElementSibling;\n            }\n        });\n        vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n            wbr.remove();\n        });\n        range.insertNode(document.createElement(\"wbr\"));\n        var liParentElement = previousElement.parentElement;\n        var liHTML_1 = \"\";\n        liElements_1.forEach(function (item) {\n            var marker = item.getAttribute(\"data-marker\");\n            if (marker.length !== 1) {\n                marker = \"1\".concat(marker.slice(-1));\n            }\n            liHTML_1 += \"<li data-node-id=\\\"\".concat(item.getAttribute(\"data-node-id\"), \"\\\" data-marker=\\\"\").concat(marker, \"\\\">\").concat(item.innerHTML, \"</li>\");\n            item.remove();\n        });\n        previousElement.insertAdjacentHTML(\"beforeend\", \"<\".concat(liParentElement.tagName, \" data-block=\\\"0\\\">\").concat(liHTML_1, \"</\").concat(liParentElement.tagName, \">\"));\n        if (vditor.currentMode === \"wysiwyg\") {\n            liParentElement.outerHTML = vditor.lute.SpinVditorDOM(liParentElement.outerHTML);\n        }\n        else {\n            liParentElement.outerHTML = vditor.lute.SpinVditorIRDOM(liParentElement.outerHTML);\n        }\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        var tempTopListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n        if (tempTopListElement) {\n            tempTopListElement.querySelectorAll(\".vditor-\".concat(vditor.currentMode, \"__preview[data-render='2']\"))\n                .forEach(function (item) {\n                processCodeRender(item, vditor);\n                if (vditor.currentMode === \"wysiwyg\") {\n                    item.previousElementSibling.setAttribute(\"style\", \"display:none\");\n                }\n            });\n        }\n        execAfterRender(vditor);\n        highlightToolbar(vditor);\n    }\n    else {\n        vditor[vditor.currentMode].element.focus();\n    }\n};\nvar listOutdent = function (vditor, liElement, range, topListElement) {\n    var liParentLiElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(liElement.parentElement, \"LI\");\n    if (liParentLiElement) {\n        vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n            wbr.remove();\n        });\n        range.insertNode(document.createElement(\"wbr\"));\n        var liParentElement = liElement.parentElement;\n        var liParentAfterElement = liParentElement.cloneNode();\n        var liElements_2 = [liElement];\n        Array.from(range.cloneContents().children).forEach(function (item, index) {\n            if (item.nodeType !== 3 && liElement && item.textContent.trim() !== \"\" &&\n                liElement.getAttribute(\"data-node-id\") === item.getAttribute(\"data-node-id\")) {\n                if (index !== 0) {\n                    liElements_2.push(liElement);\n                }\n                liElement = liElement.nextElementSibling;\n            }\n        });\n        var isMatch_1 = false;\n        var afterHTML_1 = \"\";\n        liParentElement.querySelectorAll(\"li\").forEach(function (item) {\n            if (isMatch_1) {\n                afterHTML_1 += item.outerHTML;\n                if (!item.nextElementSibling && !item.previousElementSibling) {\n                    item.parentElement.remove();\n                }\n                else {\n                    item.remove();\n                }\n            }\n            if (item.isSameNode(liElements_2[liElements_2.length - 1])) {\n                isMatch_1 = true;\n            }\n        });\n        liElements_2.reverse().forEach(function (item) {\n            liParentLiElement.insertAdjacentElement(\"afterend\", item);\n        });\n        if (afterHTML_1) {\n            liParentAfterElement.innerHTML = afterHTML_1;\n            liElements_2[0].insertAdjacentElement(\"beforeend\", liParentAfterElement);\n        }\n        if (vditor.currentMode === \"wysiwyg\") {\n            topListElement.outerHTML = vditor.lute.SpinVditorDOM(topListElement.outerHTML);\n        }\n        else {\n            topListElement.outerHTML = vditor.lute.SpinVditorIRDOM(topListElement.outerHTML);\n        }\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        var tempTopListElement = (0,hasClosest/* getTopList */.O9)(range.startContainer);\n        if (tempTopListElement) {\n            tempTopListElement.querySelectorAll(\".vditor-\".concat(vditor.currentMode, \"__preview[data-render='2']\"))\n                .forEach(function (item) {\n                processCodeRender(item, vditor);\n                if (vditor.currentMode === \"wysiwyg\") {\n                    item.previousElementSibling.setAttribute(\"style\", \"display:none\");\n                }\n            });\n        }\n        execAfterRender(vditor);\n        highlightToolbar(vditor);\n    }\n    else {\n        vditor[vditor.currentMode].element.focus();\n    }\n};\nvar setTableAlign = function (tableElement, type) {\n    var cell = getSelection().getRangeAt(0).startContainer.parentElement;\n    var columnCnt = tableElement.rows[0].cells.length;\n    var rowCnt = tableElement.rows.length;\n    var currentColumn = 0;\n    for (var i = 0; i < rowCnt; i++) {\n        for (var j = 0; j < columnCnt; j++) {\n            if (tableElement.rows[i].cells[j].isSameNode(cell)) {\n                currentColumn = j;\n                break;\n            }\n        }\n    }\n    for (var k = 0; k < rowCnt; k++) {\n        tableElement.rows[k].cells[currentColumn].setAttribute(\"align\", type);\n    }\n};\nvar isHrMD = function (text) {\n    // - _ *\n    var marker = text.trimRight().split(\"\\n\").pop();\n    if (marker === \"\") {\n        return false;\n    }\n    if (marker.replace(/ |-/g, \"\") === \"\"\n        || marker.replace(/ |_/g, \"\") === \"\"\n        || marker.replace(/ |\\*/g, \"\") === \"\") {\n        if (marker.replace(/ /g, \"\").length > 2) {\n            if (marker.indexOf(\"-\") > -1 && marker.trimLeft().indexOf(\" \") === -1\n                && text.trimRight().split(\"\\n\").length > 1) {\n                // 满足 heading\n                return false;\n            }\n            if (marker.indexOf(\"    \") === 0 || marker.indexOf(\"\\t\") === 0) {\n                // 代码块\n                return false;\n            }\n            return true;\n        }\n        return false;\n    }\n    return false;\n};\nvar isHeadingMD = function (text) {\n    // - =\n    var textArray = text.trimRight().split(\"\\n\");\n    text = textArray.pop();\n    if (text.indexOf(\"    \") === 0 || text.indexOf(\"\\t\") === 0) {\n        return false;\n    }\n    text = text.trimLeft();\n    if (text === \"\" || textArray.length === 0) {\n        return false;\n    }\n    if (text.replace(/-/g, \"\") === \"\"\n        || text.replace(/=/g, \"\") === \"\") {\n        return true;\n    }\n    return false;\n};\nvar execAfterRender = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (vditor.currentMode === \"wysiwyg\") {\n        afterRenderEvent(vditor, options);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        process_processAfterRender(vditor, options);\n    }\n    else if (vditor.currentMode === \"sv\") {\n        processAfterRender(vditor, options);\n    }\n};\nvar fixList = function (range, vditor, pElement, event) {\n    var _a;\n    var startContainer = range.startContainer;\n    var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"LI\");\n    if (liElement) {\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\" &&\n            // fix li 中有多个 P 时，在第一个 P 中换行会在下方生成新的 li\n            (!event.shiftKey && pElement && liElement.contains(pElement) && pElement.nextElementSibling)) {\n            if (liElement && !liElement.textContent.endsWith(\"\\n\")) {\n                // li 结尾需 \\n\n                liElement.insertAdjacentText(\"beforeend\", \"\\n\");\n            }\n            range.insertNode(document.createTextNode(\"\\n\\n\"));\n            range.collapse(false);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Backspace\" &&\n            !liElement.previousElementSibling && range.toString() === \"\" &&\n            (0,selection/* getSelectPosition */.im)(liElement, vditor[vditor.currentMode].element, range).start === 0) {\n            // 光标位于点和第一个字符中间时，无法删除 li 元素\n            if (liElement.nextElementSibling) {\n                liElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<p data-block=\\\"0\\\"><wbr>\".concat(liElement.innerHTML, \"</p>\"));\n                liElement.remove();\n            }\n            else {\n                liElement.parentElement.outerHTML = \"<p data-block=\\\"0\\\"><wbr>\".concat(liElement.innerHTML, \"</p>\");\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // 空列表删除后与上一级段落对齐\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Backspace\" &&\n            liElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" &&\n            range.toString() === \"\" && ((_a = liElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.tagName) === \"LI\") {\n            liElement.previousElementSibling.insertAdjacentText(\"beforeend\", \"\\n\\n\");\n            range.selectNodeContents(liElement.previousElementSibling);\n            range.collapse(false);\n            liElement.remove();\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Tab\") {\n            // 光标位于第一/零字符时，tab 用于列表的缩进\n            var isFirst = false;\n            if (range.startOffset === 0\n                && ((startContainer.nodeType === 3 && !startContainer.previousSibling)\n                    || (startContainer.nodeType !== 3 && startContainer.nodeName === \"LI\"))) {\n                // 有序/无序列表\n                isFirst = true;\n            }\n            else if (liElement.classList.contains(\"vditor-task\") && range.startOffset === 1\n                && startContainer.previousSibling.nodeType !== 3\n                && startContainer.previousSibling.tagName === \"INPUT\") {\n                // 任务列表\n                isFirst = true;\n            }\n            if (isFirst || range.toString() !== \"\") {\n                if (event.shiftKey) {\n                    listOutdent(vditor, liElement, range, liElement.parentElement);\n                }\n                else {\n                    listIndent(vditor, liElement, range);\n                }\n                event.preventDefault();\n                return true;\n            }\n        }\n    }\n    return false;\n};\n// tab 处理: block code render, table, 列表第一个字符中的 tab 处理单独写在上面\nvar fixTab = function (vditor, range, event) {\n    if (vditor.options.tab && event.key === \"Tab\") {\n        if (event.shiftKey) {\n            // TODO shift+tab\n        }\n        else {\n            if (range.toString() === \"\") {\n                range.insertNode(document.createTextNode(vditor.options.tab));\n                range.collapse(false);\n            }\n            else {\n                range.extractContents();\n                range.insertNode(document.createTextNode(vditor.options.tab));\n                range.collapse(false);\n            }\n        }\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        execAfterRender(vditor);\n        event.preventDefault();\n        return true;\n    }\n};\nvar fixMarkdown = function (event, vditor, pElement, range) {\n    if (!pElement) {\n        return;\n    }\n    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\") {\n        var pText = String.raw(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\", \"\"], [\"\", \"\"])), pElement.textContent).replace(/\\\\\\|/g, \"\").trim();\n        var pTextList = pText.split(\"|\");\n        if (pText.startsWith(\"|\") && pText.endsWith(\"|\") && pTextList.length > 3) {\n            // table 自动完成\n            var tableHeaderMD = pTextList.map(function () { return \"---\"; }).join(\"|\");\n            tableHeaderMD =\n                pElement.textContent + \"\\n\" + tableHeaderMD.substring(3, tableHeaderMD.length - 3) + \"\\n|<wbr>\";\n            pElement.outerHTML = vditor.lute.SpinVditorDOM(tableHeaderMD);\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // hr 渲染\n        if (isHrMD(pElement.innerHTML) && pElement.previousElementSibling) {\n            // 软换行后 hr 前有内容\n            var pInnerHTML = \"\";\n            var innerHTMLList = pElement.innerHTML.trimRight().split(\"\\n\");\n            if (innerHTMLList.length > 1) {\n                innerHTMLList.pop();\n                pInnerHTML = \"<p data-block=\\\"0\\\">\".concat(innerHTMLList.join(\"\\n\"), \"</p>\");\n            }\n            pElement.insertAdjacentHTML(\"afterend\", \"\".concat(pInnerHTML, \"<hr data-block=\\\"0\\\"><p data-block=\\\"0\\\"><wbr>\\n</p>\"));\n            pElement.remove();\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (isHeadingMD(pElement.innerHTML)) {\n            // heading 渲染\n            if (vditor.currentMode === \"wysiwyg\") {\n                pElement.outerHTML = vditor.lute.SpinVditorDOM(pElement.innerHTML + '<p data-block=\"0\"><wbr>\\n</p>');\n            }\n            else {\n                pElement.outerHTML = vditor.lute.SpinVditorIRDOM(pElement.innerHTML + '<p data-block=\"0\"><wbr>\\n</p>');\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // 软换行会被切割 https://github.com/Vanessa219/vditor/issues/220\n    if (range.collapsed && pElement.previousElementSibling && event.key === \"Backspace\" &&\n        !(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && !event.shiftKey &&\n        pElement.textContent.trimRight().split(\"\\n\").length > 1 &&\n        (0,selection/* getSelectPosition */.im)(pElement, vditor[vditor.currentMode].element, range).start === 0) {\n        var lastElement = (0,hasClosest/* getLastNode */.DX)(pElement.previousElementSibling);\n        if (!lastElement.textContent.endsWith(\"\\n\")) {\n            lastElement.textContent = lastElement.textContent + \"\\n\";\n        }\n        lastElement.parentElement.insertAdjacentHTML(\"beforeend\", \"<wbr>\".concat(pElement.innerHTML));\n        pElement.remove();\n        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n        return false;\n    }\n    return false;\n};\nvar insertRow = function (vditor, range, cellElement) {\n    var rowHTML = \"\";\n    for (var m = 0; m < cellElement.parentElement.childElementCount; m++) {\n        rowHTML += \"<td align=\\\"\".concat(cellElement.parentElement.children[m].getAttribute(\"align\"), \"\\\"> </td>\");\n    }\n    if (cellElement.tagName === \"TH\") {\n        cellElement.parentElement.parentElement.insertAdjacentHTML(\"afterend\", \"<tbody><tr>\".concat(rowHTML, \"</tr></tbody>\"));\n    }\n    else {\n        cellElement.parentElement.insertAdjacentHTML(\"afterend\", \"<tr>\".concat(rowHTML, \"</tr>\"));\n    }\n    execAfterRender(vditor);\n};\nvar insertRowAbove = function (vditor, range, cellElement) {\n    var rowHTML = \"\";\n    for (var m = 0; m < cellElement.parentElement.childElementCount; m++) {\n        if (cellElement.tagName === \"TH\") {\n            rowHTML += \"<th align=\\\"\".concat(cellElement.parentElement.children[m].getAttribute(\"align\"), \"\\\"> </th>\");\n        }\n        else {\n            rowHTML += \"<td align=\\\"\".concat(cellElement.parentElement.children[m].getAttribute(\"align\"), \"\\\"> </td>\");\n        }\n    }\n    if (cellElement.tagName === \"TH\") {\n        cellElement.parentElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<thead><tr>\".concat(rowHTML, \"</tr></thead>\"));\n        range.insertNode(document.createElement(\"wbr\"));\n        var theadHTML = cellElement.parentElement.innerHTML.replace(/<th>/g, \"<td>\").replace(/<\\/th>/g, \"</td>\");\n        cellElement.parentElement.parentElement.nextElementSibling.insertAdjacentHTML(\"afterbegin\", theadHTML);\n        cellElement.parentElement.parentElement.remove();\n        (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n    }\n    else {\n        cellElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<tr>\".concat(rowHTML, \"</tr>\"));\n    }\n    execAfterRender(vditor);\n};\nvar insertColumn = function (vditor, tableElement, cellElement, type) {\n    if (type === void 0) { type = \"afterend\"; }\n    var index = 0;\n    var previousElement = cellElement.previousElementSibling;\n    while (previousElement) {\n        index++;\n        previousElement = previousElement.previousElementSibling;\n    }\n    for (var i = 0; i < tableElement.rows.length; i++) {\n        if (i === 0) {\n            tableElement.rows[i].cells[index].insertAdjacentHTML(type, \"<th> </th>\");\n        }\n        else {\n            tableElement.rows[i].cells[index].insertAdjacentHTML(type, \"<td> </td>\");\n        }\n    }\n    execAfterRender(vditor);\n};\nvar deleteRow = function (vditor, range, cellElement) {\n    if (cellElement.tagName === \"TD\") {\n        var tbodyElement = cellElement.parentElement.parentElement;\n        if (cellElement.parentElement.previousElementSibling) {\n            range.selectNodeContents(cellElement.parentElement.previousElementSibling.lastElementChild);\n        }\n        else {\n            range.selectNodeContents(tbodyElement.previousElementSibling.lastElementChild.lastElementChild);\n        }\n        if (tbodyElement.childElementCount === 1) {\n            tbodyElement.remove();\n        }\n        else {\n            cellElement.parentElement.remove();\n        }\n        range.collapse(false);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        execAfterRender(vditor);\n    }\n};\nvar deleteColumn = function (vditor, range, tableElement, cellElement) {\n    var index = 0;\n    var previousElement = cellElement.previousElementSibling;\n    while (previousElement) {\n        index++;\n        previousElement = previousElement.previousElementSibling;\n    }\n    if (cellElement.previousElementSibling || cellElement.nextElementSibling) {\n        range.selectNodeContents(cellElement.previousElementSibling || cellElement.nextElementSibling);\n        range.collapse(true);\n    }\n    for (var i = 0; i < tableElement.rows.length; i++) {\n        var cells = tableElement.rows[i].cells;\n        if (cells.length === 1) {\n            tableElement.remove();\n            highlightToolbar(vditor);\n            break;\n        }\n        cells[index].remove();\n    }\n    (0,selection/* setSelectionFocus */.Hc)(range);\n    execAfterRender(vditor);\n};\nvar fixTable = function (vditor, event, range) {\n    var startContainer = range.startContainer;\n    var cellElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TD\") ||\n        (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"TH\");\n    if (cellElement) {\n        // 换行或软换行：在 cell 中添加 br\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\") {\n            if (!cellElement.lastElementChild ||\n                (cellElement.lastElementChild && (!cellElement.lastElementChild.isSameNode(cellElement.lastChild) ||\n                    cellElement.lastElementChild.tagName !== \"BR\"))) {\n                cellElement.insertAdjacentHTML(\"beforeend\", \"<br>\");\n            }\n            var brElement = document.createElement(\"br\");\n            range.insertNode(brElement);\n            range.setStartAfter(brElement);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // tab：光标移向下一个 cell\n        if (event.key === \"Tab\") {\n            if (event.shiftKey) {\n                // shift + tab 光标移动到前一个 cell\n                goPreviousCell(cellElement, range);\n                event.preventDefault();\n                return true;\n            }\n            var nextElement = cellElement.nextElementSibling;\n            if (!nextElement) {\n                if (cellElement.parentElement.nextElementSibling) {\n                    nextElement = cellElement.parentElement.nextElementSibling.firstElementChild;\n                }\n                else if (cellElement.parentElement.parentElement.tagName === \"THEAD\" &&\n                    cellElement.parentElement.parentElement.nextElementSibling) {\n                    nextElement =\n                        cellElement.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild;\n                }\n                else {\n                    nextElement = null;\n                }\n            }\n            if (nextElement) {\n                range.selectNodeContents(nextElement);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n            event.preventDefault();\n            return true;\n        }\n        var tableElement = cellElement.parentElement.parentElement.parentElement;\n        if (event.key === \"ArrowUp\") {\n            event.preventDefault();\n            if (cellElement.tagName === \"TH\") {\n                if (tableElement.previousElementSibling) {\n                    range.selectNodeContents(tableElement.previousElementSibling);\n                    range.collapse(false);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                }\n                else {\n                    insertEmptyBlock(vditor, \"beforebegin\");\n                }\n                return true;\n            }\n            var m = 0;\n            var trElement = cellElement.parentElement;\n            for (; m < trElement.cells.length; m++) {\n                if (trElement.cells[m].isSameNode(cellElement)) {\n                    break;\n                }\n            }\n            var previousElement = trElement.previousElementSibling;\n            if (!previousElement) {\n                previousElement = trElement.parentElement.previousElementSibling.firstChild;\n            }\n            range.selectNodeContents(previousElement.cells[m]);\n            range.collapse(false);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            return true;\n        }\n        if (event.key === \"ArrowDown\") {\n            event.preventDefault();\n            var trElement = cellElement.parentElement;\n            if (!trElement.nextElementSibling && cellElement.tagName === \"TD\") {\n                if (tableElement.nextElementSibling) {\n                    range.selectNodeContents(tableElement.nextElementSibling);\n                    range.collapse(true);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                }\n                else {\n                    insertEmptyBlock(vditor, \"afterend\");\n                }\n                return true;\n            }\n            var m = 0;\n            for (; m < trElement.cells.length; m++) {\n                if (trElement.cells[m].isSameNode(cellElement)) {\n                    break;\n                }\n            }\n            var nextElement = trElement.nextElementSibling;\n            if (!nextElement) {\n                nextElement = trElement.parentElement.nextElementSibling.firstChild;\n            }\n            range.selectNodeContents(nextElement.cells[m]);\n            range.collapse(true);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            return true;\n        }\n        // focus row input, only wysiwyg\n        if (vditor.currentMode === \"wysiwyg\" &&\n            !(0,compatibility/* isCtrl */.yl)(event) && event.key === \"Enter\" && !event.shiftKey && event.altKey) {\n            var inputElement = vditor.wysiwyg.popover.querySelector(\".vditor-input\");\n            inputElement.focus();\n            inputElement.select();\n            event.preventDefault();\n            return true;\n        }\n        // Backspace：光标移动到前一个 cell\n        if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Backspace\"\n            && range.startOffset === 0 && range.toString() === \"\") {\n            var previousCellElement = goPreviousCell(cellElement, range, false);\n            if (!previousCellElement && tableElement) {\n                if (tableElement.textContent.trim() === \"\") {\n                    tableElement.outerHTML = \"<p data-block=\\\"0\\\"><wbr>\\n</p>\";\n                    (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n                }\n                else {\n                    range.setStartBefore(tableElement);\n                    range.collapse(true);\n                }\n                execAfterRender(vditor);\n            }\n            event.preventDefault();\n            return true;\n        }\n        // 上方新添加一行\n        if (matchHotKey(\"⇧⌘F\", event)) {\n            insertRowAbove(vditor, range, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 下方新添加一行 https://github.com/Vanessa219/vditor/issues/46\n        if (matchHotKey(\"⌘=\", event)) {\n            insertRow(vditor, range, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 左方新添加一列\n        if (matchHotKey(\"⇧⌘G\", event)) {\n            insertColumn(vditor, tableElement, cellElement, \"beforebegin\");\n            event.preventDefault();\n            return true;\n        }\n        // 后方新添加一列\n        if (matchHotKey(\"⇧⌘=\", event)) {\n            insertColumn(vditor, tableElement, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 删除当前行\n        if (matchHotKey(\"⌘-\", event)) {\n            deleteRow(vditor, range, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 删除当前列\n        if (matchHotKey(\"⇧⌘-\", event)) {\n            deleteColumn(vditor, range, tableElement, cellElement);\n            event.preventDefault();\n            return true;\n        }\n        // 剧左\n        if (matchHotKey(\"⇧⌘L\", event)) {\n            if (vditor.currentMode === \"ir\") {\n                setTableAlign(tableElement, \"left\");\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"left\"]');\n                if (itemElement) {\n                    itemElement.click();\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        }\n        // 剧中\n        if (matchHotKey(\"⇧⌘C\", event)) {\n            if (vditor.currentMode === \"ir\") {\n                setTableAlign(tableElement, \"center\");\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"center\"]');\n                if (itemElement) {\n                    itemElement.click();\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        }\n        // 剧右\n        if (matchHotKey(\"⇧⌘R\", event)) {\n            if (vditor.currentMode === \"ir\") {\n                setTableAlign(tableElement, \"right\");\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n            else {\n                var itemElement = vditor.wysiwyg.popover.querySelector('[data-type=\"right\"]');\n                if (itemElement) {\n                    itemElement.click();\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        }\n    }\n    return false;\n};\nvar fixCodeBlock = function (vditor, event, codeRenderElement, range) {\n    // 行级代码块中 command + a，近对当前代码块进行全选\n    if (codeRenderElement.tagName === \"PRE\" && matchHotKey(\"⌘A\", event)) {\n        range.selectNodeContents(codeRenderElement.firstElementChild);\n        event.preventDefault();\n        return true;\n    }\n    // tab\n    // TODO shift + tab, shift and 选中文字\n    if (vditor.options.tab && event.key === \"Tab\" && !event.shiftKey && range.toString() === \"\") {\n        range.insertNode(document.createTextNode(vditor.options.tab));\n        range.collapse(false);\n        execAfterRender(vditor);\n        event.preventDefault();\n        return true;\n    }\n    // Backspace: 光标位于第零个字符，仅删除代码块标签\n    if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey) {\n        var codePosition = (0,selection/* getSelectPosition */.im)(codeRenderElement, vditor[vditor.currentMode].element, range);\n        if ((codePosition.start === 0 ||\n            (codePosition.start === 1 && codeRenderElement.innerText === \"\\n\")) // 空代码块，光标在 \\n 后\n            && range.toString() === \"\") {\n            codeRenderElement.parentElement.outerHTML =\n                \"<p data-block=\\\"0\\\"><wbr>\".concat(codeRenderElement.firstElementChild.innerHTML, \"</p>\");\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    // 换行\n    if (!(0,compatibility/* isCtrl */.yl)(event) && !event.altKey && event.key === \"Enter\") {\n        if (!codeRenderElement.firstElementChild.textContent.endsWith(\"\\n\")) {\n            codeRenderElement.firstElementChild.insertAdjacentText(\"beforeend\", \"\\n\");\n        }\n        range.extractContents();\n        range.insertNode(document.createTextNode(\"\\n\"));\n        range.collapse(false);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        if (!(0,compatibility/* isFirefox */.vU)()) {\n            if (vditor.currentMode === \"wysiwyg\") {\n                input_input(vditor, range);\n            }\n            else {\n                input(vditor, range);\n            }\n        }\n        scrollCenter(vditor);\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar fixBlockquote = function (vditor, range, event, pElement) {\n    var startContainer = range.startContainer;\n    var blockquoteElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(startContainer, \"BLOCKQUOTE\");\n    if (blockquoteElement && range.toString() === \"\") {\n        if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey &&\n            (0,selection/* getSelectPosition */.im)(blockquoteElement, vditor[vditor.currentMode].element, range).start === 0) {\n            // Backspace: 光标位于引用中的第零个字符，仅删除引用标签\n            range.insertNode(document.createElement(\"wbr\"));\n            blockquoteElement.outerHTML = blockquoteElement.innerHTML;\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (pElement && event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey\n            && pElement.parentElement.tagName === \"BLOCKQUOTE\") {\n            // Enter: 空行回车应逐层跳出\n            var isEmpty = false;\n            if (pElement.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\\n\" ||\n                pElement.innerHTML.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                // 空 P\n                isEmpty = true;\n                pElement.remove();\n            }\n            else if (pElement.innerHTML.endsWith(\"\\n\\n\") &&\n                (0,selection/* getSelectPosition */.im)(pElement, vditor[vditor.currentMode].element, range).start ===\n                    pElement.textContent.length - 1) {\n                // 软换行\n                pElement.innerHTML = pElement.innerHTML.substr(0, pElement.innerHTML.length - 2);\n                isEmpty = true;\n            }\n            if (isEmpty) {\n                // 需添加零宽字符，否则的话无法记录 undo\n                blockquoteElement.insertAdjacentHTML(\"afterend\", \"<p data-block=\\\"0\\\">\".concat(constants/* Constants.ZWSP */.g.ZWSP, \"<wbr>\\n</p>\"));\n                (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n                execAfterRender(vditor);\n                event.preventDefault();\n                return true;\n            }\n        }\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(startContainer);\n        if (vditor.currentMode === \"wysiwyg\" && blockElement && matchHotKey(\"⇧⌘;\", event)) {\n            // 插入 blockquote\n            range.insertNode(document.createElement(\"wbr\"));\n            blockElement.outerHTML = \"<blockquote data-block=\\\"0\\\">\".concat(blockElement.outerHTML, \"</blockquote>\");\n            (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n            afterRenderEvent(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (insertAfterBlock(vditor, event, range, blockquoteElement, blockquoteElement)) {\n            return true;\n        }\n        if (insertBeforeBlock(vditor, event, range, blockquoteElement, blockquoteElement)) {\n            return true;\n        }\n    }\n    return false;\n};\nvar fixTask = function (vditor, range, event) {\n    var startContainer = range.startContainer;\n    var taskItemElement = (0,hasClosest/* hasClosestByClassName */.fb)(startContainer, \"vditor-task\");\n    if (taskItemElement) {\n        if (matchHotKey(\"⇧⌘J\", event)) {\n            // ctrl + shift: toggle checked\n            var inputElement = taskItemElement.firstElementChild;\n            if (inputElement.checked) {\n                inputElement.removeAttribute(\"checked\");\n            }\n            else {\n                inputElement.setAttribute(\"checked\", \"checked\");\n            }\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        // Backspace: 在选择框前进行删除\n        if (event.key === \"Backspace\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && range.toString() === \"\"\n            && range.startOffset === 1\n            && ((startContainer.nodeType === 3 && startContainer.previousSibling &&\n                startContainer.previousSibling.tagName === \"INPUT\")\n                || startContainer.nodeType !== 3)) {\n            var previousElement = taskItemElement.previousElementSibling;\n            taskItemElement.querySelector(\"input\").remove();\n            if (previousElement) {\n                var lastNode = (0,hasClosest/* getLastNode */.DX)(previousElement);\n                lastNode.parentElement.insertAdjacentHTML(\"beforeend\", \"<wbr>\" + taskItemElement.innerHTML.trim());\n                taskItemElement.remove();\n            }\n            else {\n                taskItemElement.parentElement.insertAdjacentHTML(\"beforebegin\", \"<p data-block=\\\"0\\\"><wbr>\".concat(taskItemElement.innerHTML.trim() || \"\\n\", \"</p>\"));\n                if (taskItemElement.nextElementSibling) {\n                    taskItemElement.remove();\n                }\n                else {\n                    taskItemElement.parentElement.remove();\n                }\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n        if (event.key === \"Enter\" && !(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey) {\n            if (taskItemElement.textContent.trim() === \"\") {\n                // 当前任务列表无文字\n                if ((0,hasClosest/* hasClosestByClassName */.fb)(taskItemElement.parentElement, \"vditor-task\")) {\n                    // 为子元素时，需进行反向缩进\n                    var topListElement = (0,hasClosest/* getTopList */.O9)(startContainer);\n                    if (topListElement) {\n                        listOutdent(vditor, taskItemElement, range, topListElement);\n                    }\n                }\n                else {\n                    // 仅有一级任务列表\n                    if (taskItemElement.nextElementSibling) {\n                        // 任务列表下方还有元素，需要使用用段落隔断\n                        var afterHTML_2 = \"\";\n                        var beforeHTML_1 = \"\";\n                        var isAfter_1 = false;\n                        Array.from(taskItemElement.parentElement.children).forEach(function (taskItem) {\n                            if (taskItemElement.isSameNode(taskItem)) {\n                                isAfter_1 = true;\n                            }\n                            else {\n                                if (isAfter_1) {\n                                    afterHTML_2 += taskItem.outerHTML;\n                                }\n                                else {\n                                    beforeHTML_1 += taskItem.outerHTML;\n                                }\n                            }\n                        });\n                        var parentTagName = taskItemElement.parentElement.tagName;\n                        var dataMarker = taskItemElement.parentElement.tagName === \"OL\" ? \"\" : \" data-marker=\\\"\".concat(taskItemElement.parentElement.getAttribute(\"data-marker\"), \"\\\"\");\n                        var startAttribute = \"\";\n                        if (beforeHTML_1) {\n                            startAttribute = taskItemElement.parentElement.tagName === \"UL\" ? \"\" : \" start=\\\"1\\\"\";\n                            beforeHTML_1 = \"<\".concat(parentTagName, \" data-tight=\\\"true\\\"\").concat(dataMarker, \" data-block=\\\"0\\\">\").concat(beforeHTML_1, \"</\").concat(parentTagName, \">\");\n                        }\n                        // <p data-block=\"0\">\\n<wbr></p> => <p data-block=\"0\"><wbr>\\n</p>\n                        // https://github.com/Vanessa219/vditor/issues/430\n                        taskItemElement.parentElement.outerHTML = \"\".concat(beforeHTML_1, \"<p data-block=\\\"0\\\"><wbr>\\n</p><\").concat(parentTagName, \"\\n data-tight=\\\"true\\\"\").concat(dataMarker, \" data-block=\\\"0\\\"\").concat(startAttribute, \">\").concat(afterHTML_2, \"</\").concat(parentTagName, \">\");\n                    }\n                    else {\n                        // 任务列表下方无任务列表元素\n                        taskItemElement.parentElement.insertAdjacentHTML(\"afterend\", \"<p data-block=\\\"0\\\"><wbr>\\n</p>\");\n                        if (taskItemElement.parentElement.querySelectorAll(\"li\").length === 1) {\n                            // 任务列表仅有一项时，使用 p 元素替换\n                            taskItemElement.parentElement.remove();\n                        }\n                        else {\n                            // 任务列表有多项时，当前任务列表位于最后一项，移除该任务列表\n                            taskItemElement.remove();\n                        }\n                    }\n                }\n            }\n            else if (startContainer.nodeType !== 3 && range.startOffset === 0 &&\n                startContainer.firstChild.tagName === \"INPUT\") {\n                // 光标位于 input 之前\n                range.setStart(startContainer.childNodes[1], 1);\n            }\n            else {\n                // 当前任务列表有文字，光标后的文字需添加到新任务列表中\n                range.setEndAfter(taskItemElement.lastChild);\n                taskItemElement.insertAdjacentHTML(\"afterend\", \"<li class=\\\"vditor-task\\\" data-marker=\\\"\".concat(taskItemElement.getAttribute(\"data-marker\"), \"\\\"><input type=\\\"checkbox\\\"> <wbr></li>\"));\n                document.querySelector(\"wbr\").after(range.extractContents());\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            scrollCenter(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    return false;\n};\nvar fixDelete = function (vditor, range, event, pElement) {\n    if (range.startContainer.nodeType !== 3) {\n        // 光标位于 hr 前，hr 前有内容\n        var rangeElement = range.startContainer.children[range.startOffset];\n        if (rangeElement && rangeElement.tagName === \"HR\") {\n            range.selectNodeContents(rangeElement.previousElementSibling);\n            range.collapse(false);\n            event.preventDefault();\n            return true;\n        }\n    }\n    if (pElement) {\n        var previousElement = pElement.previousElementSibling;\n        if (previousElement && (0,selection/* getSelectPosition */.im)(pElement, vditor[vditor.currentMode].element, range).start === 0 &&\n            (((0,compatibility/* isFirefox */.vU)() && previousElement.tagName === \"HR\") || previousElement.tagName === \"TABLE\")) {\n            if (previousElement.tagName === \"TABLE\") {\n                // table 后删除 https://github.com/Vanessa219/vditor/issues/243\n                var lastCellElement = previousElement.lastElementChild.lastElementChild.lastElementChild;\n                lastCellElement.innerHTML =\n                    lastCellElement.innerHTML.trimLeft() + \"<wbr>\" + pElement.textContent.trim();\n                pElement.remove();\n            }\n            else {\n                // 光标位于 hr 后进行删除\n                previousElement.remove();\n            }\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n            execAfterRender(vditor);\n            event.preventDefault();\n            return true;\n        }\n    }\n    return false;\n};\nvar fixHR = function (range) {\n    if ((0,compatibility/* isFirefox */.vU)() && range.startContainer.nodeType !== 3 &&\n        range.startContainer.tagName === \"HR\") {\n        range.setStartBefore(range.startContainer);\n    }\n};\n// firefox https://github.com/Vanessa219/vditor/issues/407\nvar fixFirefoxArrowUpTable = function (event, blockElement, range) {\n    var _a, _b;\n    if (!(0,compatibility/* isFirefox */.vU)()) {\n        return false;\n    }\n    if (event.key === \"ArrowUp\" && blockElement && ((_a = blockElement.previousElementSibling) === null || _a === void 0 ? void 0 : _a.tagName) === \"TABLE\") {\n        var tableElement = blockElement.previousElementSibling;\n        range.selectNodeContents(tableElement.rows[tableElement.rows.length - 1].lastElementChild);\n        range.collapse(false);\n        event.preventDefault();\n        return true;\n    }\n    if (event.key === \"ArrowDown\" && blockElement && ((_b = blockElement.nextElementSibling) === null || _b === void 0 ? void 0 : _b.tagName) === \"TABLE\") {\n        range.selectNodeContents(blockElement.nextElementSibling.rows[0].cells[0]);\n        range.collapse(true);\n        event.preventDefault();\n        return true;\n    }\n    return false;\n};\nvar paste = function (vditor, event, callback) { return fixBrowserBehavior_awaiter(void 0, void 0, void 0, function () {\n    var textHTML, textPlain, files, renderers, renderLinkDest, doc, height, code, codeElement, position, tempElement, fileReader_1, file_1, range, blockElement, range;\n    var _a;\n    return fixBrowserBehavior_generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                if (vditor[vditor.currentMode].element.getAttribute(\"contenteditable\") !== \"true\") {\n                    return [2 /*return*/];\n                }\n                event.stopPropagation();\n                event.preventDefault();\n                if (\"clipboardData\" in event) {\n                    textHTML = event.clipboardData.getData(\"text/html\");\n                    textPlain = event.clipboardData.getData(\"text/plain\");\n                    files = event.clipboardData.files;\n                }\n                else {\n                    textHTML = event.dataTransfer.getData(\"text/html\");\n                    textPlain = event.dataTransfer.getData(\"text/plain\");\n                    if (event.dataTransfer.types.includes(\"Files\")) {\n                        files = event.dataTransfer.items;\n                    }\n                }\n                renderers = {};\n                renderLinkDest = function (node, entering) {\n                    if (!entering) {\n                        return [\"\", Lute.WalkContinue];\n                    }\n                    if (vditor.options.upload.renderLinkDest) {\n                        return vditor.options.upload.renderLinkDest(vditor, node, entering);\n                    }\n                    var src = node.TokensStr();\n                    if (node.__internal_object__.Parent.Type === 34 && src && src.indexOf(\"file://\") === -1 &&\n                        vditor.options.upload.linkToImgUrl) {\n                        var xhr_1 = new XMLHttpRequest();\n                        xhr_1.open(\"POST\", vditor.options.upload.linkToImgUrl);\n                        if (vditor.options.upload.token) {\n                            xhr_1.setRequestHeader(\"X-Upload-Token\", vditor.options.upload.token);\n                        }\n                        if (vditor.options.upload.withCredentials) {\n                            xhr_1.withCredentials = true;\n                        }\n                        setHeaders(vditor, xhr_1);\n                        xhr_1.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\");\n                        xhr_1.onreadystatechange = function () {\n                            if (xhr_1.readyState === XMLHttpRequest.DONE) {\n                                if (xhr_1.status === 200) {\n                                    var responseText = xhr_1.responseText;\n                                    if (vditor.options.upload.linkToImgFormat) {\n                                        responseText = vditor.options.upload.linkToImgFormat(xhr_1.responseText);\n                                    }\n                                    var responseJSON_1 = JSON.parse(responseText);\n                                    if (responseJSON_1.code !== 0) {\n                                        vditor.tip.show(responseJSON_1.msg);\n                                        return;\n                                    }\n                                    var original_1 = responseJSON_1.data.originalURL;\n                                    if (vditor.currentMode === \"sv\") {\n                                        vditor.sv.element.querySelectorAll(\".vditor-sv__marker--link\")\n                                            .forEach(function (item) {\n                                            if (item.textContent === original_1) {\n                                                item.textContent = responseJSON_1.data.url;\n                                            }\n                                        });\n                                    }\n                                    else {\n                                        var imgElement = vditor[vditor.currentMode].element.querySelector(\"img[src=\\\"\".concat(original_1, \"\\\"]\"));\n                                        imgElement.src = responseJSON_1.data.url;\n                                        if (vditor.currentMode === \"ir\") {\n                                            imgElement.previousElementSibling.previousElementSibling.innerHTML =\n                                                responseJSON_1.data.url;\n                                        }\n                                    }\n                                    execAfterRender(vditor);\n                                }\n                                else {\n                                    vditor.tip.show(xhr_1.responseText);\n                                }\n                                if (vditor.options.upload.linkToImgCallback) {\n                                    vditor.options.upload.linkToImgCallback(xhr_1.responseText);\n                                }\n                            }\n                        };\n                        xhr_1.send(JSON.stringify({ url: src }));\n                    }\n                    if (vditor.currentMode === \"ir\") {\n                        return [\"<span class=\\\"vditor-ir__marker vditor-ir__marker--link\\\">\".concat(Lute.EscapeHTMLStr(src), \"</span>\"), Lute.WalkContinue];\n                    }\n                    else if (vditor.currentMode === \"wysiwyg\") {\n                        return [\"\", Lute.WalkContinue];\n                    }\n                    else {\n                        return [\"<span class=\\\"vditor-sv__marker--link\\\">\".concat(Lute.EscapeHTMLStr(src), \"</span>\"), Lute.WalkContinue];\n                    }\n                };\n                // 浏览器地址栏拷贝处理\n                if (textHTML.replace(/&amp;/g, \"&\").replace(/<(|\\/)(html|body|meta)[^>]*?>/ig, \"\").trim() ===\n                    \"<a href=\\\"\".concat(textPlain, \"\\\">\").concat(textPlain, \"</a>\") ||\n                    textHTML.replace(/&amp;/g, \"&\").replace(/<(|\\/)(html|body|meta)[^>]*?>/ig, \"\").trim() ===\n                        \"<!--StartFragment--><a href=\\\"\".concat(textPlain, \"\\\">\").concat(textPlain, \"</a><!--EndFragment-->\")) {\n                    textHTML = \"\";\n                }\n                doc = new DOMParser().parseFromString(textHTML, \"text/html\");\n                if (doc.body) {\n                    textHTML = doc.body.innerHTML;\n                }\n                textHTML = Lute.Sanitize(textHTML);\n                vditor.wysiwyg.getComments(vditor);\n                height = vditor[vditor.currentMode].element.scrollHeight;\n                code = processPasteCode(textHTML, textPlain, vditor.currentMode);\n                codeElement = vditor.currentMode === \"sv\" ?\n                    (0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"code-block\") :\n                    (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"CODE\");\n                if (!codeElement) return [3 /*break*/, 1];\n                // 粘贴在代码位置\n                if (vditor.currentMode === \"sv\") {\n                    document.execCommand(\"insertHTML\", false, textPlain.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\"));\n                }\n                else {\n                    position = (0,selection/* getSelectPosition */.im)(event.target, vditor[vditor.currentMode].element);\n                    if (codeElement.parentElement.tagName !== \"PRE\") {\n                        // https://github.com/Vanessa219/vditor/issues/463\n                        textPlain += constants/* Constants.ZWSP */.g.ZWSP;\n                    }\n                    codeElement.textContent = codeElement.textContent.substring(0, position.start)\n                        + textPlain + codeElement.textContent.substring(position.end);\n                    (0,selection/* setSelectionByPosition */.$j)(position.start + textPlain.length, position.start + textPlain.length, codeElement.parentElement);\n                    if ((_a = codeElement.parentElement) === null || _a === void 0 ? void 0 : _a.nextElementSibling.classList.contains(\"vditor-\".concat(vditor.currentMode, \"__preview\"))) {\n                        codeElement.parentElement.nextElementSibling.innerHTML = codeElement.outerHTML;\n                        processCodeRender(codeElement.parentElement.nextElementSibling, vditor);\n                    }\n                }\n                return [3 /*break*/, 8];\n            case 1:\n                if (!code) return [3 /*break*/, 2];\n                callback.pasteCode(code);\n                return [3 /*break*/, 8];\n            case 2:\n                if (!(textHTML.trim() !== \"\")) return [3 /*break*/, 3];\n                tempElement = document.createElement(\"div\");\n                tempElement.innerHTML = textHTML;\n                tempElement.querySelectorAll(\"[style]\").forEach(function (e) {\n                    e.removeAttribute(\"style\");\n                });\n                tempElement.querySelectorAll(\".vditor-copy\").forEach(function (e) {\n                    e.remove();\n                });\n                if (vditor.currentMode === \"ir\") {\n                    renderers.HTML2VditorIRDOM = { renderLinkDest: renderLinkDest };\n                    vditor.lute.SetJSRenderers({ renderers: renderers });\n                    (0,selection/* insertHTML */.oC)(vditor.lute.HTML2VditorIRDOM(tempElement.innerHTML), vditor);\n                }\n                else if (vditor.currentMode === \"wysiwyg\") {\n                    renderers.HTML2VditorDOM = { renderLinkDest: renderLinkDest };\n                    vditor.lute.SetJSRenderers({ renderers: renderers });\n                    (0,selection/* insertHTML */.oC)(vditor.lute.HTML2VditorDOM(tempElement.innerHTML), vditor);\n                }\n                else {\n                    renderers.Md2VditorSVDOM = { renderLinkDest: renderLinkDest };\n                    vditor.lute.SetJSRenderers({ renderers: renderers });\n                    processPaste(vditor, vditor.lute.HTML2Md(tempElement.innerHTML).trimRight());\n                }\n                vditor.outline.render(vditor);\n                return [3 /*break*/, 8];\n            case 3:\n                if (!(files.length > 0)) return [3 /*break*/, 7];\n                if (!(vditor.options.upload.url || vditor.options.upload.handler)) return [3 /*break*/, 5];\n                return [4 /*yield*/, uploadFiles(vditor, files)];\n            case 4:\n                _b.sent();\n                return [3 /*break*/, 6];\n            case 5:\n                fileReader_1 = new FileReader();\n                if (\"clipboardData\" in event) {\n                    files = event.clipboardData.files;\n                    file_1 = files[0];\n                }\n                else if (event.dataTransfer.types.includes(\"Files\")) {\n                    files = event.dataTransfer.items;\n                    file_1 = files[0].getAsFile();\n                }\n                if (file_1 && file_1.type.startsWith(\"image\")) {\n                    fileReader_1.readAsDataURL(file_1);\n                    fileReader_1.onload = function () {\n                        var imgHTML = '';\n                        if (vditor.currentMode === \"wysiwyg\") {\n                            imgHTML += \"<img alt=\\\"\".concat(file_1.name, \"\\\" src=\\\"\").concat(fileReader_1.result.toString(), \"\\\">\\n\");\n                        }\n                        else {\n                            imgHTML += \"![\".concat(file_1.name, \"](\").concat(fileReader_1.result.toString(), \")\\n\");\n                        }\n                        document.execCommand(\"insertHTML\", false, imgHTML);\n                    };\n                }\n                _b.label = 6;\n            case 6: return [3 /*break*/, 8];\n            case 7:\n                if (textPlain.trim() !== \"\" && files.length === 0) {\n                    range = (0,selection/* getEditorRange */.zh)(vditor);\n                    if (range.toString() !== \"\" && vditor.lute.IsValidLinkDest(textPlain)) {\n                        textPlain = \"[\".concat(range.toString(), \"](\").concat(textPlain, \")\");\n                    }\n                    if (vditor.currentMode === \"ir\") {\n                        renderers.Md2VditorIRDOM = { renderLinkDest: renderLinkDest };\n                        vditor.lute.SetJSRenderers({ renderers: renderers });\n                        (0,selection/* insertHTML */.oC)(vditor.lute.Md2VditorIRDOM(textPlain), vditor);\n                    }\n                    else if (vditor.currentMode === \"wysiwyg\") {\n                        renderers.Md2VditorDOM = { renderLinkDest: renderLinkDest };\n                        vditor.lute.SetJSRenderers({ renderers: renderers });\n                        (0,selection/* insertHTML */.oC)(vditor.lute.Md2VditorDOM(textPlain), vditor);\n                    }\n                    else {\n                        renderers.Md2VditorSVDOM = { renderLinkDest: renderLinkDest };\n                        vditor.lute.SetJSRenderers({ renderers: renderers });\n                        processPaste(vditor, textPlain);\n                    }\n                    vditor.outline.render(vditor);\n                }\n                _b.label = 8;\n            case 8:\n                if (vditor.currentMode !== \"sv\") {\n                    blockElement = (0,hasClosest/* hasClosestBlock */.F9)((0,selection/* getEditorRange */.zh)(vditor).startContainer);\n                    if (blockElement) {\n                        range = (0,selection/* getEditorRange */.zh)(vditor);\n                        vditor[vditor.currentMode].element.querySelectorAll(\"wbr\").forEach(function (wbr) {\n                            wbr.remove();\n                        });\n                        range.insertNode(document.createElement(\"wbr\"));\n                        if (vditor.currentMode === \"wysiwyg\") {\n                            blockElement.outerHTML = vditor.lute.SpinVditorDOM(blockElement.outerHTML);\n                        }\n                        else {\n                            blockElement.outerHTML = vditor.lute.SpinVditorIRDOM(blockElement.outerHTML);\n                        }\n                        (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, range);\n                    }\n                    vditor[vditor.currentMode].element.querySelectorAll(\".vditor-\".concat(vditor.currentMode, \"__preview[data-render='2']\"))\n                        .forEach(function (item) {\n                        processCodeRender(item, vditor);\n                    });\n                }\n                vditor.wysiwyg.triggerRemoveComment(vditor);\n                execAfterRender(vditor);\n                if (vditor[vditor.currentMode].element.scrollHeight - height >\n                    Math.min(vditor[vditor.currentMode].element.clientHeight, window.innerHeight) / 2) {\n                    scrollCenter(vditor);\n                }\n                return [2 /*return*/];\n        }\n    });\n}); };\nvar templateObject_1;\n\n;// CONCATENATED MODULE: ./src/ts/ir/process.ts\n\n\n\n\n\n\n\n\n\nvar processHint = function (vditor) {\n    vditor.hint.render(vditor);\n    var startContainer = (0,selection/* getEditorRange */.zh)(vditor).startContainer;\n    // 代码块语言提示\n    var preBeforeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(startContainer, \"data-type\", \"code-block-info\");\n    if (preBeforeElement) {\n        if (preBeforeElement.textContent.replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && vditor.hint.recentLanguage) {\n            preBeforeElement.textContent = constants/* Constants.ZWSP */.g.ZWSP + vditor.hint.recentLanguage;\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            range.selectNodeContents(preBeforeElement);\n        }\n        else {\n            var matchLangData_1 = [];\n            var key_1 = preBeforeElement.textContent.substring(0, (0,selection/* getSelectPosition */.im)(preBeforeElement, vditor.ir.element).start)\n                .replace(constants/* Constants.ZWSP */.g.ZWSP, \"\");\n            (vditor.options.preview.hljs.langs || constants/* Constants.CODE_LANGUAGES */.g.CODE_LANGUAGES).forEach(function (keyName) {\n                if (keyName.indexOf(key_1.toLowerCase()) > -1) {\n                    matchLangData_1.push({\n                        html: keyName,\n                        value: keyName,\n                    });\n                }\n            });\n            vditor.hint.genHTML(matchLangData_1, key_1, vditor);\n        }\n    }\n};\nvar process_processAfterRender = function (vditor, options) {\n    if (options === void 0) { options = {\n        enableAddUndoStack: true,\n        enableHint: false,\n        enableInput: true,\n    }; }\n    if (options.enableHint) {\n        processHint(vditor);\n    }\n    clearTimeout(vditor.ir.processTimeoutId);\n    vditor.ir.processTimeoutId = window.setTimeout(function () {\n        if (vditor.ir.composingLock) {\n            return;\n        }\n        var text = getMarkdown(vditor);\n        if (typeof vditor.options.input === \"function\" && options.enableInput) {\n            vditor.options.input(text);\n        }\n        if (vditor.options.counter.enable) {\n            vditor.counter.render(vditor, text);\n        }\n        if (vditor.options.cache.enable && (0,compatibility/* accessLocalStorage */.pK)()) {\n            localStorage.setItem(vditor.options.cache.id, text);\n            if (vditor.options.cache.after) {\n                vditor.options.cache.after(text);\n            }\n        }\n        if (vditor.devtools) {\n            vditor.devtools.renderEchart(vditor);\n        }\n        if (options.enableAddUndoStack) {\n            vditor.undo.addToUndoStack(vditor);\n        }\n    }, vditor.options.undoDelay);\n};\nvar process_processHeading = function (vditor, value) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var headingElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer) || range.startContainer;\n    if (headingElement) {\n        var headingMarkerElement = headingElement.querySelector(\".vditor-ir__marker--heading\");\n        if (headingMarkerElement) {\n            headingMarkerElement.innerHTML = value;\n        }\n        else {\n            headingElement.insertAdjacentText(\"afterbegin\", value);\n            range.selectNodeContents(headingElement);\n            range.collapse(false);\n        }\n        input(vditor, range.cloneRange());\n        highlightToolbarIR(vditor);\n    }\n};\nvar removeInline = function (range, vditor, type) {\n    var inlineElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", type);\n    if (inlineElement) {\n        inlineElement.firstElementChild.remove();\n        inlineElement.lastElementChild.remove();\n        range.insertNode(document.createElement(\"wbr\"));\n        var tempElement = document.createElement(\"div\");\n        tempElement.innerHTML = vditor.lute.SpinVditorIRDOM(inlineElement.outerHTML);\n        inlineElement.outerHTML = tempElement.firstElementChild.innerHTML.trim();\n    }\n};\nvar process_processToolbar = function (vditor, actionBtn, prefix, suffix) {\n    var range = (0,selection/* getEditorRange */.zh)(vditor);\n    var commandName = actionBtn.getAttribute(\"data-type\");\n    var typeElement = range.startContainer;\n    if (typeElement.nodeType === 3) {\n        typeElement = typeElement.parentElement;\n    }\n    var useHighlight = true;\n    // 移除\n    if (actionBtn.classList.contains(\"vditor-menu--current\")) {\n        if (commandName === \"quote\") {\n            var quoteElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(typeElement, \"BLOCKQUOTE\");\n            if (quoteElement) {\n                range.insertNode(document.createElement(\"wbr\"));\n                quoteElement.outerHTML = quoteElement.innerHTML.trim() === \"\" ?\n                    \"<p data-block=\\\"0\\\">\".concat(quoteElement.innerHTML, \"</p>\") : quoteElement.innerHTML;\n            }\n        }\n        else if (commandName === \"link\") {\n            var aElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"a\");\n            if (aElement) {\n                var aTextElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__link\");\n                if (aTextElement) {\n                    range.insertNode(document.createElement(\"wbr\"));\n                    aElement.outerHTML = aTextElement.innerHTML;\n                }\n                else {\n                    aElement.outerHTML = aElement.querySelector(\".vditor-ir__link\").innerHTML + \"<wbr>\";\n                }\n            }\n        }\n        else if (commandName === \"italic\") {\n            removeInline(range, vditor, \"em\");\n        }\n        else if (commandName === \"bold\") {\n            removeInline(range, vditor, \"strong\");\n        }\n        else if (commandName === \"strike\") {\n            removeInline(range, vditor, \"s\");\n        }\n        else if (commandName === \"inline-code\") {\n            removeInline(range, vditor, \"code\");\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName);\n            useHighlight = false;\n            actionBtn.classList.remove(\"vditor-menu--current\");\n        }\n    }\n    else {\n        // 添加\n        if (vditor.ir.element.childNodes.length === 0) {\n            vditor.ir.element.innerHTML = '<p data-block=\"0\"><wbr></p>';\n            (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n        }\n        var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n        if (commandName === \"line\") {\n            if (blockElement) {\n                var hrHTML = '<hr data-block=\"0\"><p data-block=\"0\"><wbr>\\n</p>';\n                if (blockElement.innerHTML.trim() === \"\") {\n                    blockElement.outerHTML = hrHTML;\n                }\n                else {\n                    blockElement.insertAdjacentHTML(\"afterend\", hrHTML);\n                }\n            }\n        }\n        else if (commandName === \"quote\") {\n            if (blockElement) {\n                range.insertNode(document.createElement(\"wbr\"));\n                blockElement.outerHTML = \"<blockquote data-block=\\\"0\\\">\".concat(blockElement.outerHTML, \"</blockquote>\");\n                useHighlight = false;\n                actionBtn.classList.add(\"vditor-menu--current\");\n            }\n        }\n        else if (commandName === \"link\") {\n            var html = void 0;\n            if (range.toString() === \"\") {\n                html = \"\".concat(prefix, \"<wbr>\").concat(suffix);\n            }\n            else {\n                html = \"\".concat(prefix).concat(range.toString()).concat(suffix.replace(\")\", \"<wbr>)\"));\n            }\n            document.execCommand(\"insertHTML\", false, html);\n            useHighlight = false;\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n        else if (commandName === \"italic\" || commandName === \"bold\" || commandName === \"strike\"\n            || commandName === \"inline-code\" || commandName === \"code\" || commandName === \"table\") {\n            var html = void 0;\n            if (range.toString() === \"\") {\n                html = \"\".concat(prefix, \"<wbr>\").concat(suffix);\n            }\n            else {\n                if (commandName === \"code\") {\n                    html = \"\".concat(prefix, \"\\n\").concat(range.toString(), \"<wbr>\").concat(suffix);\n                }\n                else if (commandName === \"table\") {\n                    html = \"\".concat(prefix).concat(range.toString(), \"<wbr>\").concat(suffix);\n                }\n                else {\n                    html = \"\".concat(prefix).concat(range.toString()).concat(suffix, \"<wbr>\");\n                }\n                range.deleteContents();\n            }\n            if (commandName === \"table\" || commandName === \"code\") {\n                html = \"\\n\" + html + \"\\n\\n\";\n            }\n            var spanElement = document.createElement(\"span\");\n            spanElement.innerHTML = html;\n            range.insertNode(spanElement);\n            input(vditor, range);\n            if (commandName === \"table\") {\n                range.selectNodeContents(getSelection().getRangeAt(0).startContainer.parentElement);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n        }\n        else if (commandName === \"check\" || commandName === \"list\" || commandName === \"ordered-list\") {\n            listToggle(vditor, range, commandName, false);\n            useHighlight = false;\n            removeCurrentToolbar(vditor.toolbar.elements, [\"check\", \"list\", \"ordered-list\"]);\n            actionBtn.classList.add(\"vditor-menu--current\");\n        }\n    }\n    (0,selection/* setRangeByWbr */.ib)(vditor.ir.element, range);\n    process_processAfterRender(vditor);\n    if (useHighlight) {\n        highlightToolbarIR(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/hint/index.ts\nvar hint_awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar hint_generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\n\nvar Hint = /** @class */ (function () {\n    function Hint(hintExtends) {\n        var _this = this;\n        this.splitChar = \"\";\n        this.lastIndex = -1;\n        this.fillEmoji = function (element, vditor) {\n            _this.element.style.display = \"none\";\n            var value = decodeURIComponent(element.getAttribute(\"data-value\"));\n            var range = window.getSelection().getRangeAt(0);\n            // 代码提示\n            if (vditor.currentMode === \"ir\") {\n                var preBeforeElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-type\", \"code-block-info\");\n                if (preBeforeElement) {\n                    preBeforeElement.textContent = constants/* Constants.ZWSP */.g.ZWSP + value.trimRight();\n                    range.selectNodeContents(preBeforeElement);\n                    range.collapse(false);\n                    process_processAfterRender(vditor);\n                    preBeforeElement.parentElement.querySelectorAll(\"code\").forEach(function (item) {\n                        item.className = \"language-\" + value.trimRight();\n                    });\n                    processCodeRender(preBeforeElement.parentElement.querySelector(\".vditor-ir__preview\"), vditor);\n                    _this.recentLanguage = value.trimRight();\n                    return;\n                }\n            }\n            if (vditor.currentMode === \"wysiwyg\" && range.startContainer.nodeType !== 3) {\n                var startContainer = range.startContainer;\n                var inputElement = void 0;\n                if (startContainer.classList.contains(\"vditor-input\")) {\n                    inputElement = startContainer;\n                }\n                else {\n                    inputElement = startContainer.firstElementChild;\n                }\n                if (inputElement && inputElement.classList.contains(\"vditor-input\")) {\n                    inputElement.value = value.trimRight();\n                    range.selectNodeContents(inputElement);\n                    range.collapse(false);\n                    // {detail: 1}用于标识这个自定义事件是在编程语言选择后触发的\n                    // 用于在鼠标选择语言后，自动聚焦到代码输入框\n                    inputElement.dispatchEvent(new CustomEvent(\"input\", { detail: 1 }));\n                    _this.recentLanguage = value.trimRight();\n                    return;\n                }\n            }\n            range.setStart(range.startContainer, _this.lastIndex);\n            range.deleteContents();\n            if (vditor.options.hint.parse) {\n                if (vditor.currentMode === \"sv\") {\n                    (0,selection/* insertHTML */.oC)(vditor.lute.SpinVditorSVDOM(value), vditor);\n                }\n                else if (vditor.currentMode === \"wysiwyg\") {\n                    (0,selection/* insertHTML */.oC)(vditor.lute.SpinVditorDOM(value), vditor);\n                }\n                else {\n                    (0,selection/* insertHTML */.oC)(vditor.lute.SpinVditorIRDOM(value), vditor);\n                }\n            }\n            else {\n                (0,selection/* insertHTML */.oC)(value, vditor);\n            }\n            if (_this.splitChar === \":\" && value.indexOf(\":\") > -1 && vditor.currentMode !== \"sv\") {\n                range.insertNode(document.createTextNode(\" \"));\n            }\n            range.collapse(false);\n            (0,selection/* setSelectionFocus */.Hc)(range);\n            if (vditor.currentMode === \"wysiwyg\") {\n                var preElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-wysiwyg__block\");\n                if (preElement && preElement.lastElementChild.classList.contains(\"vditor-wysiwyg__preview\")) {\n                    preElement.lastElementChild.innerHTML = preElement.firstElementChild.innerHTML;\n                    processCodeRender(preElement.lastElementChild, vditor);\n                }\n            }\n            else if (vditor.currentMode === \"ir\") {\n                var preElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__marker--pre\");\n                if (preElement && preElement.nextElementSibling.classList.contains(\"vditor-ir__preview\")) {\n                    preElement.nextElementSibling.innerHTML = preElement.innerHTML;\n                    processCodeRender(preElement.nextElementSibling, vditor);\n                }\n            }\n            execAfterRender(vditor);\n        };\n        this.timeId = -1;\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-hint\";\n        this.recentLanguage = \"\";\n        hintExtends.push({ key: \":\" });\n    }\n    Hint.prototype.render = function (vditor) {\n        var _this = this;\n        if (!window.getSelection().focusNode) {\n            return;\n        }\n        var currentLineValue;\n        var range = getSelection().getRangeAt(0);\n        currentLineValue = range.startContainer.textContent.substring(0, range.startOffset) || \"\";\n        var key = this.getKey(currentLineValue, vditor.options.hint.extend);\n        if (typeof key === \"undefined\") {\n            this.element.style.display = \"none\";\n            clearTimeout(this.timeId);\n        }\n        else {\n            if (this.splitChar === \":\") {\n                var emojiHint_1 = key === \"\" ? vditor.options.hint.emoji : vditor.lute.GetEmojis();\n                var matchEmojiData_1 = [];\n                Object.keys(emojiHint_1).forEach(function (keyName) {\n                    if (keyName.indexOf(key.toLowerCase()) === 0) {\n                        if (emojiHint_1[keyName].indexOf(\".\") > -1) {\n                            matchEmojiData_1.push({\n                                html: \"<img src=\\\"\".concat(emojiHint_1[keyName], \"\\\" title=\\\":\").concat(keyName, \":\\\"/> :\").concat(keyName, \":\"),\n                                value: \":\".concat(keyName, \":\"),\n                            });\n                        }\n                        else {\n                            matchEmojiData_1.push({\n                                html: \"<span class=\\\"vditor-hint__emoji\\\">\".concat(emojiHint_1[keyName], \"</span>\").concat(keyName),\n                                value: emojiHint_1[keyName],\n                            });\n                        }\n                    }\n                });\n                this.genHTML(matchEmojiData_1, key, vditor);\n            }\n            else {\n                vditor.options.hint.extend.forEach(function (item) {\n                    if (item.key === _this.splitChar) {\n                        clearTimeout(_this.timeId);\n                        _this.timeId = window.setTimeout(function () { return hint_awaiter(_this, void 0, void 0, function () {\n                            var _a;\n                            return hint_generator(this, function (_b) {\n                                switch (_b.label) {\n                                    case 0:\n                                        _a = this.genHTML;\n                                        return [4 /*yield*/, item.hint(key)];\n                                    case 1:\n                                        _a.apply(this, [_b.sent(), key, vditor]);\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); }, vditor.options.hint.delay);\n                    }\n                });\n            }\n        }\n    };\n    Hint.prototype.genHTML = function (data, key, vditor) {\n        var _this = this;\n        if (data.length === 0) {\n            this.element.style.display = \"none\";\n            return;\n        }\n        var editorElement = vditor[vditor.currentMode].element;\n        var textareaPosition = (0,selection/* getCursorPosition */.Ny)(editorElement);\n        var x = textareaPosition.left +\n            (vditor.options.outline.position === \"left\" ? vditor.outline.element.offsetWidth : 0);\n        var y = textareaPosition.top;\n        var hintsHTML = \"\";\n        data.forEach(function (hintData, i) {\n            if (i > 7) {\n                return;\n            }\n            // process high light\n            var html = hintData.html;\n            if (key !== \"\") {\n                var lastIndex = html.lastIndexOf(\">\") + 1;\n                var replaceHtml = html.substr(lastIndex);\n                var replaceIndex = replaceHtml.toLowerCase().indexOf(key.toLowerCase());\n                if (replaceIndex > -1) {\n                    replaceHtml = replaceHtml.substring(0, replaceIndex) + \"<b>\" +\n                        replaceHtml.substring(replaceIndex, replaceIndex + key.length) + \"</b>\" +\n                        replaceHtml.substring(replaceIndex + key.length);\n                    html = html.substr(0, lastIndex) + replaceHtml;\n                }\n            }\n            hintsHTML += \"<button type=\\\"button\\\" data-value=\\\"\".concat(encodeURIComponent(hintData.value), \" \\\"\\n\").concat(i === 0 ? \"class='vditor-hint--current'\" : \"\", \"> \").concat(html, \"</button>\");\n        });\n        this.element.innerHTML = hintsHTML;\n        var lineHeight = parseInt(document.defaultView.getComputedStyle(editorElement, null)\n            .getPropertyValue(\"line-height\"), 10);\n        this.element.style.top = \"\".concat(y + (lineHeight || 22), \"px\");\n        this.element.style.left = \"\".concat(x, \"px\");\n        this.element.style.display = \"block\";\n        this.element.style.right = \"auto\";\n        this.element.querySelectorAll(\"button\").forEach(function (element) {\n            element.addEventListener(\"click\", function (event) {\n                _this.fillEmoji(element, vditor);\n                event.preventDefault();\n            });\n        });\n        // hint 展现在上部\n        if (this.element.getBoundingClientRect().bottom > window.innerHeight) {\n            this.element.style.top = \"\".concat(y - this.element.offsetHeight, \"px\");\n        }\n        if (this.element.getBoundingClientRect().right > window.innerWidth) {\n            this.element.style.left = \"auto\";\n            this.element.style.right = \"0\";\n        }\n    };\n    Hint.prototype.select = function (event, vditor) {\n        if (this.element.querySelectorAll(\"button\").length === 0 ||\n            this.element.style.display === \"none\") {\n            return false;\n        }\n        var currentHintElement = this.element.querySelector(\".vditor-hint--current\");\n        if (event.key === \"ArrowDown\") {\n            event.preventDefault();\n            event.stopPropagation();\n            currentHintElement.removeAttribute(\"class\");\n            if (!currentHintElement.nextElementSibling) {\n                this.element.children[0].className = \"vditor-hint--current\";\n            }\n            else {\n                currentHintElement.nextElementSibling.className = \"vditor-hint--current\";\n            }\n            return true;\n        }\n        else if (event.key === \"ArrowUp\") {\n            event.preventDefault();\n            event.stopPropagation();\n            currentHintElement.removeAttribute(\"class\");\n            if (!currentHintElement.previousElementSibling) {\n                var length_1 = this.element.children.length;\n                this.element.children[length_1 - 1].className = \"vditor-hint--current\";\n            }\n            else {\n                currentHintElement.previousElementSibling.className = \"vditor-hint--current\";\n            }\n            return true;\n        }\n        else if (!(0,compatibility/* isCtrl */.yl)(event) && !event.shiftKey && !event.altKey && event.key === \"Enter\" && !event.isComposing) {\n            event.preventDefault();\n            event.stopPropagation();\n            this.fillEmoji(currentHintElement, vditor);\n            return true;\n        }\n        return false;\n    };\n    Hint.prototype.getKey = function (currentLineValue, extend) {\n        var _this = this;\n        this.lastIndex = -1;\n        this.splitChar = \"\";\n        extend.forEach(function (item) {\n            var currentLastIndex = currentLineValue.lastIndexOf(item.key);\n            if (_this.lastIndex < currentLastIndex) {\n                _this.splitChar = item.key;\n                _this.lastIndex = currentLastIndex;\n            }\n        });\n        var key;\n        if (this.lastIndex === -1) {\n            return key;\n        }\n        var lineArray = currentLineValue.split(this.splitChar);\n        var lastItem = lineArray[lineArray.length - 1];\n        var maxLength = 32;\n        if (lineArray.length > 1 && lastItem.trim() === lastItem) {\n            if (lineArray.length === 2 && lineArray[0] === \"\" && lineArray[1].length < maxLength) {\n                key = lineArray[1];\n            }\n            else {\n                var preChar = lineArray[lineArray.length - 2].slice(-1);\n                if ((0,code160to32/* code160to32 */.X)(preChar) === \" \" && lastItem.length < maxLength) {\n                    key = lastItem;\n                }\n            }\n        }\n        return key;\n    };\n    return Hint;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/ir/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\nvar IR = /** @class */ (function () {\n    function IR(vditor) {\n        this.composingLock = false;\n        var divElement = document.createElement(\"div\");\n        divElement.className = \"vditor-ir\";\n        divElement.innerHTML = \"<pre class=\\\"vditor-reset\\\" placeholder=\\\"\".concat(vditor.options.placeholder, \"\\\"\\n contenteditable=\\\"true\\\" spellcheck=\\\"false\\\"></pre>\");\n        this.element = divElement.firstElementChild;\n        this.bindEvent(vditor);\n        focusEvent(vditor, this.element);\n        dblclickEvent(vditor, this.element);\n        blurEvent(vditor, this.element);\n        hotkeyEvent(vditor, this.element);\n        selectEvent(vditor, this.element);\n        dropEvent(vditor, this.element);\n        copyEvent(vditor, this.element, this.copy);\n        cutEvent(vditor, this.element, this.copy);\n    }\n    IR.prototype.copy = function (event, vditor) {\n        var range = getSelection().getRangeAt(0);\n        if (range.toString() === \"\") {\n            return;\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        var tempElement = document.createElement(\"div\");\n        tempElement.appendChild(range.cloneContents());\n        event.clipboardData.setData(\"text/plain\", vditor.lute.VditorIRDOM2Md(tempElement.innerHTML).trim());\n        event.clipboardData.setData(\"text/html\", \"\");\n    };\n    IR.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.element.addEventListener(\"paste\", function (event) {\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    document.execCommand(\"insertHTML\", false, code);\n                },\n            });\n        });\n        this.element.addEventListener(\"scroll\", function () {\n            hidePanel(vditor, [\"hint\"]);\n        });\n        this.element.addEventListener(\"compositionstart\", function (event) {\n            _this.composingLock = true;\n        });\n        this.element.addEventListener(\"compositionend\", function (event) {\n            if (!(0,compatibility/* isFirefox */.vU)()) {\n                input(vditor, getSelection().getRangeAt(0).cloneRange());\n            }\n            _this.composingLock = false;\n        });\n        this.element.addEventListener(\"input\", function (event) {\n            if (event.inputType === \"deleteByDrag\" || event.inputType === \"insertFromDrop\") {\n                // https://github.com/Vanessa219/vditor/issues/801 编辑器内容拖拽问题\n                return;\n            }\n            if (_this.preventInput) {\n                _this.preventInput = false;\n                process_processAfterRender(vditor, {\n                    enableAddUndoStack: true,\n                    enableHint: true,\n                    enableInput: true,\n                });\n                return;\n            }\n            if (_this.composingLock || event.data === \"‘\" || event.data === \"“\" || event.data === \"《\") {\n                return;\n            }\n            input(vditor, getSelection().getRangeAt(0).cloneRange(), false, event);\n        });\n        this.element.addEventListener(\"click\", function (event) {\n            if (event.target.tagName === \"INPUT\") {\n                if (event.target.checked) {\n                    event.target.setAttribute(\"checked\", \"checked\");\n                }\n                else {\n                    event.target.removeAttribute(\"checked\");\n                }\n                _this.preventInput = true;\n                process_processAfterRender(vditor);\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            // 点击后光标落于预览区\n            var previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(event.target, \"vditor-ir__preview\");\n            if (!previewElement) {\n                previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__preview\");\n            }\n            if (previewElement) {\n                if (previewElement.previousElementSibling.firstElementChild) {\n                    range.selectNodeContents(previewElement.previousElementSibling.firstElementChild);\n                }\n                else {\n                    // 行内数学公式\n                    range.selectNodeContents(previewElement.previousElementSibling);\n                }\n                range.collapse(true);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                scrollCenter(vditor);\n            }\n            // 点击图片光标选中图片地址\n            if (event.target.tagName === \"IMG\") {\n                var linkElement = event.target.parentElement.querySelector(\".vditor-ir__marker--link\");\n                if (linkElement) {\n                    range.selectNode(linkElement);\n                    (0,selection/* setSelectionFocus */.Hc)(range);\n                }\n            }\n            // 打开链接\n            var aElement = (0,hasClosest/* hasClosestByAttribute */.a1)(event.target, \"data-type\", \"a\");\n            if (aElement && (!aElement.classList.contains(\"vditor-ir__node--expand\"))) {\n                if (vditor.options.link.click) {\n                    vditor.options.link.click(aElement.querySelector(\":scope > .vditor-ir__marker--link\"));\n                }\n                else if (vditor.options.link.isOpen) {\n                    window.open(aElement.querySelector(\":scope > .vditor-ir__marker--link\").textContent);\n                }\n                return;\n            }\n            if (event.target.isEqualNode(_this.element) && _this.element.lastElementChild && range.collapsed) {\n                var lastRect = _this.element.lastElementChild.getBoundingClientRect();\n                if (event.y > lastRect.top + lastRect.height) {\n                    if (_this.element.lastElementChild.tagName === \"P\" &&\n                        _this.element.lastElementChild.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                        range.selectNodeContents(_this.element.lastElementChild);\n                        range.collapse(false);\n                    }\n                    else {\n                        _this.element.insertAdjacentHTML(\"beforeend\", \"<p data-block=\\\"0\\\">\".concat(constants/* Constants.ZWSP */.g.ZWSP, \"<wbr></p>\"));\n                        (0,selection/* setRangeByWbr */.ib)(_this.element, range);\n                    }\n                }\n            }\n            if (range.toString() === \"\") {\n                expandMarker(range, vditor);\n            }\n            else {\n                // https://github.com/Vanessa219/vditor/pull/681 当点击选中区域时 eventTarget 与 range 不一致，需延迟等待 range 发生变化\n                setTimeout(function () {\n                    expandMarker((0,selection/* getEditorRange */.zh)(vditor), vditor);\n                });\n            }\n            clickToc(event, vditor);\n            highlightToolbarIR(vditor);\n        });\n        this.element.addEventListener(\"keyup\", function (event) {\n            if (event.isComposing || (0,compatibility/* isCtrl */.yl)(event)) {\n                return;\n            }\n            if (event.key === \"Enter\") {\n                scrollCenter(vditor);\n            }\n            highlightToolbarIR(vditor);\n            if ((event.key === \"Backspace\" || event.key === \"Delete\") &&\n                vditor.ir.element.innerHTML !== \"\" && vditor.ir.element.childNodes.length === 1 &&\n                vditor.ir.element.firstElementChild && vditor.ir.element.firstElementChild.tagName === \"P\"\n                && vditor.ir.element.firstElementChild.childElementCount === 0\n                && (vditor.ir.element.textContent === \"\" || vditor.ir.element.textContent === \"\\n\")) {\n                // 为空时显示 placeholder\n                vditor.ir.element.innerHTML = \"\";\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            if (event.key === \"Backspace\") {\n                // firefox headings https://github.com/Vanessa219/vditor/issues/211\n                if ((0,compatibility/* isFirefox */.vU)() && range.startContainer.textContent === \"\\n\" && range.startOffset === 1) {\n                    range.startContainer.textContent = \"\";\n                    expandMarker(range, vditor);\n                }\n                // 数学公式前是空块，空块前是 table，在空块前删除，数学公式会多一个 br\n                _this.element.querySelectorAll(\".language-math\").forEach(function (item) {\n                    var brElement = item.querySelector(\"br\");\n                    if (brElement) {\n                        brElement.remove();\n                    }\n                });\n            }\n            else if (event.key.indexOf(\"Arrow\") > -1) {\n                if (event.key === \"ArrowLeft\" || event.key === \"ArrowRight\") {\n                    processHint(vditor);\n                }\n                expandMarker(range, vditor);\n            }\n            else if (event.keyCode === 229 && event.code === \"\" && event.key === \"Unidentified\") {\n                // https://github.com/Vanessa219/vditor/issues/508 IR 删除到节点需展开\n                expandMarker(range, vditor);\n            }\n            var previewRenderElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-ir__preview\");\n            if (previewRenderElement) {\n                if (event.key === \"ArrowUp\" || event.key === \"ArrowLeft\") {\n                    if (previewRenderElement.previousElementSibling.firstElementChild) {\n                        range.selectNodeContents(previewRenderElement.previousElementSibling.firstElementChild);\n                    }\n                    else {\n                        // 行内数学公式/html entity\n                        range.selectNodeContents(previewRenderElement.previousElementSibling);\n                    }\n                    range.collapse(false);\n                    event.preventDefault();\n                    return true;\n                }\n                if (previewRenderElement.tagName === \"SPAN\" &&\n                    (event.key === \"ArrowDown\" || event.key === \"ArrowRight\")) {\n                    if (previewRenderElement.parentElement.getAttribute(\"data-type\") === \"html-entity\") {\n                        // html entity\n                        previewRenderElement.parentElement.insertAdjacentText(\"afterend\", constants/* Constants.ZWSP */.g.ZWSP);\n                        range.setStart(previewRenderElement.parentElement.nextSibling, 1);\n                    }\n                    else {\n                        range.selectNodeContents(previewRenderElement.parentElement.lastElementChild);\n                    }\n                    range.collapse(false);\n                    event.preventDefault();\n                    return true;\n                }\n            }\n        });\n    };\n    return IR;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/markdown/getHTML.ts\n\nvar getHTML = function (vditor) {\n    if (vditor.currentMode === \"sv\") {\n        return vditor.lute.Md2HTML(getMarkdown(vditor));\n    }\n    else if (vditor.currentMode === \"wysiwyg\") {\n        return vditor.lute.VditorDOM2HTML(vditor.wysiwyg.element.innerHTML);\n    }\n    else if (vditor.currentMode === \"ir\") {\n        return vditor.lute.VditorIRDOM2HTML(vditor.ir.element.innerHTML);\n    }\n};\n\n// EXTERNAL MODULE: ./src/ts/markdown/setLute.ts\nvar setLute = __webpack_require__(65);\n// EXTERNAL MODULE: ./src/ts/markdown/outlineRender.ts\nvar outlineRender = __webpack_require__(182);\n;// CONCATENATED MODULE: ./src/ts/outline/index.ts\n\n\n\n\nvar Outline = /** @class */ (function () {\n    function Outline(outlineLabel) {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-outline\";\n        this.element.innerHTML = \"<div class=\\\"vditor-outline__title\\\">\".concat(outlineLabel, \"</div>\\n<div class=\\\"vditor-outline__content\\\"></div>\");\n    }\n    Outline.prototype.render = function (vditor) {\n        var html = \"\";\n        if (vditor.preview.element.style.display === \"block\") {\n            html = (0,outlineRender/* outlineRender */.k)(vditor.preview.previewElement, this.element.lastElementChild, vditor);\n        }\n        else {\n            html = (0,outlineRender/* outlineRender */.k)(vditor[vditor.currentMode].element, this.element.lastElementChild, vditor);\n        }\n        return html;\n    };\n    Outline.prototype.toggle = function (vditor, show, focus) {\n        var _a;\n        if (show === void 0) { show = true; }\n        if (focus === void 0) { focus = true; }\n        var btnElement = (_a = vditor.toolbar.elements.outline) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n        if (show && window.innerWidth >= constants/* Constants.MOBILE_WIDTH */.g.MOBILE_WIDTH) {\n            this.element.style.display = \"block\";\n            this.render(vditor);\n            btnElement === null || btnElement === void 0 ? void 0 : btnElement.classList.add(\"vditor-menu--current\");\n        }\n        else {\n            this.element.style.display = \"none\";\n            btnElement === null || btnElement === void 0 ? void 0 : btnElement.classList.remove(\"vditor-menu--current\");\n        }\n        if (focus && getSelection().rangeCount > 0) {\n            var range = getSelection().getRangeAt(0);\n            if (vditor[vditor.currentMode].element.contains(range.startContainer)) {\n                (0,selection/* setSelectionFocus */.Hc)(range);\n            }\n        }\n        setPadding(vditor);\n    };\n    return Outline;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/markdown/mediaRender.ts\nvar mediaRender = __webpack_require__(431);\n;// CONCATENATED MODULE: ./src/ts/preview/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Preview = /** @class */ (function () {\n    function Preview(vditor) {\n        var _this = this;\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-preview\";\n        this.previewElement = document.createElement(\"div\");\n        this.previewElement.className = \"vditor-reset\";\n        if (vditor.options.classes.preview) {\n            this.previewElement.classList.add(vditor.options.classes.preview);\n        }\n        this.previewElement.style.maxWidth = vditor.options.preview.maxWidth + \"px\";\n        this.previewElement.addEventListener(\"copy\", function (event) {\n            if (event.target.tagName === \"TEXTAREA\") {\n                // https://github.com/Vanessa219/vditor/issues/901\n                return;\n            }\n            var tempElement = document.createElement(\"div\");\n            tempElement.className = \"vditor-reset\";\n            tempElement.appendChild(getSelection().getRangeAt(0).cloneContents());\n            _this.copyToX(vditor, tempElement, \"default\");\n            event.preventDefault();\n        });\n        this.previewElement.addEventListener(\"click\", function (event) {\n            var spanElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"SPAN\");\n            if (spanElement && (0,hasClosest/* hasClosestByClassName */.fb)(spanElement, \"vditor-toc\")) {\n                var headingElement = _this.previewElement.querySelector(\"#\" + spanElement.getAttribute(\"data-target-id\"));\n                if (headingElement) {\n                    _this.element.scrollTop = headingElement.offsetTop;\n                }\n                return;\n            }\n            if (event.target.tagName === \"A\") {\n                if (vditor.options.link.click) {\n                    vditor.options.link.click(event.target);\n                }\n                else if (vditor.options.link.isOpen) {\n                    window.open(event.target.getAttribute(\"href\"));\n                }\n                event.preventDefault();\n                return;\n            }\n            if (event.target.tagName === \"IMG\") {\n                if (vditor.options.image.preview) {\n                    vditor.options.image.preview(event.target);\n                }\n                else if (vditor.options.image.isPreview) {\n                    (0,preview_image/* previewImage */.E)(event.target, vditor.options.lang, vditor.options.theme);\n                }\n            }\n        });\n        this.element.appendChild(this.previewElement);\n        var actions = vditor.options.preview.actions;\n        if (actions.length === 0) {\n            return;\n        }\n        var actionElement = document.createElement(\"div\");\n        actionElement.className = \"vditor-preview__action\";\n        var actionHtml = [];\n        for (var i = 0; i < actions.length; i++) {\n            var action = actions[i];\n            if (typeof action === \"object\") {\n                actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"\".concat(action.key, \"\\\" class=\\\"\").concat(action.className, \"\\\"\").concat(action.tooltip ? \" aria-label=\\\"\".concat(action.tooltip, \"\\\"\") : \"\", \"\\\">\").concat(action.text, \"</button>\"));\n                continue;\n            }\n            switch (action) {\n                case \"desktop\":\n                    actionHtml.push(\"<button type=\\\"button\\\" class=\\\"vditor-preview__action--current\\\" data-type=\\\"desktop\\\">Desktop</button>\");\n                    break;\n                case \"tablet\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"tablet\\\">Tablet</button>\");\n                    break;\n                case \"mobile\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"mobile\\\">Mobile/Wechat</button>\");\n                    break;\n                case \"mp-wechat\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"mp-wechat\\\" class=\\\"vditor-tooltipped vditor-tooltipped__w\\\" aria-label=\\\"\\u590D\\u5236\\u5230\\u516C\\u4F17\\u53F7\\\"><svg><use xlink:href=\\\"#vditor-icon-mp-wechat\\\"></use></svg></button>\");\n                    break;\n                case \"zhihu\":\n                    actionHtml.push(\"<button type=\\\"button\\\" data-type=\\\"zhihu\\\" class=\\\"vditor-tooltipped vditor-tooltipped__w\\\" aria-label=\\\"\\u590D\\u5236\\u5230\\u77E5\\u4E4E\\\"><svg><use xlink:href=\\\"#vditor-icon-zhihu\\\"></use></svg></button>\");\n                    break;\n            }\n        }\n        actionElement.innerHTML = actionHtml.join(\"\");\n        actionElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btn = (0,hasClosestByHeadings/* hasClosestByTag */.S)(event.target, \"BUTTON\");\n            if (!btn) {\n                return;\n            }\n            var type = btn.getAttribute(\"data-type\");\n            var actionCustom = actions.find(function (w) { return (w === null || w === void 0 ? void 0 : w.key) === type; });\n            if (actionCustom) {\n                actionCustom.click(type);\n                return;\n            }\n            if (type === \"mp-wechat\" || type === \"zhihu\") {\n                _this.copyToX(vditor, _this.previewElement.cloneNode(true), type);\n                return;\n            }\n            if (type === \"desktop\") {\n                _this.previewElement.style.width = \"auto\";\n            }\n            else if (type === \"tablet\") {\n                _this.previewElement.style.width = \"780px\";\n            }\n            else {\n                _this.previewElement.style.width = \"360px\";\n            }\n            if (_this.previewElement.scrollWidth > _this.previewElement.parentElement.clientWidth) {\n                _this.previewElement.style.width = \"auto\";\n            }\n            _this.render(vditor);\n            actionElement.querySelectorAll(\"button\").forEach(function (item) {\n                item.classList.remove(\"vditor-preview__action--current\");\n            });\n            btn.classList.add(\"vditor-preview__action--current\");\n        });\n        this.element.insertBefore(actionElement, this.previewElement);\n    }\n    Preview.prototype.render = function (vditor, value) {\n        var _this = this;\n        clearTimeout(this.mdTimeoutId);\n        if (this.element.style.display === \"none\") {\n            if (this.element.getAttribute(\"data-type\") === \"renderPerformance\") {\n                vditor.tip.hide();\n            }\n            return;\n        }\n        if (value) {\n            this.previewElement.innerHTML = value;\n            return;\n        }\n        if (getMarkdown(vditor)\n            .replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, \"\") === \"\") {\n            this.previewElement.innerHTML = \"\";\n            return;\n        }\n        var renderStartTime = new Date().getTime();\n        var markdownText = getMarkdown(vditor);\n        this.mdTimeoutId = window.setTimeout(function () {\n            if (vditor.options.preview.url) {\n                var xhr_1 = new XMLHttpRequest();\n                xhr_1.open(\"POST\", vditor.options.preview.url);\n                xhr_1.setRequestHeader(\"Content-Type\", \"application/json;charset=UTF-8\");\n                xhr_1.onreadystatechange = function () {\n                    if (xhr_1.readyState === XMLHttpRequest.DONE) {\n                        if (xhr_1.status === 200) {\n                            var responseJSON = JSON.parse(xhr_1.responseText);\n                            if (responseJSON.code !== 0) {\n                                vditor.tip.show(responseJSON.msg);\n                                return;\n                            }\n                            if (vditor.options.preview.transform) {\n                                responseJSON.data = vditor.options.preview.transform(responseJSON.data);\n                            }\n                            _this.previewElement.innerHTML = responseJSON.data;\n                            _this.afterRender(vditor, renderStartTime);\n                        }\n                        else {\n                            var html = vditor.lute.Md2HTML(markdownText);\n                            if (vditor.options.preview.transform) {\n                                html = vditor.options.preview.transform(html);\n                            }\n                            _this.previewElement.innerHTML = html;\n                            _this.afterRender(vditor, renderStartTime);\n                        }\n                    }\n                };\n                xhr_1.send(JSON.stringify({ markdownText: markdownText }));\n            }\n            else {\n                var html = vditor.lute.Md2HTML(markdownText);\n                if (vditor.options.preview.transform) {\n                    html = vditor.options.preview.transform(html);\n                }\n                _this.previewElement.innerHTML = html;\n                _this.afterRender(vditor, renderStartTime);\n            }\n        }, vditor.options.preview.delay);\n    };\n    Preview.prototype.afterRender = function (vditor, startTime) {\n        if (vditor.options.preview.parse) {\n            vditor.options.preview.parse(this.element);\n        }\n        var time = (new Date().getTime() - startTime);\n        if ((new Date().getTime() - startTime) > 2600) {\n            // https://github.com/b3log/vditor/issues/67\n            vditor.tip.show(window.VditorI18n.performanceTip.replace(\"${x}\", time.toString()));\n            vditor.preview.element.setAttribute(\"data-type\", \"renderPerformance\");\n        }\n        else if (vditor.preview.element.getAttribute(\"data-type\") === \"renderPerformance\") {\n            vditor.tip.hide();\n            vditor.preview.element.removeAttribute(\"data-type\");\n        }\n        var cmtFocusElement = vditor.preview.element.querySelector(\".vditor-comment--focus\");\n        if (cmtFocusElement) {\n            cmtFocusElement.classList.remove(\"vditor-comment--focus\");\n        }\n        (0,codeRender/* codeRender */.O)(vditor.preview.previewElement, vditor.options.preview.hljs);\n        (0,highlightRender/* highlightRender */.s)(vditor.options.preview.hljs, vditor.preview.previewElement, vditor.options.cdn);\n        (0,mermaidRender/* mermaidRender */.i)(vditor.preview.previewElement, vditor.options.cdn, vditor.options.theme);\n        (0,markmapRender/* markmapRender */.K)(vditor.preview.previewElement, vditor.options.cdn, vditor.options.theme);\n        (0,flowchartRender/* flowchartRender */.P)(vditor.preview.previewElement, vditor.options.cdn);\n        (0,graphvizRender/* graphvizRender */.v)(vditor.preview.previewElement, vditor.options.cdn);\n        (0,chartRender/* chartRender */.p)(vditor.preview.previewElement, vditor.options.cdn, vditor.options.theme);\n        (0,mindmapRender/* mindmapRender */.P)(vditor.preview.previewElement, vditor.options.cdn, vditor.options.theme);\n        (0,plantumlRender/* plantumlRender */.B)(vditor.preview.previewElement, vditor.options.cdn);\n        (0,abcRender/* abcRender */.Q)(vditor.preview.previewElement, vditor.options.cdn);\n        if (vditor.options.preview.render.media.enable) {\n            (0,mediaRender/* mediaRender */.Y)(vditor.preview.previewElement);\n        }\n        vditor.options.customRenders.forEach(function (item) {\n            item.render(vditor.preview.previewElement, vditor);\n        });\n        // toc render\n        var editorElement = vditor.preview.element;\n        var tocHTML = vditor.outline.render(vditor);\n        if (tocHTML === \"\") {\n            tocHTML = \"[ToC]\";\n        }\n        editorElement.querySelectorAll('[data-type=\"toc-block\"]').forEach(function (item) {\n            item.innerHTML = tocHTML;\n            (0,mathRender/* mathRender */.H)(item, {\n                cdn: vditor.options.cdn,\n                math: vditor.options.preview.math,\n            });\n        });\n        (0,mathRender/* mathRender */.H)(vditor.preview.previewElement, {\n            cdn: vditor.options.cdn,\n            math: vditor.options.preview.math,\n        });\n    };\n    Preview.prototype.copyToX = function (vditor, copyElement, type) {\n        if (type === void 0) { type = \"mp-wechat\"; }\n        // fix math render\n        if (type !== \"zhihu\") {\n            copyElement.querySelectorAll(\".katex-html .base\").forEach(function (item) {\n                item.style.display = \"initial\";\n            });\n        }\n        else {\n            copyElement.querySelectorAll(\".language-math\").forEach(function (item) {\n                item.outerHTML = \"<img class=\\\"Formula-image\\\" data-eeimg=\\\"true\\\" src=\\\"//www.zhihu.com/equation?tex=\\\" alt=\\\"\".concat(item.getAttribute(\"data-math\"), \"\\\\\\\" style=\\\"display: block; margin: 0 auto; max-width: 100%;\\\">\");\n            });\n        }\n        // 防止背景色被粘贴到公众号中\n        copyElement.style.backgroundColor = \"#fff\";\n        // 代码背景\n        copyElement.querySelectorAll(\"code\").forEach(function (item) {\n            item.style.backgroundImage = \"none\";\n        });\n        this.element.append(copyElement);\n        var range = copyElement.ownerDocument.createRange();\n        range.selectNode(copyElement);\n        (0,selection/* setSelectionFocus */.Hc)(range);\n        document.execCommand(\"copy\");\n        copyElement.remove();\n        vditor.tip.show(['zhihu', 'mp-wechat'].includes(type) ? \"\\u5DF2\\u590D\\u5236\\uFF0C\\u53EF\\u5230\".concat(type === \"zhihu\" ? \"知乎\" : \"微信公众号平台\", \"\\u8FDB\\u884C\\u7C98\\u8D34\") : \"\\u5DF2\\u590D\\u5236\\u5230\\u526A\\u5207\\u677F\");\n    };\n    return Preview;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/resize/index.ts\nvar Resize = /** @class */ (function () {\n    function Resize(vditor) {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-resize vditor-resize--\".concat(vditor.options.resize.position);\n        this.element.innerHTML = \"<div><svg><use xlink:href=\\\"#vditor-icon-resize\\\"></use></svg></div>\";\n        this.bindEvent(vditor);\n    }\n    Resize.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.element.addEventListener(\"mousedown\", function (event) {\n            var documentSelf = document;\n            var y = event.clientY;\n            var height = vditor.element.offsetHeight;\n            var minHeight = 63 + vditor.element.querySelector(\".vditor-toolbar\").clientHeight;\n            documentSelf.ondragstart = function () { return false; };\n            if (window.captureEvents) {\n                window.captureEvents();\n            }\n            _this.element.classList.add(\"vditor-resize--selected\");\n            documentSelf.onmousemove = function (moveEvent) {\n                if (vditor.options.resize.position === \"top\") {\n                    vditor.element.style.height = Math.max(minHeight, height + (y - moveEvent.clientY)) + \"px\";\n                }\n                else {\n                    vditor.element.style.height = Math.max(minHeight, height + (moveEvent.clientY - y)) + \"px\";\n                }\n                if (vditor.options.typewriterMode) {\n                    vditor.sv.element.style.paddingBottom =\n                        vditor.sv.element.parentElement.offsetHeight / 2 + \"px\";\n                }\n            };\n            documentSelf.onmouseup = function () {\n                if (vditor.options.resize.after) {\n                    vditor.options.resize.after(vditor.element.offsetHeight - height);\n                }\n                if (window.captureEvents) {\n                    window.captureEvents();\n                }\n                documentSelf.onmousemove = null;\n                documentSelf.onmouseup = null;\n                documentSelf.ondragstart = null;\n                documentSelf.onselectstart = null;\n                documentSelf.onselect = null;\n                _this.element.classList.remove(\"vditor-resize--selected\");\n            };\n        });\n    };\n    return Resize;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/sv/index.ts\n\n\n\n\n\n\nvar Editor = /** @class */ (function () {\n    function Editor(vditor) {\n        this.composingLock = false;\n        this.element = document.createElement(\"pre\");\n        this.element.className = \"vditor-sv vditor-reset\";\n        this.element.setAttribute(\"placeholder\", vditor.options.placeholder);\n        this.element.setAttribute(\"contenteditable\", \"true\");\n        this.element.setAttribute(\"spellcheck\", \"false\");\n        this.bindEvent(vditor);\n        focusEvent(vditor, this.element);\n        blurEvent(vditor, this.element);\n        hotkeyEvent(vditor, this.element);\n        selectEvent(vditor, this.element);\n        dropEvent(vditor, this.element);\n        copyEvent(vditor, this.element, this.copy);\n        cutEvent(vditor, this.element, this.copy);\n    }\n    Editor.prototype.copy = function (event, vditor) {\n        event.stopPropagation();\n        event.preventDefault();\n        event.clipboardData.setData(\"text/plain\", getSelectText(vditor[vditor.currentMode].element));\n    };\n    Editor.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.element.addEventListener(\"paste\", function (event) {\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    document.execCommand(\"insertHTML\", false, code);\n                },\n            });\n        });\n        this.element.addEventListener(\"scroll\", function () {\n            if (vditor.preview.element.style.display !== \"block\") {\n                return;\n            }\n            var textScrollTop = _this.element.scrollTop;\n            var textHeight = _this.element.clientHeight;\n            var textScrollHeight = _this.element.scrollHeight - parseFloat(_this.element.style.paddingBottom || \"0\");\n            var preview = vditor.preview.element;\n            if ((textScrollTop / textHeight > 0.5)) {\n                preview.scrollTop = (textScrollTop + textHeight) *\n                    preview.scrollHeight / textScrollHeight - textHeight;\n            }\n            else {\n                preview.scrollTop = textScrollTop *\n                    preview.scrollHeight / textScrollHeight;\n            }\n        });\n        this.element.addEventListener(\"compositionstart\", function (event) {\n            _this.composingLock = true;\n        });\n        this.element.addEventListener(\"compositionend\", function (event) {\n            if (!(0,compatibility/* isFirefox */.vU)()) {\n                inputEvent(vditor, event);\n            }\n            _this.composingLock = false;\n        });\n        this.element.addEventListener(\"input\", function (event) {\n            if (event.inputType === \"deleteByDrag\" || event.inputType === \"insertFromDrop\") {\n                // https://github.com/Vanessa219/vditor/issues/801 编辑器内容拖拽问题\n                return;\n            }\n            if (_this.composingLock || event.data === \"‘\" || event.data === \"“\" || event.data === \"《\") {\n                return;\n            }\n            if (_this.preventInput) {\n                _this.preventInput = false;\n                processAfterRender(vditor, {\n                    enableAddUndoStack: true,\n                    enableHint: true,\n                    enableInput: true,\n                });\n                return;\n            }\n            inputEvent(vditor, event);\n        });\n        this.element.addEventListener(\"keyup\", function (event) {\n            if (event.isComposing || (0,compatibility/* isCtrl */.yl)(event)) {\n                return;\n            }\n            if ((event.key === \"Backspace\" || event.key === \"Delete\") &&\n                vditor.sv.element.innerHTML !== \"\" && vditor.sv.element.childNodes.length === 1 &&\n                vditor.sv.element.firstElementChild && vditor.sv.element.firstElementChild.tagName === \"DIV\"\n                && vditor.sv.element.firstElementChild.childElementCount === 2\n                && (vditor.sv.element.firstElementChild.textContent === \"\" || vditor.sv.element.textContent === \"\\n\")) {\n                // 为空时显示 placeholder\n                vditor.sv.element.innerHTML = \"\";\n                return;\n            }\n            if (event.key === \"Enter\") {\n                scrollCenter(vditor);\n            }\n        });\n    };\n    return Editor;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/tip/index.ts\nvar Tip = /** @class */ (function () {\n    function Tip() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-tip\";\n    }\n    Tip.prototype.show = function (text, time) {\n        var _this = this;\n        if (time === void 0) { time = 6000; }\n        this.element.className = \"vditor-tip vditor-tip--show\";\n        if (time === 0) {\n            this.element.innerHTML = \"<div class=\\\"vditor-tip__content\\\">\".concat(text, \"\\n<div class=\\\"vditor-tip__close\\\">X</div></div>\");\n            this.element.querySelector(\".vditor-tip__close\").addEventListener(\"click\", function () {\n                _this.hide();\n            });\n        }\n        else {\n            this.element.innerHTML = \"<div class=\\\"vditor-tip__content\\\">\".concat(text, \"</div>\");\n            setTimeout(function () {\n                _this.hide();\n            }, time);\n        }\n        // 需在动画结束后才能确定位置\n        this.element.removeAttribute(\"style\");\n        setTimeout(function () {\n            var rect = _this.element.getBoundingClientRect();\n            if (rect.top < 46) {\n                _this.element.style.position = \"fixed\";\n                _this.element.style.top = \"46px\";\n            }\n        }, 150);\n    };\n    Tip.prototype.hide = function () {\n        this.element.className = \"vditor-messageElementtip\";\n        this.element.innerHTML = \"\";\n    };\n    return Tip;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/ui/setPreviewMode.ts\n\n\nvar setPreviewMode = function (mode, vditor) {\n    if (vditor.options.preview.mode === mode) {\n        return;\n    }\n    vditor.options.preview.mode = mode;\n    switch (mode) {\n        case \"both\":\n            vditor.sv.element.style.display = \"block\";\n            vditor.preview.element.style.display = \"block\";\n            vditor.preview.render(vditor);\n            setCurrentToolbar(vditor.toolbar.elements, [\"both\"]);\n            break;\n        case \"editor\":\n            vditor.sv.element.style.display = \"block\";\n            vditor.preview.element.style.display = \"none\";\n            removeCurrentToolbar(vditor.toolbar.elements, [\"both\"]);\n            break;\n        default:\n            break;\n    }\n    if (vditor.devtools) {\n        vditor.devtools.renderEchart(vditor);\n    }\n};\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Both.ts\nvar Both_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Both = /** @class */ (function (_super) {\n    Both_extends(Both, _super);\n    function Both(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        if (vditor.options.preview.mode === \"both\") {\n            _this.element.children[0].classList.add(\"vditor-menu--current\");\n        }\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btnElement = _this.element.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            event.preventDefault();\n            if (vditor.currentMode !== \"sv\") {\n                return;\n            }\n            if (vditor.options.preview.mode === \"both\") {\n                setPreviewMode(\"editor\", vditor);\n            }\n            else {\n                setPreviewMode(\"both\", vditor);\n            }\n        });\n        return _this;\n    }\n    return Both;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Br.ts\nvar Br = /** @class */ (function () {\n    function Br() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-toolbar__br\";\n    }\n    return Br;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/ui/setCodeTheme.ts\nvar setCodeTheme = __webpack_require__(34);\n;// CONCATENATED MODULE: ./src/ts/toolbar/CodeTheme.ts\nvar CodeTheme_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar CodeTheme = /** @class */ (function (_super) {\n    CodeTheme_extends(CodeTheme, _super);\n    function CodeTheme(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var actionBtn = _this.element.children[0];\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\".concat(menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        var innerHTML = \"\";\n        constants/* Constants.CODE_THEME.forEach */.g.CODE_THEME.forEach(function (theme) {\n            innerHTML += \"<button>\".concat(theme, \"</button>\");\n        });\n        panelElement.innerHTML =\n            \"<div style=\\\"overflow: auto;max-height:\".concat(window.innerHeight / 2, \"px\\\">\").concat(innerHTML, \"</div>\");\n        panelElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            if (event.target.tagName === \"BUTTON\") {\n                hidePanel(vditor, [\"subToolbar\"]);\n                vditor.options.preview.hljs.style = event.target.textContent;\n                (0,setCodeTheme/* setCodeTheme */.Y)(event.target.textContent, vditor.options.cdn);\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        return _this;\n    }\n    return CodeTheme;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/ContentTheme.ts\nvar ContentTheme_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar ContentTheme = /** @class */ (function (_super) {\n    ContentTheme_extends(ContentTheme, _super);\n    function ContentTheme(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var actionBtn = _this.element.children[0];\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\".concat(menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        var innerHTML = \"\";\n        Object.keys(vditor.options.preview.theme.list).forEach(function (key) {\n            innerHTML += \"<button data-type=\\\"\".concat(key, \"\\\">\").concat(vditor.options.preview.theme.list[key], \"</button>\");\n        });\n        panelElement.innerHTML =\n            \"<div style=\\\"overflow: auto;max-height:\".concat(window.innerHeight / 2, \"px\\\">\").concat(innerHTML, \"</div>\");\n        panelElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            if (event.target.tagName === \"BUTTON\") {\n                hidePanel(vditor, [\"subToolbar\"]);\n                vditor.options.preview.theme.current = event.target.getAttribute(\"data-type\");\n                (0,setContentTheme/* setContentTheme */.Z)(vditor.options.preview.theme.current, vditor.options.preview.theme.path);\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        return _this;\n    }\n    return ContentTheme;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Counter.ts\nvar Counter = /** @class */ (function () {\n    function Counter(vditor) {\n        this.element = document.createElement(\"span\");\n        this.element.className = \"vditor-counter vditor-tooltipped vditor-tooltipped__nw\";\n        this.render(vditor, \"\");\n    }\n    Counter.prototype.render = function (vditor, mdText) {\n        var length = mdText.endsWith(\"\\n\") ? mdText.length - 1 : mdText.length;\n        if (vditor.options.counter.type === \"text\" && vditor[vditor.currentMode]) {\n            var tempElement = vditor[vditor.currentMode].element.cloneNode(true);\n            tempElement.querySelectorAll(\".vditor-wysiwyg__preview\").forEach(function (item) {\n                item.remove();\n            });\n            length = tempElement.textContent.length;\n        }\n        if (typeof vditor.options.counter.max === \"number\") {\n            if (length > vditor.options.counter.max) {\n                this.element.className = \"vditor-counter vditor-counter--error\";\n            }\n            else {\n                this.element.className = \"vditor-counter\";\n            }\n            this.element.innerHTML = \"\".concat(length, \"/\").concat(vditor.options.counter.max);\n        }\n        else {\n            this.element.innerHTML = \"\".concat(length);\n        }\n        this.element.setAttribute(\"aria-label\", vditor.options.counter.type);\n        if (vditor.options.counter.after) {\n            vditor.options.counter.after(length, {\n                enable: vditor.options.counter.enable,\n                max: vditor.options.counter.max,\n                type: vditor.options.counter.type,\n            });\n        }\n    };\n    return Counter;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Custom.ts\nvar Custom_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Custom = /** @class */ (function (_super) {\n    Custom_extends(Custom, _super);\n    function Custom(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].innerHTML = menuItem.icon;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (event.currentTarget.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            menuItem.click(event, vditor);\n        });\n        return _this;\n    }\n    return Custom;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Devtools.ts\nvar Devtools_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Devtools = /** @class */ (function (_super) {\n    Devtools_extends(Devtools, _super);\n    function Devtools(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.firstElementChild.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btnElement = _this.element.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            event.preventDefault();\n            if (btnElement.classList.contains(\"vditor-menu--current\")) {\n                btnElement.classList.remove(\"vditor-menu--current\");\n                vditor.devtools.element.style.display = \"none\";\n                setPadding(vditor);\n            }\n            else {\n                btnElement.classList.add(\"vditor-menu--current\");\n                vditor.devtools.element.style.display = \"block\";\n                setPadding(vditor);\n                vditor.devtools.renderEchart(vditor);\n            }\n        });\n        return _this;\n    }\n    return Devtools;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Divider.ts\nvar Divider = /** @class */ (function () {\n    function Divider() {\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-toolbar__divider\";\n    }\n    return Divider;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Emoji.ts\nvar Emoji_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar Emoji = /** @class */ (function (_super) {\n    Emoji_extends(Emoji, _super);\n    function Emoji(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-panel vditor-panel--arrow\";\n        var commonEmojiHTML = \"\";\n        Object.keys(vditor.options.hint.emoji).forEach(function (key) {\n            var emojiValue = vditor.options.hint.emoji[key];\n            if (emojiValue.indexOf(\".\") > -1) {\n                commonEmojiHTML += \"<button data-value=\\\":\".concat(key, \": \\\" data-key=\\\":\").concat(key, \":\\\"><img\\ndata-value=\\\":\").concat(key, \": \\\" data-key=\\\":\").concat(key, \":\\\" class=\\\"vditor-emojis__icon\\\" src=\\\"\").concat(emojiValue, \"\\\"/></button>\");\n            }\n            else {\n                commonEmojiHTML += \"<button data-value=\\\"\".concat(emojiValue, \" \\\"\\n data-key=\\\"\").concat(key, \"\\\"><span class=\\\"vditor-emojis__icon\\\">\").concat(emojiValue, \"</span></button>\");\n            }\n        });\n        panelElement.innerHTML = \"<div class=\\\"vditor-emojis\\\" style=\\\"max-height: \".concat(vditor.options.height === \"auto\" ? \"auto\" : vditor.options.height - 80, \"px\\\">\").concat(commonEmojiHTML, \"</div><div class=\\\"vditor-emojis__tail\\\">\\n    <span class=\\\"vditor-emojis__tip\\\"></span><span>\").concat(vditor.options.hint.emojiTail || \"\", \"</span>\\n</div>\");\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, _this.element.firstElementChild, menuItem.level);\n        _this.bindEvent(vditor);\n        return _this;\n    }\n    Emoji.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.element.lastElementChild.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btnElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(event.target, \"BUTTON\");\n            if (btnElement) {\n                event.preventDefault();\n                var value = btnElement.getAttribute(\"data-value\");\n                var range = (0,selection/* getEditorRange */.zh)(vditor);\n                var html = value;\n                if (vditor.currentMode === \"wysiwyg\") {\n                    html = vditor.lute.SpinVditorDOM(value);\n                }\n                else if (vditor.currentMode === \"ir\") {\n                    html = vditor.lute.SpinVditorIRDOM(value);\n                }\n                if (value.indexOf(\":\") > -1 && vditor.currentMode !== \"sv\") {\n                    var tempElement = document.createElement(\"div\");\n                    tempElement.innerHTML = html;\n                    html = tempElement.firstElementChild.firstElementChild.outerHTML + \" \";\n                    (0,selection/* insertHTML */.oC)(html, vditor);\n                }\n                else {\n                    range.extractContents();\n                    range.insertNode(document.createTextNode(value));\n                }\n                range.collapse(false);\n                (0,selection/* setSelectionFocus */.Hc)(range);\n                _this.element.lastElementChild.style.display = \"none\";\n                execAfterRender(vditor);\n            }\n        });\n        this.element.lastElementChild.addEventListener(\"mouseover\", function (event) {\n            var btnElement = (0,hasClosestByHeadings/* hasClosestByTag */.S)(event.target, \"BUTTON\");\n            if (btnElement) {\n                _this.element.querySelector(\".vditor-emojis__tip\").innerHTML = btnElement.getAttribute(\"data-key\");\n            }\n        });\n    };\n    return Emoji;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/export/index.ts\n\n\nvar download = function (vditor, content, filename) {\n    var aElement = document.createElement(\"a\");\n    if (\"download\" in aElement) {\n        aElement.download = filename;\n        aElement.style.display = \"none\";\n        aElement.href = URL.createObjectURL(new Blob([content]));\n        document.body.appendChild(aElement);\n        aElement.click();\n        aElement.remove();\n    }\n    else {\n        vditor.tip.show(window.VditorI18n.downloadTip, 0);\n    }\n};\nvar exportMarkdown = function (vditor) {\n    var content = getMarkdown(vditor);\n    download(vditor, content, content.substr(0, 10) + \".md\");\n};\nvar exportPDF = function (vditor) {\n    vditor.tip.show(window.VditorI18n.generate, 3800);\n    var iframe = document.querySelector(\"#vditorExportIframe\");\n    iframe.contentDocument.open();\n    iframe.contentDocument.write(\"<link rel=\\\"stylesheet\\\" href=\\\"\".concat(vditor.options.cdn, \"/dist/index.css\\\"/>\\n<script src=\\\"\").concat(vditor.options.cdn, \"/dist/method.min.js\\\"></script>\\n<div id=\\\"preview\\\" style=\\\"width: 800px\\\"></div>\\n<script>\\nwindow.addEventListener(\\\"message\\\", (e) => {\\n  if(!e.data) {\\n    return;\\n  }\\n  Vditor.preview(document.getElementById('preview'), e.data, {\\n    cdn: \\\"\").concat(vditor.options.cdn, \"\\\",\\n    markdown: {\\n      theme: \").concat(JSON.stringify(vditor.options.preview.theme), \"\\n    },\\n    hljs: {\\n      style: \\\"\").concat(vditor.options.preview.hljs.style, \"\\\"\\n    }\\n  });\\n  setTimeout(() => {\\n        window.print();\\n    }, 3600);\\n}, false);\\n</script>\"));\n    iframe.contentDocument.close();\n    setTimeout(function () {\n        iframe.contentWindow.postMessage(getMarkdown(vditor), \"*\");\n    }, 200);\n};\nvar exportHTML = function (vditor) {\n    var content = getHTML(vditor);\n    var html = \"<html><head><link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"\".concat(vditor.options.cdn, \"/dist/index.css\\\"/>\\n<script src=\\\"\").concat(vditor.options.cdn, \"/dist/js/i18n/\").concat(vditor.options.lang, \".js\\\"></script>\\n<script src=\\\"\").concat(vditor.options.cdn, \"/dist/method.min.js\\\"></script></head>\\n<body><div class=\\\"vditor-reset\\\" id=\\\"preview\\\">\").concat(content, \"</div>\\n<script>\\n    const previewElement = document.getElementById('preview')\\n    Vditor.setContentTheme('\").concat(vditor.options.preview.theme.current, \"', '\").concat(vditor.options.preview.theme.path, \"');\\n    Vditor.codeRender(previewElement);\\n    Vditor.highlightRender(\").concat(JSON.stringify(vditor.options.preview.hljs), \", previewElement, '\").concat(vditor.options.cdn, \"');\\n    Vditor.mathRender(previewElement, {\\n        cdn: '\").concat(vditor.options.cdn, \"',\\n        math: \").concat(JSON.stringify(vditor.options.preview.math), \",\\n    });\\n    Vditor.mermaidRender(previewElement, '\").concat(vditor.options.cdn, \"', '\").concat(vditor.options.theme, \"');\\n    Vditor.markmapRender(previewElement, '\").concat(vditor.options.cdn, \"', '\").concat(vditor.options.theme, \"');\\n    Vditor.flowchartRender(previewElement, '\").concat(vditor.options.cdn, \"');\\n    Vditor.graphvizRender(previewElement, '\").concat(vditor.options.cdn, \"');\\n    Vditor.chartRender(previewElement, '\").concat(vditor.options.cdn, \"', '\").concat(vditor.options.theme, \"');\\n    Vditor.mindmapRender(previewElement, '\").concat(vditor.options.cdn, \"', '\").concat(vditor.options.theme, \"');\\n    Vditor.abcRender(previewElement, '\").concat(vditor.options.cdn, \"');\\n    \").concat(vditor.options.preview.render.media.enable ? 'Vditor.mediaRender(previewElement);' : \"\", \"\\n    Vditor.speechRender(previewElement);\\n</script>\\n<script src=\\\"\").concat(vditor.options.cdn, \"/dist/js/icons/\").concat(vditor.options.icon, \".js\\\"></script></body></html>\");\n    download(vditor, html, content.substr(0, 10) + \".html\");\n};\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Export.ts\nvar Export_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Export = /** @class */ (function (_super) {\n    Export_extends(Export, _super);\n    function Export(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var actionBtn = _this.element.children[0];\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint\".concat(menuItem.level === 2 ? \"\" : \" vditor-panel--arrow\");\n        panelElement.innerHTML = \"<button data-type=\\\"markdown\\\">Markdown</button>\\n<button data-type=\\\"pdf\\\">PDF</button>\\n<button data-type=\\\"html\\\">HTML</button>\";\n        panelElement.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            var btnElement = event.target;\n            if (btnElement.tagName === \"BUTTON\") {\n                switch (btnElement.getAttribute(\"data-type\")) {\n                    case \"markdown\":\n                        exportMarkdown(vditor);\n                        break;\n                    case \"pdf\":\n                        exportPDF(vditor);\n                        break;\n                    case \"html\":\n                        exportHTML(vditor);\n                        break;\n                    default:\n                        break;\n                }\n                hidePanel(vditor, [\"subToolbar\"]);\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n        _this.element.appendChild(panelElement);\n        toggleSubMenu(vditor, panelElement, actionBtn, menuItem.level);\n        return _this;\n    }\n    return Export;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Fullscreen.ts\nvar Fullscreen_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Fullscreen = /** @class */ (function (_super) {\n    Fullscreen_extends(Fullscreen, _super);\n    function Fullscreen(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this._bindEvent(vditor, menuItem);\n        return _this;\n    }\n    Fullscreen.prototype._bindEvent = function (vditor, menuItem) {\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (vditor.element.className.includes(\"vditor--fullscreen\")) {\n                if (!menuItem.level) {\n                    this.innerHTML = menuItem.icon;\n                }\n                vditor.element.style.zIndex = \"\";\n                document.body.style.overflow = \"\";\n                vditor.element.classList.remove(\"vditor--fullscreen\");\n                Object.keys(vditor.toolbar.elements).forEach(function (key) {\n                    var svgElement = vditor.toolbar.elements[key].firstChild;\n                    if (svgElement) {\n                        svgElement.className = svgElement.className.replace(\"__s\", \"__n\");\n                        vditor.options.toolbar.forEach(function (item) {\n                            if (typeof item !== \"string\" && item.tipPosition && item.name === svgElement.dataset.type) {\n                                svgElement.className = \"vditor-tooltipped vditor-tooltipped__\".concat(item.tipPosition);\n                            }\n                        });\n                    }\n                });\n                if (vditor.counter) {\n                    vditor.counter.element.className = vditor.counter.element.className.replace(\"__s\", \"__n\");\n                }\n            }\n            else {\n                if (!menuItem.level) {\n                    this.innerHTML = '<svg><use xlink:href=\"#vditor-icon-contract\"></use></svg>';\n                }\n                vditor.element.style.zIndex = vditor.options.fullscreen.index.toString();\n                document.body.style.overflow = \"hidden\";\n                vditor.element.classList.add(\"vditor--fullscreen\");\n                Object.keys(vditor.toolbar.elements).forEach(function (key) {\n                    var svgElement = vditor.toolbar.elements[key].firstChild;\n                    if (svgElement) {\n                        svgElement.className = svgElement.className.replace(\"__n\", \"__s\");\n                    }\n                });\n                if (vditor.counter) {\n                    vditor.counter.element.className = vditor.counter.element.className.replace(\"__n\", \"__s\");\n                }\n            }\n            if (vditor.devtools) {\n                vditor.devtools.renderEchart(vditor);\n            }\n            if (menuItem.click) {\n                menuItem.click(event, vditor);\n            }\n            setPadding(vditor);\n            setTypewriterPosition(vditor);\n        });\n    };\n    return Fullscreen;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Headings.ts\nvar Headings_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\nvar Headings = /** @class */ (function (_super) {\n    Headings_extends(Headings, _super);\n    function Headings(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var panelElement = document.createElement(\"div\");\n        panelElement.className = \"vditor-hint vditor-panel--arrow\";\n        panelElement.innerHTML = \"<button data-tag=\\\"h1\\\" data-value=\\\"# \\\">\".concat(window.VditorI18n.heading1, \" \").concat((0,compatibility/* updateHotkeyTip */.ns)(\"&lt;⌥⌘1>\"), \"</button>\\n<button data-tag=\\\"h2\\\" data-value=\\\"## \\\">\").concat(window.VditorI18n.heading2, \" &lt;\").concat((0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘2\"), \"></button>\\n<button data-tag=\\\"h3\\\" data-value=\\\"### \\\">\").concat(window.VditorI18n.heading3, \" &lt;\").concat((0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘3\"), \"></button>\\n<button data-tag=\\\"h4\\\" data-value=\\\"#### \\\">\").concat(window.VditorI18n.heading4, \" &lt;\").concat((0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘4\"), \"></button>\\n<button data-tag=\\\"h5\\\" data-value=\\\"##### \\\">\").concat(window.VditorI18n.heading5, \" &lt;\").concat((0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘5\"), \"></button>\\n<button data-tag=\\\"h6\\\" data-value=\\\"###### \\\">\").concat(window.VditorI18n.heading6, \" &lt;\").concat((0,compatibility/* updateHotkeyTip */.ns)(\"⌥⌘6\"), \"></button>\");\n        _this.element.appendChild(panelElement);\n        _this._bindEvent(vditor, panelElement);\n        return _this;\n    }\n    Headings.prototype._bindEvent = function (vditor, panelElement) {\n        var actionBtn = this.element.children[0];\n        actionBtn.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            // https://github.com/Vanessa219/vditor/issues/1391\n            clearTimeout(vditor.wysiwyg.afterRenderTimeoutId);\n            clearTimeout(vditor.ir.processTimeoutId);\n            clearTimeout(vditor.sv.processTimeoutId);\n            if (actionBtn.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            actionBtn.blur();\n            if (actionBtn.classList.contains(\"vditor-menu--current\")) {\n                if (vditor.currentMode === \"wysiwyg\") {\n                    removeHeading(vditor);\n                    afterRenderEvent(vditor);\n                }\n                else if (vditor.currentMode === \"ir\") {\n                    process_processHeading(vditor, \"\");\n                }\n                actionBtn.classList.remove(\"vditor-menu--current\");\n            }\n            else {\n                hidePanel(vditor, [\"subToolbar\"]);\n                panelElement.style.display = \"block\";\n            }\n        });\n        for (var i = 0; i < 6; i++) {\n            panelElement.children.item(i).addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n                event.preventDefault();\n                if (vditor.currentMode === \"wysiwyg\") {\n                    setHeading(vditor, event.target.getAttribute(\"data-tag\"));\n                    afterRenderEvent(vditor);\n                    actionBtn.classList.add(\"vditor-menu--current\");\n                }\n                else if (vditor.currentMode === \"ir\") {\n                    process_processHeading(vditor, event.target.getAttribute(\"data-value\"));\n                    actionBtn.classList.add(\"vditor-menu--current\");\n                }\n                else {\n                    processHeading(vditor, event.target.getAttribute(\"data-value\"));\n                }\n                panelElement.style.display = \"none\";\n            });\n        }\n    };\n    return Headings;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Help.ts\nvar Help_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar Help = /** @class */ (function (_super) {\n    Help_extends(Help, _super);\n    function Help(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            vditor.tip.show(\"<div style=\\\"margin-bottom:14px;font-size: 14px;line-height: 22px;min-width:300px;max-width: 360px;display: flex;\\\">\\n<div style=\\\"margin-top: 14px;flex: 1\\\">\\n    <div>Markdown \\u4F7F\\u7528\\u6307\\u5357</div>\\n    <ul style=\\\"list-style: none\\\">\\n        <li><a href=\\\"https://ld246.com/article/1583308420519\\\" target=\\\"_blank\\\">\\u8BED\\u6CD5\\u901F\\u67E5\\u624B\\u518C</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1583129520165\\\" target=\\\"_blank\\\">\\u57FA\\u7840\\u8BED\\u6CD5</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1583305480675\\\" target=\\\"_blank\\\">\\u6269\\u5C55\\u8BED\\u6CD5</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1582778815353\\\" target=\\\"_blank\\\">\\u952E\\u76D8\\u5FEB\\u6377\\u952E</a></li>\\n    </ul>\\n</div>\\n<div style=\\\"margin-top: 14px;flex: 1\\\">\\n    <div>Vditor \\u652F\\u6301</div>\\n    <ul style=\\\"list-style: none\\\">\\n        <li><a href=\\\"https://github.com/Vanessa219/vditor/issues\\\" target=\\\"_blank\\\">Issues</a></li>\\n        <li><a href=\\\"https://ld246.com/tag/vditor\\\" target=\\\"_blank\\\">\\u5B98\\u65B9\\u8BA8\\u8BBA\\u533A</a></li>\\n        <li><a href=\\\"https://ld246.com/article/1549638745630\\\" target=\\\"_blank\\\">\\u5F00\\u53D1\\u624B\\u518C</a></li>\\n        <li><a href=\\\"https://ld246.com/guide/markdown\\\" target=\\\"_blank\\\">\\u6F14\\u793A\\u5730\\u5740</a></li>\\n    </ul>\\n</div></div>\", 0);\n        });\n        return _this;\n    }\n    return Help;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Indent.ts\nvar Indent_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar Indent = /** @class */ (function (_super) {\n    Indent_extends(Indent, _super);\n    function Indent(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n            if (liElement) {\n                listIndent(vditor, liElement, range);\n            }\n        });\n        return _this;\n    }\n    return Indent;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Info.ts\nvar Info_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Info = /** @class */ (function (_super) {\n    Info_extends(Info, _super);\n    function Info(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            vditor.tip.show(\"<div style=\\\"max-width: 520px; font-size: 14px;line-height: 22px;margin-bottom: 14px;\\\">\\n<p style=\\\"text-align: center;margin: 14px 0\\\">\\n    <em>\\u4E0B\\u4E00\\u4EE3\\u7684 Markdown \\u7F16\\u8F91\\u5668\\uFF0C\\u4E3A\\u672A\\u6765\\u800C\\u6784\\u5EFA</em>\\n</p>\\n<div style=\\\"display: flex;margin-bottom: 14px;flex-wrap: wrap;align-items: center\\\">\\n    <img src=\\\"https://unpkg.com/vditor/dist/images/logo.png\\\" style=\\\"margin: 0 auto;height: 68px\\\"/>\\n    <div>&nbsp;&nbsp;</div>\\n    <div style=\\\"flex: 1;min-width: 250px\\\">\\n        Vditor \\u662F\\u4E00\\u6B3E\\u6D4F\\u89C8\\u5668\\u7AEF\\u7684 Markdown \\u7F16\\u8F91\\u5668\\uFF0C\\u652F\\u6301\\u6240\\u89C1\\u5373\\u6240\\u5F97\\u3001\\u5373\\u65F6\\u6E32\\u67D3\\uFF08\\u7C7B\\u4F3C Typora\\uFF09\\u548C\\u5206\\u5C4F\\u9884\\u89C8\\u6A21\\u5F0F\\u3002\\n        \\u5B83\\u4F7F\\u7528 TypeScript \\u5B9E\\u73B0\\uFF0C\\u652F\\u6301\\u539F\\u751F JavaScript \\u4EE5\\u53CA Vue\\u3001React\\u3001Angular \\u548C Svelte \\u7B49\\u6846\\u67B6\\u3002\\n    </div>\\n</div>\\n<div style=\\\"display: flex;flex-wrap: wrap;\\\">\\n    <ul style=\\\"list-style: none;flex: 1;min-width:148px\\\">\\n        <li>\\n        \\u9879\\u76EE\\u5730\\u5740\\uFF1A<a href=\\\"https://b3log.org/vditor\\\" target=\\\"_blank\\\">b3log.org/vditor</a>\\n        </li>\\n        <li>\\n        \\u5F00\\u6E90\\u534F\\u8BAE\\uFF1AMIT\\n        </li>\\n    </ul>\\n    <ul style=\\\"list-style: none;margin-right: 18px\\\">\\n        <li>\\n        \\u7EC4\\u4EF6\\u7248\\u672C\\uFF1AVditor v\".concat(constants/* VDITOR_VERSION */.H, \" / Lute v\").concat(Lute.Version, \"\\n        </li>\\n        <li>\\n        \\u8D5E\\u52A9\\u6350\\u8D60\\uFF1A<a href=\\\"https://ld246.com/sponsor\\\" target=\\\"_blank\\\">https://ld246.com/sponsor</a>\\n        </li>\\n    </ul>\\n</div>\\n</div>\"), 0);\n        });\n        return _this;\n    }\n    return Info;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/InsertAfter.ts\nvar InsertAfter_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar InsertAfter = /** @class */ (function (_super) {\n    InsertAfter_extends(InsertAfter, _super);\n    function InsertAfter(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            insertEmptyBlock(vditor, \"afterend\");\n        });\n        return _this;\n    }\n    return InsertAfter;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/InsertBefore.ts\nvar InsertBefore_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar InsertBefore = /** @class */ (function (_super) {\n    InsertBefore_extends(InsertBefore, _super);\n    function InsertBefore(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            insertEmptyBlock(vditor, \"beforebegin\");\n        });\n        return _this;\n    }\n    return InsertBefore;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Outdent.ts\nvar Outdent_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\nvar Outdent = /** @class */ (function (_super) {\n    Outdent_extends(Outdent, _super);\n    function Outdent(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED) ||\n                vditor.currentMode === \"sv\") {\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            var liElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"LI\");\n            if (liElement) {\n                listOutdent(vditor, liElement, range, liElement.parentElement);\n            }\n        });\n        return _this;\n    }\n    return Outdent;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Outline.ts\nvar Outline_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\nvar Outline_Outline = /** @class */ (function (_super) {\n    Outline_extends(Outline, _super);\n    function Outline(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        if (vditor.options.outline) {\n            _this.element.firstElementChild.classList.add(\"vditor-menu--current\");\n        }\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            var btnElement = vditor.toolbar.elements.outline.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            vditor.options.outline.enable = !_this.element.firstElementChild.classList.contains(\"vditor-menu--current\");\n            vditor.outline.toggle(vditor, vditor.options.outline.enable);\n        });\n        return _this;\n    }\n    return Outline;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Preview.ts\nvar Preview_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar Preview_Preview = /** @class */ (function (_super) {\n    Preview_extends(Preview, _super);\n    function Preview(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this._bindEvent(vditor);\n        return _this;\n    }\n    Preview.prototype._bindEvent = function (vditor) {\n        var _this = this;\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            var btnElement = _this.element.firstElementChild;\n            if (btnElement.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            var toolbars = constants/* Constants.EDIT_TOOLBARS.concat */.g.EDIT_TOOLBARS.concat([\"both\", \"edit-mode\", \"devtools\"]);\n            if (btnElement.classList.contains(\"vditor-menu--current\")) {\n                btnElement.classList.remove(\"vditor-menu--current\");\n                if (vditor.currentMode === \"sv\") {\n                    vditor.sv.element.style.display = \"block\";\n                    if (vditor.options.preview.mode === \"both\") {\n                        vditor.preview.element.style.display = \"block\";\n                    }\n                    else {\n                        vditor.preview.element.style.display = \"none\";\n                    }\n                }\n                else {\n                    vditor[vditor.currentMode].element.parentElement.style.display = \"block\";\n                    vditor.preview.element.style.display = \"none\";\n                }\n                enableToolbar(vditor.toolbar.elements, toolbars);\n                vditor.outline.render(vditor);\n            }\n            else {\n                disableToolbar(vditor.toolbar.elements, toolbars);\n                vditor.preview.element.style.display = \"block\";\n                if (vditor.currentMode === \"sv\") {\n                    vditor.sv.element.style.display = \"none\";\n                }\n                else {\n                    vditor[vditor.currentMode].element.parentElement.style.display = \"none\";\n                }\n                vditor.preview.render(vditor);\n                btnElement.classList.add(\"vditor-menu--current\");\n                hidePanel(vditor, [\"subToolbar\", \"hint\", \"popover\"]);\n                setTimeout(function () {\n                    vditor.outline.render(vditor);\n                }, vditor.options.preview.delay + 10);\n            }\n            setPadding(vditor);\n        });\n    };\n    return Preview;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/util/RecordMedia.ts\nvar RecordMedia = /** @class */ (function () {\n    function RecordMedia(e) {\n        this.SAMPLE_RATE = 5000; // 44100 suggested by demos;\n        this.isRecording = false;\n        this.readyFlag = false;\n        this.leftChannel = [];\n        this.rightChannel = [];\n        this.recordingLength = 0;\n        var context;\n        // creates the audio context\n        if (typeof AudioContext !== \"undefined\") {\n            context = new AudioContext();\n        }\n        else if (webkitAudioContext) {\n            context = new webkitAudioContext();\n        }\n        else {\n            return;\n        }\n        this.DEFAULT_SAMPLE_RATE = context.sampleRate;\n        // creates a gain node\n        var volume = context.createGain();\n        // creates an audio node from the microphone incoming stream\n        var audioInput = context.createMediaStreamSource(e);\n        // connect the stream to the gain node\n        audioInput.connect(volume);\n        /* From the spec: The size of the buffer controls how frequently the audioprocess event is\n         dispatched and how many sample-frames need to be processed each call.\n         Lower values for buffer size will result in a lower (better) latency.\n         Higher values will be necessary to avoid audio breakup and glitches */\n        this.recorder = context.createScriptProcessor(2048, 2, 1);\n        // The onaudioprocess event needs to be defined externally, so make sure it is not set:\n        this.recorder.onaudioprocess = null;\n        // we connect the recorder\n        volume.connect(this.recorder);\n        this.recorder.connect(context.destination);\n        this.readyFlag = true;\n    }\n    // Publicly accessible methods:\n    RecordMedia.prototype.cloneChannelData = function (leftChannelData, rightChannelData) {\n        this.leftChannel.push(new Float32Array(leftChannelData));\n        this.rightChannel.push(new Float32Array(rightChannelData));\n        this.recordingLength += 2048;\n    };\n    RecordMedia.prototype.startRecordingNewWavFile = function () {\n        if (this.readyFlag) {\n            this.isRecording = true;\n            this.leftChannel.length = this.rightChannel.length = 0;\n            this.recordingLength = 0;\n        }\n    };\n    RecordMedia.prototype.stopRecording = function () {\n        this.isRecording = false;\n    };\n    RecordMedia.prototype.buildWavFileBlob = function () {\n        // we flat the left and right channels down\n        var leftBuffer = this.mergeBuffers(this.leftChannel);\n        var rightBuffer = this.mergeBuffers(this.rightChannel);\n        // Interleave the left and right channels together:\n        var interleaved = new Float32Array(leftBuffer.length);\n        for (var i = 0; i < leftBuffer.length; ++i) {\n            interleaved[i] = 0.5 * (leftBuffer[i] + rightBuffer[i]);\n        }\n        // Downsample the audio data if necessary:\n        if (this.DEFAULT_SAMPLE_RATE > this.SAMPLE_RATE) {\n            interleaved = this.downSampleBuffer(interleaved, this.SAMPLE_RATE);\n        }\n        var totalByteCount = (44 + interleaved.length * 2);\n        var buffer = new ArrayBuffer(totalByteCount);\n        var view = new DataView(buffer);\n        // Build the RIFF chunk descriptor:\n        this.writeUTFBytes(view, 0, \"RIFF\");\n        view.setUint32(4, totalByteCount, true);\n        this.writeUTFBytes(view, 8, \"WAVE\");\n        // Build the FMT sub-chunk:\n        this.writeUTFBytes(view, 12, \"fmt \"); // subchunk1 ID is format\n        view.setUint32(16, 16, true); // The sub-chunk size is 16.\n        view.setUint16(20, 1, true); // The audio format is 1.\n        view.setUint16(22, 1, true); // Number of interleaved channels.\n        view.setUint32(24, this.SAMPLE_RATE, true); // Sample rate.\n        view.setUint32(28, this.SAMPLE_RATE * 2, true); // Byte rate.\n        view.setUint16(32, 2, true); // Block align\n        view.setUint16(34, 16, true); // Bits per sample.\n        // Build the data sub-chunk:\n        var subChunk2ByteCount = interleaved.length * 2;\n        this.writeUTFBytes(view, 36, \"data\");\n        view.setUint32(40, subChunk2ByteCount, true);\n        // Write the PCM samples to the view:\n        var lng = interleaved.length;\n        var index = 44;\n        var volume = 1;\n        for (var j = 0; j < lng; j++) {\n            view.setInt16(index, interleaved[j] * (0x7FFF * volume), true);\n            index += 2;\n        }\n        return new Blob([view], { type: \"audio/wav\" });\n    };\n    RecordMedia.prototype.downSampleBuffer = function (buffer, rate) {\n        if (rate === this.DEFAULT_SAMPLE_RATE) {\n            return buffer;\n        }\n        if (rate > this.DEFAULT_SAMPLE_RATE) {\n            // throw \"downsampling rate show be smaller than original sample rate\";\n            return buffer;\n        }\n        var sampleRateRatio = this.DEFAULT_SAMPLE_RATE / rate;\n        var newLength = Math.round(buffer.length / sampleRateRatio);\n        var result = new Float32Array(newLength);\n        var offsetResult = 0;\n        var offsetBuffer = 0;\n        while (offsetResult < result.length) {\n            var nextOffsetBuffer = Math.round((offsetResult + 1) * sampleRateRatio);\n            var accum = 0;\n            var count = 0;\n            for (var i = offsetBuffer; i < nextOffsetBuffer && i < buffer.length; i++) {\n                accum += buffer[i];\n                count++;\n            }\n            result[offsetResult] = accum / count;\n            offsetResult++;\n            offsetBuffer = nextOffsetBuffer;\n        }\n        return result;\n    };\n    RecordMedia.prototype.mergeBuffers = function (desiredChannelBuffer) {\n        var result = new Float32Array(this.recordingLength);\n        var offset = 0;\n        var lng = desiredChannelBuffer.length;\n        for (var i = 0; i < lng; ++i) {\n            var buffer = desiredChannelBuffer[i];\n            result.set(buffer, offset);\n            offset += buffer.length;\n        }\n        return result;\n    };\n    RecordMedia.prototype.writeUTFBytes = function (view, offset, value) {\n        var lng = value.length;\n        for (var i = 0; i < lng; i++) {\n            view.setUint8(offset + i, value.charCodeAt(i));\n        }\n    };\n    return RecordMedia;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Record.ts\nvar Record_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\nvar Record = /** @class */ (function (_super) {\n    Record_extends(Record, _super);\n    function Record(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        _this._bindEvent(vditor);\n        return _this;\n    }\n    Record.prototype._bindEvent = function (vditor) {\n        var _this = this;\n        var mediaRecorder;\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            var editorElement = vditor[vditor.currentMode].element;\n            if (!mediaRecorder) {\n                navigator.mediaDevices.getUserMedia({ audio: true }).then(function (mediaStream) {\n                    mediaRecorder = new RecordMedia(mediaStream);\n                    mediaRecorder.recorder.onaudioprocess = function (e) {\n                        // Do nothing if not recording:\n                        if (!mediaRecorder.isRecording) {\n                            return;\n                        }\n                        // Copy the data from the input buffers;\n                        var left = e.inputBuffer.getChannelData(0);\n                        var right = e.inputBuffer.getChannelData(1);\n                        mediaRecorder.cloneChannelData(left, right);\n                    };\n                    mediaRecorder.startRecordingNewWavFile();\n                    vditor.tip.show(window.VditorI18n.recording);\n                    editorElement.setAttribute(\"contenteditable\", \"false\");\n                    _this.element.children[0].classList.add(\"vditor-menu--current\");\n                }).catch(function () {\n                    vditor.tip.show(window.VditorI18n[\"record-tip\"]);\n                });\n                return;\n            }\n            if (mediaRecorder.isRecording) {\n                mediaRecorder.stopRecording();\n                vditor.tip.hide();\n                var file = new File([mediaRecorder.buildWavFileBlob()], \"record\".concat((new Date()).getTime(), \".wav\"), { type: \"video/webm\" });\n                uploadFiles(vditor, [file]);\n                _this.element.children[0].classList.remove(\"vditor-menu--current\");\n            }\n            else {\n                vditor.tip.show(window.VditorI18n.recording);\n                editorElement.setAttribute(\"contenteditable\", \"false\");\n                mediaRecorder.startRecordingNewWavFile();\n                _this.element.children[0].classList.add(\"vditor-menu--current\");\n            }\n        });\n    };\n    return Record;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Redo.ts\nvar Redo_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Redo = /** @class */ (function (_super) {\n    Redo_extends(Redo, _super);\n    function Redo(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        disableToolbar({ redo: _this.element }, [\"redo\"]);\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            vditor.undo.redo(vditor);\n        });\n        return _this;\n    }\n    return Redo;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Undo.ts\nvar Undo_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Undo = /** @class */ (function (_super) {\n    Undo_extends(Undo, _super);\n    function Undo(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        disableToolbar({ undo: _this.element }, [\"undo\"]);\n        _this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            event.preventDefault();\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                return;\n            }\n            vditor.undo.undo(vditor);\n        });\n        return _this;\n    }\n    return Undo;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/Upload.ts\nvar Upload_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Upload_Upload = /** @class */ (function (_super) {\n    Upload_extends(Upload, _super);\n    function Upload(vditor, menuItem) {\n        var _this = _super.call(this, vditor, menuItem) || this;\n        var inputHTML = '<input type=\"file\"';\n        if (vditor.options.upload.multiple) {\n            inputHTML += ' multiple=\"multiple\"';\n        }\n        if (vditor.options.upload.accept) {\n            inputHTML += \" accept=\\\"\".concat(vditor.options.upload.accept, \"\\\"\");\n        }\n        _this.element.children[0].innerHTML = \"\".concat((menuItem.icon || '<svg><use xlink:href=\"#vditor-icon-upload\"></use></svg>')).concat(inputHTML, \">\");\n        _this._bindEvent(vditor);\n        return _this;\n    }\n    Upload.prototype._bindEvent = function (vditor) {\n        var _this = this;\n        this.element.children[0].addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                event.stopPropagation();\n                event.preventDefault();\n                return;\n            }\n        });\n        this.element.querySelector(\"input\").addEventListener(\"change\", function (event) {\n            if (_this.element.firstElementChild.classList.contains(constants/* Constants.CLASS_MENU_DISABLED */.g.CLASS_MENU_DISABLED)) {\n                event.stopPropagation();\n                event.preventDefault();\n                return;\n            }\n            if (event.target.files.length === 0) {\n                return;\n            }\n            uploadFiles(vditor, event.target.files, event.target);\n        });\n    };\n    return Upload;\n}(MenuItem));\n\n\n;// CONCATENATED MODULE: ./src/ts/toolbar/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(vditor) {\n        var _this = this;\n        var options = vditor.options;\n        this.elements = {};\n        this.element = document.createElement(\"div\");\n        this.element.className = \"vditor-toolbar\";\n        options.toolbar.forEach(function (menuItem, i) {\n            var itemElement = _this.genItem(vditor, menuItem, i);\n            _this.element.appendChild(itemElement);\n            if (menuItem.toolbar) {\n                var panelElement_1 = document.createElement(\"div\");\n                panelElement_1.className = \"vditor-hint vditor-panel--arrow\";\n                panelElement_1.addEventListener((0,compatibility/* getEventName */.Le)(), function (event) {\n                    panelElement_1.style.display = \"none\";\n                });\n                menuItem.toolbar.forEach(function (subMenuItem, subI) {\n                    subMenuItem.level = 2;\n                    panelElement_1.appendChild(_this.genItem(vditor, subMenuItem, i + subI));\n                });\n                itemElement.appendChild(panelElement_1);\n                toggleSubMenu(vditor, panelElement_1, itemElement.children[0], 2);\n            }\n        });\n        if (vditor.options.toolbarConfig.hide) {\n            this.element.classList.add(\"vditor-toolbar--hide\");\n        }\n        if (vditor.options.toolbarConfig.pin) {\n            this.element.classList.add(\"vditor-toolbar--pin\");\n        }\n        if (vditor.options.counter.enable) {\n            vditor.counter = new Counter(vditor);\n            this.element.appendChild(vditor.counter.element);\n        }\n    }\n    Toolbar.prototype.updateConfig = function (vditor, options) {\n        vditor.options.toolbarConfig = Object.assign({\n            hide: false,\n            pin: false,\n        }, options);\n        if (vditor.options.toolbarConfig.hide) {\n            this.element.classList.add(\"vditor-toolbar--hide\");\n        }\n        else {\n            this.element.classList.remove(\"vditor-toolbar--hide\");\n        }\n        if (vditor.options.toolbarConfig.pin) {\n            this.element.classList.add(\"vditor-toolbar--pin\");\n        }\n        else {\n            this.element.classList.remove(\"vditor-toolbar--pin\");\n        }\n    };\n    Toolbar.prototype.genItem = function (vditor, menuItem, index) {\n        var menuItemObj;\n        switch (menuItem.name) {\n            case \"bold\":\n            case \"italic\":\n            case \"more\":\n            case \"strike\":\n            case \"line\":\n            case \"quote\":\n            case \"list\":\n            case \"ordered-list\":\n            case \"check\":\n            case \"code\":\n            case \"inline-code\":\n            case \"link\":\n            case \"table\":\n                menuItemObj = new MenuItem(vditor, menuItem);\n                break;\n            case \"emoji\":\n                menuItemObj = new Emoji(vditor, menuItem);\n                break;\n            case \"headings\":\n                menuItemObj = new Headings(vditor, menuItem);\n                break;\n            case \"|\":\n                menuItemObj = new Divider();\n                break;\n            case \"br\":\n                menuItemObj = new Br();\n                break;\n            case \"undo\":\n                menuItemObj = new Undo(vditor, menuItem);\n                break;\n            case \"redo\":\n                menuItemObj = new Redo(vditor, menuItem);\n                break;\n            case \"help\":\n                menuItemObj = new Help(vditor, menuItem);\n                break;\n            case \"both\":\n                menuItemObj = new Both(vditor, menuItem);\n                break;\n            case \"preview\":\n                menuItemObj = new Preview_Preview(vditor, menuItem);\n                break;\n            case \"fullscreen\":\n                menuItemObj = new Fullscreen(vditor, menuItem);\n                break;\n            case \"upload\":\n                menuItemObj = new Upload_Upload(vditor, menuItem);\n                break;\n            case \"record\":\n                menuItemObj = new Record(vditor, menuItem);\n                break;\n            case \"info\":\n                menuItemObj = new Info(vditor, menuItem);\n                break;\n            case \"edit-mode\":\n                menuItemObj = new EditMode(vditor, menuItem);\n                break;\n            case \"devtools\":\n                menuItemObj = new Devtools(vditor, menuItem);\n                break;\n            case \"outdent\":\n                menuItemObj = new Outdent(vditor, menuItem);\n                break;\n            case \"indent\":\n                menuItemObj = new Indent(vditor, menuItem);\n                break;\n            case \"outline\":\n                menuItemObj = new Outline_Outline(vditor, menuItem);\n                break;\n            case \"insert-after\":\n                menuItemObj = new InsertAfter(vditor, menuItem);\n                break;\n            case \"insert-before\":\n                menuItemObj = new InsertBefore(vditor, menuItem);\n                break;\n            case \"code-theme\":\n                menuItemObj = new CodeTheme(vditor, menuItem);\n                break;\n            case \"content-theme\":\n                menuItemObj = new ContentTheme(vditor, menuItem);\n                break;\n            case \"export\":\n                menuItemObj = new Export(vditor, menuItem);\n                break;\n            default:\n                menuItemObj = new Custom(vditor, menuItem);\n                break;\n        }\n        if (!menuItemObj) {\n            return;\n        }\n        var key = menuItem.name;\n        if (key === \"br\" || key === \"|\") {\n            key = key + index;\n        }\n        this.elements[key] = menuItemObj.element;\n        return menuItemObj.element;\n    };\n    return Toolbar;\n}());\n\n\n// EXTERNAL MODULE: ./node_modules/.pnpm/diff-match-patch@1.0.5/node_modules/diff-match-patch/index.js\nvar diff_match_patch = __webpack_require__(85);\n;// CONCATENATED MODULE: ./src/ts/undo/index.ts\n\n\n\n\n\n\n\n\n\nvar undo_Undo = /** @class */ (function () {\n    function Undo() {\n        this.stackSize = 50;\n        this.resetStack();\n        // @ts-ignore\n        this.dmp = new diff_match_patch();\n    }\n    Undo.prototype.clearStack = function (vditor) {\n        this.resetStack();\n        this.resetIcon(vditor);\n    };\n    Undo.prototype.resetIcon = function (vditor) {\n        if (!vditor.toolbar) {\n            return;\n        }\n        if (this[vditor.currentMode].undoStack.length > 1) {\n            enableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        if (this[vditor.currentMode].redoStack.length !== 0) {\n            enableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n    };\n    Undo.prototype.undo = function (vditor) {\n        if (vditor[vditor.currentMode].element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        if (this[vditor.currentMode].undoStack.length < 2) {\n            return;\n        }\n        var state = this[vditor.currentMode].undoStack.pop();\n        if (!state) {\n            return;\n        }\n        this[vditor.currentMode].redoStack.push(state);\n        this.renderDiff(state, vditor);\n        this[vditor.currentMode].hasUndo = true;\n        // undo 操作后，需要关闭 hint\n        hidePanel(vditor, [\"hint\"]);\n    };\n    Undo.prototype.redo = function (vditor) {\n        if (vditor[vditor.currentMode].element.getAttribute(\"contenteditable\") === \"false\") {\n            return;\n        }\n        var state = this[vditor.currentMode].redoStack.pop();\n        if (!state) {\n            return;\n        }\n        this[vditor.currentMode].undoStack.push(state);\n        this.renderDiff(state, vditor, true);\n    };\n    Undo.prototype.recordFirstPosition = function (vditor, event) {\n        if (getSelection().rangeCount === 0) {\n            return;\n        }\n        if (this[vditor.currentMode].undoStack.length !== 1 || this[vditor.currentMode].undoStack[0].length === 0 ||\n            this[vditor.currentMode].redoStack.length > 0) {\n            return;\n        }\n        if ((0,compatibility/* isFirefox */.vU)() && event.key === \"Backspace\") {\n            // Firefox 第一次删除无效\n            return;\n        }\n        if ((0,compatibility/* isSafari */.G6)()) {\n            // Safari keydown 在 input 之后，不需要重复记录历史\n            return;\n        }\n        var text = this.addCaret(vditor);\n        if (text.replace(\"<wbr>\", \"\").replace(\" vditor-ir__node--expand\", \"\")\n            !== this[vditor.currentMode].undoStack[0][0].diffs[0][1].replace(\"<wbr>\", \"\")) {\n            // 当还不没有存入 undo 栈时，按下 ctrl 后会覆盖 lastText\n            return;\n        }\n        this[vditor.currentMode].undoStack[0][0].diffs[0][1] = text;\n        this[vditor.currentMode].lastText = text;\n        // 不能添加 setSelectionFocus(cloneRange); 否则 windows chrome 首次输入会烂\n    };\n    Undo.prototype.addToUndoStack = function (vditor) {\n        // afterRenderEvent.ts 已经 debounce\n        var text = this.addCaret(vditor, true);\n        var diff = this.dmp.diff_main(text, this[vditor.currentMode].lastText, true);\n        var patchList = this.dmp.patch_make(text, this[vditor.currentMode].lastText, diff);\n        if (patchList.length === 0 && this[vditor.currentMode].undoStack.length > 0) {\n            return;\n        }\n        this[vditor.currentMode].lastText = text;\n        this[vditor.currentMode].undoStack.push(patchList);\n        if (this[vditor.currentMode].undoStack.length > this.stackSize) {\n            this[vditor.currentMode].undoStack.shift();\n        }\n        if (this[vditor.currentMode].hasUndo) {\n            this[vditor.currentMode].redoStack = [];\n            this[vditor.currentMode].hasUndo = false;\n            disableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n        if (this[vditor.currentMode].undoStack.length > 1) {\n            enableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n    };\n    Undo.prototype.renderDiff = function (state, vditor, isRedo) {\n        if (isRedo === void 0) { isRedo = false; }\n        var text;\n        if (isRedo) {\n            var redoPatchList = this.dmp.patch_deepCopy(state).reverse();\n            redoPatchList.forEach(function (patch) {\n                patch.diffs.forEach(function (diff) {\n                    diff[0] = -diff[0];\n                });\n            });\n            text = this.dmp.patch_apply(redoPatchList, this[vditor.currentMode].lastText)[0];\n        }\n        else {\n            text = this.dmp.patch_apply(state, this[vditor.currentMode].lastText)[0];\n        }\n        this[vditor.currentMode].lastText = text;\n        vditor[vditor.currentMode].element.innerHTML = text;\n        if (vditor.currentMode !== \"sv\") {\n            vditor[vditor.currentMode].element.querySelectorAll(\".vditor-\".concat(vditor.currentMode, \"__preview[data-render='2']\"))\n                .forEach(function (blockElement) {\n                processCodeRender(blockElement, vditor);\n            });\n        }\n        if (!vditor[vditor.currentMode].element.querySelector(\"wbr\")) {\n            // Safari 第一次输入没有光标，需手动定位到结尾\n            var range = getSelection().getRangeAt(0);\n            range.setEndBefore(vditor[vditor.currentMode].element);\n            range.collapse(false);\n        }\n        else {\n            (0,selection/* setRangeByWbr */.ib)(vditor[vditor.currentMode].element, vditor[vditor.currentMode].element.ownerDocument.createRange());\n            scrollCenter(vditor);\n        }\n        renderToc(vditor);\n        execAfterRender(vditor, {\n            enableAddUndoStack: false,\n            enableHint: false,\n            enableInput: true,\n        });\n        highlightToolbar(vditor);\n        vditor[vditor.currentMode].element.querySelectorAll(\".vditor-\".concat(vditor.currentMode, \"__preview[data-render='2']\"))\n            .forEach(function (item) {\n            processCodeRender(item, vditor);\n        });\n        if (this[vditor.currentMode].undoStack.length > 1) {\n            enableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"undo\"]);\n        }\n        if (this[vditor.currentMode].redoStack.length !== 0) {\n            enableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n        else {\n            disableToolbar(vditor.toolbar.elements, [\"redo\"]);\n        }\n    };\n    Undo.prototype.resetStack = function () {\n        this.ir = {\n            hasUndo: false,\n            lastText: \"\",\n            redoStack: [],\n            undoStack: [],\n        };\n        this.sv = {\n            hasUndo: false,\n            lastText: \"\",\n            redoStack: [],\n            undoStack: [],\n        };\n        this.wysiwyg = {\n            hasUndo: false,\n            lastText: \"\",\n            redoStack: [],\n            undoStack: [],\n        };\n    };\n    Undo.prototype.addCaret = function (vditor, setFocus) {\n        if (setFocus === void 0) { setFocus = false; }\n        var cloneRange;\n        if (getSelection().rangeCount !== 0 && !vditor[vditor.currentMode].element.querySelector(\"wbr\")) {\n            var range = getSelection().getRangeAt(0);\n            if (vditor[vditor.currentMode].element.contains(range.startContainer)) {\n                cloneRange = range.cloneRange();\n                var wbrElement = document.createElement(\"span\");\n                wbrElement.className = \"vditor-wbr\";\n                range.insertNode(wbrElement);\n            }\n        }\n        // 移除数学公式、echart 渲染 https://github.com/siyuan-note/siyuan/issues/537\n        var cloneElement = vditor.ir.element.cloneNode(true);\n        cloneElement.querySelectorAll(\".vditor-\".concat(vditor.currentMode, \"__preview[data-render='1']\"))\n            .forEach(function (item) {\n            if (!item.firstElementChild) {\n                return;\n            }\n            if (item.firstElementChild.classList.contains(\"language-echarts\") ||\n                item.firstElementChild.classList.contains(\"language-plantuml\") ||\n                item.firstElementChild.classList.contains(\"language-mindmap\")) {\n                item.firstElementChild.removeAttribute(\"_echarts_instance_\");\n                item.firstElementChild.removeAttribute(\"data-processed\");\n                item.firstElementChild.innerHTML = item.previousElementSibling.firstElementChild.innerHTML;\n                item.setAttribute(\"data-render\", \"2\");\n            }\n            else if (item.firstElementChild.classList.contains(\"language-math\")) {\n                item.setAttribute(\"data-render\", \"2\");\n                item.firstElementChild.textContent = item.firstElementChild.getAttribute(\"data-math\");\n                item.firstElementChild.removeAttribute(\"data-math\");\n            }\n        });\n        var text = vditor[vditor.currentMode].element.innerHTML;\n        vditor[vditor.currentMode].element.querySelectorAll(\".vditor-wbr\").forEach(function (item) {\n            item.remove();\n            // 使用 item.outerHTML = \"\" 会产生 https://github.com/Vanessa219/vditor/pull/686;\n        });\n        if (setFocus && cloneRange) {\n            (0,selection/* setSelectionFocus */.Hc)(cloneRange);\n        }\n        return text.replace('<span class=\"vditor-wbr\"></span>', \"<wbr>\");\n    };\n    return Undo;\n}());\n\n\n// EXTERNAL MODULE: ./src/ts/util/merge.ts\nvar merge = __webpack_require__(2);\n;// CONCATENATED MODULE: ./src/ts/util/Options.ts\n\n\nvar Options = /** @class */ (function () {\n    function Options(options) {\n        this.defaultOptions = {\n            rtl: false,\n            after: undefined,\n            cache: {\n                enable: true,\n            },\n            cdn: constants/* Constants.CDN */.g.CDN,\n            classes: {\n                preview: \"\",\n            },\n            comment: {\n                enable: false,\n            },\n            counter: {\n                enable: false,\n                type: \"markdown\",\n            },\n            customRenders: [],\n            debugger: false,\n            fullscreen: {\n                index: 90,\n            },\n            height: \"auto\",\n            hint: {\n                delay: 200,\n                emoji: {\n                    \"+1\": \"👍\",\n                    \"-1\": \"👎\",\n                    \"confused\": \"😕\",\n                    \"eyes\": \"👀️\",\n                    \"heart\": \"❤️\",\n                    \"rocket\": \"🚀️\",\n                    \"smile\": \"😄\",\n                    \"tada\": \"🎉️\",\n                },\n                emojiPath: \"\".concat(constants/* Constants.CDN */.g.CDN, \"/dist/images/emoji\"),\n                extend: [],\n                parse: true,\n            },\n            icon: \"ant\",\n            lang: \"zh_CN\",\n            mode: \"ir\",\n            outline: {\n                enable: false,\n                position: \"left\",\n            },\n            placeholder: \"\",\n            preview: {\n                actions: [\"desktop\", \"tablet\", \"mobile\", \"mp-wechat\", \"zhihu\"],\n                delay: 1000,\n                hljs: constants/* Constants.HLJS_OPTIONS */.g.HLJS_OPTIONS,\n                markdown: constants/* Constants.MARKDOWN_OPTIONS */.g.MARKDOWN_OPTIONS,\n                math: constants/* Constants.MATH_OPTIONS */.g.MATH_OPTIONS,\n                maxWidth: 800,\n                mode: \"both\",\n                theme: constants/* Constants.THEME_OPTIONS */.g.THEME_OPTIONS,\n                render: {\n                    media: {\n                        enable: true,\n                    }\n                }\n            },\n            link: {\n                isOpen: true,\n            },\n            image: {\n                isPreview: true,\n            },\n            resize: {\n                enable: false,\n                position: \"bottom\",\n            },\n            theme: \"classic\",\n            toolbar: [\n                \"emoji\",\n                \"headings\",\n                \"bold\",\n                \"italic\",\n                \"strike\",\n                \"link\",\n                \"|\",\n                \"list\",\n                \"ordered-list\",\n                \"check\",\n                \"outdent\",\n                \"indent\",\n                \"|\",\n                \"quote\",\n                \"line\",\n                \"code\",\n                \"inline-code\",\n                \"insert-before\",\n                \"insert-after\",\n                \"|\",\n                \"upload\",\n                \"record\",\n                \"table\",\n                \"|\",\n                \"undo\",\n                \"redo\",\n                \"|\",\n                \"fullscreen\",\n                \"edit-mode\",\n                {\n                    name: \"more\",\n                    toolbar: [\n                        \"both\",\n                        \"code-theme\",\n                        \"content-theme\",\n                        \"export\",\n                        \"outline\",\n                        \"preview\",\n                        \"devtools\",\n                        \"info\",\n                        \"help\",\n                    ],\n                },\n            ],\n            toolbarConfig: {\n                hide: false,\n                pin: false,\n            },\n            typewriterMode: false,\n            undoDelay: 800,\n            upload: {\n                extraData: {},\n                fieldName: \"file[]\",\n                filename: function (name) { return name.replace(/\\W/g, \"\"); },\n                linkToImgUrl: \"\",\n                max: 10 * 1024 * 1024,\n                multiple: true,\n                url: \"\",\n                withCredentials: false,\n            },\n            value: \"\",\n            width: \"auto\",\n        };\n        this.options = options;\n    }\n    Options.prototype.merge = function () {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        if (this.options) {\n            if (this.options.toolbar) {\n                this.options.toolbar = this.mergeToolbar(this.options.toolbar);\n            }\n            else {\n                this.options.toolbar = this.mergeToolbar(this.defaultOptions.toolbar);\n            }\n            if ((_b = (_a = this.options.preview) === null || _a === void 0 ? void 0 : _a.theme) === null || _b === void 0 ? void 0 : _b.list) {\n                this.defaultOptions.preview.theme.list = this.options.preview.theme.list;\n            }\n            if ((_e = (_d = (_c = this.options.preview) === null || _c === void 0 ? void 0 : _c.render) === null || _d === void 0 ? void 0 : _d.media) === null || _e === void 0 ? void 0 : _e.enable) {\n                this.defaultOptions.preview.render.media.enable = this.options.preview.render.media.enable;\n            }\n            if ((_f = this.options.hint) === null || _f === void 0 ? void 0 : _f.emoji) {\n                this.defaultOptions.hint.emoji = this.options.hint.emoji;\n            }\n            if (this.options.comment) {\n                this.defaultOptions.comment = this.options.comment;\n            }\n            if (this.options.cdn) {\n                if (!((_h = (_g = this.options.preview) === null || _g === void 0 ? void 0 : _g.theme) === null || _h === void 0 ? void 0 : _h.path)) {\n                    this.defaultOptions.preview.theme.path = \"\".concat(this.options.cdn, \"/dist/css/content-theme\");\n                }\n                if (!((_j = this.options.hint) === null || _j === void 0 ? void 0 : _j.emojiPath)) {\n                    this.defaultOptions.hint.emojiPath = \"\".concat(this.options.cdn, \"/dist/images/emoji\");\n                }\n            }\n        }\n        var mergedOptions = (0,merge/* merge */.T)(this.defaultOptions, this.options);\n        if (mergedOptions.cache.enable && !mergedOptions.cache.id) {\n            throw new Error(\"need options.cache.id, see https://ld246.com/article/1549638745630#options\");\n        }\n        return mergedOptions;\n    };\n    Options.prototype.mergeToolbar = function (toolbar) {\n        var _this = this;\n        var toolbarItem = [\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-export\"></use></svg>',\n                name: \"export\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘E\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-emoji\"></use></svg>',\n                name: \"emoji\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘H\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-headings\"></use></svg>',\n                name: \"headings\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘B\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-bold\"></use></svg>',\n                name: \"bold\",\n                prefix: \"**\",\n                suffix: \"**\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘I\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-italic\"></use></svg>',\n                name: \"italic\",\n                prefix: \"*\",\n                suffix: \"*\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘D\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-strike\"></use></svg>',\n                name: \"strike\",\n                prefix: \"~~\",\n                suffix: \"~~\",\n                tipPosition: \"ne\",\n            },\n            {\n                hotkey: \"⌘K\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-link\"></use></svg>',\n                name: \"link\",\n                prefix: \"[\",\n                suffix: \"](https://)\",\n                tipPosition: \"n\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                hotkey: \"⌘L\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-list\"></use></svg>',\n                name: \"list\",\n                prefix: \"* \",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘O\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-ordered-list\"></use></svg>',\n                name: \"ordered-list\",\n                prefix: \"1. \",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘J\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-check\"></use></svg>',\n                name: \"check\",\n                prefix: \"* [ ] \",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘I\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-outdent\"></use></svg>',\n                name: \"outdent\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘O\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-indent\"></use></svg>',\n                name: \"indent\",\n                tipPosition: \"n\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                hotkey: \"⌘;\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-quote\"></use></svg>',\n                name: \"quote\",\n                prefix: \"> \",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘H\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-line\"></use></svg>',\n                name: \"line\",\n                prefix: \"---\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘U\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-code\"></use></svg>',\n                name: \"code\",\n                prefix: \"```\",\n                suffix: \"\\n```\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘G\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-inline-code\"></use></svg>',\n                name: \"inline-code\",\n                prefix: \"`\",\n                suffix: \"`\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘B\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-before\"></use></svg>',\n                name: \"insert-before\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⇧⌘E\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-after\"></use></svg>',\n                name: \"insert-after\",\n                tipPosition: \"n\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-upload\"></use></svg>',\n                name: \"upload\",\n                tipPosition: \"n\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-record\"></use></svg>',\n                name: \"record\",\n                tipPosition: \"n\",\n            },\n            {\n                hotkey: \"⌘M\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-table\"></use></svg>',\n                name: \"table\",\n                prefix: \"| col1\",\n                suffix: \" | col2 | col3 |\\n| --- | --- | --- |\\n|  |  |  |\\n|  |  |  |\",\n                tipPosition: \"n\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                hotkey: \"⌘Z\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-undo\"></use></svg>',\n                name: \"undo\",\n                tipPosition: \"nw\",\n            },\n            {\n                hotkey: \"⌘Y\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-redo\"></use></svg>',\n                name: \"redo\",\n                tipPosition: \"nw\",\n            },\n            {\n                name: \"|\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-more\"></use></svg>',\n                name: \"more\",\n                tipPosition: \"e\",\n            },\n            {\n                hotkey: \"⌘'\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-fullscreen\"></use></svg>',\n                name: \"fullscreen\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-edit\"></use></svg>',\n                name: \"edit-mode\",\n                tipPosition: \"nw\",\n            },\n            {\n                hotkey: \"⌘P\",\n                icon: '<svg><use xlink:href=\"#vditor-icon-both\"></use></svg>',\n                name: \"both\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-preview\"></use></svg>',\n                name: \"preview\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-align-center\"></use></svg>',\n                name: \"outline\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-theme\"></use></svg>',\n                name: \"content-theme\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-code-theme\"></use></svg>',\n                name: \"code-theme\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-bug\"></use></svg>',\n                name: \"devtools\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-info\"></use></svg>',\n                name: \"info\",\n                tipPosition: \"nw\",\n            },\n            {\n                icon: '<svg><use xlink:href=\"#vditor-icon-help\"></use></svg>',\n                name: \"help\",\n                tipPosition: \"nw\",\n            },\n            {\n                name: \"br\",\n            },\n        ];\n        var toolbarResult = [];\n        toolbar.forEach(function (menuItem) {\n            var currentMenuItem = menuItem;\n            toolbarItem.forEach(function (defaultMenuItem) {\n                if (typeof menuItem === \"string\" &&\n                    defaultMenuItem.name === menuItem) {\n                    currentMenuItem = defaultMenuItem;\n                }\n                if (typeof menuItem === \"object\" &&\n                    defaultMenuItem.name === menuItem.name) {\n                    currentMenuItem = Object.assign({}, defaultMenuItem, menuItem);\n                }\n            });\n            if (menuItem.toolbar) {\n                currentMenuItem.toolbar = _this.mergeToolbar(menuItem.toolbar);\n            }\n            toolbarResult.push(currentMenuItem);\n        });\n        return toolbarResult;\n    };\n    return Options;\n}());\n\n\n;// CONCATENATED MODULE: ./src/ts/wysiwyg/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar WYSIWYG = /** @class */ (function () {\n    function WYSIWYG(vditor) {\n        var _this = this;\n        this.composingLock = false;\n        this.commentIds = [];\n        var divElement = document.createElement(\"div\");\n        divElement.className = \"vditor-wysiwyg\";\n        divElement.innerHTML = \"<pre class=\\\"vditor-reset\\\" placeholder=\\\"\".concat(vditor.options.placeholder, \"\\\"\\n contenteditable=\\\"true\\\" spellcheck=\\\"false\\\"></pre>\\n<div class=\\\"vditor-panel vditor-panel--none\\\"></div>\\n<div class=\\\"vditor-panel vditor-panel--none\\\">\\n    <button type=\\\"button\\\" aria-label=\\\"\").concat(window.VditorI18n.comment, \"\\\" class=\\\"vditor-icon vditor-tooltipped vditor-tooltipped__n\\\">\\n        <svg><use xlink:href=\\\"#vditor-icon-comment\\\"></use></svg>\\n    </button>\\n</div>\");\n        this.element = divElement.firstElementChild;\n        this.popover = divElement.firstElementChild.nextElementSibling;\n        this.selectPopover = divElement.lastElementChild;\n        this.bindEvent(vditor);\n        focusEvent(vditor, this.element);\n        dblclickEvent(vditor, this.element);\n        blurEvent(vditor, this.element);\n        hotkeyEvent(vditor, this.element);\n        selectEvent(vditor, this.element);\n        dropEvent(vditor, this.element);\n        copyEvent(vditor, this.element, this.copy);\n        cutEvent(vditor, this.element, this.copy);\n        if (vditor.options.comment.enable) {\n            this.selectPopover.querySelector(\"button\").onclick = function () {\n                var id = Lute.NewNodeID();\n                var range = getSelection().getRangeAt(0);\n                var rangeClone = range.cloneRange();\n                var contents = range.extractContents();\n                var blockStartElement;\n                var blockEndElement;\n                var removeStart = false;\n                var removeEnd = false;\n                contents.childNodes.forEach(function (item, index) {\n                    var wrap = false;\n                    if (item.nodeType === 3) {\n                        wrap = true;\n                    }\n                    else if (!item.classList.contains(\"vditor-comment\")) {\n                        wrap = true;\n                    }\n                    else if (item.classList.contains(\"vditor-comment\")) {\n                        item.setAttribute(\"data-cmtids\", item.getAttribute(\"data-cmtids\") + \" \" + id);\n                    }\n                    if (wrap) {\n                        if (item.nodeType !== 3 && item.getAttribute(\"data-block\") === \"0\"\n                            && index === 0 && rangeClone.startOffset > 0) {\n                            item.innerHTML =\n                                \"<span class=\\\"vditor-comment\\\" data-cmtids=\\\"\".concat(id, \"\\\">\").concat(item.innerHTML, \"</span>\");\n                            blockStartElement = item;\n                        }\n                        else if (item.nodeType !== 3 && item.getAttribute(\"data-block\") === \"0\"\n                            && index === contents.childNodes.length - 1\n                            && rangeClone.endOffset < rangeClone.endContainer.textContent.length) {\n                            item.innerHTML =\n                                \"<span class=\\\"vditor-comment\\\" data-cmtids=\\\"\".concat(id, \"\\\">\").concat(item.innerHTML, \"</span>\");\n                            blockEndElement = item;\n                        }\n                        else if (item.nodeType !== 3 && item.getAttribute(\"data-block\") === \"0\") {\n                            if (index === 0) {\n                                removeStart = true;\n                            }\n                            else if (index === contents.childNodes.length - 1) {\n                                removeEnd = true;\n                            }\n                            item.innerHTML =\n                                \"<span class=\\\"vditor-comment\\\" data-cmtids=\\\"\".concat(id, \"\\\">\").concat(item.innerHTML, \"</span>\");\n                        }\n                        else {\n                            var commentElement = document.createElement(\"span\");\n                            commentElement.classList.add(\"vditor-comment\");\n                            commentElement.setAttribute(\"data-cmtids\", id);\n                            item.parentNode.insertBefore(commentElement, item);\n                            commentElement.appendChild(item);\n                        }\n                    }\n                });\n                var startElement = (0,hasClosest/* hasClosestBlock */.F9)(rangeClone.startContainer);\n                if (startElement) {\n                    if (blockStartElement) {\n                        startElement.insertAdjacentHTML(\"beforeend\", blockStartElement.innerHTML);\n                        blockStartElement.remove();\n                    }\n                    else if (startElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && removeStart) {\n                        startElement.remove();\n                    }\n                }\n                var endElement = (0,hasClosest/* hasClosestBlock */.F9)(rangeClone.endContainer);\n                if (endElement) {\n                    if (blockEndElement) {\n                        endElement.insertAdjacentHTML(\"afterbegin\", blockEndElement.innerHTML);\n                        blockEndElement.remove();\n                    }\n                    else if (endElement.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\" && removeEnd) {\n                        endElement.remove();\n                    }\n                }\n                range.insertNode(contents);\n                vditor.options.comment.add(id, range.toString(), _this.getComments(vditor, true));\n                afterRenderEvent(vditor, {\n                    enableAddUndoStack: true,\n                    enableHint: false,\n                    enableInput: false,\n                });\n                _this.hideComment();\n            };\n        }\n    }\n    WYSIWYG.prototype.getComments = function (vditor, getData) {\n        var _this = this;\n        if (getData === void 0) { getData = false; }\n        if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable) {\n            this.commentIds = [];\n            this.element.querySelectorAll(\".vditor-comment\").forEach(function (item) {\n                _this.commentIds =\n                    _this.commentIds.concat(item.getAttribute(\"data-cmtids\").split(\" \"));\n            });\n            this.commentIds = Array.from(new Set(this.commentIds));\n            var comments_1 = [];\n            if (getData) {\n                this.commentIds.forEach(function (id) {\n                    comments_1.push({\n                        id: id,\n                        top: _this.element.querySelector(\".vditor-comment[data-cmtids=\\\"\".concat(id, \"\\\"]\")).offsetTop,\n                    });\n                });\n                return comments_1;\n            }\n        }\n        else {\n            return [];\n        }\n    };\n    WYSIWYG.prototype.triggerRemoveComment = function (vditor) {\n        var difference = function (a, b) {\n            var s = new Set(b);\n            return a.filter(function (x) { return !s.has(x); });\n        };\n        if (vditor.currentMode === \"wysiwyg\" && vditor.options.comment.enable && vditor.wysiwyg.commentIds.length > 0) {\n            var oldIds = JSON.parse(JSON.stringify(this.commentIds));\n            this.getComments(vditor);\n            var removedIds = difference(oldIds, this.commentIds);\n            if (removedIds.length > 0) {\n                vditor.options.comment.remove(removedIds);\n            }\n        }\n    };\n    WYSIWYG.prototype.showComment = function () {\n        var position = (0,selection/* getCursorPosition */.Ny)(this.element);\n        this.selectPopover.setAttribute(\"style\", \"left:\".concat(position.left, \"px;display:block;top:\").concat(Math.max(-8, position.top - 21), \"px\"));\n    };\n    WYSIWYG.prototype.hideComment = function () {\n        this.selectPopover.setAttribute(\"style\", \"display:none\");\n    };\n    WYSIWYG.prototype.unbindListener = function () {\n        window.removeEventListener(\"scroll\", this.scrollListener);\n    };\n    WYSIWYG.prototype.copy = function (event, vditor) {\n        var range = getSelection().getRangeAt(0);\n        if (range.toString() === \"\") {\n            return;\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        var codeElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"CODE\");\n        var codeEndElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.endContainer, \"CODE\");\n        if (codeElement && codeEndElement && codeEndElement.isSameNode(codeElement)) {\n            var codeText = \"\";\n            if (codeElement.parentElement.tagName === \"PRE\") {\n                codeText = range.toString();\n            }\n            else {\n                codeText = \"`\" + range.toString() + \"`\";\n            }\n            event.clipboardData.setData(\"text/plain\", codeText);\n            event.clipboardData.setData(\"text/html\", \"\");\n            return;\n        }\n        var aElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.startContainer, \"A\");\n        var aEndElement = (0,hasClosest/* hasClosestByMatchTag */.lG)(range.endContainer, \"A\");\n        if (aElement && aEndElement && aEndElement.isSameNode(aElement)) {\n            var aTitle = aElement.getAttribute(\"title\") || \"\";\n            if (aTitle) {\n                aTitle = \" \\\"\".concat(aTitle, \"\\\"\");\n            }\n            event.clipboardData.setData(\"text/plain\", \"[\".concat(range.toString(), \"](\").concat(aElement.getAttribute(\"href\")).concat(aTitle, \")\"));\n            event.clipboardData.setData(\"text/html\", \"\");\n            return;\n        }\n        var tempElement = document.createElement(\"div\");\n        tempElement.appendChild(range.cloneContents());\n        event.clipboardData.setData(\"text/plain\", vditor.lute.VditorDOM2Md(tempElement.innerHTML).trim());\n        event.clipboardData.setData(\"text/html\", \"\");\n    };\n    WYSIWYG.prototype.bindEvent = function (vditor) {\n        var _this = this;\n        this.unbindListener();\n        window.addEventListener(\"scroll\", this.scrollListener = function () {\n            hidePanel(vditor, [\"hint\"]);\n            if (_this.popover.style.display !== \"block\" || _this.selectPopover.style.display !== \"block\") {\n                return;\n            }\n            var top = parseInt(_this.popover.getAttribute(\"data-top\"), 10);\n            if (vditor.options.height !== \"auto\") {\n                if (vditor.options.toolbarConfig.pin && vditor.toolbar.element.getBoundingClientRect().top === 0) {\n                    var popoverTop = Math.max(window.scrollY - vditor.element.offsetTop - 8, Math.min(top - vditor.wysiwyg.element.scrollTop, _this.element.clientHeight - 21)) + \"px\";\n                    if (_this.popover.style.display === \"block\") {\n                        _this.popover.style.top = popoverTop;\n                    }\n                    if (_this.selectPopover.style.display === \"block\") {\n                        _this.selectPopover.style.top = popoverTop;\n                    }\n                }\n                return;\n            }\n            else if (!vditor.options.toolbarConfig.pin) {\n                return;\n            }\n            var popoverTop1 = Math.max(top, (window.scrollY - vditor.element.offsetTop - 8)) + \"px\";\n            if (_this.popover.style.display === \"block\") {\n                _this.popover.style.top = popoverTop1;\n            }\n            if (_this.selectPopover.style.display === \"block\") {\n                _this.selectPopover.style.top = popoverTop1;\n            }\n        });\n        this.element.addEventListener(\"scroll\", function () {\n            hidePanel(vditor, [\"hint\"]);\n            if (vditor.options.comment && vditor.options.comment.enable && vditor.options.comment.scroll) {\n                vditor.options.comment.scroll(vditor.wysiwyg.element.scrollTop);\n            }\n            if (_this.popover.style.display !== \"block\") {\n                return;\n            }\n            var top = parseInt(_this.popover.getAttribute(\"data-top\"), 10) - vditor.wysiwyg.element.scrollTop;\n            var max = -8;\n            if (vditor.options.toolbarConfig.pin && vditor.toolbar.element.getBoundingClientRect().top === 0) {\n                max = window.scrollY - vditor.element.offsetTop + max;\n            }\n            var topPx = Math.max(max, Math.min(top, _this.element.clientHeight - 21)) + \"px\";\n            _this.popover.style.top = topPx;\n            _this.selectPopover.style.top = topPx;\n        });\n        this.element.addEventListener(\"paste\", function (event) {\n            paste(vditor, event, {\n                pasteCode: function (code) {\n                    var range = (0,selection/* getEditorRange */.zh)(vditor);\n                    var node = document.createElement(\"template\");\n                    node.innerHTML = code;\n                    range.insertNode(node.content.cloneNode(true));\n                    var blockElement = (0,hasClosest/* hasClosestByAttribute */.a1)(range.startContainer, \"data-block\", \"0\");\n                    if (blockElement) {\n                        blockElement.outerHTML = vditor.lute.SpinVditorDOM(blockElement.outerHTML);\n                    }\n                    else {\n                        vditor.wysiwyg.element.innerHTML = vditor.lute.SpinVditorDOM(vditor.wysiwyg.element.innerHTML);\n                    }\n                    (0,selection/* setRangeByWbr */.ib)(vditor.wysiwyg.element, range);\n                },\n            });\n        });\n        // 中文处理\n        this.element.addEventListener(\"compositionstart\", function () {\n            _this.composingLock = true;\n        });\n        this.element.addEventListener(\"compositionend\", function (event) {\n            var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(getSelection().getRangeAt(0).startContainer);\n            if (headingElement && headingElement.textContent === \"\") {\n                // heading 为空删除 https://github.com/Vanessa219/vditor/issues/150\n                renderToc(vditor);\n                return;\n            }\n            if (!(0,compatibility/* isFirefox */.vU)()) {\n                input_input(vditor, getSelection().getRangeAt(0).cloneRange(), event);\n            }\n            _this.composingLock = false;\n        });\n        this.element.addEventListener(\"input\", function (event) {\n            if (event.inputType === \"deleteByDrag\" || event.inputType === \"insertFromDrop\") {\n                // https://github.com/Vanessa219/vditor/issues/801 编辑器内容拖拽问题\n                return;\n            }\n            if (_this.preventInput) {\n                _this.preventInput = false;\n                afterRenderEvent(vditor);\n                return;\n            }\n            if (_this.composingLock || event.data === \"‘\" || event.data === \"“\" || event.data === \"《\") {\n                afterRenderEvent(vditor);\n                return;\n            }\n            var range = getSelection().getRangeAt(0);\n            var blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n            if (!blockElement) {\n                // 没有被块元素包裹\n                modifyPre(vditor, range);\n                blockElement = (0,hasClosest/* hasClosestBlock */.F9)(range.startContainer);\n            }\n            if (!blockElement) {\n                return;\n            }\n            // 前后空格处理\n            var startOffset = (0,selection/* getSelectPosition */.im)(blockElement, vditor.wysiwyg.element, range).start;\n            // 开始可以输入空格\n            var startSpace = true;\n            for (var i = startOffset - 1; i > blockElement.textContent.substr(0, startOffset).lastIndexOf(\"\\n\"); i--) {\n                if (blockElement.textContent.charAt(i) !== \" \" &&\n                    // 多个 tab 前删除不形成代码块 https://github.com/Vanessa219/vditor/issues/162 1\n                    blockElement.textContent.charAt(i) !== \"\\t\") {\n                    startSpace = false;\n                    break;\n                }\n            }\n            if (startOffset === 0) {\n                startSpace = false;\n            }\n            // 结尾可以输入空格\n            var endSpace = true;\n            for (var i = startOffset - 1; i < blockElement.textContent.length; i++) {\n                if (blockElement.textContent.charAt(i) !== \" \" && blockElement.textContent.charAt(i) !== \"\\n\") {\n                    endSpace = false;\n                    break;\n                }\n            }\n            var headingElement = (0,hasClosestByHeadings/* hasClosestByHeadings */.W)(getSelection().getRangeAt(0).startContainer);\n            if (headingElement && headingElement.textContent === \"\") {\n                // heading 为空删除 https://github.com/Vanessa219/vditor/issues/150\n                renderToc(vditor);\n                headingElement.remove();\n            }\n            if ((startSpace && blockElement.getAttribute(\"data-type\") !== \"code-block\")\n                || endSpace || isHeadingMD(blockElement.innerHTML) ||\n                (isHrMD(blockElement.innerHTML) && blockElement.previousElementSibling)) {\n                if (typeof vditor.options.input === \"function\") {\n                    vditor.options.input(getMarkdown(vditor));\n                }\n                return;\n            }\n            // https://github.com/Vanessa219/vditor/issues/1565\n            if (event.inputType === \"insertParagraph\" && _this.element.innerHTML === '<p><br></p><p><br></p>') {\n                blockElement.previousElementSibling.remove();\n            }\n            input_input(vditor, range, event);\n        });\n        this.element.addEventListener(\"click\", function (event) {\n            if (event.target.tagName === \"INPUT\") {\n                var checkElement = event.target;\n                if (checkElement.checked) {\n                    checkElement.setAttribute(\"checked\", \"checked\");\n                }\n                else {\n                    checkElement.removeAttribute(\"checked\");\n                }\n                _this.preventInput = true;\n                afterRenderEvent(vditor);\n                return;\n            }\n            if (event.target.tagName === \"IMG\" &&\n                // plantuml 图片渲染不进行提示\n                !event.target.parentElement.classList.contains(\"vditor-wysiwyg__preview\")) {\n                if (event.target.getAttribute(\"data-type\") === \"link-ref\") {\n                    genLinkRefPopover(vditor, event.target);\n                }\n                else {\n                    genImagePopover(event, vditor);\n                }\n                return;\n            }\n            // 打开链接\n            var a = (0,hasClosest/* hasClosestByMatchTag */.lG)(event.target, \"A\");\n            if (a) {\n                if (vditor.options.link.click) {\n                    vditor.options.link.click(a);\n                }\n                else if (vditor.options.link.isOpen) {\n                    window.open(a.getAttribute(\"href\"));\n                }\n                event.preventDefault();\n                return;\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            if (event.target.isEqualNode(_this.element) && _this.element.lastElementChild && range.collapsed) {\n                var lastRect = _this.element.lastElementChild.getBoundingClientRect();\n                if (event.y > lastRect.top + lastRect.height) {\n                    if (_this.element.lastElementChild.tagName === \"P\" &&\n                        _this.element.lastElementChild.textContent.trim().replace(constants/* Constants.ZWSP */.g.ZWSP, \"\") === \"\") {\n                        range.selectNodeContents(_this.element.lastElementChild);\n                        range.collapse(false);\n                    }\n                    else {\n                        _this.element.insertAdjacentHTML(\"beforeend\", \"<p data-block=\\\"0\\\">\".concat(constants/* Constants.ZWSP */.g.ZWSP, \"<wbr></p>\"));\n                        (0,selection/* setRangeByWbr */.ib)(_this.element, range);\n                    }\n                }\n            }\n            highlightToolbarWYSIWYG(vditor);\n            // 点击后光标落于预览区，需展开代码块\n            var previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(event.target, \"vditor-wysiwyg__preview\");\n            if (!previewElement) {\n                previewElement =\n                    (0,hasClosest/* hasClosestByClassName */.fb)((0,selection/* getEditorRange */.zh)(vditor).startContainer, \"vditor-wysiwyg__preview\");\n            }\n            if (previewElement) {\n                showCode(previewElement, vditor);\n            }\n            clickToc(event, vditor);\n        });\n        this.element.addEventListener(\"keyup\", function (event) {\n            if (event.isComposing || (0,compatibility/* isCtrl */.yl)(event)) {\n                return;\n            }\n            // 除 md 处理、cell 内换行、table 添加新行/列、代码块语言切换、block render 换行、跳出/逐层跳出 blockquote、h6 换行、\n            // 任务列表换行、软换行外需在换行时调整文档位置\n            if (event.key === \"Enter\") {\n                scrollCenter(vditor);\n            }\n            if ((event.key === \"Backspace\" || event.key === \"Delete\") &&\n                vditor.wysiwyg.element.innerHTML !== \"\" && vditor.wysiwyg.element.childNodes.length === 1 &&\n                vditor.wysiwyg.element.firstElementChild && vditor.wysiwyg.element.firstElementChild.tagName === \"P\"\n                && vditor.wysiwyg.element.firstElementChild.childElementCount === 0\n                && (vditor.wysiwyg.element.textContent === \"\" || vditor.wysiwyg.element.textContent === \"\\n\")) {\n                // 为空时显示 placeholder\n                vditor.wysiwyg.element.innerHTML = \"\";\n            }\n            var range = (0,selection/* getEditorRange */.zh)(vditor);\n            if (event.key === \"Backspace\") {\n                // firefox headings https://github.com/Vanessa219/vditor/issues/211\n                if ((0,compatibility/* isFirefox */.vU)() && range.startContainer.textContent === \"\\n\" && range.startOffset === 1) {\n                    range.startContainer.textContent = \"\";\n                }\n            }\n            // 没有被块元素包裹\n            modifyPre(vditor, range);\n            highlightToolbarWYSIWYG(vditor);\n            if (event.key !== \"ArrowDown\" && event.key !== \"ArrowRight\" && event.key !== \"Backspace\"\n                && event.key !== \"ArrowLeft\" && event.key !== \"ArrowUp\") {\n                return;\n            }\n            if (event.key === \"ArrowLeft\" || event.key === \"ArrowRight\") {\n                vditor.hint.render(vditor);\n            }\n            // 上下左右，删除遇到块预览的处理\n            var previewElement = (0,hasClosest/* hasClosestByClassName */.fb)(range.startContainer, \"vditor-wysiwyg__preview\");\n            if (!previewElement && range.startContainer.nodeType !== 3 && range.startOffset > 0) {\n                // table 前删除遇到代码块\n                var blockRenderElement = range.startContainer;\n                if (blockRenderElement.classList.contains(\"vditor-wysiwyg__block\")) {\n                    previewElement = blockRenderElement.lastElementChild;\n                }\n            }\n            if (!previewElement) {\n                return;\n            }\n            var previousElement = previewElement.previousElementSibling;\n            if (previousElement.style.display === \"none\") {\n                if (event.key === \"ArrowDown\" || event.key === \"ArrowRight\") {\n                    showCode(previewElement, vditor);\n                }\n                else {\n                    showCode(previewElement, vditor, false);\n                }\n                return;\n            }\n            var codeElement = previewElement.previousElementSibling;\n            if (codeElement.tagName === \"PRE\") {\n                codeElement = codeElement.firstElementChild;\n            }\n            if (event.key === \"ArrowDown\" || event.key === \"ArrowRight\") {\n                var blockRenderElement = previewElement.parentElement;\n                var nextNode = getRenderElementNextNode(blockRenderElement);\n                if (nextNode && nextNode.nodeType !== 3) {\n                    // 下一节点依旧为代码渲染块\n                    var nextRenderElement = nextNode.querySelector(\".vditor-wysiwyg__preview\");\n                    if (nextRenderElement) {\n                        showCode(nextRenderElement, vditor);\n                        return;\n                    }\n                }\n                // 跳过渲染块，光标移动到下一个节点\n                if (nextNode.nodeType === 3) {\n                    // inline\n                    while (nextNode.textContent.length === 0 && nextNode.nextSibling) {\n                        // https://github.com/Vanessa219/vditor/issues/100 2\n                        nextNode = nextNode.nextSibling;\n                    }\n                    range.setStart(nextNode, 1);\n                }\n                else {\n                    // block\n                    range.setStart(nextNode.firstChild, 0);\n                }\n            }\n            else {\n                range.selectNodeContents(codeElement);\n                range.collapse(false);\n            }\n        });\n    };\n    return WYSIWYG;\n}());\n\n\n;// CONCATENATED MODULE: ./src/index.ts\nvar src_extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Vditor = /** @class */ (function (_super) {\n    src_extends(Vditor, _super);\n    /**\n     * @param id 要挂载 Vditor 的元素或者元素 ID。\n     * @param options Vditor 参数\n     */\n    function Vditor(id, options) {\n        var _this = _super.call(this) || this;\n        _this.version = constants/* VDITOR_VERSION */.H;\n        if (typeof id === \"string\") {\n            if (!options) {\n                options = {\n                    cache: {\n                        id: \"vditor\".concat(id),\n                    },\n                };\n            }\n            else if (!options.cache) {\n                options.cache = { id: \"vditor\".concat(id) };\n            }\n            else if (!options.cache.id) {\n                options.cache.id = \"vditor\".concat(id);\n            }\n            if (!document.getElementById(id)) {\n                _this.showErrorTip(\"Failed to get element by id: \".concat(id));\n                return _this;\n            }\n            id = document.getElementById(id);\n        }\n        var getOptions = new Options(options);\n        var mergedOptions = getOptions.merge();\n        // 支持自定义国际化\n        if (!mergedOptions.i18n) {\n            if (![\"en_US\", \"fr_FR\", \"pt_BR\", \"ja_JP\", \"ko_KR\", \"ru_RU\", \"sv_SE\", \"zh_CN\", \"zh_TW\"].includes(mergedOptions.lang)) {\n                throw new Error(\"options.lang error, see https://ld246.com/article/1549638745630#options\");\n            }\n            else {\n                var i18nScriptPrefix = \"vditorI18nScript\";\n                var i18nScriptID_1 = i18nScriptPrefix + mergedOptions.lang;\n                document.querySelectorAll(\"head script[id^=\\\"\".concat(i18nScriptPrefix, \"\\\"]\")).forEach(function (el) {\n                    if (el.id !== i18nScriptID_1) {\n                        document.head.removeChild(el);\n                    }\n                });\n                (0,addScript/* addScript */.G)(\"\".concat(mergedOptions.cdn, \"/dist/js/i18n/\").concat(mergedOptions.lang, \".js\"), i18nScriptID_1).then(function () {\n                    _this.init(id, mergedOptions);\n                }).catch(function (error) {\n                    _this.showErrorTip(\"GET \".concat(mergedOptions.cdn, \"/dist/js/i18n/\").concat(mergedOptions.lang, \".js net::ERR_ABORTED 404 (Not Found)\"));\n                });\n            }\n        }\n        else {\n            window.VditorI18n = mergedOptions.i18n;\n            _this.init(id, mergedOptions);\n        }\n        return _this;\n    }\n    Vditor.prototype.showErrorTip = function (error) {\n        var tip = new Tip();\n        document.body.appendChild(tip.element);\n        tip.show(error, 0);\n    };\n    Vditor.prototype.updateToolbarConfig = function (options) {\n        this.vditor.toolbar.updateConfig(this.vditor, options);\n    };\n    /** 设置主题 */\n    Vditor.prototype.setTheme = function (theme, contentTheme, codeTheme, contentThemePath) {\n        this.vditor.options.theme = theme;\n        setTheme(this.vditor);\n        if (contentTheme) {\n            this.vditor.options.preview.theme.current = contentTheme;\n            (0,setContentTheme/* setContentTheme */.Z)(contentTheme, contentThemePath || this.vditor.options.preview.theme.path);\n        }\n        if (codeTheme) {\n            this.vditor.options.preview.hljs.style = codeTheme;\n            (0,setCodeTheme/* setCodeTheme */.Y)(codeTheme, this.vditor.options.cdn);\n        }\n    };\n    /** 获取 Markdown 内容 */\n    Vditor.prototype.getValue = function () {\n        return getMarkdown(this.vditor);\n    };\n    /** 获取编辑器当前编辑模式 */\n    Vditor.prototype.getCurrentMode = function () {\n        return this.vditor.currentMode;\n    };\n    /** 聚焦到编辑器 */\n    Vditor.prototype.focus = function () {\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.element.focus();\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            this.vditor.wysiwyg.element.focus();\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            this.vditor.ir.element.focus();\n        }\n    };\n    /** 让编辑器失焦 */\n    Vditor.prototype.blur = function () {\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.element.blur();\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            this.vditor.wysiwyg.element.blur();\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            this.vditor.ir.element.blur();\n        }\n    };\n    /** 禁用编辑器 */\n    Vditor.prototype.disabled = function () {\n        hidePanel(this.vditor, [\"subToolbar\", \"hint\", \"popover\"]);\n        disableToolbar(this.vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS.concat */.g.EDIT_TOOLBARS.concat([\"undo\", \"redo\", \"fullscreen\", \"edit-mode\"]));\n        this.vditor[this.vditor.currentMode].element.setAttribute(\"contenteditable\", \"false\");\n    };\n    /** 解除编辑器禁用 */\n    Vditor.prototype.enable = function () {\n        enableToolbar(this.vditor.toolbar.elements, constants/* Constants.EDIT_TOOLBARS.concat */.g.EDIT_TOOLBARS.concat([\"undo\", \"redo\", \"fullscreen\", \"edit-mode\"]));\n        this.vditor.undo.resetIcon(this.vditor);\n        this.vditor[this.vditor.currentMode].element.setAttribute(\"contenteditable\", \"true\");\n    };\n    /** 返回选中的字符串 */\n    Vditor.prototype.getSelection = function () {\n        if (this.vditor.currentMode === \"wysiwyg\") {\n            return getSelectText(this.vditor.wysiwyg.element);\n        }\n        else if (this.vditor.currentMode === \"sv\") {\n            return getSelectText(this.vditor.sv.element);\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            return getSelectText(this.vditor.ir.element);\n        }\n    };\n    /** 设置预览区域内容 */\n    Vditor.prototype.renderPreview = function (value) {\n        this.vditor.preview.render(this.vditor, value);\n    };\n    /** 获取焦点位置 */\n    Vditor.prototype.getCursorPosition = function () {\n        return (0,selection/* getCursorPosition */.Ny)(this.vditor[this.vditor.currentMode].element);\n    };\n    /** 上传是否还在进行中 */\n    Vditor.prototype.isUploading = function () {\n        return this.vditor.upload.isUploading;\n    };\n    /** 清除缓存 */\n    Vditor.prototype.clearCache = function () {\n        localStorage.removeItem(this.vditor.options.cache.id);\n    };\n    /** 禁用缓存 */\n    Vditor.prototype.disabledCache = function () {\n        this.vditor.options.cache.enable = false;\n    };\n    /** 启用缓存 */\n    Vditor.prototype.enableCache = function () {\n        if (!this.vditor.options.cache.id) {\n            throw new Error(\"need options.cache.id, see https://ld246.com/article/1549638745630#options\");\n        }\n        this.vditor.options.cache.enable = true;\n    };\n    /** HTML 转 md */\n    Vditor.prototype.html2md = function (value) {\n        return this.vditor.lute.HTML2Md(value);\n    };\n    /** markdown 转 JSON 输出 */\n    Vditor.prototype.exportJSON = function (value) {\n        return this.vditor.lute.RenderJSON(value);\n    };\n    /** 获取 HTML */\n    Vditor.prototype.getHTML = function () {\n        return getHTML(this.vditor);\n    };\n    /** 消息提示。time 为 0 将一直显示 */\n    Vditor.prototype.tip = function (text, time) {\n        this.vditor.tip.show(text, time);\n    };\n    /** 设置预览模式 */\n    Vditor.prototype.setPreviewMode = function (mode) {\n        setPreviewMode(mode, this.vditor);\n    };\n    /** 删除选中内容 */\n    Vditor.prototype.deleteValue = function () {\n        if (window.getSelection().isCollapsed) {\n            return;\n        }\n        document.execCommand(\"delete\", false);\n    };\n    /** 更新选中内容 */\n    Vditor.prototype.updateValue = function (value) {\n        document.execCommand(\"insertHTML\", false, value);\n    };\n    /** 在焦点处插入内容，并默认进行 Markdown 渲染 */\n    Vditor.prototype.insertValue = function (value, render) {\n        if (render === void 0) { render = true; }\n        var range = (0,selection/* getEditorRange */.zh)(this.vditor);\n        range.collapse(true);\n        var tmpElement = document.createElement(\"template\");\n        tmpElement.innerHTML = value;\n        range.insertNode(tmpElement.content.cloneNode(true));\n        range.collapse(false);\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.preventInput = true;\n            if (render) {\n                inputEvent(this.vditor);\n            }\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            // 由于 https://github.com/Vanessa219/vditor/issues/1566 不能使用 this.vditor.wysiwyg.preventInput = true;\n            if (render) {\n                input_input(this.vditor, getSelection().getRangeAt(0));\n            }\n        }\n        else if (this.vditor.currentMode === \"ir\") {\n            this.vditor.ir.preventInput = true;\n            if (render) {\n                input(this.vditor, getSelection().getRangeAt(0), true);\n            }\n        }\n    };\n    /** 设置编辑器内容 */\n    Vditor.prototype.setValue = function (markdown, clearStack) {\n        var _this = this;\n        if (clearStack === void 0) { clearStack = false; }\n        if (this.vditor.currentMode === \"sv\") {\n            this.vditor.sv.element.innerHTML = \"<div data-block='0'>\".concat(this.vditor.lute.SpinVditorSVDOM(markdown), \"</div>\");\n            processAfterRender(this.vditor, {\n                enableAddUndoStack: true,\n                enableHint: false,\n                enableInput: false,\n            });\n        }\n        else if (this.vditor.currentMode === \"wysiwyg\") {\n            renderDomByMd(this.vditor, markdown, {\n                enableAddUndoStack: true,\n                enableHint: false,\n                enableInput: false,\n            });\n        }\n        else {\n            this.vditor.ir.element.innerHTML = this.vditor.lute.Md2VditorIRDOM(markdown);\n            this.vditor.ir.element\n                .querySelectorAll(\".vditor-ir__preview[data-render='2']\")\n                .forEach(function (item) {\n                processCodeRender(item, _this.vditor);\n            });\n            process_processAfterRender(this.vditor, {\n                enableAddUndoStack: true,\n                enableHint: false,\n                enableInput: false,\n            });\n        }\n        this.vditor.outline.render(this.vditor);\n        if (!markdown) {\n            hidePanel(this.vditor, [\"emoji\", \"headings\", \"submenu\", \"hint\"]);\n            if (this.vditor.wysiwyg.popover) {\n                this.vditor.wysiwyg.popover.style.display = \"none\";\n            }\n            this.clearCache();\n        }\n        if (clearStack) {\n            this.clearStack();\n        }\n    };\n    /** 清空 undo & redo 栈 */\n    Vditor.prototype.clearStack = function () {\n        this.vditor.undo.clearStack(this.vditor);\n        this.vditor.undo.addToUndoStack(this.vditor);\n    };\n    /** 销毁编辑器 */\n    Vditor.prototype.destroy = function () {\n        this.vditor.element.innerHTML = this.vditor.originalInnerHTML;\n        this.vditor.element.classList.remove(\"vditor\");\n        this.vditor.element.removeAttribute(\"style\");\n        var iconScript = document.getElementById(\"vditorIconScript\");\n        if (iconScript) {\n            iconScript.remove();\n        }\n        this.clearCache();\n        UIUnbindListener();\n        this.vditor.wysiwyg.unbindListener();\n    };\n    /** 获取评论 ID */\n    Vditor.prototype.getCommentIds = function () {\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return [];\n        }\n        return this.vditor.wysiwyg.getComments(this.vditor, true);\n    };\n    /** 高亮评论 */\n    Vditor.prototype.hlCommentIds = function (ids) {\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return;\n        }\n        var hlItem = function (item) {\n            item.classList.remove(\"vditor-comment--hover\");\n            ids.forEach(function (id) {\n                if (item.getAttribute(\"data-cmtids\").indexOf(id) > -1) {\n                    item.classList.add(\"vditor-comment--hover\");\n                }\n            });\n        };\n        this.vditor.wysiwyg.element\n            .querySelectorAll(\".vditor-comment\")\n            .forEach(function (item) {\n            hlItem(item);\n        });\n        if (this.vditor.preview.element.style.display !== \"none\") {\n            this.vditor.preview.element\n                .querySelectorAll(\".vditor-comment\")\n                .forEach(function (item) {\n                hlItem(item);\n            });\n        }\n    };\n    /** 取消评论高亮 */\n    Vditor.prototype.unHlCommentIds = function (ids) {\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return;\n        }\n        var unHlItem = function (item) {\n            ids.forEach(function (id) {\n                if (item.getAttribute(\"data-cmtids\").indexOf(id) > -1) {\n                    item.classList.remove(\"vditor-comment--hover\");\n                }\n            });\n        };\n        this.vditor.wysiwyg.element\n            .querySelectorAll(\".vditor-comment\")\n            .forEach(function (item) {\n            unHlItem(item);\n        });\n        if (this.vditor.preview.element.style.display !== \"none\") {\n            this.vditor.preview.element\n                .querySelectorAll(\".vditor-comment\")\n                .forEach(function (item) {\n                unHlItem(item);\n            });\n        }\n    };\n    /** 删除评论 */\n    Vditor.prototype.removeCommentIds = function (removeIds) {\n        var _this = this;\n        if (this.vditor.currentMode !== \"wysiwyg\") {\n            return;\n        }\n        var removeItem = function (item, removeId) {\n            var ids = item.getAttribute(\"data-cmtids\").split(\" \");\n            ids.find(function (id, index) {\n                if (id === removeId) {\n                    ids.splice(index, 1);\n                    return true;\n                }\n            });\n            if (ids.length === 0) {\n                item.outerHTML = item.innerHTML;\n                (0,selection/* getEditorRange */.zh)(_this.vditor).collapse(true);\n            }\n            else {\n                item.setAttribute(\"data-cmtids\", ids.join(\" \"));\n            }\n        };\n        removeIds.forEach(function (removeId) {\n            _this.vditor.wysiwyg.element\n                .querySelectorAll(\".vditor-comment\")\n                .forEach(function (item) {\n                removeItem(item, removeId);\n            });\n            if (_this.vditor.preview.element.style.display !== \"none\") {\n                _this.vditor.preview.element\n                    .querySelectorAll(\".vditor-comment\")\n                    .forEach(function (item) {\n                    removeItem(item, removeId);\n                });\n            }\n        });\n        afterRenderEvent(this.vditor, {\n            enableAddUndoStack: true,\n            enableHint: false,\n            enableInput: false,\n        });\n    };\n    Vditor.prototype.init = function (id, mergedOptions) {\n        var _this = this;\n        this.vditor = {\n            currentMode: mergedOptions.mode,\n            element: id,\n            hint: new Hint(mergedOptions.hint.extend),\n            lute: undefined,\n            options: mergedOptions,\n            originalInnerHTML: id.innerHTML,\n            outline: new Outline(window.VditorI18n.outline),\n            tip: new Tip(),\n        };\n        this.vditor.sv = new Editor(this.vditor);\n        this.vditor.undo = new undo_Undo();\n        this.vditor.wysiwyg = new WYSIWYG(this.vditor);\n        this.vditor.ir = new IR(this.vditor);\n        this.vditor.toolbar = new Toolbar(this.vditor);\n        if (mergedOptions.resize.enable) {\n            this.vditor.resize = new Resize(this.vditor);\n        }\n        if (this.vditor.toolbar.elements.devtools) {\n            this.vditor.devtools = new DevTools();\n        }\n        if (mergedOptions.upload.url || mergedOptions.upload.handler) {\n            this.vditor.upload = new Upload();\n        }\n        (0,addScript/* addScript */.G)(mergedOptions._lutePath ||\n            \"\".concat(mergedOptions.cdn, \"/dist/js/lute/lute.min.js\"), \"vditorLuteScript\").then(function () {\n            _this.vditor.lute = (0,setLute/* setLute */.X)({\n                autoSpace: _this.vditor.options.preview.markdown.autoSpace,\n                gfmAutoLink: _this.vditor.options.preview.markdown.gfmAutoLink,\n                codeBlockPreview: _this.vditor.options.preview.markdown\n                    .codeBlockPreview,\n                emojiSite: _this.vditor.options.hint.emojiPath,\n                emojis: _this.vditor.options.hint.emoji,\n                fixTermTypo: _this.vditor.options.preview.markdown.fixTermTypo,\n                footnotes: _this.vditor.options.preview.markdown.footnotes,\n                headingAnchor: false,\n                inlineMathDigit: _this.vditor.options.preview.math.inlineDigit,\n                linkBase: _this.vditor.options.preview.markdown.linkBase,\n                linkPrefix: _this.vditor.options.preview.markdown.linkPrefix,\n                listStyle: _this.vditor.options.preview.markdown.listStyle,\n                mark: _this.vditor.options.preview.markdown.mark,\n                mathBlockPreview: _this.vditor.options.preview.markdown\n                    .mathBlockPreview,\n                paragraphBeginningSpace: _this.vditor.options.preview.markdown\n                    .paragraphBeginningSpace,\n                sanitize: _this.vditor.options.preview.markdown.sanitize,\n                toc: _this.vditor.options.preview.markdown.toc,\n            });\n            _this.vditor.preview = new Preview(_this.vditor);\n            initUI(_this.vditor);\n            if (mergedOptions.after) {\n                mergedOptions.after();\n            }\n            if (mergedOptions.icon) {\n                // 防止初始化 2 个编辑器时加载 2 次\n                (0,addScript/* addScriptSync */.J)(\"\".concat(mergedOptions.cdn, \"/dist/js/icons/\").concat(mergedOptions.icon, \".js\"), \"vditorIconScript\");\n            }\n        });\n    };\n    return Vditor;\n}(method[\"default\"]));\n/* harmony default export */ const src = (Vditor);\n\n})();\n\n__webpack_exports__ = __webpack_exports__[\"default\"];\n/******/ \treturn __webpack_exports__;\n/******/ })()\n;\n});"],"names":["props","ref","AntdIcon","A","icon","factory","__webpack_modules__","module","diff_match_patch","this","Diff_Timeout","Diff_EditCost","Match_Threshold","Match_Distance","Patch_DeleteThreshold","Patch_Margin","Match_MaxBits","DIFF_DELETE","Diff","op","text","prototype","diff_main","text1","text2","opt_checklines","opt_deadline","Number","MAX_VALUE","Date","getTime","deadline","Error","checklines","commonlength","diff_commonPrefix","commonprefix","substring","diff_commonSuffix","commonsuffix","length","diffs","diff_compute_","unshift","push","diff_cleanupMerge","longtext","shorttext","i","indexOf","hm","diff_halfMatch_","text1_a","text1_b","text2_a","text2_b","mid_common","diffs_a","diffs_b","concat","diff_lineMode_","diff_bisect_","a","diff_linesToChars_","chars1","chars2","linearray","lineArray","diff_charsToLines_","diff_cleanupSemantic","pointer","count_delete","count_insert","text_delete","text_insert","splice","subDiff","j","pop","text1_length","text2_length","max_d","Math","ceil","v_offset","v_length","v1","Array","v2","x","delta","front","k1start","k1end","k2start","k2end","d","k1","k1_offset","y1","x1","charAt","k2_offset","x2","diff_bisectSplit_","k2","y2","y","text1a","text2a","text1b","text2b","diffsb","lineHash","diff_linesToCharsMunge_","chars","lineStart","lineEnd","lineArrayLength","line","hasOwnProperty","undefined","String","fromCharCode","maxLines","charCodeAt","join","pointermin","pointermax","min","pointermid","pointerstart","floor","pointerend","diff_commonOverlap_","text_length","best","pattern","found","dmp","diff_halfMatchI_","best_longtext_a","best_longtext_b","best_shorttext_a","best_shorttext_b","seed","best_common","prefixLength","suffixLength","hm1","hm2","changes","equalities","equalitiesLength","lastEquality","length_insertions1","length_deletions1","length_insertions2","length_deletions2","max","diff_cleanupSemanticLossless","deletion","insertion","overlap_length1","overlap_length2","diff_cleanupSemanticScore_","one","two","char1","char2","nonAlphaNumeric1","match","nonAlphaNumericRegex_","nonAlphaNumeric2","whitespace1","whitespaceRegex_","whitespace2","lineBreak1","linebreakRegex_","lineBreak2","blankLine1","blanklineEndRegex_","blankLine2","blanklineStartRegex_","equality1","edit","equality2","commonOffset","commonString","bestEquality1","bestEdit","bestEquality2","bestScore","score","diff_cleanupEfficiency","pre_ins","pre_del","post_ins","post_del","diff_xIndex","loc","last_chars1","last_chars2","diff_prettyHtml","html","pattern_amp","pattern_lt","pattern_gt","pattern_para","replace","diff_text1","diff_text2","diff_levenshtein","levenshtein","insertions","deletions","data","diff_toDelta","encodeURI","diff_fromDelta","diffsLength","tokens","split","param","decodeURI","ex","n","parseInt","isNaN","match_main","match_bitap_","s","match_alphabet_","match_bitapScore_","e","accuracy","proximity","abs","score_threshold","best_loc","lastIndexOf","bin_min","bin_mid","matchmask","last_rd","bin_max","start","finish","rd","charMatch","patch_addContext_","patch","start2","length1","padding","prefix","suffix","start1","length2","patch_make","opt_b","opt_c","patches","patch_obj","patchDiffLength","char_count1","char_count2","prepatch_text","postpatch_text","diff_type","diff_text","patch_deepCopy","patchesCopy","patchCopy","patch_apply","nullPadding","patch_addPadding","patch_splitMax","results","start_loc","expected_loc","end_loc","index2","index1","mod","paddingLength","extraLength","patch_size","bigpatch","precontext","empty","shift","postcontext","patch_toText","patch_fromText","textline","textPointer","patchHeader","m","sign","toString","exports","DIFF_INSERT","DIFF_EQUAL","__unused_webpack_module","abcRender","adapterRender","chartRender","codeRender","flowchartRender","graphvizRender","highlightRender","lazyLoadImageRender","element","document","loadImg","it","testImage","createElement","src","getAttribute","addEventListener","naturalHeight","naturalWidth","querySelector","clientWidth","window","innerHeight","style","height","removeAttribute","querySelectorAll","forEach","imgElement","vditorImageIntersectionObserver","disconnect","observe","IntersectionObserver","entries","entrie","isIntersecting","intersectionRatio","target","mathRender","mediaRender","mermaidRender","markmapRender","mindmapRender","outlineRender","plantumlRender","constants","setContentTheme","addScript","hasClosest","merge","setLute","selection","speechRender","lang","speechSynthesis","SpeechSynthesisUtterance","getVoice","currentVoice","defaultVoice","getVoices","item","default","playSVG","pauseSVG","getElementById","speechDom","className","insertAdjacentElement","onvoiceschanged","voice","utterThis","onend","onerror","display","cancel","classList","remove","innerHTML","ontouchstart","event","contains","parentElement","speaking","paused","resume","pause","speak","add","Hc","vditorSpeechRange","focus","getSelection","rangeCount","range","getRangeAt","trim","cloneRange","rect","getBoundingClientRect","top","scrollTop","left","changedTouches","pageX","clientX","setAttribute","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","rejected","result","done","then","apply","__generator","body","f","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","v","TypeError","call","mergeOptions","options","_a","defaultOption","anchor","cdn","CDN","customEmoji","emojiPath","hljs","HLJS_OPTIONS","markdown","MARKDOWN_OPTIONS","math","MATH_OPTIONS","mode","speech","enable","render","media","theme","THEME_OPTIONS","path","T","md2html","mdText","mergedOptions","G","lute","X","autoSpace","gfmAutoLink","codeBlockPreview","emojiSite","emojis","fixTermTypo","footnotes","headingAnchor","inlineMathDigit","inlineDigit","lazyLoadImage","linkBase","linkPrefix","listStyle","mark","mathBlockPreview","paragraphBeginningSpace","sanitize","toc","renderers","SetJSRenderers","Md2HTML","SetHeadingID","previewRender","previewElement","i18nScriptPrefix","i18nScriptID_1","transform","i18n","includes","el","id","head","removeChild","VditorI18n","Z","current","O","H","K","p","B","Q","Y","type","onclick","substr","offsetTop","onhashchange","decodeURIComponent","location","hash","after","spanElement","lG","fb","headingElement","scrollTo","scrollX","preview_image","setCodeTheme","method","Vditor","previewImage","E","k","preview","_VDITOR_VERSION","Constants","ZWSP","DROP_EDITOR","MOBILE_WIDTH","CLASS_MENU_DISABLED","EDIT_TOOLBARS","CODE_THEME","CODE_LANGUAGES","lineNumber","defaultLang","engine","macros","list","_constants__WEBPACK_IMPORTED_MODULE_0__","_util_addScript__WEBPACK_IMPORTED_MODULE_2__","_adapterRender__WEBPACK_IMPORTED_MODULE_1__","abcElements","abcRenderAdapter","getElements","ABCJS","renderAbc","getCode","overflowX","r","mathRenderAdapter","mathElement","textContent","mermaidRenderAdapter","markmapRenderAdapter","mindmapRenderAdapter","chartRenderAdapter","innerText","graphvizRenderAdapter","flowchartRenderAdapter","plantumlRenderAdapter","echartsElements","option","JSON","parse","echarts","init","setOption","error","_util_code160to32__WEBPACK_IMPORTED_MODULE_1__","from","filter","index","maxHeight","_b","_c","codeText","codeElement","cloneNode","endsWith","iconHTML","divElement","copy","copied","textarea","renderMenu","before","outerHeight","insertAdjacentHTML","flowchartElements","flowchartObj","flowchart","drawSVG","graphvizElements","code","blob","Blob","blobUrl","URL","webkitURL","createObjectURL","worker","Worker","Viz","renderSVGElement","outerHTML","catch","console","_util_addStyle__WEBPACK_IMPORTED_MODULE_1__","hljsOption","vditorHljsStyle","href","c","block","highlightElement","linenNumberTemp","whiteSpace","getComputedStyle","isSoftWrap","lineNumberHTML","lineList","map","lineHeight","enabled","markmap","Transformer","Markmap","deriveOptions","transformer","globalCSS","svg","firstChild","mm","create","content","keys","Object","features","key","getAssets","styles","scripts","loadCSS","loadJS","root","frontmatter","frontmatterOptions","setData","fit","markmapElements","parentNode","appendChild","childNodes","nodeName","_util_addScript__WEBPACK_IMPORTED_MODULE_3__","_util_addStyle__WEBPACK_IMPORTED_MODULE_2__","_util_code160to32__WEBPACK_IMPORTED_MODULE_4__","mathElements","defaultOptions","assign","katex","renderToString","displayMode","tagName","output","message","stopPropagation","preventDefault","vditorMathElement","currentTarget","closest","clipboardData","MathJax","loader","paths","mathjax","startup","typeset","tex","mathJaxOptions","J","renderMath_1","mathOptions","getMetricsFor","tex2svgPromise","node","append","clear","updateDocument","errorTextElement","promise","chains","_loop_1","fns","curr","last","fn","chainAsync_1","_util_function__WEBPACK_IMPORTED_MODULE_0__","aElement","url","videoRender","audioRender","youtubeMatch","youkuMatch","qqMatch","coubMatch","facebookMatch","dailymotionMatch","bilibiliMatch","tedMatch","encodeURIComponent","params_1","bvid","o","page","high_quality","as_wide","allowfullscreen","autoplay","startsWith","search","keyValue","src_1","keys_1","iframeRender","_util_function__WEBPACK_IMPORTED_MODULE_3__","mermaidElements","config","securityLevel","altFontFamily","fontFamily","startOnLoad","htmlLabels","useMaxWidth","sequence","diagramMarginX","diagramMarginY","boxMargin","showSequenceNumbers","gantt","leftPadding","rightPadding","mermaid","initialize","mermaidData","e_1","errorElement","W","mindmapElements","series","initialTreeDepth","itemStyle","borderWidth","color","backgroundColor","borderColor","borderRadius","offset","position","lineStyle","width","roam","symbol","params","children","tooltip","trigger","triggerOn","_util_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_1__","_mathRender__WEBPACK_IMPORTED_MODULE_0__","contentElement","targetElement","vditor","tocHTML","ids","lastIndex","tempElement","SetToC","currentMode","HTML2VditorDOM","SpinVditorIRDOM","SpinVditorDOM","Lute","New","headingsElement","firstElementChild","nextElementSibling","isEqualNode","idElement","windowScrollY","toolbarConfig","pin","toolbar","offsetHeight","scrollY","plantumlElements","plantumlEncoder","encode","PutEmojis","SetEmojiSite","SetHeadingAnchor","SetInlineMathAllowDigitAfterOpenMarker","SetAutoSpace","SetFootnotes","SetFixTermTypo","SetVditorCodeBlockPreview","SetVditorMathBlockPreview","SetSanitize","SetChineseParagraphBeginningSpace","SetRenderListStyle","SetLinkBase","SetLinkPrefix","SetMark","SetGFMAutoLink","SetImageLazyLoading","oldImgElement","oldImgRect","spin","close","overflow","translate3d","innerWidth","setTimeout","scrollWidth","scrollHeight","clientHeight","btnElement","deg","codeTheme","_util_addStyle__WEBPACK_IMPORTED_MODULE_0__","contentTheme","vditorContentTheme","cssPath","addScriptSync","xhrObj","XMLHttpRequest","open","setRequestHeader","send","scriptElement","responseText","async","onload","addStyle","styleElement","rel","getElementsByTagName","code160to32","isSafari","navigator","userAgent","isFirefox","toLowerCase","accessLocalStorage","localStorage","getEventName","isCtrl","platform","toUpperCase","metaKey","ctrlKey","updateHotkeyTip","hotkey","test","isChrome","vendor","genUUID","crypto","getRandomValues","Uint32Array","getSearch","link","hashIndex","URLSearchParams","get","_hasClosestByHeadings__WEBPACK_IMPORTED_MODULE_0__","hasTopClosestByClassName","hasClosestByClassName","parentClosest","findTop","hasTopClosestByTag","S","getTopList","topUlElement","topOlElement","topListElement","hasClosestByAttribute","attr","nodeType","isClosest","hasClosestBlock","blockElement","hasClosestByMatchTag","getLastNode","lastChild","hasClosestByTag","hasClosestByHeadings","_i","arguments","merger","obj","prop","_compatibility__WEBPACK_IMPORTED_MODULE_2__","_hasClosest__WEBPACK_IMPORTED_MODULE_1__","getEditorRange","startContainer","ownerDocument","createRange","setStart","collapse","getCursorPosition","editor","cursorRect","parentRect","getClientRects","parent_1","startOffset","selectNode","setEnd","endContainer","endOffset","selectIsEditor","container","commonAncestorContainer","setSelectionFocus","removeAllRanges","addRange","getSelectPosition","selectElement","editorElement","end","preSelectionRange","selectNodeContents","setSelectionByPosition","charIndex","pNode","foundStart","stop","nextCharIndex","nextSibling","setStartBefore","setStartAfter","setEndBefore","setEndAfter","setRangeByWbr","wbrElement","previousElementSibling","isSameNode","previousSibling","i7","insertNode","createTextNode","insertHTML","tempBlockElement","pasteElement","preventInput","execCommand","lastElementChild","F9","pasteTemplate","__webpack_module_cache__","moduleId","cachedModule","definition","defineProperty","enumerable","toStringTag","resizeCb","getMarkdown","sv","VditorDOM2Md","wysiwyg","VditorIRDOM2Md","ir","DevTools","renderEchart","_this","devtools","ASTChart","RenderEChartsJSON","align","fontSize","verticalAlign","orient","toolbox","bottom","emphasis","iconStyle","feature","restore","show","saveAsImage","right","resize","compatibility","removeCurrentToolbar","names","name","itemElement","setCurrentToolbar","enableToolbar","disableToolbar","hideToolbar","showToolbar","hidePanel","panels","exceptElement","elements","emoji","hint","popover","toggleSubMenu","panelElement","actionBtn","level","Le","log","print","processCodeRender","previewPanel","language","customRenders","find","renderToc","outline","clickToc","keydownToc","im","execAfterRender","insertBeforeBlock","trimRight","insertAfterBlock","tocElement","input","ignoreSpace","isHrMD","isHeadingMD","startSpace","endSpace","previousNode","previewRenderElement","firstLinkRefDefElement","isIRElement","footnoteElement","a1","blockquoteElement","O9","listPrevElement","listNextElement","inputType","debugger","footnoteItemElement","footnoteItemText","marker","footnoteRefElement","firstFootnoteElement","allLinkRefDefsElement","allFootnoteElement","ib","process_processAfterRender","enableAddUndoStack","enableHint","enableInput","matchHotKey","hotKey","yl","altKey","shiftKey","hotKeys","keyCode","hasShift","vU","expandMarker","nodeElement","JQ","nodeElementEnd","collapsed","nextNode","nodeValue","markerElement","parentNextNode","nextIsNode","previousIsNode","combineFootnote","afterCombine","footnote","thisNode","inputEvent","processAfterRender","codeBlockMarkerElement","openMarkerElement","getSideByType","mathBlockMarkerElement","mathBlockCloseElement","Caret","isSVElement","footnotes_1","processSpinVditorSVDOM","scrollCenter","setTheme","setPadding","minPadding","maxWidth","paddingLeft","offsetWidth","setTypewriterPosition","typewriterMode","minHeight","setProperty","UIUnbindListener","removeEventListener","extendStatics","templateObject_1","afterRender","initValue","pK","getItem","cache","originalInnerHTML","HTML2Md","highlightToolbarIR","clearTimeout","hlToolbarTimeoutId","Gb","zh","typeElement","liElement","afterRenderEvent","afterRenderTimeoutId","composingLock","counter","setItem","undo","addToUndoStack","undoDelay","getNextHTML","getPreviousHTML","modifyPre","pElement","cloneRangeOffset","insertBefore","setHeading","removeHeading","showCode","first","previousElement","removeBlockElement","click","highlightToolbarWYSIWYG","footnotesElement","genClose","setPopoverPosition","commentElement","ids_1","nextIds_1","tableElement","genUp","genDown","updateTable_1","oldRow","rows","oldColumn","cells","row","input_1","column","input2_1","columnDiff","rowDiff","rowHTML","l","setAlign_1","setTableAlign","left_1","center_1","right_1","td","th","alignType","alignLeft","ns","alignCenter","alignRight","insertRowElement","insertRowBelow","cellElement","insertRow","insertRowBElement","insertRowAbove","insertColumnElement","insertColumnRight","insertColumn","insertColumnBElement","insertColumnLeft","deleteRowElement","deleteRow","deleteColumnElement","deleteColumn","inputWrap","textAlign","oninput","onkeydown","isComposing","select","focusToElement","input2Wrap","linkRefElement","genLinkRefPopover","footnotesRefElement","footnoteRef","input_2","blockRenderElement","isBlock","languageWrap","language_1","codeElement_1","recentLanguage","detail","onkeyup","matchLangData","selectionStart","langs","keyName","genHTML","input_3","genAPopover","backslashElement","offsetLeft","updateLinkRef","input1","textIsNotEmpty","linkHotkey","input1Wrap","linkRef","upElement","up","nextElement","downElement","down","nextInputElement","updateA","input2","tooltipText","highlightToolbar","renderDomByMd","md","Md2VditorDOM","cancelBES","commandName","jump","lastTagName","lastEndTagName","splitHTML","previousHTML","nextHTML","beforeHTML","afterHTML","splitElement","lastBeforeHTML","lastAfterHTML","MenuItem","menuItem","tip","iconElement","tipPosition","CustomEvent","useHighlight","useRender","quoteElement","inlineCodeElement","listToggle","surroundContents","deleteContents","textInputElement","textInputElements","tableHTML_1","tableText","delimiter_1","header","subIndex","cell","hrHTML","toolbarEvent","process_processToolbar","processToolbar","__extends","b","setPrototypeOf","__proto__","__","constructor","setEditMode","markdownText","SetVditorIR","SetVditorWYSIWYG","SetVditorSV","Md2VditorIRDOM","svHTML","resetIcon","toggle","EditMode","_super","instantRendering","splitView","_bindEvent","getSelectText","focusEvent","dblclickEvent","image","isPreview","blurEvent","expandElement","selectPopover","relatedTarget","hideComment","blur","dropEvent","dataTransfer","getData","types","paste","pasteCode","copyEvent","cutEvent","comment","getComments","adjustTop","cursorTop","Ny","hotkeyEvent","keydown","extend","_d","_e","recordFirstPosition","textElement","blockquoteMarkerElement","listMarkerElement","taskMarkerElement","listLastMarkerElement","startIndex","isTask","listFirstMarkerElement","fixTab","isFirst","newLineMatch","newLineText","processPreviousMarkers","extractContents","previousLastElement","processKeydown_processKeydown","fixGSKeyBackspace","fixCJKPosition","fixHR","fixMarkdown","fixList","fixTable","codeRenderElement","inputElemment","fixCodeBlock","fixBlockquote","topBQElement","E2","pTempElement","fixTask","linRefElement","inputElement","fixDelete","rangeStart","rangeStartOffset","nextIsCode","fixFirefoxArrowUpTable","fixCursorDownInlineMath","wysiwyg_processKeydown_processKeydown","newlineElement","beforeMarkerElement","afterMarkerElement","preRenderElement","preBeforeElement","isFirstCell","table2Element","isLastCell","headingMarkerElement","process_processHeading","headingLength","processKeydown","ctrlEnter","redo","esc","processHeading","repeat","subMenuItem","dispatchEvent","selectEvent","onmouseup","selectText","showComment","processPaste","spinHTML","SpinVditorSVDOM","spanNode","isPrevious","sideElement","spanType","markerText","hasNL","previousType","previousText","openMarker","processTimeoutId","newLine","insertAdjacentText","getElement","setHeaders","xhr","upload","headers","Upload","isUploading","uploadFiles","files","fileList","filesMax","fileItem","isValidate","validateResult","formData","extraData","iMax","multiple","DataTransferItem","getAsFile","handler","file","validate","hide","uploadFileList","errorTip","uploadingStr","nameEmpty","size","over","fileExt","filename","accept","some","fileTypeError","uploading","validateFile","FormData","fieldName","token","withCredentials","onreadystatechange","readyState","DONE","status","success","format","response","msg","errFiles","uploadError","succFileText","succMap","genUploadedLabel","onprogress","lengthComputable","progress","loaded","total","input_input","previousAEmptyElement","previoueIsEmptyA","wbr","html_1","firstLinkRefDefElement_1","isWYSIWYGElement","firstFootnoteElement_1","triggerRemoveComment","__makeTemplateObject","cooked","raw","fixBrowserBehavior_awaiter","fixBrowserBehavior_generator","pLiElement","zwspNode","inlineElement","insertEmptyBlock","goPreviousCell","isSelected","pHTML","childElementCount","trimLeft","replaceChild","listIndent","liElements_1","cloneContents","liParentElement","liHTML_1","slice","tempTopListElement","listOutdent","liParentLiElement","liParentAfterElement","liElements_2","isMatch_1","afterHTML_1","reverse","columnCnt","rowCnt","currentColumn","textArray","tab","pText","pTextList","tableHeaderMD","pInnerHTML","innerHTMLList","lastElement","DX","theadHTML","tbodyElement","brElement","trElement","codePosition","isEmpty","taskItemElement","checked","afterHTML_2","beforeHTML_1","isAfter_1","taskItem","parentTagName","dataMarker","startAttribute","rangeElement","lastCellElement","callback","textHTML","textPlain","renderLinkDest","doc","fileReader_1","file_1","items","entering","WalkContinue","TokensStr","__internal_object__","Parent","Type","linkToImgUrl","xhr_1","linkToImgFormat","responseJSON_1","original_1","originalURL","linkToImgCallback","stringify","EscapeHTMLStr","DOMParser","parseFromString","Sanitize","isCode","pres","processPasteCode","$j","HTML2VditorIRDOM","oC","Md2VditorSVDOM","FileReader","readAsDataURL","imgHTML","IsValidLinkDest","processHint","matchLangData_1","key_1","removeInline","aTextElement","hint_awaiter","hint_generator","Hint","hintExtends","splitChar","fillEmoji","preElement","timeId","focusNode","currentLineValue","getKey","emojiHint_1","GetEmojis","matchEmojiData_1","delay","textareaPosition","hintsHTML","hintData","replaceHtml","replaceIndex","defaultView","getPropertyValue","currentHintElement","length_1","currentLastIndex","lastItem","preChar","IR","placeholder","bindEvent","linkElement","lastRect","isOpen","getHTML","VditorDOM2HTML","VditorIRDOM2HTML","Outline","outlineLabel","Preview","classes","copyToX","actions","actionElement","actionHtml","action","btn","actionCustom","w","mdTimeoutId","renderStartTime","responseJSON","startTime","time","performanceTip","cmtFocusElement","copyElement","backgroundImage","Resize","documentSelf","clientY","ondragstart","captureEvents","onmousemove","moveEvent","paddingBottom","onselectstart","onselect","Editor","textScrollTop","textHeight","textScrollHeight","parseFloat","Tip","setPreviewMode","Both_extends","Both","Br","CodeTheme_extends","CodeTheme","ContentTheme_extends","ContentTheme","Counter","Custom_extends","Custom","Devtools_extends","Devtools","Divider","Emoji_extends","Emoji","commonEmojiHTML","emojiValue","emojiTail","download","downloadTip","Export_extends","Export","exportMarkdown","generate","iframe","contentDocument","write","contentWindow","postMessage","exportPDF","exportHTML","Fullscreen_extends","Fullscreen","zIndex","svgElement","dataset","fullscreen","Headings_extends","Headings","heading1","heading2","heading3","heading4","heading5","heading6","Help_extends","Help","Indent_extends","Indent","Info_extends","Info","Version","InsertAfter_extends","InsertAfter","InsertBefore_extends","InsertBefore","Outdent_extends","Outdent","Outline_extends","Outline_Outline","Preview_extends","Preview_Preview","toolbars","RecordMedia","context","SAMPLE_RATE","isRecording","readyFlag","leftChannel","rightChannel","recordingLength","AudioContext","webkitAudioContext","DEFAULT_SAMPLE_RATE","sampleRate","volume","createGain","createMediaStreamSource","connect","recorder","createScriptProcessor","onaudioprocess","destination","cloneChannelData","leftChannelData","rightChannelData","Float32Array","startRecordingNewWavFile","stopRecording","buildWavFileBlob","leftBuffer","mergeBuffers","rightBuffer","interleaved","downSampleBuffer","totalByteCount","buffer","ArrayBuffer","view","DataView","writeUTFBytes","setUint32","setUint16","subChunk2ByteCount","lng","setInt16","rate","sampleRateRatio","newLength","round","offsetResult","offsetBuffer","nextOffsetBuffer","accum","count","desiredChannelBuffer","set","setUint8","Record_extends","Record","mediaRecorder","File","recording","mediaDevices","getUserMedia","audio","mediaStream","inputBuffer","getChannelData","Redo_extends","Redo","Undo_extends","Undo","Upload_extends","Upload_Upload","inputHTML","Toolbar","genItem","panelElement_1","subI","updateConfig","menuItemObj","undo_Undo","stackSize","resetStack","clearStack","undoStack","redoStack","state","renderDiff","hasUndo","G6","addCaret","lastText","diff","patchList","isRedo","redoPatchList","setFocus","Options","rtl","_f","_g","_h","_j","mergeToolbar","toolbarItem","toolbarResult","currentMenuItem","defaultMenuItem","WYSIWYG","commentIds","blockStartElement","blockEndElement","NewNodeID","rangeClone","contents","removeStart","removeEnd","wrap","startElement","endElement","Set","comments_1","oldIds","removedIds","has","unbindListener","scrollListener","codeEndElement","aEndElement","aTitle","popoverTop1","popoverTop","scroll","topPx","checkElement","updateImg","alt","title","imageURL","elementEvent","altWrap","alternateText","titleWrap","genImagePopover","blockCodeElement","getRenderElementNextNode","nextRenderElement","src_extends","version","showErrorTip","updateToolbarConfig","contentThemePath","getValue","getCurrentMode","disabled","renderPreview","clearCache","removeItem","disabledCache","enableCache","html2md","exportJSON","RenderJSON","deleteValue","isCollapsed","updateValue","insertValue","tmpElement","setValue","destroy","iconScript","getCommentIds","hlCommentIds","hlItem","unHlCommentIds","unHlItem","removeCommentIds","removeIds","removeId","_lutePath","export","visualViewport","pendingUpdate_1","viewportHandler","requestAnimationFrame","layoutViewport","initUI"],"sourceRoot":""}