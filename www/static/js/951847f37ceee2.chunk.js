/*! For license information please see 951847f37ceee2.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkhexo_pro_client=self.webpackChunkhexo_pro_client||[]).push([[9518,1111],{99705:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(58168),a=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"};var c=n(87064),i=function(e,t){return a.createElement(c.A,(0,r.A)({},e,{ref:t,icon:o}))};const l=a.forwardRef(i)},77028:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(58168),a=n(96540);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};var c=n(87064),i=function(e,t){return a.createElement(c.A,(0,r.A)({},e,{ref:t,icon:o}))};const l=a.forwardRef(i)},89518:(e,t,n)=>{n.r(t),n.d(t,{default:()=>$});var r=n(96540),a=n(34555),o=n(95308),c=n(85319),i=n(69036),l=n(42702),s=n(31198),u=n(29029),m=n(47152),f=n(16370),p=n(677),d=n(14135),g=n(16044),h=n(17308),y=n(77019),v=n(78295),A=n(29957),E=n(77028),b=n(93598),x=n(58168);const w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M484 443.1V528h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H484v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V584h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H540v-84.9c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1zm396-144.7H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder-add",theme:"outlined"};var k=n(87064),S=function(e,t){return r.createElement(k.A,(0,x.A)({},e,{ref:t,icon:w}))};const C=r.forwardRef(S);var T=n(57046);const B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M567.1 512l318.5-319.3c5-5 1.5-13.7-5.6-13.7h-90.5c-2.1 0-4.2.8-5.6 2.3l-273.3 274-90.2-90.5c12.5-22.1 19.7-47.6 19.7-74.8 0-83.9-68.1-152-152-152s-152 68.1-152 152 68.1 152 152 152c27.7 0 53.6-7.4 75.9-20.3l90 90.3-90.1 90.3A151.04 151.04 0 00288 582c-83.9 0-152 68.1-152 152s68.1 152 152 152 152-68.1 152-152c0-27.2-7.2-52.7-19.7-74.8l90.2-90.5 273.3 274c1.5 1.5 3.5 2.3 5.6 2.3H880c7.1 0 10.7-8.6 5.6-13.7L567.1 512zM288 370c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80zm0 444c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]},name:"scissor",theme:"outlined"};var F=function(e,t){return r.createElement(k.A,(0,x.A)({},e,{ref:t,icon:B}))};const L=r.forwardRef(F);var N=n(40261),I=n(99705),j=n(30234),O=n(31923),P=n(86510),Q=n(88430),H=n(44692),z=n(81111);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function R(){R=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,c=Object.create(o.prototype),i=new L(r||[]);return a(c,"_invoke",{value:C(e,n,i)}),c}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",d="executing",g="completed",h={};function y(){}function v(){}function A(){}var E={};s(E,c,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(N([])));x&&x!==n&&r.call(x,c)&&(E=x);var w=A.prototype=y.prototype=Object.create(E);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(a,o,c,i){var l=m(e[a],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==D(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(u).then((function(e){s.value=e,c(s)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function C(t,n,r){var a=f;return function(o,c){if(a===d)throw Error("Generator is already running");if(a===g){if("throw"===o)throw c;return{value:e,done:!0}}for(r.method=o,r.arg=c;;){var i=r.delegate;if(i){var l=T(i,r);if(l){if(l===h)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===f)throw a=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var s=m(t,n,r);if("normal"===s.type){if(a=r.done?g:p,s.arg===h)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(a=g,r.method="throw",r.arg=s.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=m(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,h;var c=o.arg;return c?c.done?(n[t.resultName]=c.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):c:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function B(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function F(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(B,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(D(t)+" is not iterable")}return v.prototype=A,a(w,"constructor",{value:A,configurable:!0}),a(A,"constructor",{value:v,configurable:!0}),v.displayName=s(A,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,A):(e.__proto__=A,s(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},k(S.prototype),s(S.prototype,i,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var c=new S(u(e,n,r,a),o);return t.isGeneratorFunction(n)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},k(w),s(w,l,"Generator"),s(w,c,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(F),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return i.type="throw",i.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=r.call(c,"catchLoc"),s=r.call(c,"finallyLoc");if(l&&s){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),F(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;F(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=D(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==D(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){q(o,r,a,c,i,"next",e)}function i(e){q(o,r,a,c,i,"throw",e)}c(void 0)}))}}function U(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(e,t)||V(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){if(e){if("string"==typeof e)return X(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var W=a.A.Title,Z=a.A.Text,_=(o.A.Dragger,c.A.Option);const $=function(){var e=(0,P.A)(),t=((0,r.useContext)(Q.F).theme,(0,H.A)().isMobile),n=J((0,r.useState)(!1),2),a=n[0],x=n[1],w=J((0,r.useState)({images:[],folders:[],total:0,page:1,pageSize:12}),2),k=w[0],S=w[1],B=J((0,r.useState)(1),2),F=B[0],D=B[1],M=J((0,r.useState)(t?8:12),2),K=M[0],q=M[1],V=J((0,r.useState)(""),2),X=V[0],$=V[1],ee=J((0,r.useState)(!1),2),te=ee[0],ne=ee[1],re=J((0,r.useState)([]),2),ae=re[0],oe=re[1],ce=J((0,r.useState)(!1),2),ie=ce[0],le=ce[1],se=J((0,r.useState)(!1),2),ue=se[0],me=se[1],fe=J((0,r.useState)(""),2),pe=fe[0],de=fe[1],ge=J((0,r.useState)(!1),2),he=ge[0],ye=ge[1],ve=J((0,r.useState)(!1),2),Ae=ve[0],Ee=ve[1],be=J((0,r.useState)(null),2),xe=be[0],we=be[1],ke=J((0,r.useState)(""),2),Se=ke[0],Ce=ke[1],Te=J((0,r.useState)(!1),2),Be=Te[0],Fe=Te[1],Le=J((0,r.useState)(""),2),Ne=Le[0],Ie=Le[1],je=J((0,r.useState)(""),2),Oe=je[0],Pe=je[1],Qe=J((0,r.useState)(!1),2),He=Qe[0],ze=Qe[1],De=J((0,r.useState)(""),2),Re=De[0],Me=De[1],Ge=J((0,r.useState)("local"),2),Ke=Ge[0],qe=Ge[1],Ye=J((0,r.useState)(["local"]),2),Ue=Ye[0],Je=Ye[1],Ve=J((0,r.useState)([]),2),Xe=Ve[0],We=Ve[1],Ze=J((0,r.useState)(!1),2),_e=Ze[0],$e=Ze[1],et=J((0,r.useState)(!1),2),tt=et[0],nt=et[1],rt=J((0,r.useState)(!1),2),at=rt[0],ot=rt[1],ct=J((0,r.useState)([]),2),it=ct[0],lt=ct[1],st=J((0,r.useState)([]),2),ut=st[0],mt=st[1],ft=J((0,r.useState)(!0),2),pt=ft[0],dt=ft[1],gt=J((0,r.useState)(!0),2),ht=gt[0],yt=gt[1],vt=J((0,r.useState)(3),2),At=vt[0],Et=vt[1],bt=J((0,r.useState)(""),2),xt=bt[0],wt=bt[1],kt=J((0,r.useState)(0),2),St=kt[0],Ct=kt[1],Tt=J((0,r.useState)(1),2),Bt=Tt[0],Ft=Tt[1],Lt=J((0,r.useState)(200),2),Nt=Lt[0],It=(Lt[1],function(){var t=Y(R().mark((function t(){var n,r,a;return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x(!0),t.prev=1,t.next=4,O.Ay.get("/hexopro/api/images/list",{params:{page:F,pageSize:K,folder:X,storageType:Ke,includeSubfolders:"trash"===X}});case 4:n=t.sent,r=(new Date).getTime(),a=G(G({},n.data),{},{images:n.data.images.map((function(e){return G(G({},e),{},{url:"".concat(e.url).concat(e.url.includes("?")?"&":"?","_t=").concat(r)})}))}),S((function(e){return a})),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),i.Ay.error(e["content.images.fetchFailed"]||"获取图片列表失败"),console.error(t.t0);case 14:return t.prev=14,x(!1),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,10,14,17]])})));return function(){return t.apply(this,arguments)}}()),jt=function(){var e=Y(R().mark((function e(){var t,n,r,a,o,c,i,l;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.Ay.get("/hexopro/api/images/config/get");case 3:r=e.sent,console.log(r),null!=r&&null!==(t=r.data)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.type&&(o=(null==r||null===(a=r.data)||void 0===a?void 0:a.data)||{},c=o.type,function(e){if("aliyun"===e){var t=o.aliyun||{};return t.bucket&&(t.domain||t.region&&t.accessKeyId&&t.accessKeySecret)}if("qiniu"===e){var n=o.qiniu||{};return n.bucket&&n.domain&&n.accessKey&&n.secretKey}if("tencent"===e){var r=o.tencent||{};return r.bucket&&(r.domain||r.region&&r.secretId&&r.secretKey)}return!0}(c)&&qe(c)),i=[],l=(null==r||null===(n=r.data)||void 0===n?void 0:n.data)||{},console.log(l),i.push("local"),l.aliyun&&l.aliyun.bucket&&(l.aliyun.domain||l.aliyun.region&&l.aliyun.accessKeyId&&l.aliyun.accessKeySecret)&&i.push("aliyun"),l.qiniu&&l.qiniu.bucket&&l.qiniu.domain&&l.qiniu.accessKey&&l.qiniu.secretKey&&(console.log("qiniu"),i.push("qiniu")),l.tencent&&l.tencent.bucket&&(l.tencent.domain||l.tencent.region&&l.tencent.secretId&&l.tencent.secretKey)&&i.push("tencent"),Je(Array.from(new Set(i))),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),Ot=function(){var t=Y(R().mark((function t(){return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(pe.trim()){t.next=3;break}return i.Ay.error(e["content.images.folderNameRequired"]||"文件夹名称不能为空"),t.abrupt("return");case 3:return t.prev=3,t.next=6,O.Ay.post("/hexopro/api/images/createFolder",{folderName:pe,storageType:Ke});case 6:i.Ay.success(e["content.images.createFolderSuccess"]||"创建文件夹成功"),le(!1),de(""),It(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(3),i.Ay.error(e["content.images.createFolderFailed"]||"创建文件夹失败"),console.error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(){return t.apply(this,arguments)}}(),Pt=function(){var t=Y(R().mark((function t(n){return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.Ay.post("/hexopro/api/images/delete",{path:n.path,storageType:Ke});case 3:i.Ay.success(e["content.images.deleteSuccess"]||"删除成功"),It(),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),i.Ay.error(e["content.images.deleteFailed"]||"删除失败"),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),Qt=function(){var t=Y(R().mark((function t(){return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Se.trim()&&xe){t.next=3;break}return i.Ay.error(e["content.images.newNameRequired"]||"新名称不能为空"),t.abrupt("return");case 3:return t.prev=3,t.next=6,O.Ay.post("/hexopro/api/images/rename",{oldPath:xe.path,newName:Se,storageType:Ke});case 6:i.Ay.success(e["content.images.renameSuccess"]||"重命名成功"),Ee(!1),Ce(""),ze(!1),console.log(xe.path.replace(xe.name,"")+Se),setTimeout((function(){It()}),1e3),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),i.Ay.error(e["content.images.renameFailed"]||"重命名失败"),console.error(t.t0);case 18:case"end":return t.stop()}}),t,null,[[3,14]])})));return function(){return t.apply(this,arguments)}}(),Ht=function(){var t=Y(R().mark((function t(){return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(xe){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,O.Ay.post("/hexopro/api/images/move",{path:xe.path,targetFolder:Ne,storageType:Ke});case 5:i.Ay.success(e["content.images.moveSuccess"]||"移动成功"),Fe(!1),It(),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),i.Ay.error(e["content.images.moveFailed"]||"移动失败"),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),zt=function(e){return e<1024?"".concat(e," B"):e<1048576?"".concat((e/1024).toFixed(2)," KB"):"".concat((e/1024/1024).toFixed(2)," MB")};return(0,r.useEffect)((function(){It()}),[F,K,X,Ke]),(0,r.useEffect)((function(){jt()}),[]),(0,r.useEffect)((function(){q(t?8:12)}),[t]),r.createElement("div",{className:z.default.imageManager},r.createElement("div",{className:z.default.header},r.createElement(W,{level:4},e["content.images.title"]||"图床管理"),r.createElement(l.A,null,r.createElement(s.Ay,{type:"primary",icon:r.createElement(E.A,null),onClick:function(){return ne(!0)}},e["content.images.upload"]||"上传图片"),"trash"!==X&&r.createElement(s.Ay,{icon:r.createElement(b.A,null),onClick:function(){return nt(!0)}},e["content.images.cleanupUnused"]||"清理未引用图片"),r.createElement(s.Ay,{icon:r.createElement(C,null),onClick:function(){return le(!0)}},e["content.images.createFolder"]||"新建文件夹"))),r.createElement("div",{className:z.default.folderSelector},r.createElement(Z,{strong:!0,style:{marginRight:8}},e["content.images.currentFolder"]||"当前文件夹",":"),"trash"!==X?r.createElement(c.A,{style:{width:t?200:300,marginLeft:8},value:X,onChange:function(e){$(e),D(1)},placeholder:e["content.images.selectFolder"]||"选择文件夹"},r.createElement(_,{value:""},e["content.images.rootFolder"]||"根目录"),k.folders.filter((function(e){return"trash"!==String(e).toLowerCase()})).map((function(e){return r.createElement(_,{key:e,value:e},e)}))):r.createElement(Z,{type:"secondary",style:{marginLeft:8}},"trash"),r.createElement("div",{style:{flex:1}}),r.createElement(Z,{strong:!0,style:{marginLeft:16,marginRight:8}},e["content.images.storageType"]||"图床",":"),r.createElement(c.A,{style:{width:t?140:180},value:Ke,onChange:function(e){qe(e),D(1)}},Ue.map((function(e){return r.createElement(_,{key:e,value:e},e)}))),r.createElement(s.Ay,{style:{marginLeft:8},onClick:function(){$("trash"===X?"":"trash"),D(1)}},"trash"===X?e["content.images.back"]||"返回":e["content.images.trash"]||"回收站"),r.createElement(s.Ay,{danger:!0,style:{marginLeft:12},disabled:"trash"===X,onClick:function(){return me(!0)}},e["content.images.deleteFolder"]||"删除文件夹")),r.createElement(u.A,{spinning:a},k.images.length>0?r.createElement(r.Fragment,null,r.createElement(m.A,{gutter:[16,16],className:z.default.imageGrid},k.images.map((function(t){return r.createElement(f.A,{xs:12,sm:8,md:6,lg:6,xl:4,key:t.url},r.createElement(p.A,{hoverable:!0,className:Xe.includes(t.path)?z.default.selectedCard:"",onClick:function(){return e=t.path,void We((function(t){return t.includes(e)?t.filter((function(t){return t!==e})):[].concat(U(t),[e])}));var e},cover:r.createElement("div",{className:z.default.imageContainer},r.createElement(d.A,{key:t.url,src:t.url,alt:t.name,preview:!1,fallback:"data:image/png;base64,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"})),actions:[r.createElement(s.Ay,{type:"text",icon:r.createElement(j.A,null),onClick:function(e){e.stopPropagation(),Me(t.url),ze(!0)},title:e["content.images.preview"]||"预览"}),r.createElement(s.Ay,{type:"text",icon:r.createElement(T.A,null),onClick:function(n){var r;n.stopPropagation(),r=t.url,navigator.clipboard.writeText(r).then((function(){i.Ay.success(e["content.images.copySuccess"]||"复制成功")})).catch((function(){var t=document.createElement("textarea");t.value=r,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),i.Ay.success(e["content.images.copySuccess"]||"复制成功")}))},title:e["content.images.copy"]||"复制链接"}),r.createElement(s.Ay,{type:"text",icon:r.createElement(L,null),onClick:function(e){e.stopPropagation(),we(t),Ie(""),Fe(!0)},title:e["content.images.move"]||"移动"})].concat(U([r.createElement(s.Ay,{type:"text",icon:r.createElement(N.A,null),onClick:function(e){e.stopPropagation(),we(t),Ce(t.name),Ee(!0)},title:e["content.images.rename"]||"重命名"}),r.createElement(g.A,{title:e["content.images.deleteConfirm"]||"确定要删除这张图片吗？",onConfirm:function(){return Pt(t)},okText:e["content.images.ok"]||"确定",cancelText:e["content.images.cancel"]||"取消"},r.createElement(s.Ay,{type:"text",danger:!0,icon:r.createElement(b.A,null),title:e["content.images.delete"]||"删除",onClick:function(e){return e.stopPropagation()}}))]))},r.createElement(p.A.Meta,{title:r.createElement(Z,{ellipsis:{tooltip:t.name}},t.name),description:r.createElement("div",null,r.createElement("div",null,zt(t.size)))})))}))),Xe.length>0&&r.createElement("div",{style:{marginTop:12,display:"flex",gap:8,alignItems:"center"}},r.createElement(Z,null,e["content.images.selectedCount"]||"已选中",": ",Xe.length),r.createElement(s.Ay,{danger:!0,onClick:Y(R().mark((function t(){return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.Ay.post("/hexopro/api/images/delete/batch",{paths:Xe,storageType:Ke});case 3:i.Ay.success(e["content.images.deleteSuccess"]||"删除成功"),We([]),It(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),i.Ay.error(e["content.images.deleteFailed"]||"删除失败");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))},e["content.images.batchDelete"]||"批量删除"),r.createElement(s.Ay,{onClick:function(){return We([])}},e["content.images.clearSelection"]||"清空选择"))):r.createElement(h.A,{description:e["content.images.noImages"]||"暂无图片",className:z.default.empty})),k.total>0&&r.createElement("div",{className:z.default.pagination},r.createElement(y.A,{current:F,pageSize:K,total:k.total,onChange:function(e,t){D(e),t&&q(t)},showSizeChanger:!1,responsive:!0})),r.createElement(v.A,{title:e["content.images.uploadTitle"]||"上传图片",open:te,onCancel:function(){ne(!1),oe([])},footer:null,width:t?"90%":520},r.createElement("div",{className:z.default.uploadForm},r.createElement("div",{className:z.default.formItem},r.createElement(Z,{strong:!0},e["content.images.targetFolder"]||"目标文件夹",":"),r.createElement(c.A,{style:{width:"100%",marginTop:8},value:X,onChange:$,placeholder:e["content.images.selectFolder"]||"选择文件夹"},r.createElement(_,{value:""},e["content.images.rootFolder"]||"根目录"),k.folders.filter((function(e){return"trash"!==String(e).toLowerCase()})).map((function(e){return r.createElement(_,{key:e,value:e},e)})))),r.createElement("div",{className:z.default.formItem},r.createElement(Z,{strong:!0},e["content.images.customFileName"]||"自定义文件名",":"),r.createElement(A.A,{style:{marginTop:8},value:Oe,onChange:function(e){console.log(e.target.value),Pe(e.target.value)},placeholder:e["content.images.fileNamePlaceholder"]||"留空则自动生成"})),r.createElement("div",{className:z.default.formItem},r.createElement(o.A.Dragger,{name:"data",multiple:!0,accept:"image/*",beforeUpload:function(t){return!!t.type.startsWith("image/")||(i.Ay.error(e["content.images.onlyImage"]||"只能上传图片文件"),!1)},action:"/hexopro/api/images/upload",headers:{Authorization:"Bearer ".concat(localStorage.getItem("hexoProToken")||""),"X-Storage-Type":Ke},data:function(){return{folder:X}},fileList:ae,showUploadList:{showRemoveIcon:!1,showPreviewIcon:!1},progress:{strokeWidth:4,showInfo:!1,status:"active"},onChange:function(t){var n=t.file,r=n.status,a=n.response,o=(t.fileList||[]).slice(-30);oe(o),"uploading"===r?x(!0):"done"===r?a&&0===a.code?i.Ay.success(e["content.images.uploadSuccess"]||"上传成功"):i.Ay.error(e["content.images.uploadFailed"]||"上传失败"):"error"===r&&i.Ay.error(e["content.images.uploadFailed"]||"上传失败"),(t.fileList||[]).every((function(e){return"done"===e.status||"error"===e.status}))&&(x(!1),ne(!1),oe([]),setTimeout((function(){return It()}),400))}},r.createElement("p",{className:"ant-upload-drag-icon"},r.createElement(I.A,null)),r.createElement("p",{className:"ant-upload-text"},e["content.images.dragHere"]||"拖拽图片到此处，或点击上传"))))),r.createElement(v.A,{title:e["content.images.createFolder"]||"新建文件夹",open:ie,onOk:Ot,onCancel:function(){le(!1),de("")},okText:e["content.images.ok"]||"确定",cancelText:e["content.images.cancel"]||"取消",width:t?"90%":520},r.createElement(A.A,{value:pe,onChange:function(e){return de(e.target.value)},placeholder:e["content.images.folderName"]||"文件夹名称（支持中文、字母、数字、下划线和短横线）"})),r.createElement(v.A,{title:e["content.images.deleteFolder"]||"删除文件夹",open:ue,onOk:Y(R().mark((function t(){return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.Ay.post("/hexopro/api/images/folder/delete",{folder:X,storageType:Ke,recursive:he});case 3:i.Ay.success(e["content.images.deleteFolderSuccess"]||"删除成功"),me(!1),ye(!1),$(""),D(1),It(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),i.Ay.error(e["content.images.deleteFolderFailed"]||"删除失败");case 14:case"end":return t.stop()}}),t,null,[[0,11]])}))),onCancel:function(){me(!1),ye(!1)},okButtonProps:{danger:!0},okText:e["content.images.ok"]||"确定",cancelText:e["content.images.cancel"]||"取消",width:t?"90%":520,destroyOnClose:!0},r.createElement("div",{style:{marginBottom:12}},r.createElement(Z,null,e["content.images.deleteFolderConfirm"]||"确定删除当前文件夹？",!!X&&" (".concat(X,")"))),r.createElement("div",null,r.createElement("label",{style:{cursor:"pointer"}},r.createElement("input",{type:"checkbox",checked:he,onChange:function(e){return ye(e.target.checked)},style:{marginRight:8}}),e["content.images.deleteFolderRecursive"]||"同时删除文件夹内的所有文件"))),r.createElement(v.A,{title:e["content.images.clearFolder"]||"清空文件夹图片",open:_e,onOk:Y(R().mark((function t(){return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.Ay.post("/hexopro/api/images/folder/clear",{folder:X,storageType:Ke,includeSubfolders:!1});case 3:i.Ay.success(e["content.images.clearFolderSuccess"]||"已清空"),$e(!1),It(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),i.Ay.error(e["content.images.clearFolderFailed"]||"清空失败");case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),onCancel:function(){return $e(!1)},okButtonProps:{danger:!0},okText:e["content.images.ok"]||"确定",cancelText:e["content.images.cancel"]||"取消"},r.createElement(Z,null,e["content.images.clearFolderConfirm"]||"确定清空当前文件夹下的所有图片？")),r.createElement(v.A,{title:e["content.images.renameTitle"]||"重命名图片",open:Ae,onOk:Qt,onCancel:function(){Ee(!1),Ce("")},okText:e["content.images.ok"]||"确定",cancelText:e["content.images.cancel"]||"取消",width:t?"90%":520},r.createElement(A.A,{value:Se,onChange:function(e){return Ce(e.target.value)},placeholder:e["content.images.newName"]||"新名称（支持中文、字母、数字、下划线、短横线和点）"})),r.createElement(v.A,{title:e["content.images.moveTitle"]||"移动图片",open:Be,onOk:Ht,onCancel:function(){return Fe(!1)},okText:e["content.images.ok"]||"确定",cancelText:e["content.images.cancel"]||"取消",width:t?"90%":520},r.createElement(c.A,{style:{width:"100%"},value:Ne,onChange:Ie,placeholder:e["content.images.selectFolder"]||"选择文件夹"},r.createElement(_,{value:""},e["content.images.rootFolder"]||"根目录"),k.folders.filter((function(e){return"trash"!==String(e).toLowerCase()})).map((function(e){return r.createElement(_,{key:e,value:e},e)})))),r.createElement(d.A,{width:0,style:{display:"none"},preview:{visible:He,src:Re,onVisibleChange:function(e){return ze(e)}}}),r.createElement(v.A,{title:e["content.images.cleanupTitle"]||"清理未引用图片",open:tt,onCancel:function(){nt(!1),lt([]),mt([]),Ft(1),Ct(0)},footer:null,width:t?"95%":900,destroyOnClose:!0},r.createElement("div",{style:{display:"grid",gridTemplateColumns:t?"1fr":"1fr 1fr 1fr",gap:12,marginBottom:12}},r.createElement("div",null,r.createElement(Z,{strong:!0},e["content.images.cleanup.folder"]||"目标文件夹"),r.createElement(c.A,{style:{width:"100%",marginTop:6},value:"trash"===X?"":X,onChange:function(e){$(e),lt([]),mt([])}},r.createElement(_,{value:""},e["content.images.rootFolder"]||"根目录"),k.folders.filter((function(e){return"trash"!==String(e).toLowerCase()})).map((function(e){return r.createElement(_,{key:e,value:e},e)})))),r.createElement("div",null,r.createElement(Z,{strong:!0},e["content.images.cleanup.minAgeDays"]||"最小年龄（天）"),r.createElement(A.A,{type:"number",min:0,value:At,onChange:function(e){return Et(Number(e.target.value||0))},style:{marginTop:6}})),r.createElement("div",null,r.createElement(Z,{strong:!0},e["content.images.storageType"]||"图床"),r.createElement(c.A,{style:{width:"100%",marginTop:6},value:Ke,onChange:function(e){qe(e),lt([]),mt([])}},Ue.map((function(e){return r.createElement(_,{key:e,value:e},e)}))))),r.createElement("div",{style:{display:"grid",gridTemplateColumns:t?"1fr":"1fr 1fr",gap:12,marginBottom:12}},r.createElement("label",{style:{display:"flex",alignItems:"center",gap:8}},r.createElement("input",{type:"checkbox",checked:pt,onChange:function(e){return dt(e.target.checked)}}),r.createElement(Z,null,e["content.images.cleanup.recursive"]||"包含子文件夹")),r.createElement("label",{style:{display:"flex",alignItems:"center",gap:8}},r.createElement("input",{type:"checkbox",checked:ht,onChange:function(e){return yt(e.target.checked)}}),r.createElement(Z,null,e["content.images.cleanup.includeDrafts"]||"包含草稿"))),r.createElement("div",{style:{marginBottom:12}},r.createElement(Z,{strong:!0},e["content.images.cleanup.ignore"]||"忽略规则（逗号分隔或JSON数组）"),r.createElement(A.A,{placeholder:e["content.images.cleanup.ignore.placeholder"]||"如：sponsors/*, logo/*, .keep",value:xt,onChange:function(e){return wt(e.target.value)},style:{marginTop:6}})),r.createElement("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:12}},r.createElement(s.Ay,{type:"primary",loading:at,onClick:Y(R().mark((function t(){var n,r,a,o;return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,ot(!0),lt([]),mt([]),t.next=6,O.Ay.get("/hexopro/api/images/unused",{params:{storageType:Ke,folder:X,recursive:pt,includeDrafts:ht,minAgeDays:At,ignorePatterns:xt,page:Bt,pageSize:Nt}});case 6:if(a=t.sent,"trash"!==X){t.next=12;break}return lt([]),Ct(0),i.Ay.warning(e["content.images.cleanup.trashNotAllowed"]||"回收站目录不支持扫描清理"),t.abrupt("return");case 12:o=((null==a||null===(n=a.data)||void 0===n?void 0:n.items)||[]).map((function(e){return G(G({},e),{},{url:"".concat(e.url).concat(String(e.url).includes("?")?"&":"?","_t=").concat(Date.now())})})),lt(o),Ct((null==a||null===(r=a.data)||void 0===r?void 0:r.total)||o.length),i.Ay.success(e["content.images.cleanup.scanSuccess"]||"扫描完成"),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),i.Ay.error(e["content.images.cleanup.scanFailed"]||"扫描失败");case 21:return t.prev=21,ot(!1),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[0,18,21,24]])})))},e["content.images.cleanup.scan"]||"扫描"),it.length>0&&r.createElement(r.Fragment,null,r.createElement(s.Ay,{onClick:function(){return mt(it.map((function(e){return e.key})))}},e["content.images.selectAll"]||"全选"),r.createElement(s.Ay,{onClick:function(){return mt([])}},e["content.images.clearSelection"]||"清空选择")),r.createElement("div",{style:{flex:1}}),it.length>0&&r.createElement(Z,{type:"secondary"},(e["content.images.cleanup.found"]||"发现未引用图片")+": ".concat(St))),r.createElement(u.A,{spinning:at},it.length>0?r.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:12,marginBottom:12}},it.map((function(e){return r.createElement("div",{key:e.key,style:{border:"1px solid #f0f0f0",borderRadius:6,padding:8}},r.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},r.createElement("label",{style:{display:"flex",alignItems:"center",gap:6}},r.createElement("input",{type:"checkbox",checked:ut.includes(e.key),onChange:function(t){var n=t.target.checked;mt((function(t){return n?[].concat(U(t),[e.key]):t.filter((function(t){return t!==e.key}))}))}}),r.createElement(Z,{ellipsis:!0,style:{maxWidth:120}},e.key.split("/").slice(-1)[0])),r.createElement(Z,{type:"secondary",style:{fontSize:12}},zt(e.size))),r.createElement("div",{style:{height:120,display:"flex",alignItems:"center",justifyContent:"center",marginTop:8,overflow:"hidden"}},r.createElement("img",{src:e.url,alt:e.key,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}})),r.createElement("div",{style:{marginTop:6}},r.createElement(Z,{type:"secondary",style:{fontSize:12}},new Date(e.lastModified||"").toLocaleString())))}))):r.createElement(h.A,{description:e["content.images.cleanup.noResult"]||"暂无待清理图片"})),r.createElement("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"}},r.createElement(s.Ay,{onClick:function(){return nt(!1)}},e["content.images.cancel"]||"取消"),r.createElement(s.Ay,{danger:!0,disabled:0===ut.length,onClick:Y(R().mark((function t(){var n,r,a;return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,ot(!0),t.next=4,O.Ay.post("/hexopro/api/images/unused/cleanup",{storageType:Ke,keys:ut,useRecycleBin:!0});case 4:0===(null==(a=t.sent)||null===(n=a.data)||void 0===n?void 0:n.code)||null!=a&&null!==(r=a.data)&&void 0!==r&&r.success?(i.Ay.success(e["content.images.cleanup.trashSuccess"]||"已移动到回收站"),nt(!1),lt([]),mt([]),It()):i.Ay.error(e["content.images.cleanup.failed"]||"清理失败"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),i.Ay.error(e["content.images.cleanup.failed"]||"清理失败");case 11:return t.prev=11,ot(!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})))},e["content.images.cleanup.toTrash"]||"移到回收站"),r.createElement(g.A,{title:e["content.images.cleanup.deleteConfirm"]||"确定要彻底删除所选图片吗？此操作不可恢复",okText:e["content.images.ok"]||"确定",cancelText:e["content.images.cancel"]||"取消",onConfirm:Y(R().mark((function t(){var n,r,a;return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,ot(!0),t.next=4,O.Ay.post("/hexopro/api/images/unused/cleanup",{storageType:Ke,keys:ut,useRecycleBin:!1});case 4:0===(null==(a=t.sent)||null===(n=a.data)||void 0===n?void 0:n.code)||null!=a&&null!==(r=a.data)&&void 0!==r&&r.success?(i.Ay.success(e["content.images.cleanup.deleteSuccess"]||"已删除"),nt(!1),lt([]),mt([]),It()):i.Ay.error(e["content.images.cleanup.failed"]||"清理失败"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),i.Ay.error(e["content.images.cleanup.failed"]||"清理失败");case 11:return t.prev=11,ot(!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})))},r.createElement(s.Ay,{danger:!0,type:"primary",disabled:0===ut.length},e["content.images.cleanup.delete"]||"彻底删除")))))}},81111:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});const r={imageManager:"XFpMzv5YKeFQZavZErvr",header:"Ax5MMgghdOy4lm8IK1um",folderSelector:"NJ0bg1H3n3zunUuxKjLE",imageGrid:"uKp2S6O05RGQq_KHdHnw",imageContainer:"hFcjFCm_7V4wbME1vrEa",selectedCard:"HtkbUic76y5w_8y7UjEQ",empty:"h0gpelgT4hKiNHdDCphG",pagination:"oNF8obCHHDMpdDLbq5aS",uploadForm:"TD0xBV5n_T9XdSGAO2yw",formItem:"BwAasWFHKCC1l2PvyDm8"}}}]);
//# sourceMappingURL=951847f37ceee2.chunk.js.map